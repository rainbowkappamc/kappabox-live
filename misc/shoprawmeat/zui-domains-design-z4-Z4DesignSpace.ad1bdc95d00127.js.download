(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[344,23,69,70,366,404,419,431,461,462],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a(183),r=a(242);function o(e,t=100,a="throttle"){const o=Object(n.useRef)(a),s=Object(n.useRef)();let l;s.current=e,l="debounce"===o.current?Object(i.a)(e,t):"throttle"===o.current?Object(r.a)(e,t):Object(n.useCallback)(()=>{s.current&&s.current()},[!!s.current]),Object(n.useEffect)(()=>{if(s.current&&s.current(),l)return"complete"!==window.document.readyState&&window.addEventListener("load",l),window.addEventListener("resize",l),window.addEventListener("orientationchange",l),()=>{window.removeEventListener("load",l),window.removeEventListener("resize",l),window.removeEventListener("orientationchange",l)}},[l])}},1086:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),i=a.n(n),r=a(119),o=a(242),s=a(143),l=a(10),c=a(384);a(1211);const u=Object(l.a)("SimpleInfiniteScroll"),d=Object(n.forwardRef)((e,t)=>{const a=Object(r.a)(t),l=Object(n.useRef)(),c=Object(n.useRef)(),d=Object(o.a)(()=>{!e.isLoading&&e.hasMore&&e.onLoad()},100);Object(n.useEffect)(()=>{const{bottomMargin:t}=e,n={};"container"===e.scrollableElement&&(n.root=a.current),t&&(n.rootMargin=`0px 0px ${"number"==typeof t?t+"px":t} 0px`),c.current=new IntersectionObserver(e=>{e[0].isIntersecting&&d()},n)},[]),Object(n.useEffect)(()=>(!e.isLoading&&e.hasMore&&c.current.observe(l.current),()=>{c.current.disconnect()}),[e.isLoading,e.hasMore]);const h={};"container"===e.scrollableElement&&(h.overflow="auto",h.WebkitOverflowScrolling="touch");const p={};return e.isLoading||e.hasMore||(p.display="none"),i.a.createElement(s.b,null,i.a.createElement("div",{className:e.className,ref:a,style:h},e.children,i.a.createElement("div",{className:u("&-loading"),ref:l,style:p},e.isLoading&&i.a.createElement(e.loadingComponent,{hasOwnContainer:!0,isShown:!0,shieldColor:"transparent",size:"small",useTransition:!0}))))});d.defaultProps={hasMore:!0,isLoading:!1,loadingComponent:c.b,scrollableElement:"container"}},1089:function(e,t,a){"use strict";a.r(t),a.d(t,"ProductView",(function(){return g}));var n=a(0),i=a.n(n),r=a(254),o=a(6),s=a(10),l=a(7),c=a(8),u=a(14),d=a(19),h=a(97),p=a(1245);a(1396);const m=Object(s.a)("ProductView"),g=Object(n.memo)(({altText:e,className:t,designTimestamp:a,imageRef:s,imageSize:g,isPdpMainView:f,isVizLite:b,itemProp:v,onFullscreenPreviewClick:y,realview:_,realviewUrlOverride:S,showControls:D,templateParamsOverrides:C={},trackRealviewClicks:E})=>{const O=Object(c.e)(),w=Object(u.f)(),j=Object(n.useRef)(),I=Object(p.a)({designTimestamp:a,enabled:"dynamicvideo"===_.media,realview:_,target:j,templateParamOverrides:C}),N=Object(n.useCallback)(()=>{E&&Object(h.p)("ClickedRealviewImage"),y()},[y,E]),k=(()=>{const t=Object(h.k)(_,g,b,C,a,S);if("dynamicvideo"===_.media)return i.a.createElement("div",{className:m("&-dynamicVideoWrapper"),onContextMenu:d.f},O("zi_create_design_loadingTitle_loading"),i.a.createElement("div",{className:m("&-dynamicVideo"),ref:j}));if("video"!==_.media){let a=null;if(f){const n=1080,o=Object(r.f)(t,n),s=(n/g).toFixed(2);a=i.a.createElement("img",{alt:e,className:m("&-image"),draggable:!1,itemProp:v,onContextMenu:d.f,src:t,srcSet:`${t} 1x, ${o} ${s}x`})}else a=i.a.createElement("img",{alt:e,className:m("&-image"),draggable:!1,itemProp:v,onContextMenu:d.f,src:t});return i.a.createElement("div",{className:m("&-imageContainer"),ref:s},a)}if(_.videoId){const e=`${Object(l.a)().videoUrlBase}/${_.videoId}`;return i.a.createElement("video",{autoPlay:!0,className:m("&-staticVideo"),controls:D,loop:!0,muted:!0},i.a.createElement("source",{type:"video/webm",src:e+"_hd.webm"}),i.a.createElement("source",{type:"video/mp4",src:e+"_hd.mp4"}))}if(_.videoParams){const e=Object(h.k)(_,g,b,C,a,void 0,!0);return i.a.createElement("video",{autoPlay:!0,className:m("&-staticVideo"),key:e,loop:!0},i.a.createElement("source",{type:"video/mp4",src:e}))}})(),T=i.a.createElement("div",{className:m("&-outerContainer")},k),[x,z]=Object(n.useState)();return i.a.createElement("div",{className:m("&",{"&--cropAttribution":!_.videoId&&g>1080},t),style:{maxWidth:g+"px"}},f&&y?i.a.createElement("button",{className:m("&-mainRealviewButton"),onClick:N,onMouseMove:e=>{z({top:e.nativeEvent.offsetY,left:e.nativeEvent.offsetX})},onMouseLeave:()=>{z(void 0)}},T,x&&i.a.createElement("img",{className:m("&-mainRealviewButton-cursor"),src:w("WwwAst","z4/icons/expand-cursor.svg"),style:x})):T,I.perfWarning&&i.a.createElement("div",{className:m("&-dynamicVideoPlaybackWarning")},i.a.createElement("div",{className:m("&-dynamicVideoPlaybackWarningTitle")},O("zi_product_Z3_DynamicVideo_WarningTitle")),O("zi_product_Z3_DynamicVideo_WarningDevice"),i.a.createElement("button",{className:m("&-dynamicVideoPlaybackWarningClose"),onClick:I.closePerfWarning},i.a.createElement(o.a,{iconName:o.a.Icon.CloseStamp}))))});t.default=g},1092:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(9),i=a.n(n),r=a(0),o=a.n(r),s=a(18),l=a(137),c=a(8),u=a(93),d=a(87),h=a(830),p=a.n(h);const m=o.a.lazy(()=>a.e(404).then(a.bind(null,1243))),g=Object(r.memo)(({ownerMemberProfile:e,paletteClassName:t,pid:a,profile:n})=>{const h=Object(c.e)(),[g,f]=Object(r.useState)(!1),[b,v]=Object(r.useState)(0),y=Object(r.useRef)(),_="Maker"===n.type?h("zi_store_Maker_Profile_Contact"):h("zi_product_ProductPage_ContactButton");Object(r.useLayoutEffect)(()=>{if(y.current){const e=(e=>{const t=e.getBoundingClientRect();return t.left+t.width/2})(y.current);v(e)}},[_]);const S=e?e.imageUrl:n.imageUrl,D=e?e.name:n.name;return o.a.createElement("div",null,o.a.createElement(u.a,{color:"blueOutline",onClick:()=>f(!0),ref:y,rel:"nofollow",size:"mini"},_),g&&o.a.createElement(l.a,{caretPosition:"top",caretViewportHorzOffset:b,className:i()(p.a.root,t),contentsClassName:p.a.paletteContents,includeCaret:!0,onRequestClose:()=>f(!1)},o.a.createElement(s.a,null,o.a.createElement(o.a.Suspense,{fallback:o.a.createElement(d.a,{isShown:!0,shieldColor:"transparent",hasOwnContainer:!0,size:"small"})},o.a.createElement(m,{memberOwnerId:n.memberOwnerId,name:D,productId:a,profileImageUrl:S,profileType:n.type,storeHandle:n.name})))),!1)})},1101:function(e,t,a){var n=a(61);e.exports=function(e){return n(e)&&e!=+e}},111:function(e,t,a){"use strict";a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return f}));var n=a(15),i=a(2),r=a(57),o=a.n(r),s=a(0),l=a.n(s),c=a(375),u=a(180),d=a(102);const h={buffer:0,direction:"vertical",enabled:!0,persistent:!0};function p(e,t){const a=Object(i.a)({},e);if(t)for(const n in t){const e=t[n];void 0!==e&&(a[n]=e)}return a}const m=e=>{const t="function"==typeof(e=p(h,e)).buffer?()=>e.buffer(window.innerHeight,window.innerWidth):void 0,a=t?t():e.buffer,[n,i]=Object(s.useState)(a);Object(d.a)(t?()=>{i(t())}:void 0,200,"debounce");const[r,o,l]=Object(c.a)({root:e.root,rootMargin:"both"===e.direction?`${n}px ${n}px ${n}px ${n}px`:"horizontal"===e.direction?`0px ${n}px 0px ${n}px`:`${n}px 0px ${n}px 0px`,skip:!e.enabled,triggerOnce:e.persistent});return[r,o,l]},g=l.a.memo((function(e){const{children:t}=e,a=Object(n.a)(e,["children"]),[i,r]=m(a),o=l.a.useRef(),c=Object(s.useCallback)(e=>{o.current=!0,i(e)},[i]);return Object(s.useEffect)(()=>{if(!o.current&&a.enabled){logToServer("useIsInView was invoked, but the ref was not set. View detection will not work. If the isInView is only sometimes needed, you should set the `enabled` option.")}},[]),t({isInView:r,isInViewRef:c})})),f=(e,t)=>{const a=l.a.memo(t=>l.a.createElement(e,Object(i.a)({},t)));return l.a.memo((function(e){const n=Object(u.a)(o()(e,["buffer","direction","persistent","enabled","root"])),r=p(t,e),c=Object(s.useCallback)(({isInView:e,isInViewRef:t})=>l.a.createElement(a,Object(i.a)(Object(i.a)({},n),{},{isInView:e,isInViewRef:t})),[n]);return l.a.createElement(g,Object(i.a)({},r),c)}))}},1112:function(e,t,a){},1119:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(15),i=a(423),r=a.n(i),o=a(0),s=a.n(o),l=a(51),c=a(522),u=a(6),d=a(10),h=a(193),p=a(1411);a(1621);const m=Object(d.a)("MBImageItem"),g=s.a.memo(s.a.forwardRef((e,t)=>{let{isSelectable:a=!0}=e,i=Object(n.a)(e,["isSelectable"]);const d=Object(o.useCallback)(i.onClick?()=>{i.onClick(i.id)}:void 0,[i.onClick,i.id]),g=Object(o.useCallback)(i.onCancelUpload&&i.isUploading?()=>{i.onCancelUpload(i.id)}:void 0,[i.onCancelUpload,i.isUploading,i.id]),f=Object(o.useCallback)(!i.onToggleDetails||i.isUploading||i.isPendingDelete?void 0:()=>{i.onToggleDetails(i.id)},[i.onToggleDetails,i.isUploading,i.isPendingDelete,i.id]),b=Object(o.useCallback)(e=>{i.onSetSelectState(i.id,e)},[i.id,i.onSetSelectState]);const{isPendingDelete:v,isSelected:y,isUploading:_,minSourceHeight:S,minSourceWidth:D,progress:C,sourceHeight:E,sourceWidth:O,thumbnailUrl:w,zString:j}=i,I=O&&(O<D||E<S),N=I||v;return s.a.createElement(p.a,{className:m("&",{"&--disabled":N,"&--selected":a&&y},i.className),height:i.height,imageAlt:i.title,imageSrc:w,infoText:function(){let e;if(i.title){let t=i.width-5;f&&(t-=29);const a=Math.floor(t);if(e=i.title.trim(),e.length>a){const t=a/2;e=`${e.substr(0,t)}...${e.substr(-t)}`}}return e}(),infoTextClassName:m("&-infoText"),isDisabled:N,onCancel:g,onClick:N?void 0:d,onToggleDetails:f,ref:t,style:i.style,tooltip:I?j("zi_myzazzle_MediaBrowser_Image_Too_Small",{image_height:E,image_width:O,min_height:S,min_width:D}):void 0,width:i.width},function(){switch(i.type){case l.a.Video:return s.a.createElement(c.a,{className:m("&-videoIcon")});case l.a.OFM:return s.a.createElement("div",{className:m("&-typeIcon")},s.a.createElement(u.a,{iconName:u.a.Icon.FileStitch}));case l.a.ZPL:return s.a.createElement("div",{className:m("&-typeIcon")},s.a.createElement(u.a,{iconName:u.a.Icon.FileScreenprint}));default:return null}}(),a&&!N&&!_&&s.a.createElement(h.b,{className:m("&-checkbox"),checked:y,stopClickEventPropagation:!0,onChange:b}),_&&s.a.createElement("div",{className:m("&-loadingOverlay")}),null!=C&&s.a.createElement("div",{className:m("&-progressBarWrapper")},s.a.createElement("div",{className:m("&-progressBar"),style:{width:100*r()(C,0,1)+"%"}})))}))},1120:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n),r=a(10),o=a(6),s=a(44);a(1625);const l=Object(r.a)("MBAlert"),c=function(e){return i.a.createElement("div",{className:l("&")},e.children,e.onClose&&i.a.createElement(o.a,{className:l("&-close"),onClick:e.onClose,iconName:s.a.MultiplyLight}))}},1134:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(0),i=a.n(n),r=a(819),o=a(10),s=a(28),l=a(7),c=a(2),u=a(181),d=a(89),h=a(1244),p=a(522),m=a(54),g=a(8);a(1398);const f=Object(o.a)("ViewSelectorItem"),b=i.a.memo(e=>{const t=Object(n.useContext)(m.a),a=Object(g.e)(),{designTimestamp:r,isVizLite:o,realview:s,realviewUrlBase:l,selected:b,showName:v,templateParamsOverrides:y}=e,_=s.videoId||s.videoParams||"dynamicvideo"===s.media,S=Object(u.d)(s,l,Object(c.a)({cacheDefeat:o?void 0:r,max_dim:e.imageSize},y)),D=f("&",`&--${t&&t.theme}Theme`,e.className);return i.a.createElement("div",{className:D},i.a.createElement(h.a,{ariaLabel:a("zi_controls_ProductViewSelector_Aria_Label",{angle:s.title.replace(/\//g," / ")}),className:f("&-container"),classNameActive:f("&--selected"),classNameFocused:f("&--focused"),name:f("&-radioButton"),selected:b,onChecked:()=>{e.handleViewClick(e.realview.id)}},i.a.createElement(d.b,{alt:s.title,baseDim:e.imageSize,baseSrc:S,className:f("&-image"),srcSetMagnifications:[1,1.5],style:{height:e.imageSize+"px",width:e.imageSize+"px"},useSrcSet:!0}),_&&i.a.createElement(p.a,{className:f("&-playButton"),size:p.a.Size.Small}),v&&i.a.createElement("div",{className:f("&-name")},s.title.replace(/\//g," / "))))});a(1397);const v=Object(o.a)("ViewSelector"),y=i.a.memo(({designTimestamp:e,direction:t,filterToProductViews:a=!0,hideAllNames:o,hideDesignTypeNames:c,handleViewClick:u,imageSize:d,isVizLite:h,realviewUrlBase:p,realviews:m,selectedRealviewId:g,showDynamicVideoViews:f=!0,showPreferredViewsOnly:y=!1,templateParamsOverrides:_})=>{const S=Object(s.c)(),[D,C]=Object(n.useState)(!1);Object(n.useEffect)(()=>{Object(l.c)()&&C(!0)},[]);const E=S("Boolean","www","EnableTouchScrollViewSelector",!1),O=S("Boolean","PDP","ExcludeRealviewVideos",!1),w=m.filter(e=>!(a&&"Product"!==e.type||y&&!e.canBePreferred||O&&e.videoParams)),j=w.filter(e=>"dynamicvideo"!==e.media);let I=[];f&&D&&(I=w.filter(e=>"dynamicvideo"===e.media));const N=I.concat(j),k=N.findIndex(e=>e.id===g),T="column"===t;return i.a.createElement("div",{className:v("&",T?"&--column":"&--row")},i.a.createElement(r.a,{arrowPosition:"onContainerEdge",index:k,orientation:T?"vertical":"horizontal",singlePageCenter:!1,useNativeControls:E&&Object(l.a)().isTablet},N.map((t,a)=>{var n;return((t,a=!1)=>{const n=!("dynamicvideo"===t.media||o||c&&"Design"===t.type);return i.a.createElement(b,{className:v("&-item",{"&-item--showDivider":a}),designTimestamp:e,handleViewClick:u,imageSize:d,isVizLite:h,key:t.id,realview:t,realviewUrlBase:p,selected:t.id===g,showName:n,templateParamsOverrides:_})})(t,a===(null===(n=I)||void 0===n?void 0:n.length)-1)})))})},115:function(e,t,a){"use strict";a.d(t,"k",(function(){return l})),a.d(t,"l",(function(){return c})),a.d(t,"m",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"g",(function(){return h})),a.d(t,"h",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"e",(function(){return g})),a.d(t,"c",(function(){return v})),a.d(t,"b",(function(){return y})),a.d(t,"j",(function(){return S})),a.d(t,"a",(function(){return D})),a.d(t,"n",(function(){return C})),a.d(t,"d",(function(){return E}));var n=a(99),i=a.n(n),r=a(0),o=a(27),s=a(13);const l=e=>/^[0-9]+$/g.test(e),c=e=>{const t=e.match(/-/g);return t&&4===t.length},u=e=>e.startsWith("instagram_"),d=Object(o.a)(e=>{var t;return null===(t=e.mediaBrowser)||void 0===t?void 0:t.selectedIds},e=>e&&Object.keys(e).filter(l)),h=Object(o.a)(e=>{var t;return null===(t=e.mediaBrowser)||void 0===t?void 0:t.selectedIds},e=>e&&Object.keys(e).filter(c)),p=Object(o.a)(e=>{var t;return null===(t=e.mediaBrowser)||void 0===t?void 0:t.selectedIds},e=>e&&Object.keys(e).filter(u));function m(e,t){switch(e){case"MyImages":return t("zi_myzazzle_MediaBrowser_MyZazzleImages");case"GoogleDrive":return t("zi_myzazzle_MediaBrowser_GoogleDrive");case"Instagram":return t("zi_share_Social_Instagram");case"Facebook":return t("zi_share_Social_Facebook");case"MobileUpload":return t("zi_myzazzle_MediaBrowser_MyMobilePhone");case"ZazzleImages":return t("zi_myzazzle_MediaBrowser_ZazzleImages",{zazzle:"Zazzle"});default:throw new Error(`No string for '${e}', maybe it is an album name and shouldn't be translated?`)}}function g(e,t,a){switch(e){case"AllImages":switch(a){case"dateUsed":return t("zi_myzazzle_MediaBrowser_RecentImages");default:return t("zi_myzazzle_MediaBrowser_AllImages")}case"AllAlbums":return t("zi_myzazzle_MediaBrowser_MyAlbums");default:throw new Error(`No string for '${e}', maybe it is an album name and shouldn't be translated?`)}}const f=Object(s.h)({}),b=e=>e.entities.images||f,v=e=>e.fileInput.fileUploads||f,y=e=>e.fileInput.fileUploadsProgress||f,_=Object(o.a)(v,y,(e,t)=>{const a=t?Object.values(t):[],n=t=>e[t.uploadID]&&e[t.uploadID].uploadFinishTime||t.uploadStartTime;return a.sort((e,t)=>{const a=n(e),i=n(t);return a>i?-1:a<i?1:0}),a.filter(e=>!e.error&&!e.cancelled)}),S=Object(o.a)(_,e=>e.filter(e=>!e.done)),D=()=>Object(o.a)((e,t)=>t,b,_,v,(e,t,a,n)=>{const r=a.filter(e=>e.done).map(e=>n[e.uploadID].fileGuid);return i()([...r,...e]).map(e=>t[e])}),C=()=>Object(r.useMemo)(D,[]);function E(e){const t={};for(const a of Object.values(e)){(t[a.parentId]=t[a.parentId]||[]).push(a.id)}return t}},1154:function(e,t,a){},1156:function(e,t,a){"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var a=Array.isArray(t)?t:t.split(","),n=e.name||"",i=(e.type||"").toLowerCase(),r=i.replace(/\/.*$/,"");return a.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?n.toLowerCase().endsWith(t):t.endsWith("/*")?r===t.replace(/\/.*$/,""):i===t}))}return!0}},1157:function(e,t,a){},1161:function(e,t,a){},1164:function(e,t,a){var n=a(266),i=a(186);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==n(e)}},1210:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(15),i=a(1164),r=a.n(i),o=a(9),s=a.n(o),l=a(0),c=a.n(l),u=a(102),d=a(8),h=a(16),p=a(29),m=a(859),g=a.n(m);const f=e=>{let{children:t,className:a,onRequestToggleExpanded:i,anchorHref:o,animate:m,onToggleExpanded:f,height:b,hideLessMarkup:v,initialExceedsMaxHeight:y=!0,waitForParentAnimation:_}=e,S=Object(n.a)(e,["children","className","onRequestToggleExpanded","anchorHref","animate","onToggleExpanded","height","hideLessMarkup","initialExceedsMaxHeight","waitForParentAnimation"]);const[D,C]=Object(l.useState)(500),E=Object(l.useRef)(),[O,w]=Object(l.useState)(y),[j,I]=Object(l.useState)(!!S.isExpanded),N=Object(d.e)(),k=S.lessMarkup||"- "+N("zi_common_Less"),T=S.moreMarkup||"+ "+N("zi_common_More");function x(){if(!_){const e=E.current;if(!e)return;m&&C(e.scrollHeight);const t=e.scrollHeight>b;t!==O&&w(t)}}function z(){f&&f(!j),r()(S.isExpanded)&&i?i():I(!j)}Object(l.useEffect)(x,[t]),Object(l.useEffect)(()=>{_||x()},[_]),Object(l.useEffect)(()=>{r()(S.isExpanded)&&I(S.isExpanded)},[S.isExpanded]),Object(u.a)(x);const P=s()(g.a.root,a,j&&g.a.root__expanded),F={};if(b){const e=m?D:"none";F.maxHeight=j?e:b}return c.a.createElement("div",{className:P},c.a.createElement("div",{className:g.a.container},c.a.createElement("div",{className:g.a.content,style:F,ref:E},t),o?c.a.createElement("a",{"aria-hidden":!0,className:g.a.fade,href:o,tabIndex:-1}):O?c.a.createElement("button",{"aria-hidden":!0,className:g.a.fadeButton,onClick:z,tabIndex:-1}):null),O&&(!j||!v)&&function(){const e=j?k:T;return o?c.a.createElement(h.a,{href:o},e):c.a.createElement(p.a,{className:g.a.moreLink,onClick:z},e)}())}},1211:function(e,t,a){},1213:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),i=a.n(n),r=a(29),o=a(6),s=a(10),l=a(8),c=a(92);a(1613);const u=Object(s.a)("SimpleSearchInput"),d=Object(n.memo)(({className:e,defaultValue:t,doSearch:a,placeholder:s,searchWhileTyping:d,size:h="normal"})=>{const[p,m]=Object(n.useState)(!t),[g,f]=Object(n.useState)(t),[b,v]=Object(n.useState)(t),y=Object(l.e)(),_=Object(n.useCallback)(()=>{b!==g&&(a(b),m(!1),f(b))},[g,b]),S=Object(n.useCallback)(()=>{a(""),m(!0),f(""),v("")},[]);Object(n.useEffect)(()=>{d&&_()},[_,d,b]);const D=Object(n.useCallback)(e=>{13===e.keyCode&&_()},[_]);return i.a.createElement("div",{className:u("&","&--"+h,e)},i.a.createElement(c.a,{className:u("&-input"),inputClassName:u("&-inputElement"),onBlur:!d&&_,onChange:v,onKeyDown:!d&&D,placeholder:s,value:b}),i.a.createElement(r.a,{className:u("&-zazzicon")},p?i.a.createElement(o.a,{key:"search",iconName:o.a.Icon.Search,onClick:_,title:y("zi_common_Application_Search")}):i.a.createElement(o.a,{key:"clear",iconName:o.a.Icon.CloseStamp,onClick:S,title:y("zi_common_Application_Clear")})))})},1214:function(e,t,a){},1215:function(e,t,a){"use strict";a.d(t,"b",(function(){return C})),a.d(t,"a",(function(){return w}));var n=a(15),i=a(2),r=a(57),o=a.n(r),s=a(0),l=a.n(s),c=a(5),u=a(41),d=a.n(u),h=a(675),p=a(111),m=a(16),g=a(29),f=a(6),b=a(10),v=a(28),y=a(59),_=a(7),S=a(89);a(1615);const D=Object(b.a)("ItemCell"),C=D("&"),E=(e,t)=>{const a=d.a.parse(e,!0);return a.query=Object(i.a)(Object(i.a)({},a.query),t),d.a.format(o()(a,["search"]))},O=e=>{let{imageSize:t=140,renderRealview:a=!0,showTitle:r=!0,useSeoTitle:o=!0}=e,c=Object(n.a)(e,["imageSize","renderRealview","showTitle","useSeoTitle"]);const u=Object(v.c)(),[d,b]=Object(p.b)(),C=(()=>{switch(c.item.cellType){case"ProductType":return c.transferDesignId?(e=>E(e.isCustomizingSourceProduct?Object(_.a)().dynamicRealviewUrlBase:Object(_.a)().staticRealviewUrlBase,Object(i.a)({cacheDefeat:e.cacheDefeat,culture:Object(_.a)().culture,id:e.transferDesignId,max_dim:512,topdt:e.item.id,transferMode:"featurizedlite"},e.templateOverrides)))(c):(e=>E(e.isCustomizingSourceProduct?Object(_.a)().dynamicRealviewUrlBase:Object(_.a)().staticRealviewUrlBase,Object(i.a)(Object(i.a)({culture:Object(_.a)().culture,max_dim:512,pdt:e.item.id},e.attributeOverrides),e.templateOverrides)))(c);case"Product":case"Store":return c.item.imageUrl;default:return null}})(),O=(()=>{switch(c.item.cellType){case"ProductType":return c.transferDesignId?(e=>E(`https://${Object(_.a)().hostname}/pd/spp/pt-${e.item.id}`,Object(i.a)({tdid:e.transferDesignId},e.templateOverrides)))(c):(e=>E(`https://${Object(_.a)().hostname}/pd/spp/pt-${e.item.id}`,Object(i.a)(Object(i.a)({},e.attributeOverrides),e.templateOverrides)))(c);case"Product":case"Store":return c.item.linkUrl;default:return null}})(),w=c.allowRichSnippets&&"Store"!==c.item.cellType&&c.item.price&&c.showPrice,j=()=>{c.onClickProductWithIndex&&null!==c.index&&c.onClickProductWithIndex(c.item.id,c.index),c.onClickProduct&&c.onClickProduct(c.item.id)};c.item&&(window.productDataCache=window.productDataCache||{},window.productDataCache[c.item.id]={id:c.item.id});const I=!C&&"Store"===c.item.cellType,N=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:D("&-imageSizer")},I?l.a.createElement("div",{className:D("&-itemImage","&-storeIcon")},l.a.createElement(f.a,{iconName:f.a.Icon.StoreOpen})):a?l.a.createElement(S.c,{alt:o?c.item.titleSeo:c.item.title,baseDim:t,baseSrc:C,className:D("&-itemImage"),imageRef:c.imageRef,maxDim:u("Int32","ImageSourceSet","Product.CollectionItem.ItemCell.MaxDim",400),onLoad:c.onImgLoad,useSrcSet:!0}):null),l.a.createElement("div",{className:D("&-itemTitle"),itemProp:w?"name":null},o?c.item.titleSeo:c.item.title),"Store"!==c.item.cellType&&c.item.price&&c.showPrice&&l.a.createElement("div",{className:D("&-price"),itemProp:w?"offers":void 0,itemScope:!!w||void 0,itemType:w?"http://schema.org/Offer":void 0},w&&[l.a.createElement("meta",{key:"priceCurrency",itemProp:"priceCurrency",content:Object(_.a)().currency}),l.a.createElement("meta",{key:"price",itemProp:"price",content:c.item.price.toString()})],Object(y.a)(c.item.price)),"Store"!==c.item.cellType&&c.item.promoLabel&&c.showPromoLabel&&l.a.createElement("div",{className:D("&-promoLabel"),dangerouslySetInnerHTML:{__html:c.item.promoLabel}})),k=Object(s.useCallback)(e=>{var t,a;null===(t=(a=window).observeProducts)||void 0===t||t.call(a,e),d(e)},[d]);return Object(s.useEffect)(()=>{var e;b&&(null===(e=c.onIsInView)||void 0===e||e.call(c,c.item))},[b]),l.a.createElement(l.a.Fragment,null,"Product"===c.item.cellType&&c.showLikeButton&&l.a.createElement("div",{className:D("&-itemLike")},l.a.createElement(h.a,{className:D("&-itemLikeIcon"),displayUi:h.b.IconsOnly,imageUrl:C,pid:c.item.id,showAddToCollections:!1,title:c.item.title,useOpenHeartForLikeIcon:!0})),c.asButton?l.a.createElement(g.a,{className:D("&","GA-MaybeProduct",{"&--leftAlign":c.leftAlign,"&--showTitle":r,"&--store":"Store"===c.item.cellType}),"data-itemid":c.item.id,elementRef:k,itemScope:w,itemProp:w?"isSimilarTo":null,itemType:w?"http://schema.org/Product":null,key:c.item.id,onClick:j},N):l.a.createElement(m.a,{className:D("&","GA-MaybeProduct",{"&--leftAlign":c.leftAlign,"&--showTitle":r,"&--store":"Store"===c.item.cellType}),"data-itemid":c.item.id,ref:k,href:O,itemScope:w,itemProp:w?"isSimilarTo":null,itemType:w?"http://schema.org/Product":null,key:c.item.id,onClick:j,rel:"nofollow",target:c.newTab?"_blank":null,tabIndex:c.disableTabbing?-1:null},N))},w=l.a.memo(O,(e,t)=>Object(c.c)(e,t)||t.isInDesignSpace)},1217:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),i=a.n(n),r=a(10),o=a(7),s=a(14),l=a(13),c=a(6);a(1617);const u=Object(r.a)("ParticipantAvatar"),d=({className:e,participant:t,size:a=50})=>{let n,r=!1;if(t.profileImageUrl){const e={[s.a.RlvMaxDim]:2*a};Object(o.a)().isWebPSupported&&(e[s.a.RlvImageType]="webp");const r=Object(l.c)(t.profileImageUrl,e);n=i.a.createElement("img",{alt:t.displayName,className:u("&-image"),src:r})}else if(t.displayName){const e=t.displayName.split(" ").map(e=>e[0]).join("").substr(0,2).toUpperCase();n=i.a.createElement("div",null,e),r=!0}else n=i.a.createElement(c.a,{className:u("&-icon"),iconName:c.a.Icon.AccountWIZ});return i.a.createElement("div",{className:u("&","&--size"+a,r&&"&--text",e)},n)}},1243:function(e,t,a){"use strict";a.r(t),a.d(t,"MessageUserContent",(function(){return v}));var n=a(9),i=a.n(n),r=a(0),o=a.n(r),s=a(284),l=a(431),c=a(16),u=a(6),d=a(8),h=a(14),p=a(613),m=a(30),g=a(151),f=a(2458),b=a.n(f);const v=({memberOwnerId:e,name:t,productId:a,profileImageUrl:n,profileType:f,storeHandle:v})=>{const y=Object(h.f)(),_=Object(d.e)(),S=Object(r.useRef)();Object(r.useEffect)(()=>{if(S.current){return Object(s.a)(S.current)}},[]);const D=t&&v&&t!==v?_("zi_myzazzle_UserOfStore",{User:t,Store:v}):t||v;return o.a.createElement("div",{ref:S,className:i()(!1)},o.a.createElement(l.a,{className:i()(b.a.messageButton,"Maker"===f&&b.a.messageButton__isMaker),href:y("WwwPag","chat",{prf:e,pd:a}),onClick:()=>Object(m.h)(g.a.ClickOnMessageUser()),target:"_blank"},o.a.createElement(p.a,{className:b.a.buttonThumbnail,imageUrl:n,renderImage:!0,size:p.b.Regular,style:"circle",type:f}),o.a.createElement("div",{className:b.a.buttonTextWrapper},o.a.createElement("div",{className:b.a.buttonTitle},D),o.a.createElement("div",{className:b.a.messageMakerText},_("zi_myzazzle_MessageDialog_CreatorBlurb")))),o.a.createElement(l.a,{className:i()(b.a.messageButton),href:y("WwwPag","about/ask"),onClick:()=>Object(m.h)(g.a.ClickOnMessageCustomerCare()),target:"_blank"},o.a.createElement("div",{className:b.a.zazzleLogoContainer},o.a.createElement(u.a,{iconName:u.a.Icon.Logo})),o.a.createElement("div",{className:b.a.buttonTextWrapper},o.a.createElement("div",{className:b.a.buttonTitle},_("zi_myzazzle_MessageDialog_ZazzleCustomerCare")),o.a.createElement("div",{className:b.a.messageMakerText},_("zi_myzazzle_MessageDialog_ZazzleCustomerCareBlurb")))),o.a.createElement("div",{className:i()(b.a.messageMakerText,b.a.helpText)},_("zi_myzazzle_MessageDialog_VisitOurHelpCenter"),o.a.createElement(c.a,{href:y("GetFAQAnsUrl","chat"),target:"_blank"},o.a.createElement("div",{className:b.a.helpCenter},_("zi_search_Feedback_Help_HelpCenter")))))};t.default=v},1244:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9),i=a.n(n),r=a(0),o=a.n(r),s=a(1260),l=a.n(s);const c=e=>{const{ariaLabel:t,className:a,classNameActive:n,classNameFocused:s,name:c,selected:u,onChecked:d}=e,[h,p]=Object(r.useState)(!1),m=Object(r.useCallback)(()=>{p(!1)},[]),g=Object(r.useCallback)(()=>{p(!0)},[]),f=i()(a,u&&n,h&&s);return o.a.createElement("label",{className:f},o.a.createElement("input",{type:"radio",className:l.a.radio,name:c,checked:u,"aria-label":t,onChange:d,onBlur:m,onFocus:g}),e.children)}},1245:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(109),i=a.n(n),r=a(0),o=a(102),s=a(7),l=a(13);function c(e){const{designTimestamp:t,enabled:n,realview:c,target:u,templateParamOverrides:d}=e,[h,p]=Object(r.useState)(null),m=Object(r.useCallback)(()=>{p(!1)},[]),g=Object(r.useCallback)(()=>{p(null)},[]);Object(r.useEffect)(()=>{n||g()},[n]);const f=Object(r.useRef)(),b=Object(r.useMemo)(()=>({inputs:c.dynamicVideoInputs.filter(e=>"playervar"!==e.type).map(e=>{if("area"===e.type){const a=Object(l.c)(e.value,{r:t},d),n=i()(e);return n.value=a,n}return e}),realview_id:c.id}),[t,c,d]),v=Object(r.useCallback)(e=>{e<25&&null===h&&p(!0)},[h]),y=Object(r.useRef)(v);Object(r.useEffect)(()=>{y.current=v},[v]),Object(r.useEffect)(()=>{var e;if(n)if(f.current){let e;try{var t;e=null===(t=f.current)||void 0===t?void 0:t.getNode()}catch(i){}n&&f.current&&(!u.current.hasChildNodes()&&e&&u.current.appendChild(e),f.current.update(b,()=>{f.current.playFromStart()}))}else Promise.all([a.e(470),a.e(471)]).then(a.t.bind(null,1736,7)).then(e=>{if(f.current)return;const t={dynamicURL:Object(s.a)().rlvServerUrl,staticURL:Object(s.a)().rlvServerUrl},a=u.current.getBoundingClientRect().width;f.current=new e.PlayerOne(b,a,t,{onReady:()=>{u.current.appendChild(f.current.getNode()),f.current.setLoop(!0),f.current.play()},performanceMonitor:e=>{y.current(e)}})});else null===(e=f.current)||void 0===e||e.stop()},[n,b]),Object(o.a)(()=>{if(n&&f.current){const e=u.current.getBoundingClientRect().width;f.current.resize(e)}}),Object(r.useEffect)(()=>()=>{if(f.current){try{f.current.dispose()}catch(e){logToServer(e)}f.current=void 0}},[]);return Object(r.useMemo)(()=>({closePerfWarning:m,perfWarning:h,playerOneRef:f,resetPerfWarning:g}),[h])}},1260:function(e,t,a){e.exports={radio:"CustomRadioButton_radio"}},1262:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var n=a(2),i=a(9),r=a.n(i),o=a(0),s=a.n(o),l=a(5),c=a(29),u=a(6),d=a(28),h=a(46),p=a(7),m=a(14),g=a(129),f=a(249),b=a(37),v=a(804),y=a.n(v);const _=s.a.lazy(()=>a.e(403).then(a.bind(null,1737)));function S(){return Object(h.c)(h.a.LIVE_AD_DISMISSED_PRODUCT_TYPES)||{}}const D=Object(o.memo)(({className:e,dismissable:t,origin:a,productStateKey:i})=>{const l=Object(d.c)(),{closeDialog:g,openDialog:b}=Object(f.a)(),v=C(i),{designId:D,isCollab:E,liveWillCloseAt:O,productType:w}=v,[j,I]=Object(o.useState)(v.liveIsOpen),N=Object(m.f)(),[k,T]=Object(o.useState)();Object(o.useEffect)(()=>{T(S())},[]);const x=Object(o.useCallback)(()=>{Object(h.e)(h.a.LIVE_AD_DISMISSED_PRODUCT_TYPES,Object(n.a)(Object(n.a)({},S()),{},{[w]:!0})),T(e=>Object(n.a)(Object(n.a)({},e),{},{[w]:!0}))},[w]);Object(o.useEffect)(()=>{if(!j)return;const e=setInterval(()=>{(new Date).getTime()>=O&&I(!1)},3e4);return()=>{clearInterval(e)}},[j]);const z=Object(o.useCallback)(()=>{const e=s.a.createElement(_,{designId:D,origin:a,onRequestClose:()=>{g(e)}});b(e,"LiveAd.dialog")},[D,a]);return l("Boolean","LIVE","Ad.Enabled",!1)&&j&&l("String","LIVE","Ad.ProductTypes","").split(",").includes(w)&&!E&&(!t||k&&!k[w])&&!Object(p.a)().isDisneyIframe?s.a.createElement("div",{className:r()(y.a.root,e)},s.a.createElement("img",{"aria-hidden":!0,className:y.a.image,src:N("WwwAst","z6_rlv/02_pages/pdp_ad/designer-3.png")}),s.a.createElement("div",{className:y.a.text},s.a.createElement("div",{className:y.a.title},l("String","LIVE","Ad.Inline.Title","")),s.a.createElement("div",null,l("String","LIVE","Ad.Inline.Body","")," ",s.a.createElement(c.a,{onClick:z},l("String","LIVE","Ad.Inline.LinkText","")))),t&&s.a.createElement(c.a,{className:y.a.dismiss},s.a.createElement(u.b,{className:y.a.dismissIcon,name:"MultiplyLight",onClick:x}))):null}),C=e=>Object(l.e)(t=>{const a=Object(b.d)(t,e),n=!!t.page.collabId||!!Object(g.d)(t,Object(g.l)(a.stateKey)),{liveIsOpen:i,liveWillCloseAt:r}=t.page;return{designId:a.designId,isCollab:n,liveIsOpen:i,liveWillCloseAt:r,productType:a.productType}},l.c)},1311:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(3),r=a(57),o=a.n(r),s=a(0),l=a.n(s),c=a(5),u=a(6),d=a(10),h=a(8),p=a(810),m=a(80);a(1608);const g=Object(d.a)("AlertDialog");class f extends l.a.Component{render(){const{includeTitleIcon:e,mode:t}=this.props;let a=null;if(e)switch(t){case p.a.Warning:a=l.a.createElement(u.a,{iconName:u.a.Icon.WarningStamp,className:g("&-titleIcon","&-warningIcon")});break;default:a=l.a.createElement(u.a,{iconName:u.a.Icon.Info,className:g("&-titleIcon","&-infoIcon")})}let i=this.props.title;a&&(i=l.a.createElement("div",null,a,this.props.title));const r=o()(this.props,"includeTitleIcon","mode");return l.a.createElement(m.default,Object(n.a)(Object(n.a)({},r),{},{className:g("&",this.props.className,{"&--isInfo":t===p.a.Info,"&--isWarning":t===p.a.Warning}),title:i}),this.props.children)}}Object(i.a)(f,"defaultProps",{includeTitleIcon:!0,mode:p.a.Warning});const b=Object(c.b)((e,t)=>{const a=Object(h.a)(e);let n;return t.mode===p.a.Warning&&(n=a("zi_common_pleaseConfirm")),{title:t.title||n}})(f);t.default=b},1312:function(e,t,a){},1313:function(e,t,a){},1314:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=a(19);function r(e,t){return Object(n.useMemo)(()=>Object(i.e)(e,t),[])}},1322:function(e,t,a){"use strict";a.r(t),a.d(t,"Z4DesignSpace",(function(){return ss}));var n=a(15),i=a(9),r=a.n(i),o=a(0),s=a.n(o),l=a(5),c=a(13),u=a(143),d=a(34),h=a(18),p=a(108),m=a(1727),g=a(1786),f=a(102),b=a(284),v=a(7),y=a(8),_=a(129),S=a(1351),D=a(12),C=a(25),E=a(1353),O=a(1676),w=a(1791),j=a(3046),I=a.n(j);const N=s.a.memo(e=>{const{canClose:t,canToggle:a,designStateKey:n,style:i}=e,r=Object(l.d)(),{chatState:c,chatWindowStatus:u}=k(e.designStateKey),d=c&&!c.hasJoinedSdkRoom,h=Object(S.a)(),p=Object(o.useCallback)(()=>{"minimized"===u?r(Object(D.Jc)(n,{chatWindowStatus:"maximized"})):"maximized"===u&&r(Object(D.Jc)(n,{chatWindowStatus:"minimized"}))},[u]),m=Object(E.a)(Object(_.f)(n));return Object(o.useEffect)(()=>{h.room&&(r(Object(D.Kc)(e.designStateKey,{chatWindowStatus:"maximized"})),m("video"))},[h.room]),s.a.createElement("div",{className:I.a.root},!d&&s.a.createElement(w.a,{chatStateKey:Object(_.f)(n),focusInputOnMount:!0,isExpanded:a?"maximized"===u:null,onToggleExpanded:a?p:void 0,style:i}),d&&s.a.createElement(O.a,{isExpanded:a?"maximized"===u:null,onToggleExpanded:a?p:void 0}))}),k=e=>Object(l.e)(t=>{const a=Object(C.b)(t,e),{settings:n}=a;return{chatState:Object(C.b)(t,Object(_.f)(e)),chatWindowStatus:n.chatWindowStatus}},c.q);var T=a(1730),x=a(180),z=a(4),P=a(391),F=a(2);const M={aspectRatio:{ideal:400/232},facingMode:{ideal:"user"}};const A=({children:e,collabStateKey:t,designStateKey:n})=>{const i=Object(l.e)(e=>{var a;return null===(a=Object(_.d)(e,t))||void 0===a?void 0:a.collabId}),r=Object(l.d)(),c=Object(y.e)(),u=Object(o.useRef)(!1),[d,h]=Object(o.useState)(!1),p=function(e){const[t,n]=Object(o.useState)(),[i,r]=Object(o.useState)(),[s,l]=Object(o.useState)(!1),[c,u]=Object(o.useState)(!1),[d,h]=Object(o.useState)();Object(o.useEffect)(()=>{e&&a.e(75).then(a.t.bind(null,3602,7)).then(h)},[e]);const p=Object(o.useCallback)(async e=>{const t={};if(e&&(t.deviceId={exact:e}),!d)return;const a=await d.createLocalAudioTrack(t);return n(a),a},[d]),m=Object(o.useCallback)(async e=>{const t=Object(F.a)(Object(F.a)({},M),{},{name:"camera-"+Date.now()},e);if(d)try{const e=await d.createLocalVideoTrack(t);return r(e),e}catch(a){return}},[d]),g=Object(o.useCallback)(()=>{i&&(i.stop(),r(void 0))},[i]),f=Object(o.useCallback)(async()=>{u(!0);try{const e=await d.createLocalTracks({video:Object(F.a)(Object(F.a)({},M),{},{name:"camera-"+Date.now()}),audio:!0}),t=e.find(e=>"video"===e.kind),a=e.find(e=>"audio"===e.kind);t&&r(t),a&&n(a)}catch(e){console.log("useLocalTracks!",e)}l(!0),u(!1)},[d]);Object(o.useEffect)(()=>{d&&f()},[d]);const b=[t,i].filter(e=>void 0!==e);return{createLocalTracks:f,hasAcquiredLocalTracks:s,localTracks:b,getLocalVideoTrack:m,getLocalAudioTrack:p,isAcquiringLocalTracks:c,removeLocalVideoTrack:g}}(d),m=Object(o.useCallback)(()=>{h(!0)},[]),[g,f]=Object(o.useState)(!1),b=Object(o.useCallback)(()=>{f(!1)},[]),S=Object(o.useCallback)(()=>{f(!0)},[]),C=Object(o.useCallback)(async()=>{h(!0);const e=await Object(z.e)("/svc/z3/collaboration/GetTwilioToken",{collabId:i},{includeClientParam:!1});return!!e.success&&(await E(e.data.token),r(P.b.updateState(t,{isInVideoRoom:!0})),!0)},[i]),{connect:E,room:O}=function(e,t){const[n,i]=Object(o.useState)(),[r,s]=Object(o.useState)(!1),l=Object(o.useRef)([]);return Object(o.useEffect)(()=>{l.current=e},[e]),{room:n,isConnecting:r,connect:Object(o.useCallback)(async e=>{s(!0);const n=await a.e(75).then(a.t.bind(null,3602,7));try{const a=await n.connect(e,{dominantSpeaker:!0,name:t,tracks:[]});i(a);const r=()=>a.disconnect();a.once("disconnected",()=>{setTimeout(()=>i(void 0)),window.removeEventListener("beforeunload",r),Object(v.a)().isMobileDevice&&window.removeEventListener("pagehide",r)}),l.current.forEach(e=>a.localParticipant.publishTrack(e,{priority:"video"===e.kind?"low":"standard"})),s(!1),window.addEventListener("beforeunload",r),Object(v.a)().isMobileDevice&&window.addEventListener("pagehide",r)}catch(r){0,s(!1)}},[t])}}(p.localTracks,i),w=Object(o.useRef)(null),j=Object(o.useCallback)(()=>{O&&(u.current=!0,p.localTracks.forEach(e=>{"audio"===e.kind?e.disable():p.removeLocalVideoTrack()}),O.disconnect(),r(P.b.updateState(t,{hasVideoChat:!1,isInVideoRoom:!1})),w.current=setTimeout(()=>{u.current=!1},5e3))},[p,O]);Object(o.useEffect)(()=>()=>{null!==w.current&&clearTimeout(w.current)},[]),Object(o.useEffect)(()=>{if(!O)return;const e=()=>{u.current||r(D.yb.enqueueToast(n,{onClick:()=>{C()},value:c("zi_create_Collab_Video_TimedOut")}))};return O.on("disconnected",e),()=>{O.off("disconnected",e)}},[O]);const I=Object(x.a)({closeSettingsDialog:b,collabStateKey:t,disconnect:j,getLocalDevices:m,initialize:C,isShowingSettingsDialog:g,localTracks:p,openSettingsDialog:S,room:O});return s.a.createElement(T.a.Provider,{value:I},e)};var R=a(1311),B=a(810),L=a(1262),U=a(132),K=a(32),G=a(30),H=a(730),Z=a(85),W=a(2459),V=a(6),q=a(10),$=a(14),X=a(93),Y=a(2371);a(3111);const Q=Object(q.a)("Z4DSCollabCreatedDialog"),J=({collabId:e,emails:t,isPublic:a,onOk:n,shortLink:i})=>{const r=Object(y.e)(),o=Object($.f)(),l=null!=i?i:o.collabPag(e);return s.a.createElement(Y.a,{className:Q("&"),enableCloseClick:!1,includeHeader:!1,showButtonBar:!1},s.a.createElement("div",{className:Q("&-header")},"ðŸŽ‰",s.a.createElement("br",null),r("zi_create_Collab_InvitePalette_InvitationSent")),s.a.createElement("div",{className:Q("&-body")},a?s.a.createElement("div",{className:Q("&-publicLink")},s.a.createElement("div",null,r("zi_create_Collab_HereIsLinkToCollab")),s.a.createElement(W.a,{className:Q("&-textToClipboard"),value:l})):s.a.createElement("ul",{className:Q("&-emails")},t.map(e=>s.a.createElement("li",{className:Q("&-emailRow"),key:e},s.a.createElement("div",{className:Q("&-email")},e),s.a.createElement(V.a,{className:Q("&-check"),iconName:V.a.Icon.Checkmark})))),s.a.createElement(X.a,{className:Q("&-go"),color:"green",href:l,size:"medium"},r("zi_controls_Star_ApiIntro_GetStartedButton"))))};var ee=a(1217),te=a(490),ae=a(323),ne=a(3109),ie=a.n(ne),re=a(2637),oe=a(2383);const se=e=>{const t=Object(_.g)(e.designStateKey),a=Object(l.e)(e=>Object(_.d)(e,t)),n=Object(o.useContext)(oe.a),i=Object(l.d)();return s.a.createElement(re.a,{className:e.className,autoFocus:e.autoFocus,onSubmit:r=>{i(a?P.b.addCollaboratorsViaEmail(t,{collabId:a.collabId,emails:r}):P.b.createNew(e.designStateKey,{emails:r,origin:"create"===n.flavor?"CREATE":"MARKETPLACE_PRODUCT"})),e.onSubmitSuccess&&e.onSubmitSuccess()}})},le=e=>{const t=Object(_.g)(e.designStateKey),a=Object(l.e)(e=>Object(_.d)(e,t)),n=Object(l.d)(),i=Object(y.e)();Object(ae.m)(e.designStateKey);const o=a.members.map(e=>e.participant).filter(e=>e.memberId!==a.myId).sort((e,t)=>Object(c.d)(e.displayName,t.displayName)),u=a.pendingEmails.sort();return s.a.createElement(Y.a,{className:r()(ie.a.root,e.className),onRequestClose:()=>{n(Object(D.Kc)(e.designStateKey,{isShowingCollabManagementDialog:!1}))},showButtonBar:!1,title:i("zi_create_Collab_InvitePalette_ManageCollaborators")},a.isPublic?s.a.createElement("div",null,s.a.createElement("h2",null,i("zi_create_Collab_InviteCollaborators")),s.a.createElement("div",null,i("zi_create_Collab_HereIsLinkToCollab")),s.a.createElement(W.a,{className:ie.a.textToClipboard,value:a.shortLink})):s.a.createElement("div",{className:ie.a.managePeople},s.a.createElement("div",{className:ie.a.collaborators},s.a.createElement("h2",null,i("zi_create_Collab_YourCollaborators")),s.a.createElement("div",{className:ie.a.collaboratorsBox},o.length+u.length>0?s.a.createElement("ul",{className:ie.a.members},o.map(e=>s.a.createElement("li",{className:ie.a.member,key:e.memberId},s.a.createElement(ee.a,{participant:e,size:30}),s.a.createElement("div",{className:ie.a.member_name},e.displayName),s.a.createElement("button",{className:ie.a.member_remove,onClick:()=>{n(P.b.removeCollaborator(t,{memberId:e.memberId}))}},s.a.createElement(V.a,{className:ie.a.removeIcon,iconName:V.a.Icon.CloseStroke})))),u.map(e=>s.a.createElement("li",{className:ie.a.member,key:e},e," (",i("zi_common_OrderStatus_Pending"),")"))):s.a.createElement("div",{className:ie.a.noMembers},s.a.createElement("div",{className:ie.a.noMembers_line1},i("zi_create_Collab_YouHaveNoCollaborators")),s.a.createElement("div",{className:ie.a.noMembers_line2},i("zi_create_Collab_GoInviteCollaborators")),s.a.createElement("div",{className:ie.a.noMembers_email},"âœ‰ï¸")))),s.a.createElement("div",{className:ie.a.invite},s.a.createElement("h2",null,i("zi_create_Collab_InviteCollaborators")),s.a.createElement("div",null,i("zi_create_Collab_EnterEmailAddressesToSendInvites")),s.a.createElement("br",null),s.a.createElement(se,{className:ie.a.inviteForm,designStateKey:e.designStateKey}))),s.a.createElement("div",{className:ie.a.hr}),s.a.createElement("div",null,s.a.createElement("h2",null,i("zi_create_Collab_Permission")),s.a.createElement(te.b,{onChange:t=>{n(P.b.setPrivacy(e.designStateKey,"public"===t))},options:[{value:"private",className:ie.a.permissionOption,display:s.a.createElement("div",{className:ie.a.permissionOptionDisplay},s.a.createElement("div",null,i("zi_create_Collab_Permission_Private_Title")),s.a.createElement("div",null,i("zi_create_Collab_Permission_Private_Description")))},{value:"public",className:ie.a.permissionOption,display:s.a.createElement("div",{className:ie.a.permissionOptionDisplay},s.a.createElement("div",null,i("zi_create_Collab_Permission_Public_Title")),s.a.createElement("div",null,i("zi_create_Collab_Permission_Public_Description")))}],value:a.isPublic?"public":"private"})))};var ce=a(86),ue=a(37),de=a(3114),he=a.n(de);const pe=Object(o.memo)(({designStateKey:e})=>{const{collabDateCreated:t,designId:a,designer:n,isDigital:i,jobDuration:o}=me(e),l=Object(y.e)(),u=Object($.f)(),d=(new Date).getTime()>t.getTime()+60*o*1e3,h=l(d?"zi_create_Z4_Live_TimeLimitReached":"zi_create_Z4_Live_SessionHasEnded"),p=l(d?"zi_create_Z4_Live_SessionTimedOutDescription":"zi_create_Z4_Live_SessionEndedDescription",{designer:n.name}),m=u("WwwPag","pd/spp",{dz:a}),g=Object(c.c)(Object(v.a)().staticRealviewGetImageBase,{id:n.profile_image,max_dim:224}),f=u("WwwPag","create/designtool",{dz:a});return s.a.createElement(Y.a,{includeHeader:!1,showButtonBar:!1},s.a.createElement("div",{className:he.a.content},s.a.createElement("h1",{className:he.a.title},h),s.a.createElement("img",{alt:n.name,className:he.a.designerImage,src:g}),s.a.createElement("div",{className:he.a.designerName},n.name),s.a.createElement("div",null,s.a.createElement(V.b,{className:he.a.locationIcon,name:"Location"})," ",n.location),s.a.createElement("p",{className:he.a.copy},p),s.a.createElement("div",{className:he.a.buttons},i?s.a.createElement(X.a,{className:he.a.button,color:"blue",href:f,size:"fluid"},l("zi_create_Z4_Live_EditThisDesign")):s.a.createElement(X.a,{className:r()(he.a.button,he.a.a2c),color:"orange",href:m,size:"fluid"},l("zi_create_Z4_Live_A2CAndCheckout")))))}),me=e=>Object(l.e)(t=>{const a=Object(C.b)(t,e),n=Object(ue.d)(t,a.productStateKey),i=Object(_.d)(t,Object(_.g)(e)),r=Object(ce.a)(t,Object(_.h)(e));return{collabDateCreated:i.dateCreated,designId:a.design.id,designer:r.designer,isDigital:n.isDigital,jobDuration:r.type.duration_minutes}},c.q);var ge=a(3035),fe=a(274),be=a(44),ve=a(54),ye=a(38),_e=a.n(ye),Se=a(16),De=a(1210),Ce=a(384),Ee=a(709),Oe=a(1388),we=(a(3054),a(80)),je=a(1215),Ie=a(1628);a(3055);const Ne=Object(q.a)("DesignTransferDialog"),ke=e=>{const{designId:t,items:a,onClose:n}=e,i=Object(y.e)();return s.a.createElement(we.Dialog,{className:Ne("&"),title:i("zi_product_Page_TransferHeader"),onRequestClose:n,showButtonBar:!1},s.a.createElement("div",{className:Ne("&-subheader")},i("zi_product_Page_TransferHeader_MakeEngine")),s.a.createElement("div",{className:Ne("&-container")},a.map((e,a)=>"Product"===e.cellType||"ProductType"===e.cellType?s.a.createElement("div",{key:a,className:Ne("&-item")},s.a.createElement(je.a,{imageSize:125,item:e,newTab:!0,transferDesignId:t})):"Placeholder"===e.cellType?s.a.createElement(Ie.a,{key:e.key,newTab:!0,onClick:null,placeholder:e,showTitle:!0,useSeoTitle:!0}):void 0)))};var Te=a(97);const xe=Object(q.a)("DesignTransferImgGrid"),ze=e=>{const{designId:t,isCustomizing:a,pid:n,productType:i,templates:r}=e,[l,u]=Object(o.useState)([]),[d,h]=Object(o.useState)(!1),p=Object($.f)(),m=Object(y.e)();return Object(o.useEffect)(()=>{n&&Object(z.c)("/svc/z3/relatedproducts/get",{isTransfer:!0,pd:n,pdt:i,pg:1,ps:999}).then(e=>{if(e.data.pageData.numResults>0){const t=e.data.pageData.items[1];t.push(t.shift()),u(t)}})},[n]),s.a.createElement(s.a.Fragment,null,l.length>0&&s.a.createElement("div",{className:xe("&-designTransferDiv"),onClick:()=>h(!0)},s.a.createElement("div",{className:xe("&-transferImgs")},l.slice(0,4).map((e,a)=>{return e&&s.a.createElement("img",{className:xe("&-dtImg"),src:(n=e,Object(c.c)(Object(v.a)().staticRealviewUrlBase,{culture:Object(v.a)().culture,id:t,max_dim:67,square_it:"fill",topdt:n.id,transferMode:"featurizedlite"})),key:a});var n})),s.a.createElement("div",null,m("zi_create_SeeItOnXProducts",{number:l.length-1}))),d&&_e.a.createPortal(s.a.createElement(ke,{designId:t,onClose:()=>{h(!1)},items:l.map(e=>"ProductType"===e.relatedItemType?Object(F.a)({cellType:"ProductType",title:e.imageTitle,titleSeo:e.imageTitle},e):"Placeholder"===e.relatedItemType?{cellType:"Placeholder",imageUrl:e.imageUrl,key:e.id,linkUrl:Object(Te.j)(t,r,a,p),template:e.template,text:e.text,title:e.title,titleSeo:e.titleSeo}:void 0)}),document.body))};a(3056);const Pe=Object(q.a)("Z4DSCreditsRelatedProducts"),Fe=e=>{const{imageSize:t,items:a,disableLink:n,onItemClick:i}=e;return s.a.createElement("div",{className:Pe("&")},a.map((e,a)=>{if("Product"===e.cellType||"ProductType"===e.cellType)return s.a.createElement("div",{key:a,className:Pe("&-item"),onClick:()=>{i&&i(e.id)}},s.a.createElement(je.a,{asButton:n,imageSize:t,item:e,newTab:!0,showTitle:!0,useSeoTitle:!0}))}))},Me=Object(q.a)("Z4DSCreditsRelatedProductsHOC"),Ae=e=>{const[t,a]=Object(o.useState)([]),[n,i]=Object(o.useState)({title:"",url:""});return Object(o.useEffect)(()=>{e.pid&&("Ideaboard"!==e.basedOn?Object(z.c)("/svc/z3/relatedproducts/get",{pd:e.pid,basedOn:e.basedOn,pg:1,ps:999}).then(e=>{e.data.pageData.numResults>0&&a(e.data.pageData.items[1].map(t=>Object(F.a)(Object(F.a)({},e.data.entities.products[t.id]),{},{cellType:t.relatedItemType})))}):Object(z.c)("/svc/z3/suggestedideaboardproducts/get",{pd:e.pid,pg:1,ideaboardNum:1,ps:999}).then(e=>{if(e.data.pageData.numResults>0){const t=e.data.entities.products,n=Object.keys(t).length>0?Object.values(t).map(e=>Object(F.a)({cellType:"Product"},e)):[];a(n);const r=e.data.entities.ideaBoards[e.data.pageData.boardId];i({title:r.title,url:r.url})}}))},[e.pid]),s.a.createElement(s.a.Fragment,null,0!==t.length&&e.titleContent,"Ideaboard"===e.basedOn&&s.a.createElement(Se.a,{className:Me("&-xSellLink"),href:n.url,target:"_blank"},n.title),s.a.createElement(Fe,{disableLink:e.disableLink,imageSize:100,items:t,onItemClick:e.onItemClick}))};var Re=a(2801);a(3052);const Be=Object(q.a)("Z4DSContentPanelCreditsArtistCard"),Le=s.a.lazy(()=>Promise.all([a.e(21),a.e(66)]).then(a.bind(null,3613))),Ue={theme:"marketplace"},Ke=e=>{const{designStateKey:t,isTheOnlyCard:a,hideClose:n,isActive:i,memberId:r,onFollow:c,productIds:d,sectionScrollTop:p,setActiveMemberId:m}=e,g=Object(y.e)(),f=Object($.f)(),b=Object(l.d)(),[v,_]=Object(o.useState)(a),[S,C]=Object(o.useState)({show:!1,pid:""}),[E,O]=Object(o.useState)({inPosition:a,showCard:a}),[w,j]=Object(o.useState)({badge:"",designerDescription:"",designerId:"",designerName:"",designerUrl:"",designerYearJoined:0,isPartner:!1,loaded:!1,location:"",products:[],profileImg:"",storeDescription:"",storeId:"",storeImg:"",storeIsFollowing:!1,storeLink:"",storeName:"",storeUrl:""}),{followingInfo:I}=Ge();Object(o.useEffect)(()=>{if(d[0]){w.loaded&&j(Object(F.a)(Object(F.a)({},w),{},{loaded:!1}));const e={pd:d[0]};Object(z.c)("/svc/z3/product/getProductLite",Object(ue.e)({productModelParams:e})).then(e=>{if(e.success){const t=e.data.product,a=e.data.entities.profiles[t.storeId],n=e.data.entities.profiles[t.designerId];N(t,a,n,e.data.entities.followingInfoStore.isFollowing)}})}},[d[0]]);const N=(e,t,a,n)=>{const i=[];a.city&&i.push(a.city),a.state&&i.push(a.state),a.country&&i.push(a.country);const r=[];r.push(Object(F.a)(Object(F.a)({},e),{},{imgSrc:Object(ae.e)(e.designId,e.productType,{max_dim:250,square_it:"fit"})}));let o=Object(F.a)(Object(F.a)({},w),{},{badge:a.badge,designerDescription:a.description,designerId:a.memberId,designerName:a.name,designerUrl:a.link,designerYearJoined:a.yearJoined,loaded:!0,location:a.showLocation?i.join(", "):"",products:r,profileImg:a.imageUrl});t&&(o=Object(F.a)(Object(F.a)({},o),{},{isPartner:t.isPartner,storeDescription:t.description,storeId:t.storeId,storeImg:t.imageUrl,storeIsFollowing:n,storeLink:t.link,storeName:t.name,storeUrl:t.linkUrl||t.link})),j(o)};Object(o.useEffect)(()=>{if(i&&w.loaded&&v)if(d.length>w.products.length){const e=d.map(e=>{if(e){const t={pd:e};return Object(z.c)("/svc/z3/product/getProductLite",Object(ue.e)({productModelParams:t}))}});Promise.all(e).then(e=>{const t=e.map(e=>{if(e.success){const t=e.data.product;return Object(F.a)(Object(F.a)({},e.data.product),{},{imgSrc:Object(ae.e)(t.designId,t.productType,{max_dim:250,square_it:"fit"})})}});t.length>0&&j(Object(F.a)(Object(F.a)({},w),{},{products:t.filter(e=>!!e)}))})}else d.length<w.products.length&&j(Object(F.a)(Object(F.a)({},w),{},{products:w.products.filter(e=>d.includes(e.id))}))},[i,d.length,w.loaded,v]),Object(o.useEffect)(()=>{i&&O({inPosition:!0,showCard:!0}),i||O({inPosition:!1,showCard:!0})},[i]),Object(o.useEffect)(()=>{v&&w&&I[w.storeId]&&w.storeIsFollowing!==I[w.storeId].isFollowing&&j(Object(F.a)(Object(F.a)({},w),{},{storeIsFollowing:I[w.storeId].isFollowing}))},[I[w.storeId]&&I[w.storeId].isFollowing,v]);const k=Object(o.useCallback)(a=>{a.productType.startsWith("tool_")?b(Object(D.Fb)(t,a.id,!0)):b(D.vb.selectDesignTemplate(e.designStateKey,{designId:a.designId}))},[t]),T=w.products[0],x=w.isPartner||T&&T.isVizLite,P=T&&(T.productType.startsWith("digital_")||T.productType.startsWith("tool_")),M=x?w.storeImg:w.profileImg;return s.a.createElement(h.a,null,s.a.createElement(ve.a.Provider,{value:Ue},T&&!a&&s.a.createElement("div",{className:Be("&"),onClick:()=>{m(r)},style:{backgroundImage:`url('${T.imgSrc}')`}},s.a.createElement("div",{className:Be("&-lightGrayOverlay")}),s.a.createElement("div",{className:Be("&-cardInfo")},M?s.a.createElement("img",{className:Be("&-artistPic"),src:M,alt:x?w.storeName:w.designerName}):s.a.createElement("div",{className:Be("&-artistPic")},s.a.createElement(V.a,{className:Be({"&-storeIcon":x}),iconName:x?be.a.StoreOpen:be.a.Account})),s.a.createElement("div",{className:Be("&-artistInfo")},s.a.createElement("div",{className:Be("&-artistName")},x?w.storeName:w.designerName),w.location&&s.a.createElement("div",{className:Be("&-artistLocation")},s.a.createElement(V.a,{iconName:be.a.Location}),w.location)))),(i||E.showCard)&&s.a.createElement(u.b,null,s.a.createElement("div",{className:Be("&-bigCard",{"&-inPosition":E.inPosition,"&-isPartner":x}),style:{top:p},onTransitionEnd:()=>{_(!0),i||O({inPosition:!1,showCard:!1})}},s.a.createElement("div",{className:Be("&-bigCardTopContent")},T&&s.a.createElement("div",{className:Be("&-bigCardBgImg"),style:{backgroundImage:`url('${T.imgSrc}')`}}),s.a.createElement("div",{className:Be("&-grayOverlay")}),!n&&s.a.createElement(V.a,{iconName:be.a.MobileClose,className:Be("&-close"),onClick:()=>{m(null)}}),T&&(x?s.a.createElement("div",{className:Be("&-storeDiv")},s.a.createElement(Se.a,{href:w.storeUrl,target:"_blank",className:Be("&-noShrink")},w.storeImg?s.a.createElement("img",{className:Be("&-storeImg"),src:w.storeImg,alt:w.storeName}):s.a.createElement(V.a,{className:Be("&-storeIcon"),iconName:V.a.Icon.StoreOpen})),s.a.createElement("div",{className:Be("&-storeInfo")},s.a.createElement(Ee.a,{badge:w.badge,badgeShadeType:Ee.b.LIGHT,zUrl:f}),w.storeName,s.a.createElement("div",{className:Be("&-storeButtons")},s.a.createElement(X.a,{className:Be("&-contact"),color:"blue",href:f("WwwPag","about/ask"),rel:"nofollow",size:"mini",target:"_blank"},g("zi_product_ProductPage_ContactButton")),s.a.createElement(X.a,{className:Be("&-follow",{"&-following":w.storeIsFollowing}),color:w.storeIsFollowing?"blueOutline":"blue",onClick:()=>c(w.storeId,!w.storeIsFollowing),size:"mini"},w.storeIsFollowing?s.a.createElement("div",null,s.a.createElement(V.a,{iconName:V.a.Icon.Check}),g("zi_store_Profile_Following")):s.a.createElement("div",null,g("zi_store_Profile_Follow")))))):s.a.createElement(Re.a,{badge:w.badge,designerId:w.designerId,designerName:w.designerName,designerUrl:w.designerUrl,location:w.location,productId:T.id,profileImg:w.profileImg}))),s.a.createElement("div",{className:Be("&-bigCardContent")},T?s.a.createElement("section",null,x?w.storeDescription&&s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",null,g("zi_create_AboutThisStore")),s.a.createElement(De.a,{animate:!0,height:130,waitForParentAnimation:!v},w.storeDescription)):s.a.createElement(De.a,{animate:!0,height:140,waitForParentAnimation:!v},s.a.createElement("div",{className:Be("&-story")},s.a.createElement("h1",{className:Be("&-meetDesigner")},w.storeName?s.a.createElement(s.a.Fragment,null,g("zi_create_AboutTheDesignerFor")," ",s.a.createElement(Se.a,{href:w.storeLink,target:"_blank"},w.storeName)):g("zi_product_aboutDesigner_SentenceCasing")),w.storeId&&s.a.createElement("div",{className:Be("&-storeDiv")},s.a.createElement(Se.a,{href:w.storeUrl,target:"_blank"},w.storeImg?s.a.createElement("img",{className:Be("&-storeImg"),src:w.storeImg,alt:w.storeName}):s.a.createElement(V.a,{className:Be("&-storeIcon"),iconName:V.a.Icon.StoreOpen})),s.a.createElement(X.a,{className:Be("&-follow",{"&-following":w.storeIsFollowing}),color:w.storeIsFollowing?"blueOutline":"blue",onClick:()=>c(w.storeId,!w.storeIsFollowing),size:"mini"},w.storeIsFollowing?s.a.createElement("div",null,s.a.createElement(V.a,{iconName:V.a.Icon.Check}),g("zi_store_Profile_Following")):s.a.createElement("div",null,g("zi_store_Profile_Follow")))),s.a.createElement("div",{className:Be("&-description")},w.designerDescription||g("zi_create_DesigningSince",{year:w.designerYearJoined}))))):s.a.createElement(Oe.a,{isShown:!0,hasOwnContainer:!0}),w.products.map(e=>s.a.createElement("section",{key:e.id},s.a.createElement("h1",null,g("zi_create_AboutThisDesign")),s.a.createElement("div",{className:Be("&-productTitle")},e.title),s.a.createElement("div",{className:Be("&-designImgContainer")},s.a.createElement("img",{className:Be("&-designPic"),src:e.imgSrc,alt:e.title}),e.allowDesignTransfer&&v&&s.a.createElement(ze,{designId:e.designId,isCustomizing:!1,pid:e.id,productType:e.productType,templates:[]})),s.a.createElement("div",{className:Be("&-designImgDetails")},s.a.createElement(De.a,{animate:!0,height:40,waitForParentAnimation:!v},s.a.createElement("div",{className:Be("&-description")},e.description))))),T&&d.length>w.products.length&&s.a.createElement("div",{className:Be("&-loadingDiv")},s.a.createElement(Oe.a,{isShown:!0,hasOwnContainer:!0,shieldColor:"transparent"})),T&&P&&v&&s.a.createElement("section",null,s.a.createElement(Ae,{pid:T.id,basedOn:"Seller",titleContent:s.a.createElement("h1",null,g("zi_create_ExploreArtistGallery")),onItemClick:e=>C({show:!0,pid:e}),disableLink:!0})),T&&!P&&v&&s.a.createElement(s.a.Fragment,null,s.a.createElement("section",null,s.a.createElement(Ae,{pid:T.id,basedOn:"Ideaboard",titleContent:s.a.createElement("h1",null,g("zi_create_OtherProductsCollection"))})),s.a.createElement("section",null,s.a.createElement(Ae,{pid:T.id,basedOn:"Seller",titleContent:s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:Be("&-xSellHeader")},g("zi_create_OtherProductsStore")),s.a.createElement(Se.a,{className:Be("&-xSellLink"),href:w.storeUrl,target:"_blank"},w.storeName))})))))),S.show&&_e.a.createPortal(s.a.createElement(s.a.Suspense,{fallback:s.a.createElement(Ce.b,{isShown:!0})},s.a.createElement(Le,{pid:S.pid,onAddItem:k,onRequestClose:()=>{C({show:!1,pid:""})},designStateKey:t})),document.body)))},Ge=()=>Object(l.e)(e=>({followingInfo:e.entities.followingInfoStore}),c.q);a(2408),a(3051);const He=Object(q.a)("Z4DSContentPanelCredits"),Ze=e=>{const{designStateKey:t,onFollow:a}=e,[n,i]=Object(o.useState)(null),r=Object(y.e)(),l=Object(o.useRef)(null),c=Object(o.useContext)(oe.a),{sourcesByMembers:d}=Object(ae.g)(t),p=l.current?l.current.scrollTop:0,m=Object.keys(d).reverse(),g=Object.values(d).reverse();return 1===g.length&&n!==m[0]&&i(m[0]),!d&&c.isStandalone&&e.closeAndSwitchToLayers(),Object(o.useEffect)(()=>{0===Object.keys(d).length&&c.isStandalone&&e.closeAndSwitchToLayers()},[Object.keys(d).length]),s.a.createElement(u.b,null,s.a.createElement("section",{ref:l,className:He("Z4DSContentPanelBase","&"),style:{overflow:n?"hidden":"auto"}},s.a.createElement(h.a,null,s.a.createElement("h1",null,r("zi_create_IncludesArtworkBy")),g.map((e,r)=>s.a.createElement(Ke,{designStateKey:t,isTheOnlyCard:1===g.length,hideClose:1===g.length,isActive:n===m[r],memberId:m[r],key:m[r],onFollow:a,productIds:e,sectionScrollTop:p,setActiveMemberId:i})))))};var We=a(1749),Ve=a(3048),qe=a.n(Ve);const $e=Object(q.a)("Z4DSContentPanelAttributes"),Xe=s.a.memo(e=>{const t=Object(y.e)(),a=Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey);return{product:Object(ue.d)(t,a.productStateKey)}},l.c);return s.a.createElement("div",{className:$e("Z4DSContentPanelBase",qe.a.root)},s.a.createElement("h2",{className:$e(qe.a.title)},t("zi_product_aboutProduct")),s.a.createElement(We.a,{forceExpanded:!0,includeProfileCard:!1,product:a.product,realviewLayout:"vertical"}))});var Ye=a(40),Qe=a(120),Je=a(181),et=a(28),tt=a(2782);const at=e=>{const t=Object(y.e)(),{colorInfo:a,processName:n}=Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey),n=Object(ue.d)(t,a.productStateKey),i=a.design.activeArea,r=Object(Te.c)(n.areaGroupsInfo,i).process.name;return{colorInfo:a.pickerData.fontColorsMap[r],processName:r}},l.c),{swatches:i,recentSwatches:r}=Object(o.useMemo)(()=>{let t=null,n=null;return a&&(t=a.recentSwatches,n=e.swatchFilter?e.swatchFilter(a.swatches):a.swatches,e.allowTransparent||(n=n.filter(e=>6===e.hexCode.length),t=t.filter(e=>6===e.hexCode.length))),{recentSwatches:t,swatches:n}},[e.allowTransparent,e.swatchFilter,a]),c=Object(l.d)(),u=Object(o.useCallback)((t,a)=>{c(Object(D.Db)(e.designStateKey,t,n,"Font",a))},[n]),d=Object(F.a)(Object(F.a)({mode:e.isBackgroundTab?tt.a.BackgroundTab:tt.a.DefaultZ4},e),{},{addRecentColor:u,recentSwatches:r,showAdvancedOption:!!a&&a.allowCustomColor,swatches:i,zString:t});return s.a.createElement(tt.b,Object(F.a)({},d))};var nt=a(35),it=a(1086),rt=a(2642),ot=a(2783),st=a(2646);a(3050);const lt=s.a.lazy(()=>Promise.all([a.e(21),a.e(66)]).then(a.bind(null,3613))),ct={maxLength:150},ut=Object(q.a)("Z4DSContentPanelSearchBase"),dt=s.a.memo(e=>{let{designStateKey:t,enableDetails:a=!1}=e,i=Object(n.a)(e,["designStateKey","enableDetails"]);const r=Object(et.c)(),l=Object(y.e)(),{addDepartmentFilter:c,departmentName:u,isRootSearch:d,nextPage:h,onSearch:p,removeDepartmentFilter:m,searchState:g,setTentativeQuery:f,tentativeQuery:b}=Object(rt.a)(t,i.type,i.searchParams),[v,_]=Object(o.useState)(null),S=[],D={gridLayout:i.gridLayout,onItemClick:i.onItemClick,padThumbnails:i.padThumbnails,realviewParams:i.realviewParams,showInfoText:i.showInfoText,targetRowHeight:i.targetRowHeight};if(a&&(D.onShowDetails=_),d&&g.departmentGroups){const e=r("String","Z4","ElementLineDepartment",void 0);g.departmentGroups.forEach(t=>{S.push(s.a.createElement(ot.a,Object(F.a)(Object(F.a)({key:t.departmentId},D),{},{departmentId:t.departmentId,headerTitle:t.name,onHeaderClick:c,products:t.products,rowLimit:t.departmentId===e?void 0:1,targetRowHeightTolerance:t.departmentId===e?.5:.3,targetRowHeight:i.targetRowHeight})))})}if(g.results.length>0){let e;!g.noResultsType&&d&&(e=l("zi_create_Z4_DesignSpace_Search_MostPopular",{tabName:i.title})),S.push(s.a.createElement(ot.a,Object(F.a)(Object(F.a)({key:"results"},D),{},{headerTitle:e,products:g.results})))}let C,E;if(g.noResultsType&&(C=s.a.createElement("div",{className:ut("&-noResults")},s.a.createElement("p",{className:ut("&-noResultsMessage")},s.a.createElement("span",{className:ut("&-noResultsFoundFor")},l("zi_create_Z4_DesignSpace_Search_NoResultsFoundFor")),s.a.createElement("br",null),'"',g.qs,'"'),"bestGuess"===g.noResultsType?l("zi_search_ShowingResultsFor",{term:s.a.createElement("span",{key:"0",className:ut("&-bestGuessTerm")},g.bestGuessTerm)}):l("zi_create_Z4_DesignSpace_Search_NoResultsMessage",{tabName:i.title.toLowerCase()}))),v){const e=()=>_(null);E=i.detailsContent?i.detailsContent(v,e):s.a.createElement(lt,{product:v,onAddItem:i.onItemClick,onRequestClose:e,designStateKey:t})}const O=i.topContent&&d;return s.a.createElement("section",{className:ut("Z4DSContentPanelBase","&",i.className)},s.a.createElement(st.a,{className:ut("&-searchInput"),departmentId:g.dp,doSearch:p,inputProps:ct,onChange:f,placeholder:l("zi_mk_csn_SearchDepartment",{department:u||i.searchInputPlaceholder||i.title}),type:i.type,value:b}),g.dp&&s.a.createElement("div",{className:ut("&-filters")},s.a.createElement("div",{className:ut("&-filterBy")},l("zi_myzazzle_ResultsMyImages_FilterBy")),s.a.createElement(X.a,{color:"hyperBlue",onClick:m,size:"mini"},u,s.a.createElement(V.a,{className:ut("&-removeFilter"),iconName:be.a.Multiply}))),O&&i.showTopContentWhenScrolling&&s.a.createElement("div",{className:ut("&-topContentPinned")},i.topContent),s.a.createElement(it.a,{key:`${g.qs}|${g.dp}`,bottomMargin:300,className:ut("&-scroller"),hasMore:g.pg<g.lastPageNum,isLoading:g.isLoading,loadingComponent:Oe.a,onLoad:h},O&&!i.showTopContentWhenScrolling&&s.a.createElement("div",{className:ut("&-topContentUnpinned")},i.topContent),C,s.a.createElement("div",{className:ut("&-grids")},S)),_e.a.createPortal(s.a.createElement(s.a.Suspense,{fallback:s.a.createElement(Ce.b,{isShown:!0})},E),document.body))});a(3049);const ht={[$.a.RlvViewType]:"content"},pt=Object(q.a)("Z4DSContentPanelBackground"),mt=s.a.lazy(()=>Promise.all([a.e(21),a.e(66)]).then(a.bind(null,3613))),gt=s.a.memo(e=>{const t=Object(y.e)(),a=Object(et.c)(),[n,i]=Object(o.useState)(!1),r=ft(e),l=r&&r.bgLayer&&r.bgLayer.childnames.length>0&&r.objects.length>0,c=r&&r.areaFill&&"00ffffff"!==r.areaFill,{onAddImageBg:u,onChooseItem:d,onClearBg:h,onColorChange:p,onShowMediaBrowser:m}=bt(e),g=s.a.createElement(s.a.Fragment,null,(l||c)&&s.a.createElement("div",{className:pt("&-currentBg")},t("zi_create_currentBackground"),s.a.createElement("div",{className:pt("&-buttonDiv")},l&&s.a.createElement("button",{className:pt("&-currentImg"),onClick:h,style:{backgroundImage:`url(${r.bgImgSrc})`}},s.a.createElement("div",{className:pt("&-removeDiv")},t("zi_create_RemoveImageShort")),r.bgSourceProduct&&s.a.createElement("div",{className:pt("&-detailsButton"),onClick:e=>{e.preventDefault(),e.stopPropagation(),i(!0)}})),c&&s.a.createElement("button",{className:pt("&-currentColor"),onClick:()=>{p("00ffffff")},style:{backgroundColor:"#"+r.areaFill}},s.a.createElement("div",{className:pt("&-removeDiv")},t("zi_create_RemoveFill"))))),!Object(v.a)().isDisneyIframe&&s.a.createElement(X.a,{className:pt("&-upload"),color:"hyperBlue",onClick:()=>{m({maxFiles:1,onDone:e=>{e.length&&u(e,l)},submitButtonContent:t("zi_create_setAsBackground"),view:"MyImages"}),Object(G.h)(H.a.OpenedMediaBrowser("images"))},size:"mini"},t("zi_create_uploadBackgroundImage")),s.a.createElement(at,{allowTransparent:!0,designStateKey:e.designStateKey,eyeDropperClipEleRect:e.eyeDropperClipEleRect,eyeDropperDesignStateKey:e.designStateKey,eyeDropperImgSrc:r.eyeDropperImgSrc,eyeDropperOnActiveChange:e.eyeDropperActiveOnChange,eyeDropperPositionRect:e.canvasRect,isBackgroundTab:!0,leftAlignSwatches:!0,numColumns:7,onChange:p,value:r.areaFill}));return!r.isPartnerStore&&a("Boolean","Z4","EnableBackgroundsSearch",!1)?s.a.createElement(s.a.Fragment,null,s.a.createElement(dt,{designStateKey:e.designStateKey,enableDetails:!0,gridLayout:"3col",onItemClick:d,realviewParams:ht,title:t("zi_create_Z4_DesignSpace_Backgrounds"),topContent:g,type:"background"}),n&&_e.a.createPortal(s.a.createElement(s.a.Suspense,{fallback:s.a.createElement(Ce.b,{isShown:!0})},s.a.createElement(mt,{pid:r.bgSourceProduct.id,onRequestClose:()=>{i(!1)},designStateKey:e.designStateKey})),document.body)):s.a.createElement("div",{className:pt("&","Z4DSContentPanelBase"),style:{paddingTop:16}},g)}),ft=e=>Object(l.e)(t=>{var a;const n=Object(C.b)(t,e.designStateKey),i=Object(C.b)(t,n.productStateKey),r=Object(ue.d)(t,n.productStateKey);let o="";if(n&&i&&e.canvasRect){const t=Object(Je.b)(i.realviews,n.design.activeView);o=Object(Je.d)(t,Object(v.a)().dynamicRealviewUrlBase,{ah:0,area_texture_layout:"square",areacolor:"false",cacheDefeat:Object(Te.i)(n,i.isSavedDesign),hide:"bleed,safe,visible,visibleMask,bleed_bg",image_type:"png",max_dim:e.canvasRect.width,rvtype:"pre"})}const s=n.design.activeArea,l=n.design.areas[s],c=l.layers.find(e=>"Bg"===e.name);let u=null,d=[];c&&(d=Object(Qe.e)(n.design,c.childnames),u=d.length>0?Object(Qe.g)(n.design,d[0]):null);const h=(l.fill?l.fill.fillcolor:null)||"00ffffff";let p="";if(c&&c.childnames.length>0&&n&&i){const e=Object(Je.b)(i.realviews,n.design.activeView);p=Object(Je.d)(e,Object(v.a)().dynamicRealviewUrlBase,{areacolor:"false",cacheDefeat:Object(Te.i)(n,i.isSavedDesign),csa:!0,hide:"bleed,safe,visible,visibleMask,bleed_bg",image_type:"png",layer:"Bg",max_dim:150,rvtype:"pre"})}return{areaFill:h,bgImgSrc:p,bgLayer:c,bgSourceProduct:u,eyeDropperImgSrc:o,isPartnerStore:null===(a=t.entities.profiles[r.rootStoreId])||void 0===a?void 0:a.isPartner,objects:d}},l.c),bt=e=>{const t=Object(l.d)();return Object(o.useMemo)(()=>({onAddImageBg:(a,n)=>{t(Object(D.Ab)(e.designStateKey,a,n)),Object(ae.o)("AddBackgroundObject")},onChooseItem:a=>{t(Object(D.Gb)(e.designStateKey,a.id,!0)),Object(ae.o)("AddBackgroundObject")},onClearBg:()=>{t(Object(D.Mb)(e.designStateKey))},onColorChange:a=>{t(Object(D.lc)(e.designStateKey,{fillcolor:a})),Object(G.h)(H.a.ChangedBackgroundColor()),Object(ae.o)("AddBackgroundObject")},onShowMediaBrowser:Object(Ye.b)(nt.b.showMediaBrowserDialog,t)}),[e.designStateKey])};var vt=a(2480);a(3057);const yt=Object(q.a)("Z4DSContentPanelElements"),_t=s.a.memo(({designStateKey:e})=>{const t=Object(o.useContext)(oe.a),a=Object(et.c)(),n=Object(l.d)(),i=Object(y.e)(),r=Object(o.useCallback)(t=>{n(Object(D.Fb)(e,t.id,!0)),Object(ae.o)("AddElement")},[]),c=Object(o.useCallback)(t=>{n(Object(D.Eb)(e,t)),Object(G.h)(H.a.AddedShape()),Object(ae.o)("AddElement")},[]),u=Object(o.useCallback)(()=>{n(Object(D.Kc)(e,{isAddingQRCode:!0})),Object(G.h)(H.a.AddedQRCode()),Object(ae.o)("AddElement")},[]),d=Object(l.e)(t=>{const a=Object(Z.e)(t,e);return Object(ue.d)(t,a.productStateKey).noQRCode}),h=s.a.createElement(s.a.Fragment,null,s.a.createElement(vt.a,{title:i("zi_create_Z4_DesignSpace_ConfigurableShapes")}),s.a.createElement("div",{className:yt("&-primitiveGrid")},s.a.createElement("button",{className:yt("&-primitive"),onClick:()=>c("square")},s.a.createElement("svg",{viewBox:"0 0 100 100"},s.a.createElement("polygon",{points:"0 0, 100 0, 100 100, 0 100"}))),s.a.createElement("button",{className:yt("&-primitive"),onClick:()=>c("squareRC")},s.a.createElement("svg",{viewBox:"0 0 100 100"},s.a.createElement("path",{d:"M10,0 h80 a10,10 0 0 1 10,10 v80 a10,10 0 0 1 -10,10 h-80 a10,10 0 0 1 -10,-10 v-80 a10,10 0 0 1 10,-10 z"}))),s.a.createElement("button",{className:yt("&-primitive"),onClick:()=>c("circle")},s.a.createElement("svg",{viewBox:"0 0 100 100"},s.a.createElement("circle",{cx:"50",cy:"50",r:"50"}))),s.a.createElement("button",{className:yt("&-primitive"),onClick:()=>c("tri")},s.a.createElement("svg",{viewBox:"0 0 100 100"},s.a.createElement("polygon",{points:"0 100, 50 0, 100 100"}))),s.a.createElement("button",{className:yt("&-primitive","&-line"),onClick:()=>c("lineH")},s.a.createElement("svg",{viewBox:"0 0 300 50"},s.a.createElement("line",{x1:"0",y1:"25",x2:"300",y2:"25"})))),!d&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:yt("&-spacer")}),s.a.createElement(vt.a,{title:i("zi_create_MAX_Print_QRCode")}),s.a.createElement("div",{className:yt("&-qrCodeGrid")},s.a.createElement("div",null,s.a.createElement(V.a,{iconName:be.a.QRCodeLarge})),s.a.createElement("div",{className:yt("&-qrCode")},s.a.createElement("div",null,i("zi_create_AddQRCodeDescription")),s.a.createElement("div",null,s.a.createElement(X.a,{color:"hyperBlue",onClick:u,size:"mini"},i("zi_create_AddQRCode"))))))),p="marketplace"===t.flavor,m=!Object(l.e)(t=>{var a;const n=Object(Z.e)(t,e),i=Object(ue.d)(t,n.productStateKey);return null===(a=t.entities.profiles[i.rootStoreId])||void 0===a?void 0:a.isPartner})&&a("Boolean","Z4","EnableElementsSearch",!1)&&(!p||a("Boolean","Z4","ShowDesignerContentInMarketplaceElements",!1)),g=Object(o.useMemo)(()=>({mkpl:p}),[p]);return m?s.a.createElement(dt,{className:yt("&"),designStateKey:e,enableDetails:!0,gridLayout:"justified",onItemClick:r,padThumbnails:!0,searchParams:g,targetRowHeight:100,title:i("zi_create_Z4_DesignSpace_Elements"),topContent:h,type:"element"}):s.a.createElement("div",{className:yt("&","Z4DSContentPanelBase"),style:{paddingTop:16}},h)});a(3059);const St=Object(q.a)("Z4DSContentPanelUnsupportedProcess"),Dt=s.a.memo(()=>{const e=Object(y.e)();return s.a.createElement(u.b,null,s.a.createElement("section",{className:St("Z4DSContentPanelBase","&")},s.a.createElement("div",{className:St("&-content")},s.a.createElement(V.a,{className:St("&-icon"),iconName:be.a.Robot}),e("zi_create_Z4_DesignSpace_ProductTab_UnsupportedProcess"))))});a(3058);const Ct=Object(q.a)("Z4DSContentPanelFormats"),Et=s.a.memo(e=>{const t=Object(y.e)(),a=Object(l.d)(),n=Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey);return{formats:a.formatsTabData,productType:a.design.type}},l.c),i=Object(ae.h)(e.designStateKey);Object(o.useEffect)(()=>{n.formats||a(Object(D.Ob)(e.designStateKey))},[]);const r=(t,r)=>{if(n.productType!==t){const n=D.vb.designTransfer(e.designStateKey,{attributes:c.a.fromString(r),initialDesignId:i.transferDesignId,productType:t});a(n),Object(ae.o)("ProductTransfer")}};return i.isDesignTransferSupported?s.a.createElement(u.b,null,s.a.createElement("section",{className:Ct("Z4DSContentPanelBase","&")},s.a.createElement("h1",null,t("zi_create_Z4_DesignSpace_FormatsTab_Title")),s.a.createElement("div",{className:Ct("&-scroller")},s.a.createElement("button",{className:Ct("&-format"),onClick:()=>{r("digital_design","size=[20,20]")}},s.a.createElement(V.a,{className:Ct("&-format-customIcon"),iconName:V.a.Icon.Designers}),s.a.createElement("div",{className:Ct("&-format-text")},t("zi_create_Z4_DesignSpace_CustomSize"))),n.formats?n.formats.map(e=>{const t=Object(c.c)(e.imageUrl,{area_default_fill:"00000000",image_type:"png",max_dim:60,rvtype:"pre",square_it:!0});return s.a.createElement("button",{className:Ct("&-format"),key:e.id,onClick:()=>{r(e.productType,e.attributes)}},s.a.createElement("img",{src:t}),s.a.createElement("div",{className:Ct("&-format-text")},e.titleSeo))}):s.a.createElement("div",{className:Ct("&-loading")},s.a.createElement(Oe.a,{hasOwnContainer:!0,isShown:!0,shieldColor:"transparent"}))))):s.a.createElement(Dt,null)});var Ot=a(3),wt=a(673),jt=a(671),It=a(23),Nt=a(3061),kt=a.n(Nt);const Tt=["AI","PDF","PNG","PSD"],xt=Object(o.memo)(({designStateKey:e})=>{const t=Object(l.d)(),a=Object(y.e)(),n=Object($.f)(),{areaName:i,guideFiles:r}=zt(e);Object(o.useEffect)(()=>{r||t(D.yb.fetchGuideFiles(e))},[]);const c={};function u(e){return s.a.createElement("button",{className:kt.a.example_cell,onClick:()=>{const a=s.a.createElement(Y.a,{onRequestClose:()=>{t(Object(It.c)(a))},showButtonBar:!1,title:`${e.context} - ${e.title}`},s.a.createElement("img",{src:e.srcLarge}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,e.description));t(Object(It.d)(a,"Z4Guidelines_example"))}},s.a.createElement(jt.a,{aspect:1},s.a.createElement("img",{src:e.src})),e.title)}return r&&Tt.forEach(e=>{const t=r.AreaInfos&&r.AreaInfos[i];c[e]=t&&t[e]&&t[e].ResourceLink}),s.a.createElement("div",null,s.a.createElement("img",{className:kt.a.guidelines,src:n("WwwAst","z4/pdp/Guidelines.png"),alt:a("zi_create_Z3_DesignTool_Guidelines")}),c&&Object.values(c).some(e=>!!e)&&s.a.createElement("div",{className:kt.a.guideFiles},a("zi_create_Z3_DesignTool_Guidelines_DownloadGuideFile"),s.a.createElement("div",null,function(e){const t=[];for(let a=0;a<Tt.length;a++){const n=Tt[a];0!==a&&t.push(" | ");const i=e[n],r=i?s.a.createElement(Se.a,{key:n,target:"_blank",href:i},n):n;t.push(r)}return t}(c))),s.a.createElement("div",{className:kt.a.entry},s.a.createElement("span",{className:kt.a.entryTitle},a("zi_create_Z3_DesignTool_Guidelines_Safeline")),s.a.createElement("img",{"aria-hidden":!0,className:kt.a.linePreview,src:n("WwwAst","z4/pdp/SafeLine_DottedGreen.png")}),s.a.createElement("div",null,a("zi_create_Z3_DesignTool_Guidelines_Safeline_Description"))),s.a.createElement("div",{className:kt.a.entry},s.a.createElement("span",{className:kt.a.entryTitle},a("zi_create_Z3_DesignTool_Guidelines_Printline")),s.a.createElement("img",{"aria-hidden":!0,className:kt.a.linePreview,src:n("WwwAst","z4/pdp/PrintLine_SolidBlue.png")}),s.a.createElement("div",null,a("zi_create_Z3_DesignTool_Guidelines_Printline_Description"))),s.a.createElement("div",{className:kt.a.entry},s.a.createElement("span",{className:kt.a.entryTitle},a("zi_create_Z3_DesignTool_Guidelines_Bleedline")),s.a.createElement("img",{"aria-hidden":!0,className:kt.a.linePreview,src:n("WwwAst","z4/pdp/BleedLine_SolidRed.png")}),s.a.createElement("div",null,a("zi_create_Z3_DesignTool_Guidelines_Bleedline_Description"))),s.a.createElement("br",null),s.a.createElement("div",{className:kt.a.examplesTitle},a("zi_create_Z3_DesignTool_Guidelines_Examples")),s.a.createElement("div",{className:kt.a.example_title},a("zi_create_Z4_DesignSpace_Guidelines_Good")),s.a.createElement("div",null,a("zi_create_Z4_DesignSpace_Guidelines_Good_Description")),s.a.createElement("div",{className:kt.a.example_images},u({context:a("zi_create_Z4_DesignSpace_Guidelines_Good"),description:a("zi_create_Z4_DesignSpace_Guidelines_Good_Description"),src:n("WwwAst","z4/designtool/guidelines-help/good-design-small.png"),srcLarge:n("WwwAst","z4/designtool/guidelines-help/good-design.png"),title:a("zi_product_AreaViewButtonText")}),u({context:a("zi_create_Z4_DesignSpace_Guidelines_Good"),description:a("zi_create_Z4_DesignSpace_Guidelines_Good_Description"),src:n("WwwAst","z4/designtool/guidelines-help/good-product.png"),srcLarge:n("WwwAst","z4/designtool/guidelines-help/good-product.png"),title:a("zi_create_Z4_DesignSpace_Product")})),s.a.createElement("div",{className:kt.a.example_title},a("zi_create_Z4_DesignSpace_Guidelines_BadBleed")),s.a.createElement("div",null,a("zi_create_Z4_DesignSpace_Guidelines_BadBleed_Description")),s.a.createElement("div",{className:kt.a.example_images},u({context:a("zi_create_Z4_DesignSpace_Guidelines_BadBleed"),description:a("zi_create_Z4_DesignSpace_Guidelines_BadBleed_Description"),src:n("WwwAst","z4/designtool/guidelines-help/bad-bleed-design-small.png"),srcLarge:n("WwwAst","z4/designtool/guidelines-help/bad-bleed-design.png"),title:a("zi_product_AreaViewButtonText")}),u({context:a("zi_create_Z4_DesignSpace_Guidelines_BadBleed"),description:a("zi_create_Z4_DesignSpace_Guidelines_BadBleed_Description"),src:n("WwwAst","z4/designtool/guidelines-help/bad-bleed-product-small.png"),srcLarge:n("WwwAst","z4/designtool/guidelines-help/bad-bleed-product.png"),title:a("zi_create_Z4_DesignSpace_Product")})),s.a.createElement("div",{className:kt.a.example_title},a("zi_create_Z4_DesignSpace_Guidelines_BadSafeArea")),s.a.createElement("div",null,a("zi_create_Z4_DesignSpace_Guidelines_BadSafeArea_Description")),s.a.createElement("div",{className:kt.a.example_images},u({context:a("zi_create_Z4_DesignSpace_Guidelines_BadSafeArea"),description:a("zi_create_Z4_DesignSpace_Guidelines_BadSafeArea_Description"),src:n("WwwAst","z4/designtool/guidelines-help/bad-safe-design-small.png"),srcLarge:n("WwwAst","z4/designtool/guidelines-help/bad-safe-design.png"),title:a("zi_product_AreaViewButtonText")}),u({context:a("zi_create_Z4_DesignSpace_Guidelines_BadSafeArea"),description:a("zi_create_Z4_DesignSpace_Guidelines_BadSafeArea_Description"),src:n("WwwAst","z4/designtool/guidelines-help/bad-safe-product-small.png"),srcLarge:n("WwwAst","z4/designtool/guidelines-help/bad-safe-product.png"),title:a("zi_create_Z4_DesignSpace_Product")})),s.a.createElement("div",{className:kt.a.helpLink},s.a.createElement("a",{href:n.faqAnsPag("219576608"),target:"_blank"},a("zi_create_Z4_DesignSpace_Guidelines_HelpLink"))))}),zt=e=>Object(l.e)(t=>{const a=Object(C.b)(t,e),n=Object(ue.d)(t,a.productStateKey);return{areaName:a.design.activeArea,guideFiles:t.entities.guideFiles[n.productType]}},c.q);a(3062);const Pt=Object(q.a)("Z4KeyboardShortcuts"),Ft=e=>{const{zString:t}=e,a=-1!==window.navigator.appVersion.indexOf("Mac"),n=a?"âŒ¥":"Alt +",i=a?"âŒ˜":"Ctrl +",r=a?"â‡§":"Shift +",o=[[t("zi_common_Application_SelectAll"),i+" A"],[t("zi_create_Z3_KeyboardShortcuts_SmallerMoves"),`${i} (${t("zi_create_Z3_KeyboardShortcuts_ArrowKey")})`],[t("zi_create_Z3_KeyboardShortcuts_LargerMoves"),`${r} (${t("zi_create_Z3_KeyboardShortcuts_ArrowKey")})`],[t("zi_common_Application_Delete"),t("zi_create_Z3_KeyboardShortcuts_BackspaceOrDelete")],[t("zi_create_Z3_KeyboardShortcuts_AddText"),"T"],[t("zi_common_Application_Cut"),i+" X"],[t("zi_common_Application_Copy"),i+" C"],[t("zi_common_Application_Paste"),i+" V"],[t("zi_create_Z4_KeyboardShortcuts_ScaleBigger"),"+"],[t("zi_create_Z4_KeyboardShortcuts_ScaleSmaller"),"-"],[t("zi_create_Z4_KeyboardShortcuts_ZoomCanvasLarger"),`${i} ${n} +`],[t("zi_create_Z4_KeyboardShortcuts_ZoomCanvasSmaller"),`${i} ${n} -`],[t("zi_create_Z4_KeyboardShortcuts_ZoomCanvasFit"),`${i} ${n} 0`],[t("zi_common_Application_Undo"),i+" Z"],[t("zi_common_Application_Redo"),`${r} ${i} Z`],[t("zi_create_Z3_KeyboardShortcuts_SendBackward"),i+" ["],[t("zi_create_Z3_KeyboardShortcuts_BringForward"),i+" ]"],[t("zi_create_Z3_KeyboardShortcuts_SendToBack"),`${i} ${n} [`],[t("zi_create_Z3_KeyboardShortcuts_BringToFront"),`${i} ${n} ]`],[t("zi_create_Z4_DesignSpace_Group"),i+" G"],[t("zi_create_Z4_DesignSpace_Ungroup"),`${r} ${i} G`],[t("zi_create_Z4_KeyboardShortcuts_AlignTL"),n+" Q"],[t("zi_create_Z4_KeyboardShortcuts_AlignT"),n+" W"],[t("zi_create_Z4_KeyboardShortcuts_AlignTR"),n+" E"],[t("zi_create_Z4_KeyboardShortcuts_AlignL"),n+" A"],[t("zi_create_Z4_KeyboardShortcuts_AlignCenter"),n+" S"],[t("zi_create_Z4_KeyboardShortcuts_AlignR"),n+" D"],[t("zi_create_Z4_KeyboardShortcuts_AlignBL"),n+" Z"],[t("zi_create_Z4_KeyboardShortcuts_AlignB"),n+" X"],[t("zi_create_Z4_KeyboardShortcuts_AlignBR"),n+" C"],[t("zi_create_Z3_KeyboardShortcuts_ConstrainedMove"),`${r} (${t("zi_create_Z3_KeyboardShortcuts_Drag")})`],[t("zi_create_Z4_KeyboardShortcuts_UniformScale"),`${r} (${t("zi_create_Z3_KeyboardShortcuts_DragHandle")})`],[t("zi_create_Z3_KeyboardShortcuts_Duplicate"),`${n} (${t("zi_create_Z3_KeyboardShortcuts_Drag")})`],[t("zi_create_Z3_KeyboardShortcuts_ToggleLeftPanel"),i+" /"],[t("zi_create_Z3_KeyboardShortcuts_ToggleDesignPreview"),"P"]];return s.a.createElement("div",{className:Pt("&")},o.map(([e,t],a)=>s.a.createElement("div",{key:a,className:Pt("&-row")},s.a.createElement("span",null,e),s.a.createElement("span",null,t))))};a(3060);const Mt=Object(q.a)("Z4DSContentPanelHelp");class At extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"renderGuidelines",()=>s.a.createElement("div",{className:Mt("&-accordionContent")},s.a.createElement(xt,{designStateKey:this.props.designStateKey}))),Object(Ot.a)(this,"renderShortcuts",()=>s.a.createElement("div",{className:Mt("&-accordionContent","&-shortcuts")},s.a.createElement(Ft,{zString:this.props.zString}))),Object(Ot.a)(this,"toggleGuidelines",()=>{this.props.onUpdateSettings({activeHelpTab:"guidelines"!==this.props.activeTab?"guidelines":void 0})}),Object(Ot.a)(this,"toggleShortcuts",()=>{this.props.onUpdateSettings({activeHelpTab:"shortcuts"!==this.props.activeTab?"shortcuts":void 0})})}componentWillUnmount(){this.props.onUpdateSettings({activeHelpTab:void 0})}render(){const{activeTab:e,zString:t,zUrl:a}=this.props;return s.a.createElement(u.b,null,s.a.createElement("section",{className:Mt("Z4DSContentPanelBase","&")},s.a.createElement("h1",null,t("zi_common_Application_Help")),s.a.createElement(wt.b,{isExpanded:"shortcuts"===e,onRequestToggleExpanded:this.toggleShortcuts,title:t("zi_create_Z3_KeyboardShortcuts_Shortcuts")},"shortcuts"===e&&this.renderShortcuts()),s.a.createElement(wt.b,{isExpanded:"guidelines"===e,onRequestToggleExpanded:this.toggleGuidelines,title:t("zi_create_Z3_DesignTool_Guidelines")},"guidelines"===e&&this.renderGuidelines()),!Object(v.a)().isDisneyIframe&&s.a.createElement("div",{className:Mt("&-helpCenter")},s.a.createElement(Se.a,{target:"_blank",href:a("External","helphome")},t("zi_masterpages_HelpCenter")))))}}const Rt=Object(l.b)((e,t)=>({activeTab:Object(C.b)(e,t.designStateKey).settings.activeHelpTab,zString:Object(y.a)(e),zUrl:Object($.b)(e)}),(e,t)=>({onUpdateSettings:a=>{e(D.Kc(t.designStateKey,a))}}))(At);var Bt=a(1457);a(3063);const Lt=Object(q.a)("Z4DSContentPanelIcons");class Ut extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"launchMediaBrowser",()=>{const{zString:e}=this.props;this.props.onShowMediaBrowser({additionalTip:e("zi_myzazzle_MediaBrowser_TipDesign"),onDone:e=>{e.length>0&&this.props.onAddImages(e)},showZazzleImages:!0,submitButtonContent:e("zi_create_design_addToDesign"),view:"ZazzleImages"}),Object(G.h)(H.a.OpenedMediaBrowser("icons"))})}render(){const{zString:e}=this.props;return s.a.createElement(u.b,null,s.a.createElement("section",{className:Lt("Z4DSContentPanelBase","&")},s.a.createElement(Bt.a,{mode:"minimal",onSearchPassive:Gt,onSubmit:this.props.onAddImages,noResultsContent:s.a.createElement("div",{className:Lt("Z4DSContentPanelBase-noResults")},s.a.createElement(V.a,{className:Lt("Z4DSContentPanelBase-noResultsImage","&-noResultsIcon"),iconName:be.a.Smiley}),e("zi_create_Z4_DesignSpace_Search_NoResults"),s.a.createElement("br",null),e("zi_create_Z4_DesignSpace_Search_Icons_NoResults"))}),s.a.createElement(X.a,{size:"fluid",onClick:this.launchMediaBrowser,color:"hyperBlue"},e("zi_create_Z4_DesignSpace_FullImageBrowser"))))}}Object(Ot.a)(Ut,"contextType",oe.a);const Kt=Object(l.b)(e=>({zString:Object(y.a)(e)}),(e,t)=>({onAddImages:a=>{e(D.yb.addImages(t.designStateKey,{ids:a,isIcon:!0})),Object(G.h)(H.a.AddedIcon())},onShowMediaBrowser:Object(Ye.b)(nt.b.showMediaBrowserDialog,e)}))(Ut);function Gt(){Object(G.h)(H.a.SearchedIcons())}const Ht=s.a.memo(e=>{const t=Object(y.e)(),a=Object(l.d)(),n=Object(o.useCallback)(t=>{a(Object(D.Fb)(e.designStateKey,t.id,!0)),Object(ae.o)("AddImageObject")},[]);return s.a.createElement(dt,{designStateKey:e.designStateKey,enableDetails:!0,gridLayout:"justified",onItemClick:n,targetRowHeight:150,title:t("zi_create_Z4_DesignSpace_Images"),type:"image"})});var Zt=a(182),Wt=a.n(Zt),Vt=a(3064),qt=a.n(Vt),$t=a(159),Xt=a(122),Yt=a.n(Xt),Qt=a(1199),Jt=a.n(Qt),ea=a(811),ta=a(616),aa=a(61),na=a.n(aa),ia=a(262),ra=a(522),oa=a(1314),sa=a(87),la=a(217),ca=a(89),ua=a(590);a(3072);const da=s.a.lazy(()=>a.e(441).then(a.bind(null,1827))),ha=(e,t)=>{if(!t)return 0;const a=Object(Je.a)(e,"Product",void 0,t).realviewId;let n=e.findIndex(e=>e.id===a);return n<0&&(n=0),n},pa={left:"auto",paddingRight:8,right:0},ma={left:0,paddingLeft:8,right:"auto",zIndex:1},ga=Object(q.a)("DesignPreviewInner"),fa=Object(o.memo)(e=>{const{realviews:t,selectedIndex:a}=e,[n,i]=Object(o.useState)(!1);Object(o.useEffect)(()=>{e.onChangeSelectedIndex(ha(t,e.activeArea))},[e.activeArea]);const{dynamicRealviewUrlBase:r}=Object(v.a)(),l=ga("&",e.className),u=Object(c.l)(a-1,t.length),d=Object(c.l)(a+1,t.length);return s.a.createElement("div",{className:l,onClick:e.onClick,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},s.a.createElement(ia.b,{arrowButtonType:"arrowOnly",arrowPosition:"outsideContainer",arrowStyleNext:pa,arrowStylePrev:ma,enableSwiping:!0,index:a,onIndexChange:a=>{a=Object(c.l)(a,t.length),e.onChangeSelectedIndex(a)},orientation:"horizontal",showDots:!0},t.map((t,i)=>{const o=Object(Je.d)(t,r,Object(F.a)({ah:0,cacheDefeat:e.designTimestamp,codec_quality:80},e.templateParamsOverrides)),l=i===a||n&&(i===u||i===d);return s.a.createElement("div",{key:t.id,className:ga("&-item"),onClick:e.onFullscreenOpen},l&&s.a.createElement(ca.c,{alt:t.title,baseSrc:o,baseDim:220,srcSetMagnifications:[1,1.5],useSrcSet:!0}),"dynamicvideo"===t.media&&s.a.createElement(ra.a,null))})))}),ba=Object(q.a)("Z4DesignPreview"),va=Object(o.memo)(e=>{const t=Object(y.e)(),{design:a,isMinimized:n,isVizLite:i,realviews:r,selectedIndex:l,templateParamsOverrides:c}=ya(e.designStateKey),{addGlobalElement:u,onUpdateSettings:d,removeGlobalElement:h}=_a(e.designStateKey),p=Object(Te.i)(a,!0),m=Object(o.useCallback)(()=>{d({designPreviewFullscreen:!1})},[d]),g=Object(o.useCallback)(()=>{d({designPreviewFullscreen:!0})},[d]);Object(o.useEffect)(()=>{if(a.settings.designPreviewFullscreen){const e=r[l].id,t=s.a.createElement(s.a.Suspense,{fallback:s.a.createElement(sa.a,{isShown:!0})},s.a.createElement(da,{closeOnBackgroundClick:!0,designTimestamp:p,initialRealviewId:e,isVizLite:i,onClick:_,onClose:m,realviewUrlBase:Object(v.a)().dynamicRealviewUrlBase,realviews:r,templateParamsOverrides:c,viewSelectorSize:90,viewSize:700}));return u(t,"fullscreenPreview"),()=>{h(t)}}},[a.settings.designPreviewFullscreen]);const f=Object(o.useCallback)(e=>{(!document.activeElement||!["INPUT","TEXTAREA"].includes(document.activeElement.tagName))&&80===e.which&&(a.settings.designPreviewFullscreen?m():g())},[a.settings.designPreviewFullscreen,m,g]);Object(o.useEffect)(()=>(window.addEventListener("keyup",f),()=>{window.removeEventListener("keyup",f)}),[f]);const b=Object(o.useCallback)(e=>{d({designPreviewSelectedIndex:e})},[d]),_=Object(o.useCallback)(e=>{e.stopPropagation()},[]);return s.a.createElement("div",{style:{height:n?40:260},className:ba("&",{"&-isMinimized":n})},s.a.createElement(fe.CSSTransitionGroup,{className:ba("&-previewStage"),transitionEnterTimeout:100,transitionLeaveTimeout:100,transitionName:ba("&-previewStage-")},s.a.createElement("div",{className:ba("&-topBar")},s.a.createElement("button",{className:ba("&-minimizeButton"),onClick:n?()=>{d({designPreviewMinimized:!1}),Object(G.h)(H.a.ToggledDesignPreview())}:()=>{d({designPreviewMinimized:!0}),Object(G.h)(H.a.ToggledDesignPreview())}},s.a.createElement(V.a,{className:ba("&-minimize"),iconName:n?V.a.Icon.SizeIncrease:V.a.Icon.SizeDecrease}),t("zi_product_Preview")),!n&&s.a.createElement("button",{className:ba("&-fullscreenButton"),onClick:g},s.a.createElement(V.a,{className:ba("&-fullscreen"),iconName:V.a.Icon.Search}))),!n&&s.a.createElement(fa,{activeArea:a.design.activeArea,designTimestamp:p,onClick:_,onFullscreenOpen:g,onChangeSelectedIndex:b,realviews:r,selectedIndex:l,templateParamsOverrides:c})))}),ya=e=>{const t=Object(oa.a)(e=>e.filter(e=>"Product"===e.type&&!e.isUGC&&("dynamicvideo"===e.media||e.canBePreferred&&!e.videoId))),a=Object(o.useMemo)(()=>Object(ua.b)(),[]);return Object(l.e)(n=>{var i;const r=Object(C.b)(n,e),o=Object(C.b)(n,r.productStateKey),s=null!==(i=r.settings.designPreviewMinimized)&&void 0!==i&&i,l=t(o.realviews),c=na()(r.settings.designPreviewSelectedIndex)?r.settings.designPreviewSelectedIndex:ha(l,r.design.activeArea);return{design:r,isMinimized:s,isVizLite:o.isVizLite,realviews:l,selectedIndex:c,templateParamsOverrides:a(n,o.stateKey)}},l.c)},_a=e=>{const t=Object(l.d)();return Object(o.useMemo)(()=>({addGlobalElement:(e,a)=>{t(la.c.addGlobalElement(e,a))},removeGlobalElement:e=>{t(la.c.removeGlobalElement(e))},onUpdateSettings:a=>{t(Object(D.Kc)(e,a))}}),[e])};a(3071);const Sa=Object(q.a)("Z4DSPropertiesPanelBase");class Da extends s.a.Component{render(){const{isVizLite:e}=this.props;return s.a.createElement("section",{className:Sa("&",`&--${this.context&&this.context.theme}Theme`,this.props.className)},s.a.createElement(u.b,null,s.a.createElement("div",{className:Sa("&-scroller")},this.props.children)),!e&&s.a.createElement("div",{className:Sa("&-preview")},s.a.createElement(va,{designStateKey:this.props.designStateKey})),this.props.beforeComponentEndContent)}}function Ca(e){return"0"!==Object(ta.g)(e)?"#"+Object(ta.c)(e):""}Object(Ot.a)(Da,"contextType",ve.a);const Ea=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey);return{isVizLite:Object(ue.d)(e,a.productStateKey).isVizLite}})(Da);var Oa=a(704),wa=a(601);a(3070);const ja=Object(q.a)("Z4DSErrorIcon");class Ia extends s.a.PureComponent{render(){const{className:e,message:t,type:a}=this.props;return s.a.createElement(wa.b,{className:ja("&","&--"+U.b[a],e),overlay:t,persistOverlayOnOverlayHover:!0,placement:"bottom",touchStopPropagation:!!t},s.a.createElement(V.a,{iconName:V.a.Icon.Warning}),s.a.createElement("div",{className:ja("&-iconBackground")}))}}Object(Ot.a)(Ia,"defaultProps",{type:1});var Na=a(696),ka=a(19);a(3069);const Ta=Object(q.a)("Z4DSDesignObjectThumbnail"),xa=e=>{const{designObject:t}=e,{activeDesignRealview:a,designId:n,designTimestamp:i}=(e=>{const t=Object(ka.e)((e,t)=>Object(Je.c)(e,t,"Design"),c.q);return Object(l.e)(a=>{const n=Object(Z.e)(a,e.designStateKey),i=Object(ue.d)(a,n.productStateKey);return{activeDesignRealview:t(e.designObject.area,i.realviews),designId:n.design.id,designTimestamp:Object(Te.i)(n)}},c.q)})(e);let r=null;switch(t.type){case"group":{const e=Object(Je.d)(a,Object(v.a)().dynamicRealviewUrlBase,{area_texture_layout:"square",areacolor:!1,content_padding:0,csa:!0,design:n,image_type:"jpg",max_dim:28,r:i,rvtype:"content",square_it:!0,view_objects:t.name});r=s.a.createElement("img",{className:Ta("&-image"),src:e});break}case"image":{const e=Object(c.c)(Object(v.a)().dynamicRealviewGetImageBase,{action:"getImage",id:t.imageid,max_dim:28,square_it:"fill"});r=s.a.createElement("img",{alt:t.title,className:Ta("&-image"),src:e});break}case"path":if(t.imageid){const e=Object(c.c)(Object(v.a)().dynamicRealviewGetImageBase,{action:"getImage",bg:"0x00000000",id:t.imageid,image_type:"png",max_dim:40,square_it:"fit"});r=s.a.createElement("img",{alt:t.title,className:Ta("&-image"),src:e})}else switch(t.shape){case"circle":r=s.a.createElement(V.a,{className:Ta("&-path"),iconName:V.a.Icon.CircleOutline});break;case"line":case"lineH":r=s.a.createElement(V.a,{className:Ta("&-path"),iconName:V.a.Icon.Line});break;case"square":r=s.a.createElement(V.a,{className:Ta("&-path"),iconName:V.a.Icon.SquareOutline});break;case"squareRC":r=s.a.createElement(V.a,{className:Ta("&-path"),iconName:V.a.Icon.RoundedRectangle});break;case"tri":r=s.a.createElement(V.a,{className:Ta("&-path"),iconName:V.a.Icon.Triangle})}break;case"qrcode":r=s.a.createElement(V.a,{className:Ta("&-path"),iconName:V.a.Icon.QRCode});break;case"text":r=s.a.createElement("div",{className:Ta("&-text")},"T")}return s.a.createElement("div",{className:Ta("&",e.className)},r)};a(3068);const za=Object(q.a)("Z4DSLayer"),Pa=s.a.memo(e=>{const{designObject:t,designStateKey:a,index:n,isSelected:i}=e,r=Object(l.d)(),c=Ma(e),{canpublishIgnorePO:u,error:d,internalEditMode:h,templateTitle:p}=c,m=Object(y.e)(),g=Object(Na.g)(t),f=Object(Na.h)(t),b=u||h||g,v=!g&&!f,_=Object(o.useCallback)(e=>{e.stopPropagation(),e.preventDefault()},[]),S=Object(o.useCallback)(e=>{_(e);const n=!g;r(Object(D.jc)(a,{locked:n},i?void 0:[t.name])),n&&r(Object(D.Ec)(a,{selection:[]})),Object(G.h)(H.a.ToggledLayerLock())},[t.name,a,i,g,_]),C=Object(o.useCallback)(e=>{_(e),r(Object(D.jc)(a,{visible:!t.visible},i?void 0:[t.name])),Object(G.h)(H.a.ToggledLayerVisibility())},[t.name,t.visible,a,i,_]);return s.a.createElement("div",{className:za("&",{"&--invisible":!t.visible,"&--locked":g,"&--selected":i}),style:{zIndex:n+1}},s.a.createElement("div",{className:za("&-bordered")},s.a.createElement("div",{className:za("&-lockButtonWrapper")},b&&s.a.createElement("button",{className:za("&-lockButton"),disabled:!h&&!u,onClick:S,onMouseDown:_,onTouchEnd:S,onTouchStart:_},s.a.createElement(V.a,{iconName:V.a.Icon.Lock,screenReaderText:m("zi_create_DesignInspector_Lock")}))),s.a.createElement("div",{className:za("&-thumbnail")},s.a.createElement(xa,{designObject:t,designStateKey:a}),d&&s.a.createElement(Ia,{message:d.displayMessages.object,type:d.type})),s.a.createElement("div",{className:za("&-info")},p&&s.a.createElement("div",{className:za("&-templateTitle")},p),s.a.createElement("div",{className:za("&-description")},Fa(t,m))),v&&s.a.createElement("button",{className:za("&-visibleButton"),disabled:g||f,onClick:C,onMouseDown:_,onTouchEnd:C,onTouchStart:_},s.a.createElement(V.a,{iconName:V.a.Icon.NotVisible,screenReaderText:m("zi_create_design_HideLayer")}))))});function Fa(e,t){switch(e.type){case"group":return t("zi_create_Z4_DesignSpace_Group");case"image":return e.title;case"path":switch(e.shape){case"circle":return t("zi_create_Z3_DesignTool_Path_Circle");case"line":case"lineH":return t("zi_create_Z3_DesignTool_Path_Line");case"square":return t("zi_create_Z3_DesignTool_Path_Square");case"squareRC":return t("zi_create_Z3_DesignTool_Path_SquareRC");case"tri":return t("zi_create_Z3_DesignTool_Path_Triangle");default:return e.title}case"qrcode":case"text":return e.value}}const Ma=e=>{const t=Object(o.useMemo)(U.n,[]);return Object(l.e)(a=>{const n=Object(C.b)(a,e.designStateKey),i=Object(ue.d)(a,n.productStateKey),r=t(a,i,n.design),o=Object(ea.c)({designObject:e.designObject},r,!0),s=e.designObject.urlkey?n.design.templates.find(t=>t.urlkey===e.designObject.urlkey):void 0;return{canpublishIgnorePO:n.design.canpublishIgnorePO,error:o[0],internalEditMode:a.page.internalEditMode,templateTitle:s?s.title:void 0}},c.q)};a(3067);const Aa=Object(q.a)("Z4DSAreaGroup");function Ra(e){return s.a.createElement(Pa,Object(F.a)({},e.item))}class Ba extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{}),Object(Ot.a)(this,"handleLayersReorder",(e,t,a,n)=>{const{area:i,onReorderDesignObjectsAbove:r,onUpdateDesign:o,onUpdateSettings:s,selectedObjects:l}=this.props;if(t.designObject.locked)return;s({metaSelection:void 0});const c=Object($t.e)(i,i.childnames).reverse(),u=this.state.anchorDesignObject?c.indexOf(this.state.anchorDesignObject):-1;e.shiftKey&&-1!==u||this.setState({anchorDesignObject:t.designObject});const d=t.designObject.name,h=l.map(e=>e.name);if(e.ctrlKey||e.metaKey){let e=h.filter(e=>e!==d);h.indexOf(d)<0&&(e=e.concat([d])),o({selection:e})}else if(e.shiftKey&&-1!==u){const e=Math.min(u,n),t=Math.max(u,n);o({selection:c.map(e=>e.name).slice(e,t+1)})}else o({selection:[d]});if(a!==n){const e=c.length-n-1,t=n<a?0:1;r(e-t>=0?i.childnames[e-t]:"")}}),Object(Ot.a)(this,"renderContents",()=>{const{area:e,areaGroupInfo:t,bgImgSrc:a,designStateKey:n,metaSelection:i,numAreasInGroup:r,selectedObjects:o,zString:l}=this.props,c=t.unfilteredDesignAreas[e.name],u=Object($t.e)(e,e.childnames).map((e,t)=>({designObject:e,designObjectName:e.name,designStateKey:n,index:t,isSelected:!!o.find(t=>t.name===e.name)})).reverse(),d=(e.fill?e.fill.fillcolor:null)||"00ffffff";return s.a.createElement("div",{className:Aa("&-content")},s.a.createElement(Jt.a,{callback:this.handleLayersReorder,holdTime:0,itemClass:Aa("&-reorderItem"),itemKey:"designObjectName",list:u,lock:"horizontal",template:Ra}),c.allowFill&&s.a.createElement("div",{className:Aa("&-propertiesButton","&-background")},l("zi_common_Application_Background"),a&&s.a.createElement("button",{className:Aa("&-bgImgButton"),onClick:this.switchToBgTab},s.a.createElement("img",{className:Aa("&-bgImg"),src:a})),"00ffffff"!==d&&!a&&s.a.createElement("div",{className:Aa("&-colorPreview")},s.a.createElement("div",{style:{background:Ca(d)}})),s.a.createElement(X.a,{color:"hyperBlue",onClick:this.switchToBgTab,size:"mini"},l(a||"00ffffff"!==d?"zi_common_Application_Edit":"zi_myzazzle_Add"))),r.length>1&&s.a.createElement(Oa.a,{active:"designArea"===i,activeClassName:Aa("&-propertiesButton--active"),className:Aa("&-propertiesButton"),onClick:this.toggleMetaDesignArea},l("zi_create_Z4_DesignSpace_Layer_DesignPlacement"),s.a.createElement(V.a,{iconName:V.a.Icon.Advanced})))}),Object(Ot.a)(this,"toggleExpanded",()=>{this.props.onRequestToggleExpanded(this.props.areaGroupInfo.name)}),Object(Ot.a)(this,"switchToBgTab",()=>{if(!this.props.isTransferInProgress){const e={activeContentTab:"background"};this.props.onUpdateSettings(e)}}),Object(Ot.a)(this,"toggleMetaDesignArea",()=>{const{metaSelection:e,onUpdateDesign:t,onUpdateSettings:a}=this.props;"designArea"===e?a({metaSelection:void 0}):(a({metaSelection:"designArea"}),t({selection:[]}))})}UNSAFE_componentWillReceiveProps(e){const t=this.props.area!==e.area,a=this.props.selectedObjects!==e.selectedObjects;if(t||a){!(this.state.anchorDesignObject&&e.selectedObjects.includes(this.state.anchorDesignObject))&&e.selectedObjects.length>0&&this.setState({anchorDesignObject:e.selectedObjects[0]})}}render(){const{areaGroupInfo:e,areaGroupRealview:t,designTimestamp:a,error:n,isExpanded:i}=this.props,r=Object(Je.d)(t,Object(v.a)().dynamicRealviewUrlBase,{cacheDefeat:a,hide:"bleed,safe,visible",max_dim:30});return s.a.createElement("div",{className:Aa("&")},s.a.createElement(wt.b,{isExpanded:i,onRequestToggleExpanded:this.toggleExpanded,title:s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{"aria-hidden":!0,className:Aa("&-accordionThumbnail"),src:r}),s.a.createElement("span",{className:Aa("&-accordionTitle")},e.title),n&&s.a.createElement(Ia,{type:n.type}))},i&&this.renderContents()))}}const La=Object(l.b)(()=>{const e=Object(U.n)();return(t,a)=>{const n=Object(C.b)(t,a.designStateKey),i=Object(ue.d)(t,n.productStateKey),r=Object(Je.c)(a.area.name,i.realviews,"Design"),o=e(t,i,n.design),s=Object(ea.c)({area:a.area},o,!0),l=n.design.activeArea,c=n.design.areas[l].layers.find(e=>"Bg"===e.name);let u="";if(c&&c.childnames.length>0&&n&&i){const e=Object(Je.b)(i.realviews,n.design.activeView);u=Object(Je.d)(e,Object(v.a)().dynamicRealviewUrlBase,{areacolor:"false",cacheDefeat:Object(Te.i)(n,i.isSavedDesign),hide:"bleed,safe,visible,visibleMask,bleed_bg",image_type:"png",layer:"Bg",max_dim:75,rvtype:"pre"})}return{areaGroupRealview:r,bgImgSrc:u,designTimestamp:Object(Te.i)(n),error:s[0],isTransferInProgress:n.settings.isTransferInProgress,metaSelection:n.settings.metaSelection,numAreasInGroup:Yt()(n.design.areas,e=>e.group===a.areaGroupInfo.name),selectedObjects:Object(Z.k)(t,a.designStateKey),zString:Object(y.a)(t)}}},(e,t)=>({onReorderDesignObjectsAbove:a=>{e(Object(D.bc)(t.designStateKey,a)),Object(G.h)(H.a.ReorderedSelection())},onUpdateDesign:a=>{e(Object(D.Ec)(t.designStateKey,a))},onUpdateSettings:a=>{e(Object(D.Kc)(t.designStateKey,a))}}))(Ba);a(3066);const Ua=Object(q.a)("Z4DSContentPanelLayers");class Ka extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{}),Object(Ot.a)(this,"toggleAreaGroupExpanded",e=>{const{activeAreaGroupName:t,designAreas:a}=this.props;if(e===t)this.setState({allAreaGroupsAreCollapsed:!this.state.allAreaGroupsAreCollapsed});else{const t=qt()(a).filter(t=>t.group===e),n=t.find(e=>!Object($t.f)(e))||t[0];this.props.setAreaView(n.name),this.setState({allAreaGroupsAreCollapsed:!1})}})}render(){const{activeAreaGroupName:e,areaGroupsInfoInOrder:t,designAreas:a,designStateKey:n,zString:i}=this.props,r=t.map(t=>{if(t.process.isSimpleText)return null;const i=Wt()(a,e=>e.group===t.name);if(!i)return null;const r=!this.state.allAreaGroupsAreCollapsed&&t.name===e;return s.a.createElement(La,{area:i,areaGroupInfo:t,designStateKey:n,isExpanded:r,key:t.name,onRequestToggleExpanded:this.toggleAreaGroupExpanded})});return s.a.createElement(u.b,null,s.a.createElement("section",{className:Ua("Z4DSContentPanelBase","&")},s.a.createElement("h1",null,i("zi_create_Z4_DesignSpace_Layers")),r))}}const Ga=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey);return{activeAreaGroupName:Object(Qe.b)(a.design).group,areaGroupsInfoInOrder:n.areaGroupsOrder.map(e=>n.areaGroupsInfo[e]),designAreas:a.design.areas,zString:Object(y.a)(e)}},(e,t)=>({setAreaView:a=>{e(Object(D.Ac)(t.designStateKey,void 0,a)),Object(G.h)(H.a.SelectedAreaGroup())}}))(Ka),Ha=s.a.memo(e=>{const t=Object(y.e)(),a=Object(l.d)(),n=Object(o.useCallback)(t=>{a(D.vb.selectDesignTemplate(e.designStateKey,{designId:t.designId}))},[]);return s.a.createElement(dt,{designStateKey:e.designStateKey,enableDetails:!0,gridLayout:"2col",onItemClick:n,searchInputPlaceholder:t("zi_create_Z4_DesignSpace_MarketplaceProducts"),title:t("zi_search_Tabs_Products"),type:"marketplace"})});var Za=a(867),Wa=a(50);a(3074);const Va=e=>{const t=Object(y.e)(),a=Object(l.d)();let n,{productStateKey:i}=e;if(e.productInfo){n={dz:e.productInfo.designId,pd:e.productInfo.id,po:e.productInfo.attributes,pt:e.productInfo.productType};const t=JSON.stringify(n);i="product_"+t}const r=Object(l.e)(e=>Object(ue.d)(e,i));return Object(o.useEffect)(()=>{if(e.productInfo&&!r)return a(Object(Wa.c)(i,Za.a)),a(Object(K.S)(i,n,!1)),()=>{a(Object(Wa.d)(i))}},[i,e.productInfo]),r&&r.stateKey?s.a.createElement(Y.a,{className:"Z4DSProductInfoDialog",onRequestClose:e.onRequestClose,showButtonBar:!1,title:t("zi_product_aboutProduct_sentenceCasing")},s.a.createElement(h.a,null,s.a.createElement(We.a,{forceExpanded:!0,includeProfileCard:!1,productStateKey:r.stateKey}))):s.a.createElement(Ce.b,{isShown:!0})};a(3073);const qa={ps:60},$a=Object(q.a)("Z4DSContentPanelProducts"),Xa=s.a.memo(e=>{const t=Object(y.e)(),a=Object(l.d)(),n=Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey),n=Object(ue.d)(t,a.productStateKey);return{blankRealview:n.realviews.find(e=>e.id===n.blankRealviewId),isDigital:n.isDigital,productTypeSingularName:n.productTypeSingularName}},l.c),i=Object(ae.h)(e.designStateKey),r=Object(o.useCallback)(t=>{a(D.vb.designTransfer(e.designStateKey,{attributes:c.a.fromString(t.attributes),initialDesignId:i.transferDesignId,productType:t.productType})),Object(ae.o)("ProductTransfer")},[]),u=Object(o.useCallback)((e,t)=>s.a.createElement(Va,{productInfo:e,onRequestClose:t}),[]);let d;if(!n.isDigital){const i=n.blankRealview?Object(Je.d)(n.blankRealview,Object(v.a)().staticRealviewUrlBase,{max_dim:70,design:null}):null,r=t=>{t.preventDefault(),a(Object(D.Kc)(e.designStateKey,{isShowingAboutThisProduct:!0}))};d=s.a.createElement(s.a.Fragment,null,s.a.createElement(vt.a,{title:t("zi_create_Z4_DesignSpace_SelectedProduct")}),s.a.createElement("div",{className:$a("&-selectedProduct")},i&&s.a.createElement("img",{src:i,alt:t("zi_blproduct_Doublecheck_Blank_BlurbBlank")}),s.a.createElement("div",null,n.productTypeSingularName,s.a.createElement("br",null),s.a.createElement(Se.a,{href:"#",onClick:r},t("zi_common_Signin_SeeDetails")))))}return i.isDesignTransferSupported?s.a.createElement(dt,{designStateKey:e.designStateKey,detailsContent:u,enableDetails:!0,gridLayout:"3col",onItemClick:r,searchParams:qa,showInfoText:!0,showTopContentWhenScrolling:!0,title:t("zi_search_Tabs_Products"),topContent:d,type:"product"}):s.a.createElement(Dt,null)});a(3047);var Ya=a(29),Qa=a(791),Ja=a(1119),en=a(3075),tn=a.n(en);const an={theme:"light"},nn=s.a.memo(e=>{var t,a;const n=Object(l.d)(),i=Object(y.e)(),r=Object(l.e)(t=>Object(ce.a)(t,Object(_.h)(e.designStateKey))),u=Object(l.e)(t=>Object(_.d)(t,Object(_.g)(e.designStateKey))),d=r&&u&&r.designer_id===u.myId,h=Object(o.useCallback)(t=>{n(D.yb.addImages(e.designStateKey,{ids:[t]}))},[]);return Object(o.useEffect)(()=>{n(Object(D.Kc)(e.designStateKey,{hasNewSharedAsset:!1},!1))},[]),s.a.createElement("section",{className:"Z4DSContentPanelBase"},s.a.createElement("h1",null,i("zi_create_Z4_DesignSpace_SharedFiles")),(null==u||null===(t=u.assetIds)||void 0===t?void 0:t.length)>0?s.a.createElement("div",{className:tn.a.grid},null==u||null===(a=u.assetIds)||void 0===a?void 0:a.map(e=>{const t=Object(c.c)(Object(v.a)().staticRealviewGetImageBase,{id:e,[$.a.RlvBackgroundPattern]:"checker",[$.a.RlvMaxDim]:100,[$.a.RlvSquareIt]:"fill"}),a=Object(c.c)(Object(v.a)().dynamicRealviewGetImageBase,{collab:u.collabId,id:e,image_type:"orig"});return s.a.createElement("div",{className:tn.a.item},s.a.createElement(Ja.a,{className:tn.a.mbItem,id:e,isSelectable:!1,key:e,onClick:h,thumbnailUrl:t,zString:i}),d&&s.a.createElement(ve.a.Provider,{value:an},s.a.createElement(Ya.a,{className:tn.a.download,onClick:()=>{Object(Qa.a)(a,e)}},s.a.createElement(V.a,{iconName:be.a.PositionBottom}))))})):s.a.createElement("div",null,i("zi_create_Z4_DesignSpace_SharedFiles_Empty")))}),rn={[$.a.RlvViewType]:"pre"},on=s.a.memo(e=>{const t=Object(y.e)(),a=Object(l.d)(),n=Object(o.useCallback)(t=>{a(D.vb.selectDesignTemplate(e.designStateKey,{designId:t.designId})),Object(ae.o)("SelectTemplate")},[]);return s.a.createElement(dt,{designStateKey:e.designStateKey,enableDetails:!0,gridLayout:"2col",onItemClick:n,realviewParams:rn,title:t("zi_create_design_templates"),type:"template"})});var sn=a(74),ln=a(3076),cn=a.n(ln);const un={[$.a.RlvViewType]:"content"},dn=s.a.memo(e=>{const t=Object(et.c)(),a=Object(y.e)(),n=Object(l.d)(),i=Object(o.useContext)(oe.a),r=Object(l.e)(a=>{const n="marketplace"===i.flavor;if(Object(v.a)().isDisneyIframe||!t("Boolean","Z4","EnableTextSearch",!1)||n&&!t("Boolean","Z4","ShowDesignerContentInMarketplaceText",!1))return!1;const r=Object(C.b)(a,e.designStateKey),o=Object(ue.d)(a,r.productStateKey),s=Object(Qe.b)(r.design);return"print"===o.areaGroupsInfo[s.group].uiProcess}),c=Object(o.useCallback)(t=>{n(Object(D.Fb)(e.designStateKey,t.id,!1)),Object(ae.o)("AddTextObject")},[]),u=Object(o.useCallback)(()=>{n(Object(sn.a)([Object(D.Ec)(e.designStateKey,{selection:[]}),Object(D.Kc)(e.designStateKey,{isAddingText:!0})]))},[]),d=s.a.createElement(s.a.Fragment,null,s.a.createElement(X.a,{color:"hyperBlue",onClick:u,size:"fluid"},s.a.createElement(V.a,{className:cn.a.icon,iconName:V.a.Icon.Text}),a("zi_create_AddText")));return r?s.a.createElement(dt,{designStateKey:e.designStateKey,enableDetails:!0,gridLayout:"2col",onItemClick:c,padThumbnails:!0,realviewParams:un,showTopContentWhenScrolling:!0,title:a("zi_create_MAX_Print_Text"),topContent:d,type:"text"}):s.a.createElement("div",{className:"Z4DSContentPanelBase",style:{paddingTop:16}},d)});var hn=a(873),pn=a(114),mn=a(232),gn=a(1213),fn=a(1490),bn=a(115);a(3077);const vn=Object(q.a)("Z4DSContentPanelUpload");class yn extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{showMobileUpload:!1,showMobileUploadInlineLogin:!1}),Object(Ot.a)(this,"handleUploadFinish",e=>{this.props.onAddImages([e.fileGuid])}),Object(Ot.a)(this,"launchMediaBrowser",()=>{const{uiProcess:e,zString:t}=this.props,a="stitch"===e;this.props.onShowMediaBrowser({additionalTip:t("zi_myzazzle_MediaBrowser_TipDesign"),onDone:e=>{e.length>0&&this.props.onAddImages(e)},rootFilter:a?mn.a.Stitch:void 0,showZazzleImages:this.props.showIcons,submitButtonContent:t("zi_create_design_addToDesign"),view:"MyImages"}),Object(G.h)(H.a.OpenedMediaBrowser("images"))}),Object(Ot.a)(this,"handleImageItemClick",e=>{this.props.onAddImages([e])})}componentDidMount(){this.props.imagePage.pageNum||this.props.onSearch("")}componentDidUpdate(e){!e.isLoggedIn&&this.props.isLoggedIn&&this.props.onSearch("")}render(){const{isLoggedIn:e,loading:t,imagePage:a,imageResults:n,inProgressUploads:i,onShowInlineLoginDialog:r,query:o,zString:l,zUrl:d}=this.props;let h;if("search"===t)h=s.a.createElement("div",{className:vn("&-loadingOverlay")},s.a.createElement(Oe.a,{hasOwnContainer:!0,isShown:!0,shieldColor:"transparent",size:"small",useTransition:!0}));else if(0===n.length)h=o?s.a.createElement("div",{className:vn("Z4DSContentPanelBase-noResults")},s.a.createElement(V.a,{className:vn("Z4DSContentPanelBase-noResultsImage","&-noResultsIcon"),iconName:be.a.AttImageOpen}),l("zi_create_Z4_DesignSpace_Search_NoResults"),s.a.createElement("br",null),l("zi_create_Z4_DesignSpace_Search_Uploads_NoResults")):s.a.createElement("div",{className:vn("Z4DSContentPanelBase-noResults")},s.a.createElement("img",{className:vn("Z4DSContentPanelBase-noResultsImage"),src:d("WwwAst","z4/pdp/z4-content-panel-images-empty.svg"),alt:l("zi_create_Z4_DesignSpace_Search_NoResults")}),l("zi_create_Z4_DesignSpace_Uploads_DragDrop"));else{const e=Math.ceil(a.numResults/a.pageSize),r=a.pageNum<e,o=[];i.forEach(e=>{o.push(s.a.createElement(Ja.a,{className:vn("&-imageItem"),id:e.uploadID,isSelectable:!1,isUploading:!0,key:e.uploadID,onCancelUpload:this.props.onCancelUpload,progress:e.progress,sourceHeight:e.previewSize&&e.previewSize.height,sourceWidth:e.previewSize&&e.previewSize.width,thumbnailUrl:e.previewImageUrl,zString:l}))}),n.forEach(e=>{const t=Object(c.c)(Object(v.a)().dynamicRealviewGetImageBase,{id:e.id,[$.a.RlvBackgroundPattern]:"checker",[$.a.RlvMaxDim]:100,[$.a.RlvSquareIt]:"fill"});o.push(s.a.createElement(Ja.a,{className:vn("&-imageItem"),id:e.id,isSelectable:!1,key:e.id,onClick:this.handleImageItemClick,sourceHeight:e.height,sourceWidth:e.width,thumbnailUrl:t,type:e.type,zString:l}))}),h=s.a.createElement(it.a,{className:vn("&-imageGridContainer"),hasMore:r,isLoading:!!t,loadingComponent:Oe.a,onLoad:this.props.onNextPage},s.a.createElement("div",{className:vn("&-imageGrid")},o))}return s.a.createElement(u.b,null,s.a.createElement("section",{className:vn("Z4DSContentPanelBase","&")},e?s.a.createElement(gn.a,{key:o?"hasvalue":"empty",className:vn("&-searchInput"),defaultValue:o,doSearch:this.props.onSearch,placeholder:l("zi_myzazzle_MyImages_SearchImages_title"),size:"large"}):s.a.createElement("div",{className:vn("&-signin")},l("zi_create_Z4_DesignSpace_Uploads_SignIn",{signInLink:s.a.createElement(Ya.a,{onClick:r},l("zi_create_Z4_DesignSpace_Uploads_SignIn_Link"))})),s.a.createElement(hn.a,{accept:Object(mn.b)(this.props.convertableImageTypes,this.props.imageTypes),buttonClassName:vn("Z4Button","&-uploaderButton"),buttonContent:s.a.createElement(s.a.Fragment,null,s.a.createElement(V.a,{iconName:be.a.DragDrop}),l("zi_common_Application_UploadImages")),className:vn("&-uploader"),createPreview:!0,onUploadFinish:this.handleUploadFinish,uploadParams:{[$.a.CategoryId]:"1"},uploaderID:"Z4DSContentPanelUploader"}),!Object(v.a)().isDisneyIframe&&s.a.createElement("button",{className:vn("Z4Button","&-uploaderButton","&-mobileUploadButton"),onClick:()=>{this.setState({showMobileUploadInlineLogin:!e,showMobileUpload:e})}},s.a.createElement(V.a,{iconName:be.a.MobileDevice}),l(e?"zi_myzazzle_Upload_From_Phone":"zi_myzazzle_Upload_From_Phone_SignIn")),h,s.a.createElement(X.a,{color:"hyperBlue",onClick:this.launchMediaBrowser,size:"fluid"},l("zi_create_Z4_DesignSpace_FullImageBrowser")),this.state.showMobileUpload&&_e.a.createPortal(s.a.createElement(Y.a,{className:vn("&-mobileUploadDialog"),onRequestClose:()=>{this.setState({showMobileUpload:!1})},showButtonBar:!1},s.a.createElement(fn.a,{doneUploading:()=>{this.props.onSearch(""),this.setState({showMobileUpload:!1})},isLoggedIn:e,showLogin:r})),document.body),this.state.showMobileUploadInlineLogin&&_e.a.createPortal(s.a.createElement(this.props.inlineLoginDialog,{onLoginSuccess:()=>{this.setState({showMobileUpload:!0,showMobileUploadInlineLogin:!1})},onRequestClose:()=>{this.setState({showMobileUploadInlineLogin:!1})}}),document.body)))}}Object(Ot.a)(yn,"contextType",oe.a);const _n=Object(l.b)(()=>{const e=Object(bn.a)();return(t,a)=>{const n=Object(Z.e)(t,a.designStateKey),i=Object(ue.d)(t,n.productStateKey),r=n.imageBrowser.page.entityIds,o=Object(Te.c)(i.areaGroupsInfo,n.design.activeArea),s=Object(Te.d)(i.areaGroupsInfo,n.design.activeArea);return{convertableImageTypes:s.convertableImageTypes,imagePage:n.imageBrowser.page,imageResults:e(t,r),imageTypes:s.imageTypes,inProgressUploads:Object(bn.j)(t),isLoggedIn:t.User.isLoggedIn,loading:n.imageBrowser.loading,query:n.imageBrowser.query,uiProcess:o.uiProcess,zString:Object(y.a)(t),zUrl:Object($.d)(t)}}},(e,t)=>({onAddImages:a=>{e(D.yb.addImages(t.designStateKey,{ids:a})),Object(G.h)(H.a.AddedImage())},onCancelUpload:t=>{e(pn.b.cancelUpload({uploadId:t}))},onNextPage:()=>{e(D.yb.imagesNextPage(t.designStateKey))},onSearch:a=>{e(D.yb.imagesSearch(t.designStateKey,{query:a})),Object(G.h)(H.a.SearchedImages())},onShowMediaBrowser:Object(Ye.b)(nt.b.showMediaBrowserDialog,e)}))(yn);var Sn=a(242),Dn=a(285),Cn=a(137);a(3081);const En=Object(q.a)("Z4DSErrorList"),On=e=>{const t=Object(y.e)(),{areas:a,errors:n}=wn(e),[i,r]=Object(m.a)();if(0===n.length)return null;const o=Math.max(...n.map(e=>e.type));return s.a.createElement("div",{className:En("&"),ref:i},s.a.createElement(Ia,{type:o}),s.a.createElement(Cn.a,{caretPosition:"bottom",includeCaret:!0,style:void 0},t("zi_create_Z4_DesignSpace_MightBeSomeIssues"),s.a.createElement("ul",{className:En("&-items")},n.map(n=>{const i=n.constraint.area&&a[n.constraint.area],r=n.constraint.objects.length>0,o=r&&i.objects[n.constraint.objects[0]];return r&&!o?null:s.a.createElement("li",{className:En("&-item"),key:`${n.constraint.area}_${n.constraint.type}_${n.constraint.objects.join()}`},o&&s.a.createElement("div",{className:En("&-layerPreview")},s.a.createElement(xa,{designObject:o,designStateKey:e.designStateKey}),s.a.createElement("div",{className:En("&-layerDescription")},Fa(o,t))),s.a.createElement("div",{className:En("&-message")},s.a.createElement("div",{className:En("&-messageBullet")},"â€¢"),s.a.createElement("div",null,n.displayMessages.object)))}))))},wn=e=>{const t=Object(o.useMemo)(U.m,[]);return Object(l.e)(a=>{const n=Object(C.b)(a,e.designStateKey),i=Object(ue.d)(a,n.productStateKey),r=t(a,i,n.design);return{areas:n.design.areas,errors:r}},l.c)};var jn=a(177);a(3080);const In=Object(q.a)("Z4DSContentTab"),Nn=s.a.forwardRef((e,t)=>s.a.createElement("button",{className:In("&",{"&--active":e.active},e.className),"data-tab":e.name,key:e.name,onClick:()=>e.onClick(e.name),ref:t},e.children||s.a.createElement(V.b,{name:e.icon}),s.a.createElement("div",{className:In("&-label")},e.label),e.includeBadge&&s.a.createElement("div",{className:In("&-badge")})));a(3079);const kn=Object(q.a)("Z4DSCreditsTab"),Tn=s.a.memo(s.a.forwardRef((e,t)=>{let{children:a}=e,i=Object(n.a)(e,["children"]);const r=Object(y.e)(),l=Object(ae.g)(i.designStateKey),[u,d]=Object(o.useState)({animate:!1,imgLoaded:!1,plus:l.numSources>1}),h=Object(jn.a)(l.numSources),[p,m]=Object(o.useState)({imgSrc:"",loaded:!1});Object(o.useEffect)(()=>{if(m(Object(F.a)(Object(F.a)({},p),{},{loaded:!1})),l.creditsTabProductId&&"0"!==l.creditsTabProductId){const e={pd:l.creditsTabProductId};Object(z.c)("/svc/z3/product/getProductLite",Object(ue.e)({productModelParams:e})).then(e=>{const t=e.data.product,a=e.data.entities.profiles[t.storeId],n=e.data.entities.profiles[t.designerId],i=t.isVizLite||t.isPartner?null==a?void 0:a.imageUrl:null==n?void 0:n.imageUrl,r=i?Object(c.c)(i,{max_dim:60}):void 0;m({imgSrc:r,loaded:!0})})}else m({imgSrc:"",loaded:!0})},[l.creditsTabProductId]),Object(o.useEffect)(()=>{h<l.numSources&&d({animate:!0,imgLoaded:!1,plus:!1})},[l.numSources]),Object(o.useEffect)(()=>{if(u.imgLoaded||p.loaded&&!p.imgSrc){const e=setTimeout(()=>{d({animate:!1,imgLoaded:!1,plus:!0})},1e3);return()=>{clearTimeout(e)}}},[u.imgLoaded,p.loaded&&!p.imgSrc]);const g=s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:kn("&-imageWrapper")},p.imgSrc?s.a.createElement("img",{className:kn("&-artistPic",{"&-pulse":u.imgLoaded}),src:p.imgSrc,onLoad:()=>{u.animate&&d({animate:!0,imgLoaded:!0,plus:!1})}}):s.a.createElement(V.a,{iconName:be.a.Account})),l.numSources>1&&u.plus&&s.a.createElement("div",{className:kn("&-plus","&-scaleUp")},"+",l.numSources-1));return s.a.createElement(Nn,Object(F.a)({ref:t,className:kn("&",{"&-flash":u.animate&&(u.imgLoaded||p.loaded&&!p.imgSrc)}),icon:"Account",label:l.numSources>1?r("zi_create_Z4_DesignSpace_Designers"):r("zi_common_Designer")},i),g)}));a(3078);const xn=["templates","marketplace","images","text","elements","icons","background","uploads","attributes","shared","products","formats","separator","layers","credits","separator","help"],zn=Object(q.a)("Z4DSContentTabs"),Pn=s.a.memo(e=>{const{designStateKey:t}=e,a=Object(o.useContext)(oe.a),n=Mn(e),i=Fn(e),{activeContentTab:r,isContentPanelExpanded:l,isLive:c}=i,u=Object(y.e)(),d=Object(ae.l)({designStateKey:t,flavor:a.flavor,isLive:c}),[p,g,b]=Object(m.a)(),[v,_,S]=Object(m.a)(),D=Object(o.useRef)(),[C,E]=Object(o.useState)(),O=Object(o.useRef)(),w=Object(o.useCallback)(()=>{O.current&&E({height:O.current.offsetHeight,top:O.current.offsetTop}),S()},[]);Object(f.a)(()=>{w(),b()});const j=C?{height:C.height+"px",top:0,transform:`translateY(${C.top}px)`}:void 0,I=xn.filter(e=>"separator"===e||d.has(e));Object(o.useEffect)(()=>{w(),D.current&&O.current&&Object(Dn.b)(D.current,O.current,{scrollToTop:!1})},[r,d]);const N=Object(Sn.a)(w,16);let k={display:"none"};g&&_&&(k={top:_.top-g.top});const T=Object(o.useCallback)(e=>{if(i.isTransferInProgress)return;const t={};r===e?t.isContentPanelExpanded=!l:(t.activeContentTab=e,"help"===e&&(t.activeHelpTab="guidelines")),n.updateSettings(t),"credits"===e?Object(ae.o)("ClickDesignersTab"):"layers"===e&&Object(ae.o)("ClickLayersTab")},[r,l,i.isTransferInProgress]);return s.a.createElement("div",{className:zn("&",{"&--expanded":l}),ref:p},s.a.createElement("div",{className:zn("&-scroller"),onScroll:N,ref:D},s.a.createElement("div",{className:zn("&-inner")},s.a.createElement("div",{className:zn("&-activeIndicator"),style:j}),I.map((function(e,a){if("separator"===e)return s.a.createElement("div",{key:e+a,className:zn("&-spacer")});const n={active:l&&e===r,name:e,onClick:T,ref:function(t){e===r&&(O.current=t),"layers"===e&&(v.current=t)}};let o;if("credits"===e)o=s.a.createElement(h.a,{key:e},s.a.createElement(Tn,Object(F.a)({designStateKey:t},n)));else{const t=Object(ae.d)(e,u);o=s.a.createElement(Nn,Object(F.a)({key:e,icon:t.icon,includeBadge:"shared"===e&&i.hasNewSharedAsset,label:t.label},n))}return o})))),s.a.createElement("div",{className:zn("&-errorWrapper"),style:k},s.a.createElement(On,{designStateKey:t})))}),Fn=e=>Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey),n=Object(ue.d)(t,a.productStateKey),i=Object(Qe.b)(a.design),r=i&&n.areaGroupsInfo[i.group],o=!r||r.allowPaths,s=Object(_.d)(t,Object(_.l)(n.stateKey)),l=!!s;return{activeContentTab:a.settings.activeContentTab,allowPaths:o,hasNewSharedAsset:a.settings.hasNewSharedAsset,isContentPanelExpanded:a.settings.isContentPanelExpanded,isInCollab:l,isLive:null==s?void 0:s.isLive,isTransferInProgress:a.settings.isTransferInProgress}},c.q),Mn=e=>{const t=Object(l.d)();return Object(o.useMemo)(()=>({updateSettings:a=>{t(Object(D.Kc)(e.designStateKey,a))}}),[e.designStateKey])},An=Object(q.a)("Z4DSContentPanels"),Rn=s.a.memo(e=>{const{canvasRect:t,designStateKey:a,eyeDropperActiveOnChange:n,eyeDropperClipEleRect:i,onFollow:r}=e,l=Object(o.useContext)(oe.a),c=Object(o.useContext)(ve.a),u=Object(o.useMemo)(()=>({theme:c.theme+"Dark"}),[c]),d=Ln(e),{activeContentTab:p,isContentPanelExpanded:m,isLive:g}=Bn(e),f=Object(ae.l)({designStateKey:a,flavor:l.flavor,isLive:g}),b=Object(y.e)();return Object(o.useEffect)(()=>{window.innerWidth<1024&&d.updateSettings({isContentPanelExpanded:!1})},[]),Object(o.useEffect)(()=>{function e(e){(e.ctrlKey||e.metaKey)&&[111,191].includes(e.which)&&d.updateSettings({isContentPanelExpanded:!m})}return document.body.addEventListener("keydown",e),()=>{document.body.removeEventListener("keydown",e)}},[d.updateSettings,m]),s.a.createElement(ve.a.Provider,{value:u},s.a.createElement("div",{className:An("&")},s.a.createElement(Pn,{designStateKey:e.designStateKey}),s.a.createElement(fe.CSSTransitionGroup,{className:An("&-panelWrapper"),transitionLeave:!1,transitionEnterTimeout:250,transitionName:An("&-transition-"),style:{width:m?void 0:0},onTransitionEnd:()=>{e.updateStageDimensions()}},s.a.createElement("div",{className:An("&-panel"),key:p},s.a.createElement(h.a,null,function(){switch(p){case"attributes":return s.a.createElement(Xe,{designStateKey:a});case"background":return s.a.createElement(gt,{designStateKey:a,canvasRect:t,eyeDropperClipEleRect:i,eyeDropperActiveOnChange:n});case"credits":return s.a.createElement(Ze,{designStateKey:a,onFollow:r,closeAndSwitchToLayers:()=>{d.updateSettings({activeContentTab:"layers"})}});case"elements":return s.a.createElement(_t,{designStateKey:a});case"formats":return s.a.createElement(Et,{designStateKey:a});case"help":return s.a.createElement(Rt,{designStateKey:a});case"icons":return s.a.createElement(Kt,{designStateKey:a});case"images":return s.a.createElement(Ht,{designStateKey:a});case"layers":return s.a.createElement(Ga,{designStateKey:a});case"marketplace":return s.a.createElement(Ha,{designStateKey:a});case"products":return s.a.createElement(Xa,{designStateKey:a});case"shared":return s.a.createElement(nn,{designStateKey:a});case"templates":return s.a.createElement(on,{designStateKey:a});case"text":return s.a.createElement(dn,{designStateKey:a});case"uploads":return s.a.createElement(_n,{designStateKey:a,inlineLoginDialog:e.inlineLoginDialog,onShowInlineLoginDialog:e.onShowInlineLoginDialog,showIcons:f.has("icons")})}}()),s.a.createElement("button",{className:An("&-collapseButton"),onClick:()=>{d.updateSettings({isContentPanelExpanded:!m})}},s.a.createElement(V.a,{iconName:m?be.a.Less:be.a.Greater,title:b(m?"zi_common_Application_Close":"zi_common_ZazzleWebHooks_Open")}))))))}),Bn=e=>Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey),n=Object(_.g)(e.designStateKey),i=Object(_.d)(t,n);return{activeContentTab:a.settings.activeContentTab,isContentPanelExpanded:a.settings.isContentPanelExpanded,isLive:null==i?void 0:i.isLive}},c.q),Ln=e=>{const t=Object(l.d)();return Object(o.useMemo)(()=>({updateSettings:a=>{t(Object(D.Kc)(e.designStateKey,a))}}),[e.designStateKey])};var Un=a(158),Kn=a.n(Un);a(3106);const Gn=Object(q.a)("Z4DSPropertiesPanelArea");class Hn extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"handleAreaChange",e=>{this.props.onChangeArea(this.props.activeAreaInfo.name,e)}),Object(Ot.a)(this,"handleFillChange",e=>{this.props.onSetFill({fillcolor:e})}),Object(Ot.a)(this,"renderAreaSelector",()=>{const{activeAreaGroupInfo:e,activeAreaInfo:t,areasInGroup:a,zString:n}=this.props,i=a.map(t=>({display:e.unfilteredDesignAreas[t].title,value:t}));return s.a.createElement("div",{className:Gn("&-areaSelectorRow",Sa("&-row","&-row--freeHeight"))},s.a.createElement("div",{className:Sa("&-rowLabel")},n("zi_create_Z4_DesignSpace_DesignPlacement")),s.a.createElement("div",{className:Sa("&-rowFreeHeightContents")},s.a.createElement(te.b,{onChange:this.handleAreaChange,options:Kn()(i,e=>e.display),value:t.name})))}),Object(Ot.a)(this,"renderFill",()=>{const{areaFill:e,canvasRect:t,designStateKey:a,eyeDropperOnActiveChange:n,eyeDropperClipEleRect:i,eyeDropperImgSrc:r,zString:o}=this.props;return s.a.createElement(wt.b,{className:Sa("&-accordion--hideCaret"),enabled:!1,isExpanded:!0,renderChildrenWhenCollapsed:!1,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.AttColorOpen})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_Z4_DesignSpace_BackgroundColor")),s.a.createElement("div",{className:Sa("&-colorPreview")},s.a.createElement("div",{style:{background:Ca(e)}})))},s.a.createElement(at,{allowTransparent:!0,designStateKey:a,eyeDropperClipEleRect:i,eyeDropperDesignStateKey:a,eyeDropperOnActiveChange:n,eyeDropperImgSrc:r,eyeDropperPositionRect:t,leftAlignSwatches:!0,numColumns:7,onChange:this.handleFillChange,value:e}))})}render(){const{activeAreaInfo:e,areasInGroup:t,metaSelection:a}=this.props;return s.a.createElement(Ea,{className:Gn("&"),designStateKey:this.props.designStateKey},"areaFill"===a&&e.allowFill&&this.renderFill(),"designArea"===a&&t.length>1&&this.renderAreaSelector())}}const Zn=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey),i=a.design.activeArea,r=Object(Te.c)(n.areaGroupsInfo,i),o=a.design.areas[i],s=(o.fill?o.fill.fillcolor:null)||"00ffffff",l=Yt()(a.design.areas,e=>e.group===r.name).map(e=>e.name);return{activeAreaGroupInfo:r,activeAreaInfo:r.unfilteredDesignAreas[i],areaFill:s,areasInGroup:l,metaSelection:a.settings.metaSelection,zString:Object(y.a)(e)}},(e,t)=>({onChangeArea:(a,n)=>{e(Object(D.Ib)(t.designStateKey,a,n)),Object(G.h)(H.a.ChangedDesignArea())},onSetFill:a=>{e(Object(D.lc)(t.designStateKey,a)),Object(G.h)(H.a.ChangedBackgroundColor())}}))(Hn);var Wn=a(2702),Vn=a(293),qn=a(445);a(3102);const $n=Object(q.a)("ImageFilterPickerList"),Xn=e=>{const t=Object(y.e)(),{filters:a,selectedIndex:n,showFilterName:i,useBodyScrollLockFixer:r}=e,o=s.a.createElement("div",{className:$n("&")},a.map((a,r)=>s.a.createElement("button",{className:$n("&-item",{"&-item--selected":r===n}),key:a.id,onClick:()=>{return t=a.id,void e.onSelectFilter(t);var t},ref:t=>{e.selectedFilterRef(r===n?t:null)}},i&&s.a.createElement("div",{className:$n("&-item-name")},a.displayName),s.a.createElement("img",{alt:t("zi_product_Preview"),className:$n("&-item-image"),src:a.previewUrl,width:90,height:90,style:{width:"90px",height:"90px"}}))));return r?s.a.createElement(u.b,null,o):o};Xn.defaultProps={useBodyScrollLockFixer:!0};a(3101);class Yn extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"myState",{selectedFilterIdByGroup:{}}),Object(Ot.a)(this,"selectedGroup",null),Object(Ot.a)(this,"selectedFilter",null),Object(Ot.a)(this,"handleSelectFilter",(e,t)=>{const a=this.myState.allGroups;if(t){a.find(e=>e.id===t)&&(this.myState.selectedFilterIdByGroup[t]=e)}this.myState.selectedFilterId=e,this.myState.selectedGroupId=t,this.props.onChange(e)}),Object(Ot.a)(this,"handleSelectGroup",e=>{if(this.myState.selectedGroupId!==e.id){let t=this.myState.selectedFilterIdByGroup[e.id];if(!t){const a=e.filters.length;t=e.filters[Math.floor(a/2)].id}this.myState.shouldScrollSelectedIntoView=!0,this.handleSelectFilter(t,e.id)}})}UNSAFE_componentWillMount(){this.init(this.props)}UNSAFE_componentWillReceiveProps(e){this.init(e)}componentDidUpdate(){this.scrollSelectedIntoView(!1)}componentDidMount(){this.scrollSelectedIntoView(!0)}render(){const{dbString:e,productType:t,simpleUI:a,useBodyScrollLockFixerForSimpleUi:n,zString:i,zUrl:o}=this.props,l=o("WwwAst","pd/imagefilters/zplaceholdertokenz.png");let{allFilters:d,allGroups:h,selectedFilterId:p,selectedFilterIdByGroup:m,selectedGroupId:g}=this.myState,f=d.findIndex(e=>e.id===(p||"")),b=-1;return a||(b=h.findIndex(e=>e.id===g),d=h[b].filters,p=m[g]||p,f=d.findIndex(e=>e.id===(p||""))),a?s.a.createElement("div",{className:r()("ImageFilterPicker","ImageFilterPicker--simpleUI",this.props.className)},s.a.createElement(Xn,{filters:d,onSelectFilter:this.handleSelectFilter,selectedFilterRef:e=>this.selectedFilter=e,selectedIndex:f,showFilterName:!0,useBodyScrollLockFixer:n})):s.a.createElement("div",{className:r()("ImageFilterPicker",this.props.className)},s.a.createElement("div",{className:"ImageFilterPicker-left"},s.a.createElement("div",{className:"ImageFilterPicker-title"},i("zi_product_ImageFilter_Step1")," ",i("zi_product_ImageFilter_Step1Desc")),s.a.createElement("div",{className:"ImageFilterPicker-description"},e(`product.string.${t}[imagefiltertip_step1]`)),s.a.createElement(u.b,null,s.a.createElement("div",{className:"ImageFilterPicker-content"},h.map((e,t)=>s.a.createElement("div",{className:r()("ImageFilterPicker-groupItem",{"ImageFilterPicker-groupItem--selected":t===b}),key:e.id+t,onClick:()=>this.handleSelectGroup(e),ref:e=>{t===b&&(this.selectedGroup=e)}},s.a.createElement("img",{className:"ImageFilterPicker-groupThumbnail",src:l.replace("zplaceholdertokenz",e.id),width:100,height:50,style:{width:"100px",height:"50px"}}),s.a.createElement("div",null,s.a.createElement("span",{className:"ImageFilterPicker-title"},e.displayName)," ",s.a.createElement(qn.a,{overlay:e.longDescription,overlayClassName:r()("ImageFilterPicker-groupTooltip"),overlayPlacement:"bottom"},s.a.createElement(V.a,{className:"ImageFilterPicker-title",iconName:V.a.Icon.QuestionStamp}))),s.a.createElement("div",{className:"ImageFilterPicker-description"},e.description)))))),s.a.createElement("div",{className:"ImageFilterPicker-right"},s.a.createElement("div",{className:"ImageFilterPicker-title"},i("zi_product_ImageFilter_Step2")," ",i("zi_product_ImageFilter_Step2Desc")),s.a.createElement("div",{className:"ImageFilterPicker-description"},e(`product.string.${t}[imagefiltertip_step2]`)),s.a.createElement("div",{className:"ImageFilterPicker-content"},s.a.createElement("img",{className:"ImageFilterPicker-mainImage",src:Object(c.c)(d[f].previewUrl,{max_dim:300}),width:300,height:300,style:{width:"300px",height:"300px"}}),s.a.createElement(Xn,{filters:d,onSelectFilter:e=>this.handleSelectFilter(e,g),selectedFilterRef:e=>this.selectedFilter=e,selectedIndex:f}))))}getPreviewUrl(e,t,a,n,i){return e?Object(c.c)(e.previewUrl.replace("{imageid}",t),{max_dim:a,size:`[${n},${n}]`,square_it:!0,checker:i}):Object(c.c)(Object(v.a)().dynamicRealviewGetImageBase,{imageId:t,max_dim:a,size:`[${n},${n}]`,square_it:!0})}init(e){const{areaGroupInfo:t,areaMinSize:a,image:n,imageFilters:i,imageFilterGroups:r,previewImageSize:o,requireFilter:s,zString:l}=e;let c=[],u=[];s||c.push({id:"",displayName:l("zi_product_ImageFilter_Name_None"),previewUrl:this.getPreviewUrl(null,n.imageid,o,a,!1)});let d=null,h=null;if(t.imageFilterPresetIds)for(let p of t.imageFilterPresetIds){const e=i[p],t={id:p,displayName:e.displayName,previewUrl:this.getPreviewUrl(e,n.imageid,o,a,s)};c.push(t);let l=u.find(t=>t.id===e.group);if(!l){const t=r[e.group];l={description:t.description,displayName:t.displayName,filters:[],id:e.group,longDescription:t.longDescription},u.push(l)}l.filters.push(t),p===n.filter&&(d=t.id,h=l.id,this.myState.selectedFilterIdByGroup[h]=d)}if(s&&!d){const e=u[0].filters.length;d=u[0].filters[Math.floor(e/2)].id,h=u[0].id,this.props.onChange(d)}Object.assign(this.myState,{allFilters:c,allGroups:u,selectedFilterId:d,selectedGroupId:h})}scrollSelectedIntoView(e=!1){(this.myState.shouldScrollSelectedIntoView||e)&&(this.selectedGroup&&(this.selectedGroup.parentElement.scrollTop=this.selectedGroup.offsetTop-(this.selectedGroup.parentElement.clientHeight-this.selectedGroup.clientHeight)/2),this.selectedFilter&&(this.selectedFilter.parentElement.scrollLeft=this.selectedFilter.offsetLeft-(this.selectedFilter.parentElement.clientWidth-this.selectedFilter.clientWidth)/2),this.myState.shouldScrollSelectedIntoView=!1)}}Object(Ot.a)(Yn,"defaultProps",{useBodyScrollLockFixerForSimpleUi:!0});var Qn=l.b((function(e,t){const a=Object(ue.d)(e,t.productStateKey),n=Object(Z.d)(e,a.designStateKey),i=n.areas[n.activeArea];let r=1;return i&&(r=Math.min(i.width,i.height)),{areaMinSize:r,dbString:Object(Vn.a)(e),imageFilters:e.entities.imageFilters,imageFilterGroups:e.entities.imageFilterGroups,productType:a.productType,zString:Object(y.c)(e),zUrl:Object($.b)(e)}}))(Yn),Jn=a(2559),ei=a(2700);a(3095);const ti=Object(q.a)("Z4DSFlipRow");class ai extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"labelId",Object(ka.i)("Z4DSFlipRow")),Object(Ot.a)(this,"flipX",()=>{this.props.onFlip(!0,!1),Object(G.h)(H.a.FlippedSelection("horz"))}),Object(Ot.a)(this,"flipY",()=>{this.props.onFlip(!1,!0),Object(G.h)(H.a.FlippedSelection("vert"))})}render(){const{selectedObjects:e,zString:t}=this.props,a=e.every(e=>e.flipx),n=e.every(e=>e.flipy);return s.a.createElement("div",{className:ti("&",Sa("&-row","&-row--freeHeight"))},s.a.createElement("div",{className:Sa("&-rowLabel"),id:this.labelId},t("zi_create_Z4_DesignSpace_Flip")),s.a.createElement(Oa.a,{active:a,bordered:!0,className:Sa("&-pillButton"),onClick:this.flipX},s.a.createElement(V.a,{iconName:V.a.Icon.FlipX,screenReaderText:t("zi_create_Z4_DesignSpace_FlipX")})),s.a.createElement(Oa.a,{active:n,bordered:!0,className:Sa("&-pillButton"),onClick:this.flipY},s.a.createElement(V.a,{iconName:V.a.Icon.FlipY,screenReaderText:t("zi_create_Z4_DesignSpace_FlipY")})),s.a.createElement("div",{className:ti("&-spacer")}))}}const ni=Object(l.b)((e,t)=>({selectedObjects:Object(Z.k)(e,t.designStateKey),zString:Object(y.a)(e)}),(e,t)=>({onFlip:(a,n)=>{e(Object(D.Qb)(t.designStateKey,a,n))}}))(ai);var ii=a(46),ri=a(2482),oi=a(224),si=a.n(oi),li=a(3098),ci=a.n(li),ui=a(209),di=a(183),hi=a(92);a(3099);const pi=Object(q.a)("Z4DSTemplatizer"),mi=Object(o.memo)(({designStateKey:e})=>{const t=Object(l.d)(),[a,n]=Object(o.useState)(!1),[i,r]=Object(o.useState)(!1),c=Object(Z.n)(),u=Object(l.e)(t=>{const a=Object(C.b)(t,e);return{selectedObjects:c(t,e),templates:a.design.templates}}),{selectedObjects:d,templates:h}=u,p=Object(jn.a)(d),[m,g]=Object(o.useState)(""),[f,b]=Object(o.useState)(""),v=Object(o.useRef)(),_=Object(y.e)(),S=d.every(e=>"image"===e.type),E=d.every(e=>"qrcode"===e.type),O=d.every(F),w=O&&d.every(e=>"image"===e.type),j=d.some(e=>!!e.showalways),I=d.some(e=>!F(e))&&d.some(F),N=(()=>{const e=d.find(F);if(e)return h.find(t=>t.urlkey===e.urlkey)})(),k=(()=>{if(N){const e=d.find(e=>e.urlkey===N.urlkey);if(e&&"image"===e.type)return e.fillmode}})(),T=(()=>{const e=h.find(e=>e.urlkey===f);if(N&&e&&!Object(ui.k)(e.type,N.type))return e.type})(),x=(()=>{const e=T;if(N&&e)return Object(ui.j)(e)?_("zi_create_Z4_DesignSpace_DuplicateTextTemplateName",{name:f}):Object(ui.i)(e)?_("zi_create_Z4_DesignSpace_DuplicateQRCodeTemplateName",{name:f}):_("zi_create_Z4_DesignSpace_DuplicateImageTemplateName",{name:f})})();function z(a){let{forcereplace:n,ppshow:i,title:r,urlkey:o}=a;N&&(n=ci()(n,N.forcereplace),i=ci()(i,N.ppshow),r=ci()(r,N.title),o=ci()(o,N.urlkey)),T&&(o=N.urlkey),t(Object(D.Bc)(e,{forcereplace:n,ppshow:i,title:r,urlkey:o},a.fillmode))}const P=Object(di.a)(z,500,{},!0);function F(e){return e.urlkey&&!!h.find(t=>t.urlkey===e.urlkey)}function M(){r(!0)}function A(){z({title:m,urlkey:f}),r(!1)}return Object(o.useEffect)(()=>{!i&&N&&(g(N.title),b(N.urlkey))},[N,i]),Object(o.useEffect)(()=>{si()((p||[]).map(e=>e.name),(d||[]).map(e=>e.name))&&n(!1)},[p,d]),Object(o.useEffect)(()=>{O&&a&&v.current.focus()},[O,a]),s.a.createElement("div",{className:pi("&")},s.a.createElement("div",{className:pi("&-toggleRow")},s.a.createElement(ri.a,{disabled:j||I,label:_("zi_create_DesignInspector_MakeATemplateLabel"),onChange:function(a){if(a){const e=function(e,t){const a=[];t&&t.forEach(t=>{if("image"===e&&t.type===ui.c.Image||"text"===e&&t.type===ui.c.Text||"qrcode"===e&&t.type===ui.c.QRCode){const e=t.urlkey.match(/(\d+)$/),n=e&&e.length>1?parseInt(e[1],10):NaN;Number.isNaN(n)||a.push(n)}});return Math.max(0,...a)+1}(S?"image":E?"qrcode":"text",h),t=_(S?"zi_create_design_imageTemplateTitle":E?"zi_create_design_qrCodeTemplateTitle":"zi_create_design_textTemplateTitle",{index:e}),a=_(S?"zi_create_design_imageTemplateKey":E?"zi_create_design_qrCodeTemplateKey":"zi_create_design_textTemplateKey",{index:e});z({fillmode:S?"none":void 0,forcereplace:!1,ppshow:!0,title:t,urlkey:a}),n(!0)}else t(Object(D.Bc)(e,{urlkey:""},null));Object(G.h)(H.a.ToggledTemplate())},value:O}),s.a.createElement(wa.a,{overlay:_(S?"zi_create_Z3_DesignTool_Template_ImageObject":E?"zi_create_Z3_DesignTool_Template_QRCodeObject":"zi_create_Z3_DesignTool_Template_TextObject")},s.a.createElement(V.a,{iconName:V.a.Icon.Help})," ",_("zi_common_LearnMore")),O&&s.a.createElement("div",{className:pi("&-inputGroup")},s.a.createElement(hi.a,{inputRef:v,label:_("zi_create_DesignInspector_ProductPageLabel"),onBlur:A,onChange:e=>{g(e),P({title:e})},onFocus:M,value:m}),s.a.createElement(hi.a,{label:_("zi_create_DesignInspector_URLParameterName"),maxLength:100,onBlur:A,onChange:e=>{b(e),P({urlkey:e})},onFocus:M,showError:!!x,validationErrors:x,value:f})),w&&s.a.createElement(te.b,{label:_("zi_create_DesignInspector_FitModeLabel"),onChange:e=>{z({fillmode:e}),Object(G.h)(H.a.ChangedFillMode())},options:[{display:_("zi_controls_TemplateLabelFitFillNone"),value:"none"},{display:_("zi_controls_TemplateLabelFitFillFit"),value:"fit"},{display:_("zi_controls_TemplateLabelFitFillFill"),value:"fill"}],value:k}),O&&s.a.createElement(s.a.Fragment,null,s.a.createElement(ri.a,{disabled:I,label:_("zi_create_DesignInspector_TemplateAllowPPageEdit"),onChange:e=>{z({ppshow:e}),Object(G.h)(H.a.ToggledPpShow())},value:N.ppshow}),s.a.createElement(wa.a,{overlay:_("zi_create_Z3_DesignTool_Template_AllowEditing")},s.a.createElement(V.a,{iconName:V.a.Icon.Help})," ",_("zi_common_LearnMore"))),w&&s.a.createElement("div",{className:pi("&-forceReplaceWrapper")},s.a.createElement(ri.a,{disabled:I,label:_("zi_create_DesignInspector_TemplateForceReplace"),onChange:e=>{z({forcereplace:e}),Object(G.h)(H.a.ToggledForceReplace())},value:N.forcereplace}),s.a.createElement(wa.a,{overlay:_("zi_create_DesignInspector_TemplateForceReplaceTooltip")},s.a.createElement(V.a,{iconName:V.a.Icon.Help})," ",_("zi_common_LearnMore")))))});a(3097);const gi=Object(q.a)("Z4DSMoreRow");class fi extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{isExpanded:Object(ii.c)(ii.a.Z4DT_MORE_ROW_EXPANDED)||!1}),Object(Ot.a)(this,"setShowAlways",e=>{this.props.onSetDesignObjectProps({showalways:e}),Object(G.h)(H.a.ToggledShowAlways())}),Object(Ot.a)(this,"setWhitesTransparency",e=>{this.props.onSetImageProps({whitetransparent:"all"===e,whitebtransparent:"border"===e}),"all"===e?Object(G.h)(H.a.ToggledWhiteTransparent()):"border"===e&&Object(G.h)(H.a.ToggledWhiteBorderTransparent())}),Object(Ot.a)(this,"toggleExpanded",()=>{const e=!this.state.isExpanded;this.setState({isExpanded:e}),Object(ii.e)(ii.a.Z4DT_MORE_ROW_EXPANDED,e)})}render(){const{activeAreaGroupInfo:e,canpublishIgnorePO:t,designStateKey:a,internalAdvanced:n,isSeller:i,selectedObjects:r,zString:o}=this.props,{isExpanded:l}=this.state,{isStandalone:c}=this.context,u=r.every(e=>"image"===e.type),d=r.every(e=>"text"===e.type),p=r.every(e=>"qrcode"===e.type),m=!c&&(t||n),g="stitch"===e.uiProcess&&u,f=(!c||i)&&(t||n)&&(u||p||d)&&!g,b=u&&"print"===e.uiProcess;if(!m&&!f&&!b)return null;const v=r.some(e=>!!e.urlkey),y=r[0],_=Object(Na.h)(y),S="image"===y.type&&y.whitetransparent,D="image"===y.type&&y.whitebtransparent,C=[{display:o("zi_create_Z3_ShowWhitesAsTransparent_none"),value:"none"},{display:s.a.createElement("span",null,o("zi_create_Z3_ShowWhitesAsTransparent_border"),s.a.createElement("span",{className:gi("&-new")},o("zi_myzazzle_MediaBrowser_MobileNew"))),value:"border"},{display:o("zi_create_Z3_ShowWhitesAsTransparent_all"),value:"all"}],E=s.a.createElement("div",null,o("zi_create_Z3_ShowWhitesAsTransparent_border_tooltip"),s.a.createElement("br",null),s.a.createElement("br",null),o("zi_create_Z3_ShowWhitesAsTransparent_all_tooltip"));return s.a.createElement(wt.b,{className:gi("&"),isExpanded:l,onRequestToggleExpanded:this.toggleExpanded,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Grippy})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_search_ColorFilter_MoreOptions")))},b&&s.a.createElement("div",{className:gi("&-row")},s.a.createElement(te.b,{label:s.a.createElement("strong",null,o("zi_create_Z3_ShowWhitesAsTransparent_label")),onChange:this.setWhitesTransparency,options:C,value:S?"all":D?"border":"none"}),s.a.createElement(wa.a,{overlay:E},s.a.createElement(V.a,{iconName:V.a.Icon.Help})," ",o("zi_common_LearnMore"))),m&&s.a.createElement("div",{className:gi("&-row")},s.a.createElement(ri.a,{disabled:v,label:o("zi_create_DesignInspector_ShowAlwaysLabel"),onChange:this.setShowAlways,value:_}),s.a.createElement(wa.a,{overlay:o("zi_create_Z3_DesignTool_Template_Permanent")},s.a.createElement(V.a,{iconName:V.a.Icon.Help})," ",o("zi_common_LearnMore"))),f&&s.a.createElement(h.a,null,s.a.createElement("div",{className:gi("&-row")},s.a.createElement(mi,{designStateKey:a,key:r.map(e=>e.name).join()}))))}}Object(Ot.a)(fi,"contextType",oe.a);const bi=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(Z.k)(e,t.designStateKey);return{activeAreaGroupInfo:Object(C.b)(e,a.productStateKey).areaGroupsInfo[Object(Qe.b)(a.design).group],canpublishIgnorePO:a.design.canpublishIgnorePO,internalAdvanced:e.page.internalEditMode,isSeller:e.User.isSeller,selectedObjects:n,zString:Object(y.a)(e)}},(e,t)=>({onSetDesignObjectProps:a=>{e(Object(D.jc)(t.designStateKey,a))},onSetImageProps:a=>{e(Object(D.oc)(t.designStateKey,a))}}))(fi);var vi=a(1728),yi=a(2481);a(3094);const _i=Object(q.a)("Z4DSRotateRow");class Si extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"labelId",Object(ka.i)("Z4DSRotateRow")),Object(Ot.a)(this,"nudgeCcw",e=>{const t=Object(ui.f)(e,45,15/45,2);this.props.onRotate(t,!1),Object(G.h)(H.a.RotatedSelection("ccw"))}),Object(Ot.a)(this,"nudgeCw",e=>{const t=Object(ui.f)(e,-45,15/45,2);this.props.onRotate(t,!1),Object(G.h)(H.a.RotatedSelection("cw"))}),Object(Ot.a)(this,"setRotation",e=>{this.props.onRotate(-e,!0),Object(G.h)(H.a.RotatedSelection(e>0?"cw":"ccw",!0))})}render(){const{selectedObjects:e,zString:t}=this.props,a=e[0],n=-Object(vi.f)(a.absmatrix),i=e.length>1,r=i?0:n;return s.a.createElement("div",{className:_i("&",Sa("&-row","&-row--freeHeight"))},s.a.createElement("div",{className:Sa("&-rowLabel"),id:this.labelId},t("zi_create_Z3_DesignTool_Rotate")),s.a.createElement(Oa.a,{bordered:!0,className:_i("&-rotateCcw",Sa("&-pillButton")),onClick:this.nudgeCcw},s.a.createElement(V.a,{iconName:V.a.Icon.RotateZ4,screenReaderText:t("zi_create_RotateCcw")})),s.a.createElement(Oa.a,{bordered:!0,className:Sa("&-pillButton"),onClick:this.nudgeCw},s.a.createElement(V.a,{iconName:V.a.Icon.RotateZ4,screenReaderText:t("zi_create_RotateCw")})),s.a.createElement(yi.a,{ariaLabelledby:this.labelId,disabled:i,onChange:this.setRotation,value:r}))}}const Di=Object(l.b)((e,t)=>({selectedObjects:Object(Z.k)(e,t.designStateKey),zString:Object(y.a)(e)}),(e,t)=>({onRotate:(a,n)=>{e(Object(D.Nc)(t.designStateKey,{abs:n,rotate:a}))}}))(Si);a(3093);const Ci=Object(q.a)("Z4DSScaleRow");class Ei extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{}),Object(Ot.a)(this,"nudgeBigger",e=>{const t=1+Object(ui.f)(e,.1);this.props.onXFormDesignObjects({scale:[t,t]}),Object(G.h)(H.a.NudgedLarger())}),Object(Ot.a)(this,"nudgeSmaller",e=>{const t=1-Object(ui.f)(e,.1);this.props.onXFormDesignObjects({scale:[t,t]}),Object(G.h)(H.a.NudgedSmaller())})}render(){const{disabled:e,disabledLarger:t,disabledSmaller:a,zString:n}=this.props;return s.a.createElement("div",{className:Ci("&",Sa("&-row"))},s.a.createElement("div",{className:Sa("&-rowLabel")},n("zi_create_Z3_DesignTool_Scale")),s.a.createElement(Oa.a,{bordered:!0,className:Sa("&-pillButton"),disabled:e||a,onClick:this.nudgeSmaller},s.a.createElement(V.a,{iconName:V.a.Icon.SizeDecrease,screenReaderText:n("zi_create_DesignInspector_ScaleSmaller")})),s.a.createElement(Oa.a,{bordered:!0,className:Sa("&-pillButton"),disabled:e||t,onClick:this.nudgeBigger},s.a.createElement(V.a,{iconName:V.a.Icon.SizeIncrease,screenReaderText:n("zi_create_DesignInspector_ScaleLarger")})),s.a.createElement("div",{className:Ci("&-spacer")}))}}const Oi=Object(l.b)(e=>({zString:Object(y.a)(e)}),(e,t)=>({onXFormDesignObjects:a=>{e(Object(D.Nc)(t.designStateKey,a))}}))(Ei);a(3100);const wi=Object(q.a)("Z4DSPropertiesPanelImage");class ji extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"getCrop",void 0),Object(Ot.a)(this,"changeImage",()=>{const{activeAreaGroupInfo:e}=this.props,t="stitch"===e.uiProcess;this.props.onShowMediaBrowser({maxFiles:1,onDone:e=>{const{onUpdateSettings:t}=this.props;this.props.onSetImageObjectProps({imageid:e[0]}),Object(G.h)(H.a.ChangedImage()),t({isChangingImage:!1})},rootFilter:t?mn.a.Stitch:void 0,showZazzleImages:e.allowPaths,view:"MyImages"})}),Object(Ot.a)(this,"renderStitchColorizerDialog",()=>{const{designStateKey:e,selectedObjects:t}=this.props,a=t[0];return s.a.createElement(ei.a,{designObject:a,designStateKey:e,onCancel:this.toggleStitchColorizerDialog,onOk:this.toggleStitchColorizerDialog})}),Object(Ot.a)(this,"renderCropDialog",()=>{const{selectedObjects:e,zString:t}=this.props,a=e[0];return s.a.createElement(Y.a,{className:wi("&-cropDialog"),includeHeader:!1,okText:t("zi_create_design_tooltip_apply"),onCancel:this.toggleCropDialog,onOk:this.setCrop,onRequestClose:this.toggleCropDialog},s.a.createElement("div",{className:wi("&-cropPromptTitle")},t("zi_controls_CropPrompt")),s.a.createElement("div",{className:wi("&-cropDialogCropContainer")},s.a.createElement(Jn.a,{exposeGetCrop:e=>{this.getCrop=e},minHeightFrac:.05,minWidthFrac:.05,imageId:a.imageid,imagePlacementInfo:{crop:Wn.a(a)},imageType:"imageId"})))}),Object(Ot.a)(this,"renderHalftoneDialog",()=>{const{activeAreaGroupInfo:e,selectedObjects:t,productStateKey:a,zString:n}=this.props,i=t[0];return s.a.createElement(Y.a,{className:wi("&-halftoneDialog"),includeHeader:!1,okText:n("zi_create_design_tooltip_apply"),onCancel:this.toggleHalftoneDialog,onOk:this.toggleHalftoneDialog,onRequestClose:this.toggleHalftoneDialog,showCancel:!1},s.a.createElement(Qn,{areaGroupInfo:e,image:i,onChange:this.setImageFilter,previewImageSize:90,productStateKey:a,requireFilter:!0,simpleUI:!1}))}),Object(Ot.a)(this,"setCrop",()=>{const e=this.getCrop();this.props.onSetImageObjectProps({crop:e}),this.toggleCropDialog(),Object(G.h)(H.a.CroppedImage())}),Object(Ot.a)(this,"setFill",()=>{this.props.onLayout(["fill"],["fillto=bleed"]),Object(G.h)(H.a.FilledSelection())}),Object(Ot.a)(this,"setFit",()=>{this.props.onLayout(["fit"],["fillto=bleed"]),Object(G.h)(H.a.FitSelection())}),Object(Ot.a)(this,"setImageFilter",e=>{this.props.onSetImageObjectProps({filter:e}),Object(G.h)(H.a.ChangedImageFilter())}),Object(Ot.a)(this,"toggleCropDialog",()=>{const{isCroppingImage:e,onUpdateSettings:t}=this.props;t({isCroppingImage:!e})}),Object(Ot.a)(this,"toggleHalftoneDialog",()=>{const{isShowingHalftoneDialog:e,onUpdateSettings:t}=this.props;t({isShowingHalftoneDialog:!e})}),Object(Ot.a)(this,"toggleStitchColorizerDialog",()=>{const{isShowingStitchColorizerDialog:e,onUpdateSettings:t}=this.props;t({isShowingStitchColorizerDialog:!e})})}componentDidUpdate(e){!e.isChangingImage&&this.props.isChangingImage&&this.changeImage()}render(){const{activeAreaGroupInfo:e,canPublish:t,designStateKey:a,isCroppingImage:n,isShowingHalftoneDialog:i,isShowingStitchColorizerDialog:r,productStateKey:o,selectedObjects:l,zString:c}=this.props,u=l[0],d="halftone"===e.uiProcess,h="stitch"===e.uiProcess,p=s.a.createElement("div",null,n&&this.renderCropDialog(),i&&this.renderHalftoneDialog(),r&&this.renderStitchColorizerDialog()),m=l.some(e=>e.ispartner)&&!t,g=l.some(e=>e.showalways),f=!d&&!h&&!m,b=Na.f(l);return s.a.createElement(Ea,{beforeComponentEndContent:p,className:wi("&"),designStateKey:a},s.a.createElement(Oa.a,{className:Sa("&-row"),disabled:u.showalways||m,onClick:this.changeImage},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.AddImage})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_DesignTool_PodChangeImageLink"))),"Done"===u.state&&s.a.createElement(Oa.a,{className:Sa("&-row"),onClick:this.toggleStitchColorizerDialog},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.ShapeFill})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_Z4_DesignSpace_ChangeColors"))),f?s.a.createElement(wt.b,{renderChildrenWhenCollapsed:!1,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Filter})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_search_Filters")))},s.a.createElement(Qn,{areaGroupInfo:e,className:wi("&-filterPicker--simple"),image:u,onChange:this.setImageFilter,previewImageSize:90,productStateKey:o,requireFilter:!1,simpleUI:!0,useBodyScrollLockFixerForSimpleUi:!1})):s.a.createElement(Oa.a,{className:Sa("&-row"),disabled:m||h,onClick:this.toggleHalftoneDialog},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Filter})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_search_Filters"))),s.a.createElement(Oa.a,{className:Sa("&-row"),disabled:l.length>1||g||m||h,onClick:this.toggleCropDialog},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.CropZ4})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_product_Photoprint_Multi_CropLink"))),s.a.createElement("div",{className:Sa("&-duplexRow")},s.a.createElement(Oa.a,{className:Sa("&-row"),onClick:this.setFill},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Fill})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_Fill"))),s.a.createElement(Oa.a,{className:Sa("&-row"),onClick:this.setFit},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Fit})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_Fit")))),s.a.createElement(Oi,{designStateKey:a,disabledSmaller:b&&b[0]>=1,disabledLarger:b&&b[1]<=1}),s.a.createElement(Di,{designStateKey:a}),s.a.createElement(ni,{designStateKey:a}),s.a.createElement(bi,{designStateKey:a}))}}const Ii=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey),i=a.design.activeArea;return{activeAreaGroupInfo:Object(Te.c)(n.areaGroupsInfo,i),canPublish:a.design.canpublish,isCroppingImage:a.settings.isCroppingImage,isChangingImage:a.settings.isChangingImage,isShowingHalftoneDialog:a.settings.isShowingHalftoneDialog,isShowingStitchColorizerDialog:a.settings.isShowingStitchColorizerDialog,productStateKey:n.stateKey,zString:Object(y.a)(e)}},(e,t)=>({onLayout:(a,n)=>{e(Object(D.Wb)(t.designStateKey,a,n))},onSetImageObjectProps:a=>{e(Object(D.oc)(t.designStateKey,a))},onShowMediaBrowser:Object(Ye.b)(nt.b.showMediaBrowserDialog,e),onUpdateSettings:a=>{e(Object(D.Kc)(t.designStateKey,a))}}))(ji);a(3105);const Ni=Object(q.a)("Z4DSPropertiesPanelMixed");class ki extends s.a.PureComponent{render(){const{designStateKey:e}=this.props;return s.a.createElement(Ea,{className:Ni("&"),designStateKey:e},s.a.createElement(Di,{designStateKey:e}),s.a.createElement(ni,{designStateKey:e}),s.a.createElement(Oi,{designStateKey:e}),s.a.createElement(bi,{designStateKey:e}))}}a(3107);const Ti=Object(q.a)("Z4DSPropertiesPanelNone");class xi extends s.a.Component{render(){const{blank:e,designIsEmpty:t,zString:a,zUrl:n}=this.props,i=a(t?"zi_create_Z4_DesignSpace_Properties_Empty":"zi_create_Z4_DesignSpace_Properties_None");return s.a.createElement(Ea,{className:Ti("&"),designStateKey:this.props.designStateKey},s.a.createElement("div",{className:Ti("&-wrapper")},!e&&s.a.createElement(s.a.Fragment,null,s.a.createElement("img",{className:Ti("&-image"),src:n("WwwAst",t?"z4/pdp/z4-properties-panel-empty.png":"z4/pdp/z4-properties-panel-none.png")}),s.a.createElement("p",{className:Ti("&-cta")},i))))}}const zi=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey);return{designIsEmpty:0===Object(Qe.d)(a.design).length,zString:Object(y.a)(e),zUrl:Object($.d)(e)}})(xi);var Pi=a(99),Fi=a.n(Pi),Mi=a(600),Ai=a(700);a(3103);const Ri=Object(q.a)("Z4DSPropertiesPanelPath");class Bi extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{activeAccordion:null}),Object(Ot.a)(this,"setCornerRadius",e=>{this.props.onSetPathObjectProps({cornerradius:e}),Object(G.h)(H.a.ChangedCornerRadius())}),Object(Ot.a)(this,"revertToOriginal",()=>{this.props.onSetPathObjectProps({colors:[],fillcolor:"",strokecolor:"",strokewidth:0}),Object(G.h)(H.a.ResetPathColors())}),Object(Ot.a)(this,"setFill",()=>{this.props.onLayout(["fill"],["fillto=bleed"]),Object(G.h)(H.a.FilledSelection())}),Object(Ot.a)(this,"setFillColor",e=>{this.props.onSetPathObjectProps({fillcolor:e}),Object(G.h)(H.a.ChangedFillColor())}),Object(Ot.a)(this,"setFit",()=>{this.props.onLayout(["fit"],["fillto=bleed"]),Object(G.h)(H.a.FitSelection())}),Object(Ot.a)(this,"setPaletteColor",(e,t)=>{const a=this.props.selectedObjects[0].colors.slice();a[e]=t,this.props.onSetPathObjectProps({colors:a}),Object(G.h)(H.a.ChangedPathColor())}),Object(Ot.a)(this,"setStrokeColor",e=>{const{onSetPathObjectProps:t,selectedObjects:a}=this.props,n={strokecolor:e};1===a.length&&e&&0===a[0].fill.strokewidth&&(n.strokewidth=1),t(n),Object(G.h)(H.a.ChangedStrokeColor())}),Object(Ot.a)(this,"setStrokeWidth",e=>{this.props.onSetPathObjectProps({strokewidth:e}),Object(G.h)(H.a.ChangedStrokeWidth())}),Object(Ot.a)(this,"toggleAccordion",e=>{const t=this.state.activeAccordion!==e;this.setState({activeAccordion:t?e:null})})}render(){const{canvasRect:e,designStateKey:t,eyeDropperClipEleRect:a,eyeDropperOnActiveChange:n,eyeDropperImgSrc:i,selectedObjects:r,zString:o}=this.props,{activeAccordion:l}=this.state,c=r[0],u=r.every(e=>Object(Ai.b)(e))&&r.some(e=>Object(Ai.a)(e)),d=r.every(e=>!Object(Ai.c)(e)),h=d&&r.some(e=>"lineH"!==e.shape),p=1===r.length&&Object(Ai.c)(c),m=r.every(e=>Object(Ai.d)(e)),g=Fi()(r.map(e=>Object(Mi.a)(e.fill))),f=1===g.length?g[0]:"",b=Fi()(r.map(e=>Object(Mi.b)(e.fill))),v=1===b.length?b[0]:"",y=Fi()(r.map(e=>Object(Mi.c)(e.fill))),_=1===y.length?y[0]:0,S=Fi()(r.map(e=>e.cornerradius)),D=1===S.length?S[0]:0;return s.a.createElement(Ea,{className:Ri("&"),designStateKey:t},u&&s.a.createElement(Oa.a,{className:Sa("&-row",Ri("&-revertButton")),onClick:this.revertToOriginal},s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_Z4_DesignSpace_Properties_RevertToOriginal"))),d&&s.a.createElement(s.a.Fragment,null,h&&s.a.createElement(wt.b,{className:Sa("&-accordion--hideCaret"),isExpanded:"fill"===l,onRequestToggleExpanded:()=>this.toggleAccordion("fill"),title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.ShapeFill})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_design_path_fillcolor")),s.a.createElement("div",{className:Sa("&-colorPreview",!f&&"&-colorPreview--none")},s.a.createElement("div",{key:f,style:{background:Ca(f)}})))},s.a.createElement(at,{allowTransparent:!0,eyeDropperClipEleRect:a,eyeDropperDesignStateKey:t,eyeDropperOnActiveChange:n,eyeDropperPositionRect:e,designStateKey:t,eyeDropperImgSrc:i,numColumns:7,onChange:this.setFillColor,showResetLink:u,value:f})),s.a.createElement(wt.b,{className:Sa("&-accordion--hideCaret"),isExpanded:"stroke"===l,onRequestToggleExpanded:()=>this.toggleAccordion("stroke"),renderChildrenWhenCollapsed:!1,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Stroke})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_design_path_strokecolor")),s.a.createElement("div",{className:Sa("&-colorPreview",!v&&"&-colorPreview--none")},s.a.createElement("div",{key:v,style:{background:Ca(v)}})))},s.a.createElement(at,{designStateKey:t,eyeDropperClipEleRect:a,eyeDropperOnActiveChange:n,eyeDropperImgSrc:i,eyeDropperPositionRect:e,numColumns:7,onChange:this.setStrokeColor,showResetLink:u,value:v})),s.a.createElement("label",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.LineWeight})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_design_path_strokewidth")),s.a.createElement(yi.a,{disabled:!v,min:0,onChange:this.setStrokeWidth,value:_})),m&&s.a.createElement("label",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Radius})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_design_path_cornerradius")),s.a.createElement(yi.a,{min:0,onChange:this.setCornerRadius,value:D}))),p&&c.colors&&c.colors.map((r,d)=>s.a.createElement(wt.b,{className:Sa("&-accordion--hideCaret"),isExpanded:l===d,onRequestToggleExpanded:()=>this.toggleAccordion(d),key:d,renderChildrenWhenCollapsed:!1,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.AttColorOpen})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_design_path_color_index",{index:c.colors.length>1?d+1:""})),s.a.createElement("div",{className:Sa("&-colorPreview",!r&&"&-colorPreview--none")},s.a.createElement("div",{key:r,style:{background:Ca(r)}})))},s.a.createElement(at,{designStateKey:t,eyeDropperClipEleRect:a,eyeDropperOnActiveChange:n,eyeDropperImgSrc:i,eyeDropperPositionRect:e,numColumns:7,onChange:e=>this.setPaletteColor(d,e),showResetLink:u,value:r}))),s.a.createElement("div",{className:Sa("&-duplexRow")},s.a.createElement(Oa.a,{className:Sa("&-row"),onClick:this.setFill},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Fill})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_Fill"))),s.a.createElement(Oa.a,{className:Sa("&-row"),onClick:this.setFit},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Fit})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_Fit")))),s.a.createElement(Oi,{designStateKey:t}),s.a.createElement(Di,{designStateKey:t}),s.a.createElement(ni,{designStateKey:t}),s.a.createElement(bi,{designStateKey:t}))}}const Li=Object(l.b)((e,t)=>({productStateKey:Object(C.b)(e,t.designStateKey).productStateKey,zString:Object(y.a)(e)}),(e,t)=>({onLayout:(a,n)=>{e(Object(D.Wb)(t.designStateKey,a,n))},onSetPathObjectProps:a=>{e(Object(D.qc)(t.designStateKey,a))}}))(Bi);a(2802);const Ui=s.a.lazy(()=>Promise.all([a.e(28),a.e(39),a.e(409)]).then(a.bind(null,3601))),Ki=Object(q.a)("Z4DSPropertiesPanelProduct"),Gi=e=>{const t=Object(y.e)(),a=Object(l.d)(),n=Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey),n=Object(ue.d)(t,a.productStateKey);return{isDigital:n.isDigital,productStateKey:n.stateKey,productTypeSingularName:n.productTypeSingularName}},l.c);return s.a.createElement(Ea,{className:Ki("&"),designStateKey:e.designStateKey},s.a.createElement("div",{className:Ki("&-content")},s.a.createElement("div",{className:Ki("&-productDetails")},n.productTypeSingularName&&s.a.createElement("h2",null,n.productTypeSingularName),!n.isDigital&&s.a.createElement(Se.a,{href:"#",onClick:t=>{t.preventDefault(),a(Object(D.Kc)(e.designStateKey,{isShowingAboutThisProduct:!0}))}},t("zi_common_Signin_SeeDetails"))),s.a.createElement("div",{className:Ki("&-attributesWrapper")},s.a.createElement(o.Suspense,{fallback:s.a.createElement("div",null)},s.a.createElement(Ui,{productStateKey:n.productStateKey})))))};a(3104);const Hi=Object(q.a)("Z4DSPropertiesPanelQRCode");class Zi extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{activeAccordion:null}),Object(Ot.a)(this,"setColor",e=>{this.props.onSetQRCodeProps({colors:["",e]}),Object(G.h)(H.a.ChangedQRCodeColor())}),Object(Ot.a)(this,"toggleColorAccordion",()=>{const e="color"!==this.state.activeAccordion;this.setState({activeAccordion:e?"color":null})})}render(){const{canvasRect:e,designStateKey:t,eyeDropperClipEleRect:a,eyeDropperOnActiveChange:n,eyeDropperImgSrc:i,selectedObjects:r,zString:o}=this.props,{activeAccordion:l}=this.state,c=r[0],u=c.colors[1];return s.a.createElement(Ea,{className:Hi("&"),designStateKey:t},s.a.createElement(Oa.a,{className:Sa("&-row"),disabled:c.showalways||r.length>1,onClick:this.props.onEditQRCode},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Pencil})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_EditURL"))),s.a.createElement(wt.b,{className:Sa("&-accordion--hideCaret"),isExpanded:"color"===l,onRequestToggleExpanded:this.toggleColorAccordion,renderChildrenWhenCollapsed:!1,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.AttColorOpen})),s.a.createElement("div",{className:Sa("&-rowLabel")},o("zi_create_Z4_DesignSpace_BackgroundColor")),s.a.createElement("div",{className:Sa("&-colorPreview")},s.a.createElement("div",{style:{background:Ca(u)}})))},s.a.createElement(at,{designStateKey:t,eyeDropperClipEleRect:a,eyeDropperDesignStateKey:t,eyeDropperOnActiveChange:n,eyeDropperImgSrc:i,eyeDropperPositionRect:e,numColumns:7,onChange:this.setColor,value:u})),s.a.createElement(Oi,{designStateKey:t}),s.a.createElement(Di,{designStateKey:t}),s.a.createElement(bi,{designStateKey:t}))}}const Wi=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey),i=a.design.activeArea;return{activeAreaGroupInfo:Object(Te.c)(n.areaGroupsInfo,i),zString:Object(y.a)(e)}},(e,t)=>({onEditQRCode:()=>{e(Object(D.Kc)(t.designStateKey,{isEditingQRCode:!0}))},onRotate:(a,n)=>{e(Object(D.Nc)(t.designStateKey,{abs:n,rotate:a}))},onSetQRCodeProps:a=>{e(Object(D.sc)(t.designStateKey,a))}}))(Zi);var Vi=a(303),qi=a.n(Vi),$i=a(2696),Xi=a(1389),Yi=a.n(Xi),Qi=a(3092),Ji=a.n(Qi);class er extends s.a.PureComponent{constructor(...e){super(...e),Object(Ot.a)(this,"onFontClick",()=>{this.props.onClick(this.props.name)})}render(){const{displayName:e,favorite:t,name:a,onFavorite:n,selected:i,src:o,srcSet:l,zString:c}=this.props;return s.a.createElement("div",{className:r()(Ji.a.root,t&&Ji.a.root__favorite,i&&Ji.a.root__selected)},s.a.createElement("button",{className:Ji.a.favoriteButton,onClick:()=>{null==n||n(a,!t)},title:c(t?"zi_common_Unfavorite":"zi_common_FavoriteVerb")},s.a.createElement(V.b,{className:Ji.a.star,name:"Star"})),s.a.createElement("button",{className:Ji.a.fontButton,onClick:this.onFontClick,title:e},s.a.createElement("img",{alt:"",src:o,srcSet:l})))}}a(3091);const tr=Object(q.a)("FontPickerSubcategory");class ar extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"rootNode",void 0),Object(Ot.a)(this,"activeFont",void 0),Object(Ot.a)(this,"scrollToActiveFont",()=>{if(this.activeFont){const e=Object(ye.findDOMNode)(this.activeFont);if(!e)return;const t=e.getBoundingClientRect().height,a=e.offsetTop-this.rootNode.getBoundingClientRect().height/2+t/2;Yi.a.top(this.rootNode,a,{duration:200})}else Yi.a.top(this.rootNode,0,{duration:200})})}componentDidMount(){this.scrollToActiveFont()}componentDidUpdate(e){this.props.activeFontIndex>=0&&this.props.activeFontIndex!==e.activeFontIndex&&this.scrollToActiveFont()}render(){const{activeFontIndex:e,fonts:t,subcategories:a}=this.props,n={};t.forEach(e=>{e.groups.forEach(t=>{n[t]||(n[t]=[]),n[t].push(e)})});const i=e>=0?t[e]:null,r=Kn()(a,["displayName"]);return s.a.createElement("ul",{className:tr("&"),ref:e=>{this.rootNode=e}},r.map(e=>s.a.createElement("div",{className:tr("&-group"),key:e.name},s.a.createElement("div",{className:tr("&-title")},e.displayName),s.a.createElement("div",null,n[e.name].map(e=>s.a.createElement(er,Object(F.a)({key:e.name,ref:t=>{i&&i.name===e.name&&(this.activeFont=t)}},e)))))))}}Object(Ot.a)(ar,"defaultProps",{fonts:[],subcategories:[]});var nr=a(2697),ir=a(188),rr=a.n(ir),or=a(423),sr=a.n(or),lr=a(3096),cr=a.n(lr);const ur=s.a.memo(e=>{let{deadzone:t,disabled:a,max:i=1/0,min:l=-1/0,neutralValue:c=0,precision:u=2,step:d=1}=e,h=Object(n.a)(e,["deadzone","disabled","max","min","neutralValue","precision","step"]);const[p,m]=Object(o.useState)(!1),[g,f]=Object(o.useState)(h.value),b=Object(o.useCallback)(()=>{m(!1)},[]),v=Object(o.useCallback)(()=>{m(!0)},[]),y=Object(o.useCallback)(e=>{e=sr()(e,l,i),e=rr()(e,u),t&&c<e+t&&e<c+t&&(e=c),f(e),h.onChange(e)},[t,i,l,c,u,h.onChange]),_=Object(o.useCallback)(e=>{const t=parseFloat(e.currentTarget.value);y(t)},[y]);return Object(o.useEffect)(()=>{p||f(h.value)},[p,h.value]),s.a.createElement("div",{className:r()(cr.a.root,a&&cr.a.root__disabled)},s.a.createElement("input",{"aria-labelledby":h.ariaLabelledby,className:cr.a.range,disabled:a,max:i,min:l,onBlur:b,onChange:_,onFocus:v,step:d,type:"range",value:g}),s.a.createElement(yi.a,{ariaLabelledby:h.ariaLabelledby,className:cr.a.numberInput,disabled:a,max:i,min:l,onBlur:b,onChange:y,onFocus:v,precision:u,step:d,value:g}))});a(3090);const dr=Object(q.a)("Z4DSPropertiesPanelText"),hr=Object(q.a)("Z4DSPropertiesPanelText_FontPicker");class pr extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{activeAccordion:null,fontPickerActiveCategory:"all"}),Object(Ot.a)(this,"curvatureLabel",Object(ka.i)("Z4DSPropertiesPanelText-curvature")),Object(Ot.a)(this,"letterSpacingLabel",Object(ka.i)("Z4DSPropertiesPanelText-letterSpacing")),Object(Ot.a)(this,"lineSpacingLabel",Object(ka.i)("Z4DSPropertiesPanelText-lineSpacing")),Object(Ot.a)(this,"renderFontCategories",()=>{const{fontPickerData:e}=this.props,t=e.favoriteFonts.length,a=e.fontCategories.find(e=>"all"===e.name),n={displayName:this.props.zString("zi_controls_ZazzleSkin_Subnav_Sell_Favorites")+` (${t})`,name:"@favorites"},i=e.fontCategories.find(e=>"mru"===e.name),r=[t>0&&n,e.mostRecentlyUsed.length>0&&i,a,...e.fontCategories.filter(e=>e!==a&&e!==i&&!e.name.includes(".")).sort((e,t)=>e.displayName>t.displayName?1:t.displayName>e.displayName?-1:0)].filter(e=>!!e);return s.a.createElement("div",{className:hr("&-categories")},r.map(e=>{const t=e.name===this.state.fontPickerActiveCategory,a="@favorites"===e.name;return s.a.createElement(Oa.a,{active:t,className:hr("&-category"),key:e.name,onClick:this.setFontCategory.bind(this,e.name)},a&&s.a.createElement(s.a.Fragment,null,s.a.createElement(V.b,{name:"Star"}),"Â Â "),e.displayName)}))}),Object(Ot.a)(this,"renderFontPicker",()=>{const{activeAreaGroupInfo:e,fontPickerData:t,selectedObjects:a}=this.props,{fontPickerActiveCategory:n}=this.state;let i=[];i="all"===n?t.fonts:"mru"===n?t.mostRecentlyUsed.map(e=>t.fonts.find(t=>t.name===e)).filter(e=>!!e):"@favorites"===n?t.fonts.filter(e=>{var t;return null===(t=this.props.settings.favoriteFonts)||void 0===t?void 0:t.includes(e.name)}).filter(e=>!!e):t.fonts.filter(e=>e.groups&&e.groups.some(e=>e.split(".")[0]===n));const r=a[0].styles[0],o=t.fonts.find(e=>e.name===r.face),l=i.map(a=>{const{thumbnail:n,srcSet:i}=Object($i.b)(e,a,40,128);return{displayName:a.displayName,favorite:t.favoriteFonts.includes(a.name),groups:a.groups,name:a.name,onClick:this.setFont,onFavorite:this.setFontFavorite,selected:o&&a.name===o.name,src:n,srcSet:i,zString:this.props.zString}}),c=o?Math.max(0,i.findIndex(e=>e.name===o.name)):0,u=t.fontCategories.filter(e=>e.name.includes(".")&&e.name.split(".")[0]===n);return s.a.createElement("div",{className:hr("&-fontPalette")},u.length>0?s.a.createElement(ar,{activeFontIndex:c,fonts:l,subcategories:u}):s.a.createElement(nr.a,{Component:er,activeIndex:c,instantScroll:!0,items:l,preventAutoScrollOnIndexChange:!0}))}),Object(Ot.a)(this,"setArcRadius",e=>{const t=Object(ae.f)(e),a={path:t.path};void 0!==t.arcradius&&(a.arcradius=t.arcradius),this.props.onSetTextProps(a),Object(G.h)(H.a.ChangedArcRadius())}),Object(Ot.a)(this,"setColor",e=>{this.props.onSetTextProps({color:e}),Object(G.h)(H.a.ChangedTextColor())}),Object(Ot.a)(this,"setFont",e=>{this.props.onSetTextProps({face:e}),this.props.addRecentFont(e,this.props.activeAreaGroupInfo.process.name),Object(G.h)(H.a.ChangedTextFace())}),Object(Ot.a)(this,"setFontFavorite",(e,t)=>{const a=(()=>{var a;const n=null!==(a=this.props.settings.favoriteFonts)&&void 0!==a?a:[];return t?[...n,e]:n.filter(t=>t!==e)})();this.props.onSetFavoriteFont(a)}),Object(Ot.a)(this,"setFontCategory",e=>{this.setState({fontPickerActiveCategory:e})}),Object(Ot.a)(this,"setHeight",e=>{this.props.onSetTextProps({height:e}),Object(G.h)(H.a.ChangedTextHeight())}),Object(Ot.a)(this,"setLayoutCenter",()=>{this.props.onSetTextProps({align:"center"}),Object(G.h)(H.a.ChangedTextLayout("center"))}),Object(Ot.a)(this,"setLayoutLeading",()=>{this.props.onSetTextProps({align:"leading"}),Object(G.h)(H.a.ChangedTextLayout("leading"))}),Object(Ot.a)(this,"setLayoutTrailing",()=>{this.props.onSetTextProps({align:"trailing"}),Object(G.h)(H.a.ChangedTextLayout("trailing"))}),Object(Ot.a)(this,"setLetterSpacing",e=>{this.props.onSetTextProps({letterspacing:e}),Object(G.h)(H.a.ChangedLetterSpacing())}),Object(Ot.a)(this,"setLineSpacing",e=>{this.props.onSetTextProps({linespacing:e}),Object(G.h)(H.a.ChangedLineSpacing())}),Object(Ot.a)(this,"setPathHorz",()=>{this.props.onSetTextProps({path:"horz"}),Object(G.h)(H.a.ChangedTextDirection())}),Object(Ot.a)(this,"setPathVert",()=>{this.props.onSetTextProps({path:"vert"}),Object(G.h)(H.a.ChangedTextDirection())}),Object(Ot.a)(this,"setPAlignCenter",()=>{this.props.onSetTextProps({palign:"center"})}),Object(Ot.a)(this,"setPAlignFar",()=>{this.props.onSetTextProps({palign:"far"})}),Object(Ot.a)(this,"setPAlignNear",()=>{this.props.onSetTextProps({palign:"near"})}),Object(Ot.a)(this,"toggleColorAccordion",()=>{const e="color"!==this.state.activeAccordion;this.setState({activeAccordion:e?"color":null})}),Object(Ot.a)(this,"toggleFontAccordion",()=>{const e="font"!==this.state.activeAccordion;this.setState({activeAccordion:e?"font":null})}),Object(Ot.a)(this,"throttledSetArcRadius",qi()(this.setArcRadius,500)),Object(Ot.a)(this,"throttledSetLetterSpacing",qi()(this.setLetterSpacing,50)),Object(Ot.a)(this,"throttledSetLineSpacing",qi()(this.setLineSpacing,500))}componentWillUnmount(){this.throttledSetArcRadius.flush(),this.throttledSetLetterSpacing.flush(),this.throttledSetLetterSpacing.flush()}componentDidUpdate(){"@favorites"===this.state.fontPickerActiveCategory&&0===this.props.fontPickerData.favoriteFonts.length&&this.setState({fontPickerActiveCategory:"all"})}render(){const{activeAreaGroupInfo:e,canvasRect:t,designStateKey:a,eyeDropperClipEleRect:n,eyeDropperOnActiveChange:i,eyeDropperImgSrc:r,fontPickerData:o,selectedObjects:l,zString:c}=this.props,{activeAccordion:u}=this.state,d=l[0],h=d.styles[0],p=d.align,m=d.palign,g=h.color,f=o.fonts.find(e=>e.name===h.face),b=f&&Object($i.b)(e,f,47,100),v=h.letterspacing,y=d.linespacing||1,_="vert"===d.path?"vert":"horz",S=h.height;let D=0;"arc"===d.path?D=ae.a-d.arcradius:"rarc"===d.path&&(D=d.arcradius-ae.a),D=d.arcradius;const C=!l.every(e=>"horz"===e.path),E=s.a.createElement(fe.CSSTransitionGroup,{className:hr("&-transitionGroup"),transitionEnterTimeout:250,transitionLeaveTimeout:250,transitionName:hr("&-paletteTransition-")},"font"===u&&this.renderFontPicker()),O="stitch"===e.uiProcess;return s.a.createElement(Ea,{beforeComponentEndContent:E,className:dr("&"),designStateKey:a},s.a.createElement(Oa.a,{className:Sa("&-row"),disabled:d.showalways||l.length>1,onClick:this.props.onEditText},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Pencil})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_EditTextSentenceCase"))),s.a.createElement(wt.b,{className:Sa("&-accordion--hideCaret",dr("&-accordion--font")),isExpanded:"font"===u,onRequestToggleExpanded:this.toggleFontAccordion,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.AddText})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_FontPicker_Title")),b?s.a.createElement("div",{className:dr("&-activeFont")},s.a.createElement("img",{alt:f.displayName,className:dr("&-activeFontImg"),src:b.thumbnail,srcSet:b.srcSet})):s.a.createElement("div",{className:dr("&-activeFont","&-activeFont--unsupported")},s.a.createElement("div",{className:dr("&-activeFontText")},h.face)))},this.renderFontCategories()),s.a.createElement(wt.b,{className:Sa("&-accordion--hideCaret"),isExpanded:"color"===u,onRequestToggleExpanded:this.toggleColorAccordion,renderChildrenWhenCollapsed:!1,title:s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.AttColorOpen})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_design_colorDialogTitle")),s.a.createElement("div",{className:Sa("&-colorPreview")},s.a.createElement("div",{style:{background:Ca(g)}})))},s.a.createElement(at,{designStateKey:a,eyeDropperClipEleRect:n,eyeDropperDesignStateKey:a,eyeDropperOnActiveChange:i,eyeDropperImgSrc:r,eyeDropperPositionRect:t,numColumns:7,onChange:this.setColor,value:g})),s.a.createElement("label",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.TextSizeZ4})),s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_appearanceSizeSelectorLabel")),s.a.createElement(yi.a,{max:e.process.fontsInfo.maximumHeight,min:e.process.fontsInfo.minimumHeight,onChange:this.setHeight,value:S})),s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_Z4_DesignSpace_Justification")),s.a.createElement(Oa.a,{active:"leading"===p,bordered:!0,className:Sa("&-pillButton"),onClick:this.setLayoutLeading},s.a.createElement(V.a,{iconName:V.a.Icon.TextAlignLeftZ4,screenReaderText:c("zi_create_Z3_DesignTool_TextAlignLeft")})),s.a.createElement(Oa.a,{active:"center"===p,bordered:!0,className:Sa("&-pillButton"),onClick:this.setLayoutCenter},s.a.createElement(V.a,{iconName:V.a.Icon.TextAlignCenterZ4,screenReaderText:c("zi_create_Z3_DesignTool_TextAlignCenter")})),s.a.createElement(Oa.a,{active:"trailing"===p,bordered:!0,className:Sa("&-pillButton"),onClick:this.setLayoutTrailing},s.a.createElement(V.a,{iconName:V.a.Icon.TextAlignRightZ4,screenReaderText:c("zi_create_Z3_DesignTool_TextAlignRight")}))),s.a.createElement(Oi,{designStateKey:a}),s.a.createElement(Di,{designStateKey:a}),s.a.createElement(ni,{designStateKey:a}),s.a.createElement("div",{className:Sa("&-row")},s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_create_Z4_DesignSpace_ParagraphAlign")),s.a.createElement(Oa.a,{active:"near"===m,bordered:!0,className:Sa("&-pillButton"),disabled:C,onClick:this.setPAlignNear},s.a.createElement(V.a,{iconName:V.a.Icon.PositionTop,screenReaderText:c("zi_create_Z4_DesignSpace_ParagraphAlignNear")})),s.a.createElement(Oa.a,{active:"center"===m,bordered:!0,className:Sa("&-pillButton"),disabled:C,onClick:this.setPAlignCenter},s.a.createElement(V.a,{iconName:V.a.Icon.PositionVertCenter,screenReaderText:c("zi_create_Z4_DesignSpace_ParagraphAlignCenter")})),s.a.createElement(Oa.a,{active:"far"===m,bordered:!0,className:Sa("&-pillButton"),disabled:C,onClick:this.setPAlignFar},s.a.createElement(V.a,{iconName:V.a.Icon.PositionBottom,screenReaderText:c("zi_create_Z4_DesignSpace_ParagraphAlignFar")}))),s.a.createElement("div",{className:Sa("&-row","&-row--freeHeight")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.IntercharacterSpacing})),s.a.createElement("div",{className:Sa("&-rowLabel"),id:this.letterSpacingLabel},c("zi_create_Z4_DesignSpace_LetterSpacing")),s.a.createElement("div",{className:Sa("&-rowFreeHeightContents")},s.a.createElement(ur,{ariaLabelledby:this.letterSpacingLabel,disabled:"vert"===_||O,max:3,min:-1,onChange:this.throttledSetLetterSpacing,step:.05,value:v}))),s.a.createElement("div",{className:Sa("&-row","&-row--freeHeight")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.TextLineHeight})),s.a.createElement("div",{className:Sa("&-rowLabel"),id:this.lineSpacingLabel},c("zi_create_Z3_DesignTool_LineSpacing")),s.a.createElement("div",{className:Sa("&-rowFreeHeightContents")},s.a.createElement(ur,{ariaLabelledby:this.lineSpacingLabel,deadzone:.05,disabled:O,max:3,min:.1,neutralValue:1,onChange:this.throttledSetLineSpacing,step:.05,value:y}))),s.a.createElement("div",{className:Sa("&-row","&-row--connectedToBelow")},s.a.createElement("div",{className:Sa("&-rowLabel")},c("zi_common_Application_Orientation")),s.a.createElement(Oa.a,{active:"horz"===_,bordered:!0,className:Sa("&-pillButton"),onClick:this.setPathHorz},s.a.createElement(V.a,{iconName:V.a.Icon.HorizontalText,screenReaderText:c("zi_create_DesignUi_Path_Horizontal")})),s.a.createElement(Oa.a,{active:"vert"===_,bordered:!0,className:Sa("&-pillButton"),onClick:this.setPathVert},s.a.createElement(V.a,{iconName:V.a.Icon.VerticalText,screenReaderText:c("zi_create_DesignUi_Path_Vertical")}))),s.a.createElement("div",{className:Sa("&-row","&-row--freeHeight")},s.a.createElement("div",{className:Sa("&-rowHeroIconWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.TextOnPath})),s.a.createElement("div",{className:Sa("&-rowLabel"),id:this.curvatureLabel},c("zi_create_Z4_DesignSpace_Curvature")),s.a.createElement("div",{className:Sa("&-rowFreeHeightContents")},s.a.createElement(ur,{ariaLabelledby:this.curvatureLabel,deadzone:.1,disabled:"vert"===d.path,max:1,min:-1,onChange:this.throttledSetArcRadius,step:.1,value:Object(ae.b)(D,d.path)}))),s.a.createElement(bi,{designStateKey:a}))}}const mr=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey),i=a.design.activeArea,r=Object(Te.c)(n.areaGroupsInfo,i);return{activeAreaGroupInfo:r,fontPickerData:Object($i.a)(e,t.designStateKey,r.process.name),settings:a.settings,zString:Object(y.a)(e)}},(e,t)=>({addRecentFont:(a,n)=>{e(Object(D.Cb)(t.designStateKey,a,n))},onEditText:()=>{e(Object(D.Kc)(t.designStateKey,{isEditingText:!0}))},onRotate:(a,n)=>{e(Object(D.Nc)(t.designStateKey,{abs:n,rotate:a}))},onSetFavoriteFont:a=>{e(Object(D.Jc)(t.designStateKey,{favoriteFonts:a},!0))},onSetTextProps:a=>{e(Object(D.xc)(t.designStateKey,a))}}))(pr);a(3089);const gr=Object(q.a)("Z4DSPropertiesPanels");class fr extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"renderPanel",()=>{const{activeContentTab:e,canvasRect:t,design:a,designStateKey:n,designTimestamp:i,eyeDropperClipEleRect:r,eyeDropperActiveOnChange:o,metaSelection:l,product:c,selectedObjects:u}=this.props,d=u.filter(e=>!e.locked),h=d.length>0&&d.every(e=>"image"===e.type),p=d.length>0&&d.every(e=>"path"===e.type),m=d.length>0&&d.every(e=>"qrcode"===e.type),g=d.length>0&&d.every(e=>"text"===e.type),f=(()=>{if((g||p||m||"areaFill"===l)&&c&&a&&t){const e=Object(Je.b)(c.realviews,a.activeView);return Object(Je.d)(e,Object(v.a)().dynamicRealviewUrlBase,{ah:0,area_texture_layout:"square",areacolor:"false",cacheDefeat:i,hide:"bleed,safe,visible,visibleMask,bleed_bg",image_type:"png",max_dim:t.width,rvtype:"pre"})}return null})();return Object(ae.p)(e)?s.a.createElement(Gi,{designStateKey:n}):g?s.a.createElement(mr,{canvasRect:t,designStateKey:n,eyeDropperClipEleRect:r,eyeDropperOnActiveChange:o,eyeDropperImgSrc:f,selectedObjects:d}):h?s.a.createElement(Ii,{designStateKey:n,selectedObjects:d}):p?s.a.createElement(Li,{canvasRect:t,designStateKey:n,eyeDropperClipEleRect:r,eyeDropperOnActiveChange:o,eyeDropperImgSrc:f,selectedObjects:d}):m?s.a.createElement(Wi,{canvasRect:t,designStateKey:n,eyeDropperClipEleRect:r,eyeDropperOnActiveChange:o,eyeDropperImgSrc:f,selectedObjects:d}):d.length>0?s.a.createElement(ki,{designStateKey:n}):l?s.a.createElement(Zn,{canvasRect:t,designStateKey:n,eyeDropperClipEleRect:r,eyeDropperOnActiveChange:o,eyeDropperImgSrc:f}):s.a.createElement(zi,{designStateKey:n})})}render(){return s.a.createElement("div",{className:gr("&")},this.renderPanel())}}const br=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(C.b)(e,a.productStateKey);return{activeContentTab:a.settings.activeContentTab,design:a.design,designTimestamp:Object(Te.i)(a,n.isSavedDesign),metaSelection:a.settings.metaSelection,product:n,selectedObjects:Object(Z.k)(e,t.designStateKey)}})(fr);var vr=a(2705);a(3110);const yr=Object(q.a)("Z4DSCustomizationRestrictionsDialog"),_r=e=>{const t=Object(l.d)(),a=Object(y.e)();function n(){t(Object(D.Kc)(e.designStateKey,{isShowingCustomizationRestrictionsDialog:!1}))}return s.a.createElement(Y.a,{className:yr("&"),onOk:n,onRequestClose:n,showCancel:!1,title:a("zi_partner_DisneyShopping_Guidelines_Title")},s.a.createElement("p",{dangerouslySetInnerHTML:{__html:a("zi_partner_DisneyShopping_Guidelines_Content")}}),s.a.createElement("div",{className:yr("&-finePrint")},a("zi_partner_DisneyShopping_Guidelines_FinePrintTitle"),s.a.createElement("br",null),s.a.createElement("p",{dangerouslySetInnerHTML:{__html:a("zi_partner_DisneyShopping_Guidelines_FinePrint")}})))};var Sr=a(2707),Dr=a(165),Cr=a(2771),Er=a(2694);a(3087);const Or=Object(q.a)("Z4DSAreaGroupIndicator"),wr=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey),i=Object(Qe.b)(a.design);return{areaGroupTitle:Wt()(n.areaGroupsInfo,e=>e.name===i.group).title}},(e,t)=>({onSelectLayersTab:()=>{e(Object(D.Kc)(t.designStateKey,{activeContentTab:"layers"}))}}))(e=>s.a.createElement("button",{className:Or("&"),onClick:e.onSelectLayersTab},s.a.createElement(V.a,{iconName:V.a.Icon.GroupLayers}),e.areaGroupTitle));var jr=a(3088),Ir=a.n(jr);const Nr=e=>{const{designStateKey:t}=e,{canPaste:a,canSendBackward:n,canSendForward:i,selectedDesignObjects:c,targetX:u,targetY:d}=kr(e),h=Object(o.useRef)(),p=Object(l.d)(),m=Object(y.e)(),[g,f]=Object(o.useState)(d),[b,_]=Object(o.useState)(u),S=Na.e(c),C=Na.b(c),E=Na.a(c,{isDisneyIframe:Object(v.a)().isDisneyIframe}),O=-1!==window.navigator.appVersion.indexOf("Mac"),w=O?"âŒ¥":"Alt +",j=O?"âŒ˜":"Ctrl +",I=O?"â‡§":"Shift +";Object(o.useLayoutEffect)(()=>{const e=h.current.offsetHeight,t=h.current.offsetWidth,a=window.innerHeight,n=window.innerWidth;f(d+e>a?a-e:d),_(u+t+2>n?u-t-2:u+2)},[d,u]);const N=Object(o.useMemo)(()=>({left:b,top:g}),[b,g]),k=Object(o.useCallback)(e=>{e.preventDefault()},[]),T=Object(o.useCallback)(()=>{p(Object(D.Zb)(t)),e.onRequestClose()},[t]),x=Object(o.useCallback)(()=>{p(Object(D.gc)(t)),e.onRequestClose()},[t]),z=Object(o.useCallback)(()=>{p(Object(D.Jb)(t)),e.onRequestClose()},[t]),P=Object(o.useCallback)(()=>{p(Object(D.Lb)(t)),e.onRequestClose()},[t]),F=Object(o.useCallback)(()=>{p(Object(D.bc)(t)),e.onRequestClose()},[t]),M=Object(o.useCallback)(()=>{p(Object(D.cc)(t,"down")),e.onRequestClose()},[t]),A=Object(o.useCallback)(()=>{p(Object(D.cc)(t,"up")),e.onRequestClose()},[t]),R=Object(o.useCallback)(()=>{p(Object(D.dc)(t)),e.onRequestClose()},[t]),B=Object(o.useCallback)(()=>{p(Object(D.Ub)(t)),e.onRequestClose()},[t]),L=Object(o.useCallback)(()=>{p(Object(D.Dc)(t)),e.onRequestClose()},[t]);let U;const K=r()(Ir.a.option,Object(v.a)().isMobileDevice&&Ir.a.option__mobile);return U=0===c.length?s.a.createElement("div",{className:Ir.a.listBody},s.a.createElement(Ya.a,{className:K,disabled:!a,onClick:T},m("zi_common_Application_Paste")),s.a.createElement(Ya.a,{className:K,onClick:x},m("zi_common_Application_SelectAll"))):s.a.createElement("div",{className:Ir.a.listBody},s.a.createElement(Ya.a,{className:K,onClick:z},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.Copy}),m("zi_common_Application_Copy")),s.a.createElement("span",{className:Ir.a.shortcut},j+" C")),s.a.createElement(Ya.a,{className:K,disabled:!a,onClick:T},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.Paste}),m("zi_common_Application_Paste")),s.a.createElement("span",{className:Ir.a.shortcut},j+" V")),s.a.createElement(Ya.a,{className:K,disabled:!E,onClick:P},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.Trash}),m("zi_common_Application_Delete")),s.a.createElement("span",{className:Ir.a.shortcut},m("zi_create_Z3_KeyboardShortcuts_BackspaceOrDelete_Short"))),s.a.createElement("div",{className:Ir.a.separator}),s.a.createElement(Ya.a,{className:K,disabled:!n,onClick:F},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.MoveToBackZ4}),m("zi_create_Z3_KeyboardShortcuts_SendToBack")),s.a.createElement("span",{className:Ir.a.shortcut},`${j} ${w} [`)),s.a.createElement(Ya.a,{className:K,disabled:c.length>1||!n,onClick:M},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.MoveBackwardZ4}),m("zi_create_Z3_KeyboardShortcuts_SendBackward")),s.a.createElement("span",{className:Ir.a.shortcut},j+" [")),s.a.createElement(Ya.a,{className:K,disabled:c.length>1||!i,onClick:A},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.MoveForwardZ4}),m("zi_create_Z3_KeyboardShortcuts_BringForward")),s.a.createElement("span",{className:Ir.a.shortcut},j+" ]")),s.a.createElement(Ya.a,{className:K,disabled:!i,onClick:R},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.MoveToFrontZ4}),m("zi_create_Z3_KeyboardShortcuts_BringToFront")),s.a.createElement("span",{className:Ir.a.shortcut},`${j} ${w} ]`)),(C||S)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:Ir.a.separator}),C&&s.a.createElement(Ya.a,{className:K,onClick:B},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.Group}),m("zi_create_Z4_DesignSpace_Group")),s.a.createElement("span",{className:Ir.a.shortcut},j+" G")),S&&s.a.createElement(Ya.a,{className:K,onClick:L},s.a.createElement("span",{className:Ir.a.label},s.a.createElement(V.a,{className:Ir.a.icon,iconName:V.a.Icon.Group}),m("zi_create_Z4_DesignSpace_Ungroup")),s.a.createElement("span",{className:Ir.a.shortcut},`${I} ${j} G`)))),s.a.createElement("div",{className:Ir.a.root,ref:h,style:N,onContextMenu:k},s.a.createElement(Cn.a,{className:Ir.a.palette,onRequestClose:e.onRequestClose},U))},kr=e=>Object(l.e)(t=>{const a=Object(C.b)(t,e.designStateKey),n=a.design,i=a.settings.contextMenuState;return{canPaste:n.paste,canSendBackward:Object(Qe.a)(n,"backward"),canSendForward:Object(Qe.a)(n,"forward"),selectedDesignObjects:Object(Z.k)(t,e.designStateKey),targetX:i.targetX,targetY:i.targetY}},c.q);a(3086);const Tr=Object(q.a)("Z4DSZoomControl");class xr extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"handleKeyDown",e=>{if(e.altKey&&(e.ctrlKey||e.metaKey))switch(e.which){case 189:e.preventDefault(),this.stepDown(e.shiftKey);break;case 187:case 107:e.preventDefault(),this.stepUp(e.shiftKey);break;case 48:e.preventDefault(),this.setStickyFit()}}),Object(Ot.a)(this,"handleStepDownClick",e=>{this.stepDown(e.shiftKey)}),Object(Ot.a)(this,"handleStepUpClick",e=>{this.stepUp(e.shiftKey)}),Object(Ot.a)(this,"setStickyFit",()=>{this.props.onUpdateSettings({isStickyFit:!0})}),Object(Ot.a)(this,"stepDown",e=>this.stepZoom(-1,e)),Object(Ot.a)(this,"stepUp",e=>this.stepZoom(1,e)),Object(Ot.a)(this,"stepZoom",(e,t=!1)=>{const{maxDim:a,onSetMaxDim:n,onUpdateSettings:i,scaleIncrement:r}=this.props;n(a+r*e*(t?2:1)),i({isStickyFit:!1})})}UNSAFE_componentWillMount(){document.body.addEventListener("keydown",this.handleKeyDown)}componeneWillUnmount(){document.body.removeEventListener("keydown",this.handleKeyDown)}render(){const{isFit:e,maxDim:t,zString:a}=this.props;return s.a.createElement("div",{className:Tr("&")},s.a.createElement(X.a,{className:Tr("&-button","&-stepButtonDown"),color:"blue",disabled:t<=Mr,onClick:this.handleStepDownClick,size:"mini"},"-"),s.a.createElement(X.a,{className:Tr("&-button","&-stepButtonUp"),color:"blue",disabled:t>=Fr,onClick:this.handleStepUpClick,size:"mini"},"+"),s.a.createElement("div",{className:Tr("&-divider")}),s.a.createElement(X.a,{className:Tr("&-button","&-fitButton"),color:"blue",disabled:e,onClick:this.setStickyFit,size:"mini"},a("zi_controls_TemplateLabelFitFillFit")))}}const zr=Object(l.b)((e,t)=>({maxDim:Object(C.b)(e,t.designStateKey).design.max_dim,zString:Object(y.a)(e)}),(e,t)=>({onSetMaxDim:a=>{e(Object(D.Ec)(t.designStateKey,{max_dim:Ar(a)}))},onUpdateSettings:a=>{e(Object(D.Kc)(t.designStateKey,a))}}))(xr);a(3085);const Pr=Object(q.a)("Z4DSDesignView"),Fr=2048,Mr=150;function Ar(e){return Math.round(sr()(e,Mr,Fr))}class Rr extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{}),Object(Ot.a)(this,"longPressTimer",void 0),Object(Ot.a)(this,"longPressDelay",500),Object(Ot.a)(this,"scrollerNode",s.a.createRef()),Object(Ot.a)(this,"scrollSizerNode",s.a.createRef()),Object(Ot.a)(this,"canvasCoordsAtCenterStage",{left:.5,top:.5}),Object(Ot.a)(this,"handleKeydown",e=>{this.state.isCtrlDown||17!=e.which||this.setState({isCtrlDown:!0})}),Object(Ot.a)(this,"handleKeyup",e=>{this.state.isCtrlDown&&17==e.which&&this.setState({isCtrlDown:!1})}),Object(Ot.a)(this,"handleScrollerClick",e=>{const{designStateKey:t}=this.props;(e.target===this.scrollerNode.current||e.target===this.scrollSizerNode.current)&&(this.props.onUpdateDesign(t,{selection:[]}),this.props.onUpdateSettings(t,{metaSelection:void 0}))}),Object(Ot.a)(this,"handleContextMenuTrigger",e=>{if(e.preventDefault(),Object(v.a)().isMobileDevice)return;const{designStateKey:t}=this.props;(e.target===this.scrollerNode.current||e.target===this.scrollSizerNode.current)&&(this.props.onUpdateDesign(t,{selection:[]}),this.props.onUpdateSettings(t,{metaSelection:void 0}));const a={targetX:e.pageX,targetY:e.pageY};this.props.onUpdateSettings(t,{contextMenuState:a})}),Object(Ot.a)(this,"hideContextMenu",()=>{if(-1!==window.navigator.appVersion.indexOf("Mac")&&this.state.isCtrlDown)return;const{designStateKey:e}=this.props;this.props.onUpdateSettings(e,{contextMenuState:null})}),Object(Ot.a)(this,"handleTouchStart",e=>{const{designStateKey:t}=this.props;if(this.props.onUpdateSettings(t,{contextMenuState:null}),1===e.touches.length){const a=e.touches[0];(a.target===this.scrollerNode.current||a.target===this.scrollSizerNode.current)&&(this.props.onUpdateDesign(t,{selection:[]}),this.props.onUpdateSettings(t,{metaSelection:void 0}));const n={targetX:a.pageX,targetY:a.pageY},i=()=>{this.props.onUpdateSettings(t,{contextMenuState:n})};this.longPressTimer=setTimeout(i,this.longPressDelay)}}),Object(Ot.a)(this,"handleTouchMove",()=>{clearTimeout(this.longPressTimer)}),Object(Ot.a)(this,"handleTouchEnd",()=>{clearTimeout(this.longPressTimer)}),Object(Ot.a)(this,"maxDimIsFit",()=>{const{maxDim:e,stageRect:t}=this.props;return e===Math.min(t.width,t.height)-40}),Object(Ot.a)(this,"recordCanvasCenterPosition",()=>{const{maxDim:e}=this.props,t=this.scrollerNode.current,a=t.getBoundingClientRect();this.canvasCoordsAtCenterStage.left=(t.scrollLeft+a.width/2)/e,this.canvasCoordsAtCenterStage.top=(t.scrollTop+a.height/2)/e})}componentDidMount(){document.body.addEventListener("keydown",this.handleKeydown),document.body.addEventListener("keyup",this.handleKeyup),void 0===this.props.isStickyFit&&this.props.onUpdateSettings(this.props.designStateKey,{isStickyFit:!0}),this.setState({DesignCanvasContainer:Cr.a})}componentWillUnmount(){document.body.removeEventListener("keydown",this.handleKeydown),document.body.removeEventListener("keyup",this.handleKeyup)}componentDidUpdate(e){const{designStateKey:t,isStickyFit:a,maxDim:n,onSetMaxDim:i,stageRect:r,updateCanvasRect:o}=this.props,s=e.maxDim!==n,l=e.stageRect.height!==r.height||e.stageRect.width!==r.width,c=r.height||r.width,u=!e.stageRect.height&&c;if(c&&(a||u)){(!e.isStickyFit||l||u)&&i(t,Math.min(r.width,r.height)-40)}else if(s||l){const e=this.canvasCoordsAtCenterStage.left*n-r.width/2,t=this.canvasCoordsAtCenterStage.top*n-r.height/2,a=this.scrollerNode.current;a.scrollLeft=e,a.scrollTop=t}(s||l)&&o()}render(){const{activeArea:e,activeView:t,canvasWrapperRef:a,darkBg:n,designId:i,designPreviewFullscreen:r,designStateKey:o,designTimestamp:l,errors:u,eyeDropperIsActive:d,hasWatermarks:h,inFlightImageCount:p,contextMenuState:m,isWatcher:g,maxDim:f,processName:b,realviews:y,showAreaGroupIndicator:_,showGridlines:S,showGuidelines:D,showZoomControl:C,snapping:E,stageRect:O,uiProcess:w,uploaderId:j,zString:I}=this.props,N=g?"none":this.props.designCanvasRenderMode;let k,T;if(e){const a=Object(Je.c)(e,y,"Design");g?k=Object(Je.d)(a,Object(v.a)().dynamicRealviewUrlBase,{cacheDefeat:l,checker:!0,design:i,hide:"bleed,safe,visible,visibleMask",max_dim:f,realview:t}):N&&"none"!==N?(T=Object(Je.d)(a,Object(v.a)().dynamicRealviewUrlBase,{area_texture_layout:"square",csa:!0,design:i,image_type:"png",realview:t,rvtype:"content"}),"serverrender"===N&&(T=Object(c.c)(T,{bg:"00000000",cacheDefeat:l,hide:"bleed,safe,visible,visibleMask,bleed_bg",rvtype:null}))):k=Object(Je.d)(a,Object(v.a)().dynamicRealviewUrlBase,{area_grid:S?1:void 0,area_grid_top:S?1:void 0,cacheDefeat:l,checker:!0,design:i,hide:"bleed,safe,visible,visibleMask",max_dim:f,realview:t})}const x=f+40,z=Math.max(O.width,x),P=Math.max(O.height,x);return s.a.createElement("div",{className:Pr("&",g&&"&--watcherView")},s.a.createElement("div",{className:Pr("&-scroller"),onClick:this.handleScrollerClick,onContextMenu:this.handleContextMenuTrigger,onScroll:this.recordCanvasCenterPosition,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,ref:this.scrollerNode,style:{bottom:O.bottom,left:O.left,right:O.right,top:O.top}},f&&s.a.createElement("div",{className:Pr("&-scrollSizer"),style:{width:z,height:P},ref:this.scrollSizerNode},s.a.createElement("div",{className:Pr("&-canvasWrapper"),onContextMenu:ka.f,style:{height:P,width:z},ref:a},k&&s.a.createElement("img",{src:k}),this.state.DesignCanvasContainer&&s.a.createElement(this.state.DesignCanvasContainer,{darkBg:n,designStateKey:o,enableKeys:!r,errors:u,isShowingBoundaries:D,isSnapping:E,isZ4:!0,maxDim:f,objectUrl:T,outerHeight:P,outerWidth:z,renderDesignMode:N,showGridlines:S,uiProcess:w,zString:I}),s.a.createElement(Er.a,{uploaderId:j})))),C&&!d&&s.a.createElement(zr,{designStateKey:o,isFit:this.maxDimIsFit(),scaleIncrement:Math.min(O.width,O.height)/4}),_&&!d&&s.a.createElement(wr,{designStateKey:o}),h&&s.a.createElement("div",{className:Pr("&-watermarkLabel")},I("zi_create_DesignTool_WatermarkWarning")),"contoursticker"===b&&p>0&&s.a.createElement(Dr.a,{className:Pr("&-loading"),ringColor:"#007799",size:20}),m&&s.a.createElement(Nr,{designStateKey:o,onRequestClose:this.hideContextMenu}))}}Object(Ot.a)(Rr,"defaultProps",{showZoomControl:!0});const Br=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey),i=Object(_.d)(e,Object(_.l)(n.stateKey)),r=Object(Qe.b)(a.design),o=n.areaGroupsInfo[r.group],s=Object(Z.g)(e,a.settings);return{activeArea:a.design.activeArea,activeView:a.design.activeView,darkBg:s.darkbg,designCanvasRenderMode:a.renderDesign.mode||"textGlyph",designId:a.design.id,designPreviewFullscreen:s.designPreviewFullscreen,designTimestamp:Object(Te.i)(a,!0),hasWatermarks:s.hasWatermarks,inFlightImageCount:a.inFlightImageCount,contextMenuState:s.contextMenuState,isStickyFit:s.isStickyFit,isWatcher:Object(_.c)(i),maxDim:a.design.max_dim,processName:o.process.name,realviews:n.realviews,showGridlines:s.showGridlines,showGuidelines:s.showGuidelines,snapping:s.snapping,uiProcess:o.uiProcess,zString:Object(y.a)(e)}},e=>({onSetMaxDim:(t,a)=>{e(Object(D.Ec)(t,{max_dim:Ar(a)}))},onUpdateDesign:(t,a)=>{e(Object(D.Ec)(t,a))},onUpdateSettings:(t,a)=>{e(Object(D.Kc)(t,a))}}))(Rr);var Lr=a(2703),Ur=a(428),Kr=a(1738),Gr=a(1775);a(3083);const Hr=Object(q.a)("DesignToolTileSelector");class Zr extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"getSelectionZigTile",()=>{const e=this.props.selectedDesignObjects.filter(e=>!e.locked);let t;return 1===e.length&&(t=ui.d.getZigTile(e[0].layout)),t||(t={pattern:""}),t}),Object(Ot.a)(this,"handleZigTileSizeChange",(e,t)=>{const a=this.getSelectionZigTile();a&&""!==a.pattern&&(a.width=e,a.height=t,this.props.onLayout(["zigtile"],[c.a.toString(a)]))}),Object(Ot.a)(this,"handleZigTileChange",e=>{const{onLayout:t,onTileChange:a}=this.props;if("classic"===e)t(["tile"],[""]);else{const a=this.getSelectionZigTile();if(a.pattern=e,""===e)t([""],[""]);else{switch(a.staggeru=0,a.staggerv=0,a.mirroru=1,a.mirrorv=1,e){case"basic":break;case"halfBrick":a.staggeru=.5;break;case"halfDrop":a.staggerv=.5;break;case"mirror":a.mirroru=-1,a.mirrorv=-1}t(["zigtile"],[c.a.toString(a)])}}a&&a()})}render(){const{activeDesignArea:e,selectedDesignObjects:t,zString:a,zUrl:n}=this.props,i=Math.max(e.width,e.height),r="us"===Object(v.a)().regionTwoLetter?Ur.b.inches:Ur.b.centimeters,o=t.every(e=>"image"===e.type),l=this.getSelectionZigTile(),c=o&&t.some(e=>e.layout&&"tile"===e.layout.type),u=c?"classic":l.pattern;return s.a.createElement("div",{className:Hr("&")},s.a.createElement(Kr.a,{includeClassicTiling:o,onChange:this.handleZigTileChange,value:u,zString:a,zUrl:n}),!c&&""!==u&&s.a.createElement("div",{className:Hr("&-tileSize")},s.a.createElement("label",null,`${a("zi_create_DesignInspector_Tile_TileSize")} (${r})`),s.a.createElement(Gr.a,{areaPhysicalSize:i,displayUnits:r,height:l.height||0,onChange:this.handleZigTileSizeChange,readOnly:!1,width:l.width||0,zString:a,zUrl:n})))}}const Wr=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey);return{activeDesignArea:a.design.areas[a.design.activeArea],selectedDesignObjects:Object(Z.k)(e,t.designStateKey),zString:Object(y.a)(e),zUrl:Object($.d)(e)}},(e,t)=>({onLayout:(a,n)=>{e(Object(D.Wb)(t.designStateKey,a,n,!0)),t.onLayoutPassive&&t.onLayoutPassive(a,n)}}))(Zr);a(3084);const Vr=Object(q.a)("Z4DSDistributeAlign");class qr extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{alignTo:"design"}),Object(Ot.a)(this,"handleAlignToChange",e=>{this.setState({alignTo:e})}),Object(Ot.a)(this,"handleAlignBottom",()=>{this.props.onLayout(["align"],[`align=bottom&alignto=${this.state.alignTo}&group=false`]),Object(G.h)(H.a.AlignedSelection(this.state.alignTo,"bottom"))}),Object(Ot.a)(this,"handleAlignHorzCenter",()=>{this.props.onLayout(["align"],[`align=hcenter&alignto=${this.state.alignTo}&group=false`]),Object(G.h)(H.a.AlignedSelection(this.state.alignTo,"hcenter"))}),Object(Ot.a)(this,"handleAlignLeft",()=>{this.props.onLayout(["align"],[`align=left&alignto=${this.state.alignTo}&group=false`]),Object(G.h)(H.a.AlignedSelection(this.state.alignTo,"left"))}),Object(Ot.a)(this,"handleAlignRight",()=>{this.props.onLayout(["align"],[`align=right&alignto=${this.state.alignTo}&group=false`]),Object(G.h)(H.a.AlignedSelection(this.state.alignTo,"right"))}),Object(Ot.a)(this,"handleAlignTop",()=>{this.props.onLayout(["align"],[`align=top&alignto=${this.state.alignTo}&group=false`]),Object(G.h)(H.a.AlignedSelection(this.state.alignTo,"top"))}),Object(Ot.a)(this,"handleAlignVertCenter",()=>{this.props.onLayout(["align"],[`align=vcenter&alignto=${this.state.alignTo}&group=false`]),Object(G.h)(H.a.AlignedSelection(this.state.alignTo,"vcenter"))}),Object(Ot.a)(this,"handleDistributeHorz",()=>{this.props.onLayout(["horz"],["fillto="+this.state.alignTo]),Object(G.h)(H.a.DistributedSelection(this.state.alignTo,"horz"))}),Object(Ot.a)(this,"handleDistributeVert",()=>{this.props.onLayout(["vert"],["fillto="+this.state.alignTo]),Object(G.h)(H.a.DistributedSelection(this.state.alignTo,"vert"))})}render(){const{numberOfSelectedUnlockedDesignObjects:e,zString:t}=this.props,{alignTo:a}=this.state,n=e>0,i=e>1,r="design"===a?n:i,o="design"===a?e>1:e>2,l=[{disabled:!i,display:t("zi_create_Z4_DesignSpace_AlignTo_Objects"),value:"objects"},{disabled:!n,display:t("zi_create_Z4_DesignSpace_AlignTo_Design"),value:"design"}];return s.a.createElement("div",{className:Vr("&")},s.a.createElement("div",null,t("zi_create_design_align")),s.a.createElement("div",{className:Vr("&-container","&-top")},s.a.createElement(wa.b,{key:"AlignLayersLeft",overlay:t("zi_create_design_tooltip_leftAlignLayerHor")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!r,onClick:this.handleAlignLeft},s.a.createElement(V.a,{iconName:V.a.Icon.AlignLayersLeft}))),s.a.createElement(wa.b,{key:"AlignLayersHorzCenter",overlay:t("zi_create_design_tooltip_centerAlignLayerHor")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!r,onClick:this.handleAlignHorzCenter},s.a.createElement(V.a,{iconName:V.a.Icon.AlignLayersHorzCenter}))),s.a.createElement(wa.b,{key:"AlignLayersRight",overlay:t("zi_create_design_tooltip_rightAlignLayerHor")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!r,onClick:this.handleAlignRight},s.a.createElement(V.a,{iconName:V.a.Icon.AlignLayersRight}))),s.a.createElement("span",{className:Vr("&-divider")}),s.a.createElement(wa.b,{key:"AlignLayersTop",overlay:t("zi_create_design_tooltip_topAlignLayerVer")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!r,onClick:this.handleAlignTop},s.a.createElement(V.a,{iconName:V.a.Icon.AlignLayersTop}))),s.a.createElement(wa.b,{key:"AlignLayersVertCenter",overlay:t("zi_create_design_tooltip_centerAlignLayerVer")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!r,onClick:this.handleAlignVertCenter},s.a.createElement(V.a,{iconName:V.a.Icon.AlignLayersVertCenter}))),s.a.createElement(wa.b,{key:"AlignLayersBottom",overlay:t("zi_create_design_tooltip_bottomAlignLayerVer")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!r,onClick:this.handleAlignBottom},s.a.createElement(V.a,{iconName:V.a.Icon.AlignLayersBottom})))),s.a.createElement("div",{className:Vr("&-hr")}),s.a.createElement("div",{className:Vr("&-container","&-bottom")},s.a.createElement("div",{className:Vr("&-distribute")},s.a.createElement("div",null,t("zi_create_Z4_DesignSpace_Distribute")),s.a.createElement("div",{className:Vr("&-container")},s.a.createElement(wa.b,{key:"SpaceEvenlyHorz",overlay:t("zi_create_design_tooltip_spaceLayerHor")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!o,onClick:this.handleDistributeHorz},s.a.createElement(V.a,{iconName:V.a.Icon.SpaceEvenlyHorz}))),s.a.createElement(wa.b,{key:"SpaceEvenlyVert",overlay:t("zi_create_design_tooltip_spaceLayerVer")},s.a.createElement(Oa.a,{className:Vr("&-button"),disabled:!o,onClick:this.handleDistributeVert},s.a.createElement(V.a,{iconName:V.a.Icon.SpaceEvenlyVert}))))),s.a.createElement("span",{className:Vr("&-divider")}),s.a.createElement("div",{className:Vr("&-alignTo")},s.a.createElement("div",null,t("zi_create_Z4_DesignSpace_AlignTo"),":"),s.a.createElement(te.b,{onChange:this.handleAlignToChange,options:l,value:a}))))}}const $r=Object(l.b)((e,t)=>({numberOfSelectedUnlockedDesignObjects:Object(Z.k)(e,t.designStateKey).filter(e=>!e.locked).length,zString:Object(y.a)(e)}),(e,t)=>({onLayout:(a,n)=>{e(D.Wb(t.designStateKey,a,n))}}))(qr);a(3082);const Xr=Object(q.a)("Z4DSGlobalToolbar"),Yr=Object(o.memo)(e=>{const[t,a]=Object(o.useState)(),n=Object(l.d)(),i=Qr(e),r=Object(y.e)(),{designStateKey:c}=e,{canFocusArea:u,canRedo:d,canSendBackward:h,canSendForward:p,canTile:m,canUndo:g,productStateKey:f,selectedDesignObjects:b,showFocusArea:v,showGridlines:_,showGuidelines:S}=i,C=()=>{a(void 0)},E=e=>{a(t===e?void 0:e)},O=b.every(e=>"group"===e.type)&&b.length>0,w=O&&b.every(e=>e.clip),j=O,I=Na.e(b),N=!j,k=Na.b(b),T=Na.c(b);return s.a.createElement("div",{className:Xr("&")},s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:!g,onClick:()=>{n(Object(D.Cc)(c)),Object(G.h)(H.a.Undo())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.UndoZ4}),s.a.createElement("div",{className:Xr("&-label")},r("zi_common_Application_Undo")))),s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:!d,onClick:()=>{n(Object(D.ac)(c)),Object(G.h)(H.a.Redo())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.RedoZ4}),s.a.createElement("div",{className:Xr("&-label")},r("zi_common_Application_Redo")))),s.a.createElement("div",{className:Xr("&-separator")}),s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:1!==b.length||!p,onClick:()=>{n(Object(D.cc)(c,"up")),Object(G.h)(H.a.ReorderedLayerForward())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.MoveForwardZ4}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_Z4_DesignSpace_Forward")))),s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:1!==b.length||!h,onClick:()=>{n(Object(D.cc)(e.designStateKey,"down")),Object(G.h)(H.a.ReorderedLayerBack())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.MoveBackwardZ4}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_Z4_DesignSpace_Backward")))),s.a.createElement("div",{className:Xr("&-separator")}),s.a.createElement("div",{className:Xr("&-menuButtonWrapper","tile"===t&&"&-menuButtonWrapper--active")},s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:!m,onClick:()=>{E("tile")}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Tiling}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_DesignUi_MoreTabs_TilingMirroringLabel"))),s.a.createElement(V.a,{className:Xr("&-buttonCaret"),iconName:V.a.Icon.CaretDownZ4})),"tile"===t&&s.a.createElement(Cn.a,{onRequestClose:C},s.a.createElement(Wr,{onLayoutPassive:()=>{Object(G.h)(H.a.ChangedTiling())},designStateKey:e.designStateKey}))),s.a.createElement("div",{className:Xr("&-separator")}),s.a.createElement("div",{className:Xr("&-menuButtonWrapper","distribute"===t&&"&-menuButtonWrapper--active")},s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:0===b.length,onClick:()=>{E("distribute")}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.AlignLayersLeft}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_design_align"))),s.a.createElement(V.a,{className:Xr("&-buttonCaret"),iconName:V.a.Icon.CaretDownZ4})),"distribute"===t&&s.a.createElement(Cn.a,{onRequestClose:C},s.a.createElement($r,{designStateKey:c}))),s.a.createElement("div",{className:Xr("&-separator")}),s.a.createElement(wa.b,{overlay:s.a.createElement("div",null,s.a.createElement("span",{className:Xr("&-prefix")},r("zi_create_design_tooltip_tip"),":")," ",r("zi_create_design_tooltip_Guidelines"))},s.a.createElement(Oa.a,{active:S,className:Xr("&-button"),onClick:()=>{n(Object(D.Kc)(c,{showGuidelines:!S})),Object(G.h)(H.a.ToggledGuidelines())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Boundaries}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_Z3_DesignTool_Guidelines"))))),s.a.createElement(Oa.a,{active:_,className:Xr("&-button"),onClick:()=>{n(Object(D.Kc)(c,{showGridlines:!_})),Object(G.h)(H.a.ToggledGridlines())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Gridlines}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_Z4_DesignSpace_Gridlines")))),s.a.createElement("div",{className:Xr("&-separator")}),N&&s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:!k,onClick:()=>{n(Object(D.Ub)(c)),Object(G.h)(H.a.Group())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.Group}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_Z4_DesignSpace_Group")))),N&&s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:!T,onClick:()=>{n(Object(D.Ub)(c,!0)),Object(G.h)(H.a.GroupClip())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.ClipMaskOn}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_Z4_DesignSpace_GroupClip")))),j&&s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:!I,onClick:()=>{n(Object(D.Dc)(c)),Object(G.h)(H.a.Ungroup())}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:w?V.a.Icon.ClipMaskOff:V.a.Icon.Ungroup}),s.a.createElement("div",{className:Xr("&-label")},r(w?"zi_create_Z4_DesignSpace_Unclip":"zi_create_Z4_DesignSpace_Ungroup")))),s.a.createElement("div",{className:Xr("&-separator")}),v&&s.a.createElement(Oa.a,{className:Xr("&-button"),disabled:!u,onClick:()=>{n(D.vb.promptFocusArea(f,!1))}},s.a.createElement("div",{className:Xr("&-iconLabelWrapper")},s.a.createElement(V.a,{iconName:V.a.Icon.ContourDynamicSizing}),s.a.createElement("div",{className:Xr("&-label")},r("zi_create_Z4_DesignSpace_Sheet")))))}),Qr=e=>{const t=Object(oa.a)(Na.d);return Object(l.e)(a=>{const n=Object(C.b)(a,e.designStateKey),i=n.design,r=Object(ue.d)(a,n.productStateKey),o=Object(Qe.b)(n.design),s=r.areaGroupsInfo[o.group],l=s.unfilteredDesignAreas[o.name],c=Object(Z.g)(a,n.settings),u=Object(Z.k)(a,e.designStateKey),d=!("stitch"===s.uiProcess)&&t(o,u);return{canFocusArea:!Object(Qe.h)(i),canRedo:i.redo,canSendBackward:Object(Qe.a)(i,"backward"),canSendForward:Object(Qe.a)(i,"forward"),canTile:d,canUndo:i.undo,productStateKey:n.productStateKey,selectedDesignObjects:u,showFocusArea:l.isResizable&&"contoursticker"===s.process.name,showGridlines:c.showGridlines,showGuidelines:c.showGuidelines,zString:Object(y.a)(a)}},c.q)};var Jr=a(1776),eo=a(3113),to=a.n(eo);const ao=s.a.memo(({designStateKey:e})=>{const t=Object(l.d)(),{activeLiveCustomer:a,activeLiveJob:n}=no(e),i=Object(o.useCallback)(()=>{t(Object(D.Kc)(e,{isShowingLiveJobDialog:!1}))},[e]),r=Object(o.useCallback)(a=>{t(D.yb.addImages(e,{ids:[a]})),t(Object(D.Kc)(e,{isShowingLiveJobDialog:!1}))},[e]);return s.a.createElement(Y.a,{onOk:i,onRequestClose:i,showButtonBar:!1,showCancel:!1,title:""},s.a.createElement(Jr.a,{className:to.a.card,customer:a,onImageClick:r,job:n,view:"VIEW"}))}),no=e=>Object(l.e)(t=>{const a=Object(ce.a)(t,Object(_.h)(e));return{activeLiveCustomer:a&&t.entities.profiles[a.customer_id],activeLiveJob:a}},l.c);var io=a(156),ro=a(275),oo=a(59),so=a(2800),lo=a(3038),co=a.n(lo);const uo=Object(o.memo)(e=>{const t=Object(S.a)(),a=Object(y.e)(),n=Object(o.useCallback)(()=>{e.onRequestClose(),t.disconnect()},[t.disconnect,e.onRequestClose]),i=Object(o.useCallback)(()=>{e.onRequestClose(),t.openSettingsDialog()},[t.openSettingsDialog,e.onRequestClose]);return s.a.createElement(Cn.a,Object(F.a)(Object(F.a)({},e),{},{className:r()(e.className,co.a.root,t.room&&co.a.root__connected)}),s.a.createElement("div",{className:co.a.connected},s.a.createElement("div",{className:co.a.connected_heading},a("zi_create_Collab_Video_ChatInProgress")),s.a.createElement(X.a,{className:co.a.connected_endCall,color:"blueOutline",onClick:n,size:"mini"},a("zi_create_Collab_Video_LeaveChat")),s.a.createElement(Ya.a,{onClick:i},s.a.createElement(V.b,{className:co.a.connected_settingsIcon,name:"SettingsGear"}),"Â ",a("zi_create_Collab_Video_EditChatSettings"))))});a(3037);const ho=Object(q.a)("Z4DSCollaborationStrip"),po=Object(o.memo)(e=>{const t=Object(_.g)(e.designStateKey),a=Object(l.e)(e=>Object(_.d)(e,t)),n=Object(S.a)(),i=Object(et.c)(),r=Object(l.d)(),[u,d]=Object(o.useState)(!1),[h,p]=Object(o.useState)(!1),[m,g]=Object(o.useState)(!1),[f,b]=Object(o.useState)(null),v=Object(y.e)(),D=Object(o.useCallback)(()=>{p(!1),b(null)},[]),C=a.myId===a.ownerId,E=a.members.filter(e=>e.connectedCount>0).map(e=>e.participant).sort((e,t)=>Object(c.d)(e.displayName,t.displayName)),O=E.slice(0,4),w=E.slice(4),j=i("Boolean","Z4","EnableVideo",!1)&&Object(so.a)(),I=Object(o.useCallback)(e=>{const n=e.memberId===a.driverId;return s.a.createElement("li",{className:ho("&-userPaletteRow"),key:e.memberId},s.a.createElement(ee.a,{participant:e}),s.a.createElement("div",{className:ho("&-userPaletteRow-info")},s.a.createElement("div",{className:ho("&-userPaletteRow-name")},e.displayName||v("zi_common_Anonymous")),e.memberId===a.myId&&s.a.createElement("div",null,`(${v("zi_email_you")})`)),C&&n&&s.a.createElement("div",{className:ho("&-userPaletteRow-action")},v("zi_create_Collab_CurrentlyInControl")),C&&!n&&s.a.createElement("button",{className:ho("&-userPaletteRow-action","&-userPaletteRow-grant"),onClick:()=>{r(P.b.giveControl(t,{memberId:e.memberId})),D()}},v("zi_create_Collab_GrantControl")))},[D,a.driverId,a.myId,C]);function N(){return s.a.createElement(Cn.a,{className:ho("&-userPalette"),onRequestClose:D},s.a.createElement("ul",{className:ho("&-userPaletteRows")},h?E.map(I):I(f)))}Object(o.useEffect)(()=>{d(!n.room&&a.hasVideoChat)},[a.hasVideoChat,n.room]);const k=Object(o.useCallback)(()=>{d(!1)},[]);return s.a.createElement("div",{className:ho("&")},!h&&O.map(e=>s.a.createElement("div",{className:ho("&-buttonWrapper"),key:e.memberId},s.a.createElement("button",{className:ho("&-avatarButton"),onClick:()=>{f&&f.memberId===e.memberId?D():(p(!1),b(e))},title:e.displayName},s.a.createElement(ee.a,{participant:e})),f&&f.memberId===e.memberId&&N())),w.length>0&&s.a.createElement("div",{className:ho("&-buttonWrapper")},s.a.createElement("button",{className:ho("&-actionButton"),onClick:()=>{h||(p(!0),b(null))}},h?s.a.createElement(V.a,{iconName:V.a.Icon.CaretUpZ4}):"+"+w.length),h&&N()),j&&s.a.createElement("div",{className:ho("&-buttonWrapper")},s.a.createElement(X.a,{className:ho((n.room||a.hasVideoChat)&&"&-chatButton--videoLive"),color:"ghost",onClick:()=>{n.room?g(!0):n.openSettingsDialog()},size:"medium"},s.a.createElement(V.a,{className:ho("&-videoIcon"),iconName:V.a.Icon.Phone}),v("zi_create_Collab_Video_Chat")),m&&s.a.createElement(uo,{onRequestClose:()=>{g(!1)}})),u&&s.a.createElement(Cn.a,{className:ho("&-activeCallPalette"),onRequestClose:k},s.a.createElement("div",{className:ho("&-activeCallPalette-title")},v("zi_create_Collab_ActiveCallPalette_Title")),s.a.createElement("div",{className:ho("&-activeCallPalette-body")},v("zi_create_Collab_ActiveCallPalette_Body1"),s.a.createElement("br",null),v("zi_create_Collab_ActiveCallPalette_Body2")),s.a.createElement(X.a,{className:ho("&-activeCallPalette-button"),color:"blue",onClick:n.initialize,size:"large"},v("zi_create_Collab_ActiveCallPalette_CTA"))))});var mo=a(3041),go=a.n(mo);let fo=!1,bo=!1;const vo=Object(o.memo)(e=>{const t=Object(l.d)(),a=Object(y.e)(),{appeal:n,collabDateCreated:i,collabStateKey:c,customerName:u,iAmLiveDesigner:d,job:h}=yo(e.designStateKey),[p,m]=Object(o.useState)(!1);function g(){const e=new Date,t=Math.floor((e.getTime()-i.getTime())/1e3);return 60*h.type.duration_minutes-t}const[f,b]=Object(o.useState)(g());Object(o.useEffect)(()=>{if(h.is_active){const e=setInterval(()=>{b(g())},200);return()=>{clearInterval(e)}}},[h.is_active]),Object(o.useEffect)(()=>{const n=60*h.type.duration_minutes,i=f/n*100;i<=10&&!fo&&(fo=!0,t(D.yb.enqueueToast(e.designStateKey,{value:a("zi_create_Z4_Live_EndingSoon")}))),!d&&!bo&&i<0&&(t(P.b.endLiveJob(c,{viaTimeout:!0})),bo=!0)},[d,f]);const v=(()=>{const e=Math.max(0,f),t=e%60;return[Math.floor(e/60/60)||void 0,_o(Math.floor(e/60)%60),_o(t)].filter(e=>void 0!==e).join(":")})(),_=Object(o.useCallback)(()=>{m(!1)},[]),S=Object(o.useCallback)(()=>{d&&t(P.b.endLiveJob(c)),n?(t(P.b.respondEndSession(c,!0)),t(P.b.endLiveJob(c))):t(P.b.endLiveJob(c)),_()},[n,_,d]),C=Object(o.useCallback)(()=>{n&&t(P.b.respondEndSession(c,!1)),_()},[n,_]),E=Object(o.useCallback)(()=>{d?h.designer.can_end_job?m(!0):(t(P.b.requestEndSession(c)),setTimeout(()=>{m(!0)},200)):m(!0)},[d,h.designer.can_end_job]);return Object(o.useEffect)(()=>{n&&m(!0)},[n]),s.a.createElement("div",{className:r()(go.a.root,e.className)},s.a.createElement(X.a,{className:go.a.button,color:"blue",onClick:E,size:"medium"},a("zi_live_EndSession"),"Â â€¢Â ",s.a.createElement("span",{className:go.a.button_time},v)),(()=>{if(!p)return null;const e=d?h.designer.can_end_job?a("zi_create_Z4_Live_DesignerEndSessionByDesignerConfirm"):u?a("zi_create_Z4_Live_DesignerEndSessionByDesigner",{customer:u}):a("zi_create_Z4_Live_DesignerEndSessionByDesignerNoCustomerName"):n?a("zi_create_Z4_Live_CustomerEndSessionByDesigner",{customer:h.designer.name}):a("zi_create_Z4_Live_CustomerEndSessionByCustomer",{designer:h.designer.name}),t=!d||h.designer.can_end_job;return s.a.createElement(Cn.a,{className:go.a.palette,onRequestClose:C},s.a.createElement("div",null,e),t&&s.a.createElement("div",{className:go.a.palette_buttons},s.a.createElement(X.a,{color:"blueOutline",onClick:S,size:"mini"},a(d?"zi_create_Z4_Live_ConfirmAndEndSession":"zi_create_Z4_Live_ApproveAndEndSession")),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(X.a,{color:"ghost",onClick:C,size:"mini"},a("zi_create_Z4_Live_ReturnToSession"))))})())}),yo=e=>Object(l.e)(t=>{var a,n;const i=Object(C.b)(t,e),r=Object(ue.d)(t,i.productStateKey),o=Object(ce.a)(t,Object(_.h)(e)),s=Object(_.l)(r.stateKey),l=Object(_.d)(t,s),c=o&&l&&o.designer_id===l.myId,u=null===(a=l.members.find(e=>e.participant.memberId===o.customer_id))||void 0===a||null===(n=a.participant)||void 0===n?void 0:n.displayName;return{appeal:l.appeal,collabDateCreated:l.dateCreated,collabStateKey:s,customerName:u,iAmLiveDesigner:c,job:o}},l.c);function _o(e){return e<10?"0"+e:e.toString()}var So=a(3039),Do=a.n(So);const Co=Object(o.memo)(e=>{const t=Object(et.c)(),a=Object(l.d)(),{bestDesignRealview:n,collabId:i,collabShortLink:c,editLevel:u,isLive:d,isLoggedIn:h,isPublicCollab:p,isShowingCollabInvitePalette:m}=Eo(e),g=Object(y.e)(),f=Object($.f)(),b=Object(o.useContext)(oe.a),_=s.a.createElement("div",{className:Do.a.or},"Â Â ",g("zi_common_Conjunctions_Or"),"Â Â "),S=t=>{a(Object(D.Kc)(e.designStateKey,{isShowingCollabInvitePalette:t}))};Object(o.useEffect)(()=>{h&&t("Boolean","Z4","DefaultOpenInvitePalette",!1)&&"none"===u&&b.isStandalone&&!d&&a(Object(D.Kc)(e.designStateKey,{isShowingCollabInvitePalette:!0}))},[]);return s.a.createElement("div",{className:r()(Do.a.root,e.className)},s.a.createElement(X.a,{color:"green",onClick:()=>{h?S(!m):e.onShowInlineLoginDialog()},size:"medium"},g("zi_share_Share")),(()=>{if(!m)return null;const t=(()=>{if(!!i){if(p){const e=encodeURIComponent(c),t=Object(Je.d)(n,Object(v.a)().dynamicRealviewUrlBase,{area_default_fill:"00000000",cacheDefeat:(new Date).getTime(),hide:"bleed,safe,visible,visibleMask",image_type:"png",max_dim:1024,rvtype:"pre"}),a=`https://www.facebook.com/sharer/sharer.php?u=${e}&display=page`,i=`https://pinterest.com/pin/create/button/?url=${e}&media=${encodeURIComponent(t)}`,r="https://twitter.com/intent/tweet?text="+e;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",null,g("zi_create_Collab_HereIsLinkToCollab")),s.a.createElement(W.a,{className:Do.a.textToClipboard,value:c}),_,s.a.createElement("div",{className:Do.a.shareOn},g("zi_share_ShareOn")),s.a.createElement("div",{className:Do.a.socialLinks},s.a.createElement("a",{className:Do.a.socialIcon,href:a,rel:"noopener",target:"_blank"},s.a.createElement("img",{alt:g("zi_share_PostWidget_Facebook"),src:f("WwwAst","z4/designtool/share-facebook.svg")})),s.a.createElement("a",{className:Do.a.socialIcon,href:i,rel:"noopener",target:"_blank"},s.a.createElement("img",{alt:g("zi_email_include_footer_tmpl_045"),src:f("WwwAst","z4/designtool/share-pinterest.svg")})),s.a.createElement("a",{className:Do.a.socialIcon,href:r,rel:"noopener",target:"_blank"},s.a.createElement("img",{alt:g("zi_share_Social_Twitter"),src:f("WwwAst","z4/designtool/share-twitter.svg")}))))}return s.a.createElement(se,{autoFocus:!0,designStateKey:e.designStateKey,onSubmitSuccess:()=>{S(!1)}})}return s.a.createElement(s.a.Fragment,null,s.a.createElement(se,{autoFocus:!0,designStateKey:e.designStateKey,onSubmitSuccess:()=>{S(!1)}}),_,s.a.createElement("div",{className:Do.a.startPublicLinkWrapper},s.a.createElement(Ya.a,{onClick:()=>{a(P.b.createNew(e.designStateKey,{origin:"create"===b.flavor?"CREATE":"MARKETPLACE_PRODUCT",public:!0}))}},g("zi_create_Collab_StartedAPublicCollab"))))})();return s.a.createElement(Cn.a,{className:Do.a.palette,onRequestClose:()=>{S(!1)}},s.a.createElement("div",{className:Do.a.inviteCta},g("zi_create_Collab_InvitePalette_CTA_New")),t)})())}),Eo=e=>Object(l.e)(t=>{const a=Object(_.g)(e.designStateKey),n=Object(_.d)(t,a),i=Object(Z.e)(t,e.designStateKey),r=Object(ue.d)(t,i.productStateKey),{realviewId:o}=Object(Je.a)(r.realviews,"Design",void 0,i.design.activeArea);return{bestDesignRealview:r.realviews.find(e=>e.id===o),collabId:null==n?void 0:n.collabId,collabShortLink:null==n?void 0:n.shortLink,editLevel:i.design.editlevel,isLive:null==n?void 0:n.isLive,isLoggedIn:t.User.isLoggedIn,isPublicCollab:null==n?void 0:n.isPublic,isShowingCollabInvitePalette:i.settings.isShowingCollabInvitePalette}},c.q);a(3043);const Oo=Object(q.a)("MenuBar");class wo extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{}),Object(Ot.a)(this,"closePalettes",()=>{this.setState({activeIndex:void 0})}),Object(Ot.a)(this,"togglePalette",e=>{this.state.activeIndex===e?this.setState({activeIndex:void 0}):this.setState({activeIndex:e})}),Object(Ot.a)(this,"renderMenuItem",(e,t)=>{if("separator"===e.type)return s.a.createElement("div",{key:t,className:Oo("&-separator")});if("item"===e.type){const a=e,n=null!=a.selected,i=()=>{a.disabled||(a.onClick&&a.onClick(),n||this.closePalettes())};let r=null;return n&&(r=s.a.createElement("span",{className:Oo("&-toggle")},a.selected?s.a.createElement(V.a,{iconName:V.a.Icon.Checkmark}):null)),s.a.createElement("div",{key:t,className:Oo("&-option",{"&-option--disabled":a.disabled}),onClick:i},s.a.createElement("span",null,a.label),r)}if("link"===e.type){const a=e,n=()=>{a.onClick&&a.onClick(),this.closePalettes()};return s.a.createElement(Se.a,{key:t,className:Oo("&-option","&-link"),onClick:n,href:a.link,target:e.target||"_blank"},a.label)}return""}),Object(Ot.a)(this,"renderMenu",(e,t)=>{const a=this.state.activeIndex===t;return s.a.createElement("div",{key:t,className:Oo("&-menuButtonWrapper",a&&"&-menuButtonWrapper--active",e.className)},s.a.createElement(Oa.a,{className:Oo("&-button","&-button--menu","&-button"+t),disabled:e.disabled,onClick:()=>{var a;this.togglePalette(t),null===(a=e.onClick)||void 0===a||a.call(e)}},e.label),a&&s.a.createElement(Cn.a,{onRequestClose:this.closePalettes},e.options.map(this.renderMenuItem)))})}render(){const{options:e}=this.props;return s.a.createElement("div",{className:Oo("&")},e.map(this.renderMenu))}}var jo=a(2635),Io=a(3040),No=a.n(Io);const ko=e=>{const t=Object(y.e)(),[a,n,i]=Object(ae.i)(e.designStateKey),l=Object(o.useCallback)(()=>{n||(a(),Object(ae.o)("DownloadFile"))},[a,n]),c=Object(o.useMemo)(()=>({width:100*i+"%"}),[i]);return s.a.createElement(X.a,{className:r()(No.a.root,e.className),color:"blue",onClick:l,size:"medium"},n&&s.a.createElement("div",{className:No.a.progress},s.a.createElement(Dr.a,{className:No.a.loadingIcon,size:12}),s.a.createElement("div",{className:No.a.progressBar,style:c})),s.a.createElement("div",{className:No.a.copy},t(n?"zi_common_Application_Downloading":"zi_mk_sell_tools_feeds_aspx_17")))};a(3042);const To=Object(q.a)("Z4DSTitle"),xo=Object(l.b)((e,t)=>{const a=Object(_.d)(e,Object(_.g)(t.designStateKey)),n=Object(C.b)(e,t.designStateKey),i=Object(ue.d)(e,n.productStateKey);return{isWatcher:Object(_.c)(a),productTypeSingularName:i.productTypeSingularName,title:n.design.title}},(e,t)=>({changeTitle:a=>{e(Object(D.yc)(t.designStateKey,a))}}))(e=>{const t=Object(o.useContext)(oe.a),a=Object(y.e)(),[n,i]=Object(o.useState)(!1),r=e.title||Object(ae.c)("",a),[l,c]=Object(o.useState)(r),u=Object(o.useRef)(null);const d=n?l:r;return s.a.createElement("div",{className:To("&",!!e.title&&"&--customTitle")},"create"===t.flavor&&s.a.createElement(s.a.Fragment,null,s.a.createElement("form",{className:To("&-form"),onSubmit:function(e){e.preventDefault(),u.current.blur()}},s.a.createElement("div",{className:To("&-sizer")},s.a.createElement("span",{className:To("&-sizerText")},d.split(" ").map((e,t)=>s.a.createElement(s.a.Fragment,{key:t},e,s.a.createElement("span",null,"Â ")))),s.a.createElement("input",{"aria-label":a("zi_product_Title"),className:To("&-input"),disabled:e.isWatcher,maxLength:50,onBlur:function(){i(!1),l!==e.title&&e.changeTitle(l.trim())},onChange:function(e){c(e.currentTarget.value)},onFocus:function(){i(!0),c(r),u.current.select()},onKeyUp:function(e){27===e.which&&(c(r),setTimeout(()=>{u.current.blur()},50))},ref:u,type:"text",value:d}))),"-"),s.a.createElement("div",{className:To("&-productType")},s.a.createElement("span",{className:To("&-nbsp")}),e.productTypeSingularName))});a(3044);const zo=Object(q.a)("Z4DSToasts"),Po=({designStateKey:e})=>{const t=Object(o.useRef)(null),a=Object(l.d)(),n=Object(l.e)(t=>Object(Z.e)(t,e).settings.toasts),i=n[0],r=Object(o.useCallback)(()=>{null!==t.current&&(clearTimeout(t.current),t.current=null)},[]),c=Object(o.useCallback)(()=>{r();const t=[...n],i=t.shift();return a(Object(D.Kc)(e,{toasts:t})),i},[n]),u=Object(o.useCallback)(()=>{var e;const t=c();null===(e=t.onClick)||void 0===e||e.call(t)},[c]);return Object(o.useEffect)(()=>{if(i)return t.current=setTimeout(()=>{c()},5e3),r},[c]),s.a.createElement(fe.CSSTransitionGroup,{className:zo("&"),transitionEnterTimeout:250,transitionLeaveTimeout:250,transitionName:zo("&-transition-")},i&&s.a.createElement("div",{className:zo("&-toastRow"),key:i.key},s.a.createElement("button",{className:zo("&-toast"),onClick:u},i.value)))};var Fo=a(3036),Mo=a.n(Fo);const Ao=Object(o.memo)(({designStateKey:e,onShare:t,onShowInlineLoginDialog:a,showCancel:n})=>{var i;const l=Object(o.useContext)(oe.a),c=Bo(e),u=Ro(e),d=Object(S.a)(),p=Object(y.e)(),m=Object($.f)(),[g]=Object(o.useState)(c.revision),{activeAreaGroupTitle:f,addToCartDisabled:b,canCopy:_,canCut:D,canPaste:C,collabIsWatcher:E,collabMyId:O,darkBg:w,designToolPbj:j,hideZoom:I,iAmLiveCustomer:N,iAmLiveDesigner:k,includeFileMenu:T,internalAdvanced:x,isCollabOwner:z,isDigital:P,isInCollab:F,isLive:M,isLoggedIn:A,isSaving:L,isVizLite:U,perUnitLabel:K,postForSaleDisabled:Z,price:W,productStateKey:q,productType:Y,productTypeSingularName:Q,showGridlines:J,showGuidelines:ee,snapping:te,vectorImageMaxColors:ae}=c,{onUpdateSettings:ne}=u,{isStandalone:ie}=l;Object(o.useEffect)(()=>{ie&&b&&ne({activeContentTab:"products"})},[b,ie]);const re=()=>{const e=s.a.createElement(R.default,{mode:B.a.Warning,onCancel:()=>{u.closeDialog(e)},onOk:()=>{u.onClearSide(),u.closeDialog(e)},onRequestClose:()=>{u.closeDialog(e)}},p("zi_create_design_clearSideWarning_React",{0:f,1:Q}));u.openDialog(e,"clearSideAlert")},se=()=>{d.room||d.disconnect(),u.onExitDesignSpace(q,O)},le=()=>{u.onCancel(g),u.onExitDesignSpace(q,O)},ce=(!F||z)&&!Object(v.a)().isDisneyIframe,ue=(!F||z||k)&&!Object(v.a)().isDisneyIframe&&!U,de=!!(null==j?void 0:j.designTipsFaqAnsSlug),he=(null!==(i=Object(ii.c)(ii.a.Z4DT_DESIGN_TIPS_SEEN_PDTS))&&void 0!==i?i:[]).includes(Y),[pe,me]=Object(o.useState)(de&&!he),ge=(()=>{const e=[];if(T){const a=[{label:p("zi_create_Z4_DesignSpace_NewDesign"),link:m("WwwPag","create/designtool"),type:"link"},{disabled:Z,label:p("zi_create_Z4_DesignSpace_PublishOnZazzle"),onClick:()=>{u.onPostForSale(q)},type:"item"}];ce&&t&&a.push({label:p("zi_create_Z4_DesignSpace_ShareDesign"),onClick:t,type:"item"}),a.push({type:"separator"},{label:p("zi_create_Z4_DesignSpace_BackToHome"),link:m("WwwPag","create"),target:"_self",type:"link"}),e.push({disabled:E,label:p("zi_create_Z4_DesignSpace_FileMenu"),options:a})}if(e.push({disabled:E,label:p("zi_common_Application_Edit"),options:[{label:p("zi_common_Application_SelectAll"),onClick:u.onSelectAll,type:"item"},{label:p("zi_common_Application_SelectNone"),onClick:u.onSelectNone,type:"item"},{type:"separator"},{disabled:!D,label:p("zi_common_Application_Cut"),onClick:u.onCut,type:"item"},{disabled:!_,label:p("zi_common_Application_Copy"),onClick:u.onCopy,type:"item"},{disabled:!C,label:p("zi_common_Application_Paste"),onClick:u.onPaste,type:"item"},{label:p("zi_create_design_clearAllDesignElements"),onClick:re,type:"item"}]}),ue){const t=[];F&&!z||t.push({label:p("zi_create_Collab_InviteFriends"),onClick:()=>{ne({isShowingCollabInvitePalette:!0})},type:"item"}),F&&z&&t.push({label:p("zi_myzazzle_MyZazzleStoreSubNav_Manage"),onClick:()=>{ne({isShowingCollabManagementDialog:!0})},type:"item"}),F&&(t.length>0&&t.push({type:"separator"}),t.push({disabled:E,label:p("zi_create_Collab_OpenChat"),onClick:()=>{ne({chatWindowStatus:"maximized"})},type:"item"})),k&&t.push({label:p("zi_create_Z4_Live_ViewDesignRequest"),onClick:()=>{ne({isShowingLiveJobDialog:!0})},type:"item"}),e.push({disabled:E&&!z,label:p("zi_create_Collab_Collaborate"),options:t})}const a=[{label:p("zi_create_design_settings_gridLines"),onClick:()=>{ne({showGridlines:!J}),Object(G.h)(H.a.ToggledGridlines())},selected:J,type:"item"},{label:p("zi_create_design_settings_guideLines"),onClick:()=>{ne({showGuidelines:!ee}),Object(G.h)(H.a.ToggledGuidelines())},selected:ee,type:"item"},{label:p("zi_create_design_settings_snapping"),onClick:()=>{ne({snapping:!te}),Object(G.h)(H.a.ToggledSnapping())},selected:te,type:"item"},{label:p("zi_create_design_settings_darkbg"),onClick:()=>{ne({darkbg:!w}),Object(G.h)(H.a.ToggledDarkBg())},selected:w,type:"item"},{label:p("zi_create_design_settings_hideZoom"),onClick:()=>{ne({hideZoom:!I}),Object(G.h)(H.a.ToggledHideZoom())},selected:I,type:"item"}];if(x){const e=0!==ae;a.push({label:p("zi_create_design_settings_insertVectorImagePalette"),onClick:()=>{ne({vectorImageMaxColors:e?0:void 0}),Object(G.h)(H.a.ToggledGuidelines())},selected:e,type:"item"})}e.push({disabled:E,label:p("zi_common_Application_Settings"),options:a});const n=[];return de&&n.push({label:s.a.createElement("span",{className:Mo.a.designTipsOption},s.a.createElement(V.a,{iconName:V.a.Icon.Star}),p("zi_create_Z3_DesignTool_ProductDesignTips",{productType:Q})),link:m.faqAnsPag(j.designTipsFaqAnsSlug),target:"_blank",type:"link"}),n.push({label:p("zi_create_Z3_KeyboardShortcuts_Shortcuts"),onClick:()=>{ne({activeContentTab:"help",activeHelpTab:"shortcuts"})},type:"item"}),n.push({label:p("zi_create_Z3_DesignTool_Guidelines"),onClick:()=>{ne({activeContentTab:"help",activeHelpTab:"guidelines"})},type:"item"}),e.push({className:pe&&Mo.a.designTipsBadge,disabled:E,label:p("zi_common_Application_Help"),onClick:()=>{if(pe){me(!1);const e=Object(ii.c)(ii.a.Z4DT_DESIGN_TIPS_SEEN_PDTS)||[];e.push(Y),Object(ii.e)(ii.a.Z4DT_DESIGN_TIPS_SEEN_PDTS,e)}},options:n}),Object(v.a)().isDisneyIframe||n.push({label:p("zi_search_Feedback_Help_HelpCenter"),link:m("External","helphome"),type:"link"}),e})();let fe;if(L)fe=p("zi_create_Z3_DesignTool_Saving");else if(fe=p("zi_create_Z3_DesignTool_AllChangesSaved"),!Object(v.a)().isDisneyIframe&&(!F||z)){const e=P?m("WwwPag","create/designs"):m("WwwPag","lgn/signin",{mlru:"inprogress"});fe=s.a.createElement(wa.a,{overlay:p("zi_myzazzle_InProgress")},s.a.createElement(Se.a,{href:e,target:"_blank"},fe))}const be=[];return A||Object(v.a)().isDisneyIframe||be.push(s.a.createElement("div",{className:Mo.a.rightGroup,key:"login"},s.a.createElement(Ya.a,{className:Mo.a.loginLink,onClick:a},p("zi_create_Z4_DesignSpace_LoginToSave")," ",s.a.createElement("span",{className:Mo.a.loginText},p("zi_common_Login_SignIn"))))),F&&be.push(s.a.createElement("div",{className:Mo.a.rightGroup,key:"collaborators"},s.a.createElement(h.a,null,s.a.createElement(po,{designStateKey:e})))),be.push(s.a.createElement("div",{className:Mo.a.rightGroup,key:"stitch"},s.a.createElement(h.a,null,s.a.createElement(jo.a,{designStateKey:e})))),k||be.push(s.a.createElement("div",{className:Mo.a.rightGroup,key:"invite/download/done"},n&&s.a.createElement(X.a,{className:Mo.a.cancel,color:"orange",onClick:le,size:"medium"},p("zi_common_Application_Cancel")),ue&&s.a.createElement(Co,{className:Mo.a.invite,designStateKey:e,onShowInlineLoginDialog:a}),P&&!M&&s.a.createElement(ko,{className:Mo.a.download,designStateKey:e}),!ie&&s.a.createElement(X.a,{color:"blue",onClick:se,size:"medium"},p("zi_common_Application_Done")))),M||!ie||P||be.push(s.a.createElement("div",{className:Mo.a.rightGroup,key:"buy"},s.a.createElement("div",{className:Mo.a.priceDisplay},s.a.createElement("span",{className:Mo.a.price},Object(oo.a)(W)),s.a.createElement("span",{className:Mo.a.perUnitLabel},K)),s.a.createElement(X.a,{className:Mo.a.buy,color:"orange",onClick:u.onBuyClick,size:"medium"},p("zi_common_Buy")))),(N||k)&&be.push(s.a.createElement("div",{className:Mo.a.rightGroup,key:"endSession"},s.a.createElement(vo,{designStateKey:e}))),s.a.createElement("div",{className:r()(Mo.a.root,{[Mo.a.root__isDisney]:Object(v.a)().isDisneyIframe})},!Object(v.a)().isDisneyIframe&&s.a.createElement(Se.a,{className:Mo.a.logoLink,href:"/"},s.a.createElement(V.a,{className:Mo.a.logo,iconName:V.a.Icon.Logo,title:p("zi_common_zazzle_upper")})),s.a.createElement("div",{className:Mo.a.titleMenuStatus},s.a.createElement(xo,{designStateKey:e}),s.a.createElement("div",{className:Mo.a.menuStatus},s.a.createElement(wo,{options:ge}),Object(v.a)().isDisneyIframe&&s.a.createElement(Ya.a,{className:r()(Mo.a.status,Mo.a.disneyStatus),onClick:()=>{ne({isShowingCustomizationRestrictionsDialog:!0})}},p("zi_common_AcceptableContent2")),s.a.createElement("span",{className:r()(Mo.a.status,Mo.a.saveStatus)},fe))),be,s.a.createElement(Po,{designStateKey:e}))}),Ro=e=>{const t=Object(l.d)();return Object(o.useMemo)(()=>({closeDialog:e=>{t(Object(It.c)(e))},onBuyClick:()=>{t(D.vb.cloneAndRedirect(e)),Object(G.h)(H.a.Buy()),Object(ae.o)("ClickBuyButton")},onCancel:a=>{t(D.Cc(e,a))},onClearSide:()=>{t(D.gc(e)),t(D.Lb(e)),Object(G.h)(H.a.ClearedSide())},onCopy:()=>{t(D.Jb(e)),Object(G.h)(H.a.Copy())},onCut:()=>{t(D.Kb(e)),Object(G.h)(H.a.Cut())},onExitDesignSpace:(a,n)=>{t(P.b.giveControl(Object(_.g)(e),{memberId:n})),t(Object(K.N)(a))},onPaste:()=>{t(D.Ec(e,{selection:[]})),t(D.Zb(e)),Object(G.h)(H.a.Paste())},onPostForSale:e=>{t(Object(K.X)(e))},onSelectAll:()=>{t(D.gc(e))},onSelectNone:()=>{t(D.Ec(e,{selection:[]}))},onUpdateSettings:a=>{t(D.Kc(e,a))},openDialog:(e,a)=>{t(Object(It.d)(e,a))}}),[e])},Bo=e=>{const t=Object(oa.a)(e=>Object(io.e)(e).designTool);return Object(l.e)(a=>{const n=Object(C.b)(a,e),i=Object(ue.d)(a,n.productStateKey),r=Object(Z.k)(a,e),o=!(0===r.length||r.some(e=>e.locked)),s=r.length>0,l=n.design.paste,c=Object(Z.g)(a,n.settings),u=n.design.activeArea,d=Object(Te.c)(i.areaGroupsInfo,u),h=d?d.title:"",p=Object(ce.a)(a,Object(_.h)(e)),m=Object(_.d)(a,Object(_.l)(i.stateKey)),g=p&&m&&p.customer_id===m.myId,f=p&&m&&p.designer_id===m.myId;return{activeAreaGroupTitle:h,addToCartDisabled:Object(U.f)(a,i,n.design),canCopy:s,canCut:o,canPaste:l,collabIsWatcher:m&&m.driverId!==m.myId,collabMyId:m&&m.myId,darkBg:c.darkbg,designToolPbj:t(i.pbjOverrides),hideZoom:c.hideZoom,iAmLiveCustomer:g,iAmLiveDesigner:f,includeFileMenu:a.page.includeFileMenu,internalAdvanced:a.page.internalEditMode,isAddingToCart:i.isAddingToCart,isCollabDriver:m&&m.driverId===m.myId,isCollabOwner:m&&m.ownerId===m.myId,isDigital:i.isDigital,isInCollab:!!m,isLive:null==m?void 0:m.isLive,isLoggedIn:a.User.isLoggedIn,isSaving:c.isSaving,isVizLite:i.isVizLite,perUnitLabel:i.perUnitLabel,postForSaleDisabled:Object(U.q)(a,i,n.design),price:Object(ro.a)(i.pricing,null),productStateKey:n.productStateKey,productType:i.productType,productTypeSingularName:i.productTypeSingularName,revision:n.design.revision,showGridlines:c.showGridlines,showGuidelines:c.showGuidelines,snapping:c.snapping,vectorImageMaxColors:c.vectorImageMaxColors}},c.q)};var Lo=a(2463),Uo=a(552),Ko=a(667),Go=a(3112),Ho=a.n(Go);const Zo=({designStateKey:e,qrCode:t})=>{const a=Object(l.d)(),n=Object(y.e)(),{mostRecentFont:i,seedObject:r}=Wo(e),[c,u]=Object(o.useState)((null==r?void 0:r.value)||""),d=n(t?r?"zi_create_EditURL":"zi_create_AddURL":r?"zi_create_EditTextSentenceCase":"zi_create_AddText"),h=()=>{a(t?Object(D.Kc)(e,{isAddingQRCode:!1,isEditingQRCode:!1}):Object(D.Kc)(e,{isAddingText:!1,isEditingText:!1}))},p=()=>{r?c?t?(a(Object(D.sc)(e,{value:c})),Object(G.h)(H.a.EditedQRCode())):(a(Object(D.xc)(e,{value:c})),Object(G.h)(H.a.EditedText())):(a(Object(D.Lb)(e)),t?Object(G.h)(H.a.EditedQRCode(!0)):Object(G.h)(H.a.EditedText(!0))):c&&(t?(a(Object(D.Bb)(e,[c])),Object(G.h)(H.a.AddedQRCode())):(a(Object(D.Hb)(e,[c],i)),Object(G.h)(H.a.AddedText()))),h()};return s.a.createElement(Y.a,{bodyClassName:Ho.a.dialog_body,includeHeader:!1,onCancel:h,onOk:p,onRequestClose:h},s.a.createElement("h1",{className:Ho.a.title},d),s.a.createElement(Uo.a,{autoSetRows:!0,className:Ho.a.textarea,onChange:u,onSubmitShortcut:p,selectAllOnInitialFocus:!0,textAreaClassName:Ho.a.textarea_textarea,value:c}),t&&s.a.createElement(Lo.a,{className:Ho.a.errorMessage,tentativeValue:c}))},Wo=e=>{const t=Object(Z.n)();return Object(l.e)(a=>{const n=Object(C.b)(a,e),i=t(a,e);let r=null;i.length>0&&(n.settings.isEditingText&&"text"===i[0].type||n.settings.isEditingQRCode&&"qrcode"===i[0].type)&&(r=i[0]);const o=Object(ue.d)(a,n.productStateKey);return{mostRecentFont:Object(Ko.b)(n,o),seedObject:r}},c.q)};a(3108);const Vo=Object(q.a)("Z4DSUploader");class qo extends s.a.Component{constructor(...e){super(...e),Object(Ot.a)(this,"state",{isDragging:!1}),Object(Ot.a)(this,"handleUploadFinish",e=>{this.props.onAddImages([e.fileGuid])}),Object(Ot.a)(this,"handleSetDragState",e=>{this.setState({isDragging:e})})}render(){const{activeAreaInfo:e,uploaderId:t,zString:a}=this.props,n=e&&Object(mn.b)(e.convertableImageTypes,e.imageTypes);return s.a.createElement("div",{className:Vo("&")},this.state.isDragging&&s.a.createElement("div",{className:Vo("&-overlay")},s.a.createElement(V.a,{className:Vo("&-icon"),iconName:V.a.Icon.DragDrop}),a("zi_myzazzle_MediaBrowser_DragDropImage")),s.a.createElement(hn.a,{className:Vo("&-fileInput"),uploaderID:t,onUploadFinish:this.handleUploadFinish,onSetDragState:this.handleSetDragState,onSetDragEnterEventHandler:this.props.onSetDragEnterEventHandler,uploadParams:{[$.a.CategoryId]:"1"},createPreview:!0,accept:n,buttonContent:""}))}}const $o=Object(l.b)((e,t)=>{const a=Object(C.b)(e,t.designStateKey),n=Object(ue.d)(e,a.productStateKey);return{activeAreaInfo:Object(Te.d)(n.areaGroupsInfo,a.design.activeArea),zString:Object(y.a)(e)}},(e,t)=>({onAddImages:a=>{t.uploadToCollab?e(P.b.addImages(Object(_.g)(t.designStateKey),{imageIds:a})):(e(D.yb.addImages(t.designStateKey,{ids:a})),Object(G.h)(H.a.AddedImage()))}}))(qo);var Xo=a(1089),Yo=a(1134),Qo=a(3045),Jo=a.n(Qo);const es=Object(o.memo)(e=>{var t;const{collabStateKey:a,designRealview:n,designTimestamp:i,driver:c,iAmOwner:u,isDigital:d,isLive:h,myId:p,productRealviews:m}=ts(e),[g,b]=Object(o.useState)(0),[_,S]=Object(o.useState)(0),D=Object(l.d)(),C=Object(o.useRef)(),E=Object(o.useRef)(),O=Object(y.e)(),w=d?m:[n,...m];Object(o.useEffect)(()=>{_>=w.length&&S(0)},[w.length,_]);const j=null!==(t=w[_])&&void 0!==t?t:w[0],I=Object(o.useCallback)(e=>{S(w.findIndex(t=>t.id===e))},[w]),k=Object(o.useCallback)(()=>{D(P.b.giveControl(a,{memberId:p}))},[a,p]);return Object(f.a)(()=>{const e=C.current.getBoundingClientRect(),t=E.current.getBoundingClientRect(),a=[e.width-t.width,e.height];b(Math.min(...a))}),s.a.createElement("div",{className:r()(Jo.a.root,e.className)},s.a.createElement("div",{className:Jo.a.statusBar},s.a.createElement("div",{className:r()(Jo.a.statusPill,h&&Jo.a.statusPill__live)},h?""+O("zi_common_Live"):O("zi_create_Collab_Watching")),s.a.createElement("div",null,O("zi_create_Collab_PersonIsDesigning",{person:c.displayName})),!h&&u&&s.a.createElement("div",{className:Jo.a.takeControl},s.a.createElement(Ya.a,{onClick:k},O("zi_create_Collab_TakeControl")))),s.a.createElement("div",{className:Jo.a.stage,ref:C},s.a.createElement("div",{className:Jo.a.viewSelector,ref:E},s.a.createElement(Yo.a,{designTimestamp:i,direction:"column",filterToProductViews:!1,handleViewClick:I,imageSize:92,isVizLite:!1,realviewUrlBase:Object(v.a)().dynamicRealviewUrlBase,realviews:w,selectedRealviewId:j.id,templateParamsOverrides:{}})),g>0&&s.a.createElement(Xo.ProductView,{className:Jo.a.productView,designTimestamp:i,imageSize:g,isVizLite:!1,realview:j})),s.a.createElement("div",{className:Jo.a.chatContainer},s.a.createElement(N,{canClose:!1,canToggle:!1,designStateKey:e.designStateKey,style:"DesignToolWatcher"})))}),ts=e=>Object(l.e)(t=>{const a=Object(Z.e)(t,e.designStateKey),n=Object(ue.d)(t,a.productStateKey),i=Object(Je.b)(n.realviews,a.design.activeView,a.design),r=n.realviews.filter(e=>"Product"===e.type),o=Object(_.g)(e.designStateKey),s=Object(_.d)(t,o),l=s.members.find(e=>e.participant.memberId===s.driverId).participant;return{collabStateKey:o,designRealview:i,designTimestamp:Object(Te.i)(a,!0),driver:l,iAmOwner:s.myId===s.ownerId,isDigital:n.isDigital,isLive:s.isLive,myId:s.myId,productRealviews:r}},l.c);var as=a(3034),ns=a.n(as);const is=s.a.lazy(()=>a.e(429).then(a.bind(null,3611))),rs=s.a.lazy(()=>a.e(377).then(a.bind(null,3606))),os={height:0,width:0,bottom:0,left:0,top:0,right:0,x:0,y:0},ss=e=>{let{flavor:t="marketplace"}=e,a=Object(n.a)(e,["flavor"]);const i=Object(y.e)(),l=ls(a),{designError:c,maxDim:_}=l,S=Object(n.a)(l,["designError","maxDim"]),D=cs(a),C=Object(o.useRef)();Object(ae.k)();const[E,O]=Object(o.useState)(),[w,j]=Object(o.useState)();Object(o.useEffect)(()=>(S.shouldAddImageOnEnterDesignSpace?D.updateSettings({activeContentTab:"uploads"}):S.shouldAddTextOnEnterDesignSpace&&D.updateSettings({activeContentTab:"text",isAddingText:!0}),D.resetTheShoulds(),Object(G.h)(H.a.Seen(S.isBlankInstance,S.isSavedDesign,S.isVizLite)),()=>{D.clearDesignError()}),[]),Object(o.useEffect)(()=>{window.setZ4CanvasRenderMode=S.isInternalAdvanced?D.setDesignCanvasRenderMode:void 0},[S.isInternalAdvanced,D.setDesignCanvasRenderMode]),Object(p.b)(),Object(o.useEffect)(()=>Object(b.a)(C.current),[]);const I=Object(o.useCallback)(e=>{j({func:e})},[]),[k,x]=Object(o.useState)(),z=Object(o.useCallback)(()=>x(!0),[]),P=Object(o.useCallback)(()=>x(!1),[]),F=Object(o.useCallback)(()=>{D.updateSettings({isShowingAboutThisProduct:!1})},[D.updateSettings]),[M,U,K]=Object(m.a)(os);Object(f.a)(K,100,"debounce"),Object(o.useLayoutEffect)(()=>{K()},[S.collabIsWatcher]);const[Z,W,V]=Object(m.a)(os),q=Object(o.useMemo)(()=>{if(W){const e=W.left+.5*(W.width-_),t=W.right-.5*(W.width-_),a=W.top+.5*(W.height-_);return{bottom:W.bottom-.5*(W.height-_),height:_,left:e,right:t,top:a,width:_,x:e,y:a}}return os},[W,_]),[$,X]=Object(o.useState)(!1),Y=Object(o.useCallback)(e=>{e&&(V(),K()),X(e)},[]),{InlineLoginIframeDialogClass:Q,designStateKey:ee,isStandalone:te,onFollow:ne,productStateKey:ie}=a,re=Object(o.useMemo)(()=>({flavor:t,isStandalone:te}),[t,te]);let se;if(c&&c!==E){const e=()=>{O(c)},t=()=>{O(c),x(!0)},a=()=>{window.location.reload()};if("DesignIdInvalid"!==c.Name||c.LoggedIn)se="SourceProduct cannot load productid"===c.Message?s.a.createElement(ge.Z4DSSearchProductDeletedDialog,{onOk:e}):s.a.createElement(R.default,{cancelText:i("zi_create_Z3_DesignTool_RLVErrorReload"),mode:B.a.Info,okText:i("zi_create_Z3_DesignTool_RLVErrorTryAgain"),onCancel:e,onOk:e,onRequestClose:e,title:i("zi_create_Z3_DesignTool_RLVErrorTitle")},i("zi_create_RlvNetError_Message_React"));else{const n=s.a.createElement(d.d,{onClick:a},i("zi_create_Z3_DesignTool_RLVErrorReload"));se=s.a.createElement(R.default,{additionalButtons:n,cancelText:i("zi_create_Z3_DesignTool_RLVErrorTryAgain"),mode:B.a.Info,okText:i("zi_common_Login"),onCancel:e,onOk:t,onRequestClose:e,title:i("zi_create_Z3_DesignTool_RLVErrorTitle")},i("zi_create_Z3_DesignTool_RLVLoggedOutError"))}}const ce=Object(g.a)(),ue=Object(o.useMemo)(()=>{if(ce)return{bottom:"initial",height:ce+"px"}},[ce]),de=s.a.createElement("div",{className:r()(ns.a.root,{[ns.a.root__isInFullscreenPreview]:S.designPreviewFullscreen,[ns.a.root__isTablet]:Object(v.a)().isTablet},a.className),onDragEnter:Object(v.a)().isDisneyIframe?void 0:w&&w.func,ref:C,style:ue},s.a.createElement(Ao,{designStateKey:ee,onShare:a.onShare,onShowInlineLoginDialog:z,showCancel:a.showCancel}),S.collabIsWatcher?s.a.createElement(es,{className:ns.a.watcherMode,designStateKey:ee}):s.a.createElement("div",{className:ns.a.main},s.a.createElement(Rn,{designStateKey:ee,onFollow:ne,onShowInlineLoginDialog:z,inlineLoginDialog:Q,updateStageDimensions:K,canvasRect:q,eyeDropperClipEleRect:U,eyeDropperActiveOnChange:Y}),s.a.createElement("div",{className:ns.a.editor},s.a.createElement(Yr,{designStateKey:ee}),s.a.createElement("div",{className:ns.a.stage},s.a.createElement("div",{className:ns.a.stageCenter,ref:M},U&&s.a.createElement(Br,{canvasWrapperRef:Z,designStateKey:ee,errors:S.errors,eyeDropperIsActive:$,showAreaGroupIndicator:!S.collabIsWatcher,showZoomControl:!S.hideZoom&&!S.collabIsWatcher,stageRect:U,updateCanvasRect:V,uploaderId:"Z4DesignSpaceFileInput"}),S.isInCollab&&s.a.createElement("div",{className:r()(ns.a.driverChatContainer,"maximized"===S.chatWindowStatus&&ns.a.driverChatContainer__maximized)},s.a.createElement(N,{canClose:!0,canToggle:!0,designStateKey:ee,style:"DesignToolDriver"})),s.a.createElement(L.a,{dismissable:!0,origin:te?"CREATE":"MARKETPLACE_PRODUCT",productStateKey:ie,className:ns.a.liveAd})),s.a.createElement(br,{canvasRect:q,designStateKey:ee,eyeDropperClipEleRect:U,eyeDropperActiveOnChange:Y})))),!Object(v.a)().isDisneyIframe&&s.a.createElement($o,{designStateKey:ee,onSetDragEnterEventHandler:I,uploaderId:"Z4DesignSpaceFileInput",uploadToCollab:S.collabIsWatcher}),se,k&&s.a.createElement(Q,{onLoginSuccess:P,onRequestClose:P}),S.tentativeImageToDigitize&&s.a.createElement(Lr.a,{designStateKey:ee,image:S.tentativeImageToDigitize}),S.isPromptingToSizeAreaToImage&&s.a.createElement(vr.a,{productStateKey:ie,standardSize:S.isPromptingToSizeAreaToImage.standard,customSize:S.isPromptingToSizeAreaToImage.custom}),S.isShowingAboutThisProduct&&s.a.createElement(Va,{onRequestClose:F,productStateKey:ie}),S.isShowingCollabManagementDialog&&s.a.createElement(le,{designStateKey:ee}),S.isShowingCustomizationRestrictionsDialog&&s.a.createElement(_r,{designStateKey:ee}),S.isShowingDesignReplaceConfirmationDialog&&s.a.createElement(Sr.a,{designStateKey:ee}),S.isShowingNavigateToCollabDialog&&s.a.createElement(J,{collabId:S.isShowingNavigateToCollabDialog.collabId,emails:S.isShowingNavigateToCollabDialog.emails,isPublic:S.isShowingNavigateToCollabDialog.public,onOk:()=>{D.updateSettings({isShowingNavigateToCollabDialog:void 0})},shortLink:S.isShowingNavigateToCollabDialog.shortLink}),S.showQRCodeInput&&s.a.createElement(Zo,{designStateKey:ee,qrCode:!0}),S.showTextInput&&s.a.createElement(Zo,{designStateKey:ee}),S.isShowingLiveJobDialog&&s.a.createElement(ao,{designStateKey:ee}),S.isShowingSessionSummaryDialog&&s.a.createElement(pe,{designStateKey:ee}),s.a.createElement(h.a,null,s.a.createElement(o.Suspense,{fallback:s.a.createElement("div",null)},s.a.createElement(T.a.Consumer,null,e=>e.isShowingSettingsDialog&&s.a.createElement(rs,null)))));return s.a.createElement(oe.a.Provider,{value:re},s.a.createElement(A,{collabStateKey:S.collabStateKey,designStateKey:ee},s.a.createElement(u.a,{enabled:!te},de),s.a.createElement(h.a,null,s.a.createElement(o.Suspense,{fallback:s.a.createElement("div",null)},s.a.createElement(T.a.Consumer,null,e=>e&&s.a.createElement(is,null))))))},ls=e=>{const t=Object(o.useMemo)(U.n,[]);return Object(l.e)(a=>{const n=Object(C.b)(a,e.designStateKey),i=Object(C.b)(a,e.productStateKey),r=Object(_.l)(i.stateKey),o=Object(_.d)(a,r),s=Object(Z.g)(a,n.settings);return{chatWindowStatus:s.chatWindowStatus,collabId:null==o?void 0:o.collabId,collabIsWatcher:Object(_.c)(o),collabStateKey:r,designError:n.error,designId:n.design.id,designPreviewFullscreen:s.designPreviewFullscreen,errors:t(a,i,n.design),hideZoom:s.hideZoom,isBlankInstance:i.isBlankInstance,isInCollab:!!o,isInternalAdvanced:a.page.internalEditMode,isPromptingToFocusArea:s.isPromptingToFocusArea,isPromptingToSizeAreaToImage:s.isPromptingToSizeAreaToImage,isSavedDesign:i.isSavedDesign,isShowingAboutThisProduct:s.isShowingAboutThisProduct,isShowingCollabManagementDialog:s.isShowingCollabManagementDialog,isShowingCustomizationRestrictionsDialog:s.isShowingCustomizationRestrictionsDialog,isShowingLiveJobDialog:s.isShowingLiveJobDialog,isShowingDesignReplaceConfirmationDialog:s.isShowingDesignReplaceConfirmationDialog,isShowingNavigateToCollabDialog:s.isShowingNavigateToCollabDialog,isShowingSessionSummaryDialog:s.isShowingSessionSummaryDialog,isVizLite:i.isVizLite,maxDim:n.design.max_dim,productStateKey:i.stateKey,shouldAddImageOnEnterDesignSpace:i.shouldAddImageOnEnterDesignSpace,shouldAddTextOnEnterDesignSpace:i.shouldAddTextOnEnterDesignSpace,showTextInput:s.isAddingText||s.isEditingText,showQRCodeInput:s.isAddingQRCode||s.isEditingQRCode,tentativeImageToDigitize:a.entities.images[s.tentativeImageIdToDigitize]}},c.q)},cs=e=>{const t=Object(l.d)();return Object(o.useMemo)(()=>({clearDesignError:()=>{t(Object(D.kc)(e.designStateKey,null))},resetTheShoulds:()=>{t(Object(K.fb)({shouldAddImageOnEnterDesignSpace:!1,shouldAddTextOnEnterDesignSpace:!1},e.productStateKey))},setDesignCanvasRenderMode:a=>{t(Object(D.Ic)(e.designStateKey,{mode:a}))},sizeAreaToImageDeny:()=>{t(D.yb.sizeAreaToImageDeny(e.designStateKey))},updateSettings:a=>{t(Object(D.Kc)(e.designStateKey,a))}}),[e.designStateKey,e.productStateKey])};t.default=ss},1332:function(e,t,a){"use strict";var n=a(5),i=a(37),r=a(709),o=a(2),s=a(26),l=a.n(s),c=a(61),u=a.n(c),d=a(0),h=a.n(d),p=a(16),m=a(734),g=a(6),f=a(10),b=a(59),v=a(8),y=a(14),_=a(93),S=a(30),D=a(151),C=a(1458),E=a(1092),O=a(613);a(1643);const w={itemProp:"manufacturer",itemScope:!0,itemType:"http://schema.org/Organization"},j={itemProp:"brand",itemScope:!0,itemType:"http://schema.org/Brand"},I=Object(f.a)("ProfileCard"),N=({badge:e,className:t,fanMerchProfile:a,followingInfo:n,includeActions:i=!0,includeLocation:s=!0,includeViewStoreLink:c=!0,ownerMemberProfile:d,pid:f,profile:N,renderImages:k=!0,store:T})=>{const x=Object(v.e)(),z=Object(y.f)(),P=N&&"Maker"!==N.type&&N.showContact,F="Maker"===(null==N?void 0:N.type)?"AskMaker":"AskDesigner";if(!N)return null;const M="Maker"===N.type?x("zi_store_Maker_Profile_Contact"):x("zi_product_ProductPage_ContactButton");return h.a.createElement("div",{className:I("&")},(()=>{const n="Maker"===N.type?w:"Store"===N.type?j:{},i=T&&u()(T.totalReviewCount)&&T.totalReviewCount>0?[h.a.createElement(m.a,{key:"stars",readonly:!0,value:T.reviewRating}),h.a.createElement("span",{key:"reviews",className:I("&-numReviews")},x("zi_store_Maker_Profile_NumReviews",{numReviews:Object(b.d)(T.totalReviewCount)}))]:null,d=h.a.createElement("div",{className:I("&-infoWrapper")},h.a.createElement(r.a,{className:I("&-badge"),badge:e,renderImage:k,zUrl:z}),h.a.createElement("div",{className:I("&-attribution")},a?x("zi_product_storeInfoTaglineFanmerch",{fanmerchDesigner:a.name}):"Maker"===N.type?x("zi_maker_ProfileCard_madeBy"):x("zi_product_storeInfoTagline")),h.a.createElement("div",{className:I("&-nameAndLocation")},h.a.createElement(p.a,{className:I("&-name"),href:N.link,itemProp:"url",onClick:()=>Object(S.h)(D.a.ClickOnDesignerNameInBelowTheFold()),rel:"Maker"!==N.type?"nofollow":void 0},h.a.createElement("span",{itemProp:"name"},l()(N.name)?N.storeHandle:N.name)),s&&(N.location?h.a.createElement("div",{className:I("&-locationWrapper")},h.a.createElement(g.a,{iconName:g.a.Icon.Location}),N.location):null)),h.a.createElement("div",{className:I("&-additionalInfo")},"Maker"===N.type&&T&&h.a.createElement(p.a,{className:I("&-reviewRating"),href:N.link+"/reviews",rel:"nofollow"},i),c&&h.a.createElement(p.a,{className:I("&-viewStoreLink"),href:N.link,onClick:()=>Object(S.h)(D.a.ClickOnViewStore()),rel:"nofollow"},"Member"===N.type?x("zi_product_StoreInfo_ViewProfile"):x("zi_product_StoreInfo_ViewStore"))));return h.a.createElement("div",Object(o.a)({className:I("&-mainLinkWrapper",t)},n),N&&h.a.createElement(O.a,{alt:N.name,imageUrl:N.imageUrl,renderImage:k,size:O.b.Regular,type:N.type}),d)})(),i&&h.a.createElement("div",{className:I("&-actions")},h.a.createElement("div",{className:I("&-ask")},P?h.a.createElement(E.a,{ownerMemberProfile:d,pid:f,profile:N}):h.a.createElement(_.a,{color:"blueOutline",href:z("WwwPag","about/ask",{context:F,prf:N.ownerId,pd:f}),onClick:()=>Object(S.h)(D.a.ClickOnAskCreator(N.type)),size:"mini"},M)),n&&("Store"===N.type||"Maker"===N.type)&&h.a.createElement(C.a,{isFollowing:n.isFollowing,storeId:T.id})))};const k=Object(n.b)((e,t)=>{let a=e.entities.profiles[t.profileId];a&&!a.isVisible&&"Store"===a.type&&(a=e.entities.profiles[a.memberId]);const n=t.productStateKey?Object(i.d)(e,t.productStateKey):null;let o,s;return n&&a&&a.isVisible&&"Store"===a.type&&(o=e.entities.profiles[n.fanMerchDesignerId]),a&&a.isVisible&&"Store"===a.type&&(s=e.entities.profiles[a.memberOwnerId]),{badge:Object(r.c)(e,a?a.memberOwnerId:""),fanMerchProfile:o&&o.isVisible?o:null,followingInfo:e.entities.followingInfoStore[t.profileId],isOwnedByLoggedInUser:a&&a.memberOwnerId===e.User.memberId,ownerMemberProfile:s&&s.isVisible?s:null,pid:n?n.isPrivate?n.rootProductId:n.id:null,profile:a&&a.isVisible?a:null,store:e.entities.stores[t.profileId]}})(N);t.a=k},1333:function(e,t,a){"use strict";a.d(t,"b",(function(){return O})),a.d(t,"a",(function(){return j}));var n=a(15),i=a(2),r=a(48),o=a.n(r),s=a(84),l=a.n(s),c=a(1488),u=a.n(c),d=a(0),h=a.n(d),p=a(180),m=a(143),g=a(10),f=a(102),b=a(14),v=a(13),y=a(6),_=a(44);a(1624);const S=Object(g.a)("JustifiedGridDetails");class D extends h.a.Component{render(){return h.a.createElement("div",{className:S("&")},h.a.createElement("div",{className:S("&-caret"),style:{left:this.props.caretPosition+"px"}}),h.a.createElement("div",{className:S("&-inner")},this.props.children,h.a.createElement(y.a,{className:S("&-close"),onClick:this.props.onClickClose,iconName:_.a.MultiplyLight})))}}a(1623);const C={boxSpacing:10,containerPadding:10,forceAspectRatio:!1,maxNumRows:Number.POSITIVE_INFINITY,showWidows:!0,targetRowHeight:320,targetRowHeightTolerance:.25,widowLayoutStyle:"left"},E=Object.keys(C);function O({aspectRatio:e,realviewUrl:t,maxThumbnailAspectRatio:a=15,minThumbnailAspectRatio:n=.5,targetRowHeight:i,targetRowHeightTolerance:r=C.targetRowHeightTolerance}){const o={};if(e)if(e<n){e=n,o[b.a.RlvSquareIt]="true";const t=(1-e)/2;o[b.a.RlvViewCrop]=`[${t},0,${1-t},1]`}else if(e>a){e=a,o[b.a.RlvSquareIt]="true";const t=(1-1/e)/2;o[b.a.RlvViewCrop]=`[0,${t},1,${1-t}]`}else 1!==e&&(o[b.a.RlvSquareIt]="false");else e=1,o[b.a.RlvSquareIt]="true";const s=i*(1+r),l=s*e,c=Math.round(Math.max(s,l));return o[b.a.RlvMaxDim]=c.toString(),{aspectRatio:e,imageUrl:Object(v.c)(t,o),maxDim:c}}const w=Object(g.a)("JustifiedGrid"),j=e=>{let{scrollable:t=!0}=e,a=Object(n.a)(e,["scrollable"]);const[r,s]=Object(d.useState)(0),c=Object(d.useRef)(),g=a.innerRef||c;Object(f.a)(()=>{const e=g.current&&g.current.clientWidth-1;null!=e&&e!==r&&s(e)},50);const b=Object(p.a)(function(e,t){const a=l()(Object(i.a)({},C),o()(e,E),{containerWidth:t}),{targetRowHeight:n,targetRowHeightTolerance:r}=a;return a.edgeCaseMinRowHeight=void 0===e.edgeCaseMinRowHeight?n*(1-r):e.edgeCaseMinRowHeight,a.edgeCaseMaxRowHeight=void 0===e.edgeCaseMaxRowHeight?n*(1+r):e.edgeCaseMaxRowHeight,a}(a,r)),v="number"==typeof b.containerPadding?{top:b.containerPadding,bottom:b.containerPadding,left:b.containerPadding,right:b.containerPadding}:b.containerPadding,y="number"==typeof b.boxSpacing?{horizontal:b.boxSpacing,vertical:b.boxSpacing}:b.boxSpacing,_=[],S=Object(d.useMemo)(()=>{if(a.items&&a.items.length>0&&r>0){let e=u()(a.items.map(e=>e.aspectRatio),b).boxes;if(a.maxHeight){let t=-1,n=v.top+v.bottom-y.vertical;for(let i=0;i<e.length;i++){const r=e[i];if(r.row!==t&&(t++,n+=r.height+y.vertical,n>a.maxHeight)){e=e.slice(0,i);break}}}if(a.rowLimit){const t=e.findIndex(e=>e.row>=a.rowLimit);-1!==t&&(e=e.slice(0,t))}return e}},[a.items,r,a.maxHeight,a.rowLimit,b]);if(S){const e=h.a.Children.toArray(a.children);let t,n=0,i=!1;S.forEach((r,o)=>{const s=e[o],l=a.items[o],c={height:r.height,width:r.width,marginTop:0===r.row?"0":y.vertical+"px",marginLeft:0===n?"0":y.horizontal+"px"};_.push(h.a.cloneElement(s,{height:r.height,width:r.width,style:c})),null!=l.id&&l.id===a.detailsId&&(i=!0,t=r.left+r.width/2-v.left),o===S.length-1||r.row!==S[o+1].row?(i&&(i=!1,_.push(h.a.createElement(D,{key:"details",onClickClose:a.onCloseDetails,caretPosition:t},a.detailsContent))),n=0):n++})}const O={minHeight:(S&&S[0]?S[0].height+v.top+v.bottom:1)+"px",padding:`${v.top}px ${v.right}px ${v.bottom}px ${v.left}px`};let j=h.a.createElement("div",{className:w("&","&--widowStyle-"+b.widowLayoutStyle,{"&--scrollable":t},a.className),ref:g,style:O},_.length>0&&h.a.createElement("div",{className:w("&-inner")},_));return t&&(j=h.a.createElement(m.b,null,j)),j}},1334:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(131),i=a.n(n),r=a(0),o=a.n(r),s=a(6),l=a(10);a(1642);const c=Object(l.a)("ProductDescription");class u extends o.a.PureComponent{render(){const{isVizLite:e,productAttributes:t,productDescription:a,productDescriptionBackstory:n,productDescriptionProp65:r,productDescriptionSafety:l,productDescriptionTechSpecs:u,productDescriptionWarranty:d,productTitle:h,zString:p,zUrl:m}=this.props;return o.a.createElement("div",{className:c("&",{"&--isMobile":!1,"&--isVizLite":e})},e&&a&&o.a.createElement("div",{className:c("&-section")},o.a.createElement("div",{className:c("&-header")},p("zi_product_MAX_AboutDesign_Maker")),o.a.createElement("p",{itemProp:"name"},h),o.a.createElement("div",{itemProp:"description"},a)),u&&o.a.createElement("div",{className:c("&-section")},o.a.createElement("div",{className:c("&-header")},p("zi_product_MAX_TechSpecs_Title")),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:u}})),i()(t,t=>{const a=t.values.find(e=>e.name===t.value)||t.values[0];return a.description&&o.a.createElement("div",{className:c("&-attribute"),key:t.name},o.a.createElement("h3",{className:c("&-attributeHeader")},t.title,!e&&": "+a.titleLong),o.a.createElement("div",{className:c("&-attributeValueInfo")},e&&o.a.createElement("div",{className:c("&-attributeValue")},a.titleLong),o.a.createElement("div",{className:c("&-attributeValueDescription"),dangerouslySetInnerHTML:{__html:a.description}})))}),d&&o.a.createElement("div",{className:c("&-section")},o.a.createElement("div",{className:c("&-header")},p("zi_product_MAX_Warranty_Title")),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:d}})),r&&o.a.createElement("div",{className:c("&-section","&-prop65")},o.a.createElement("div",{className:c("&-header")},p("zi_product_aboutProduct_prop65")),o.a.createElement("div",{className:c("&-warningContent")},o.a.createElement("img",{src:m("WwwAst","z4/zmisc/warning.png"),className:c("&-warningIcon")}),o.a.createElement("span",{dangerouslySetInnerHTML:{__html:r}}))),l&&o.a.createElement("div",{className:c("&-section")},o.a.createElement("div",{className:c("&-header")},o.a.createElement(s.a,{className:c("&-warningIcon"),iconName:s.a.Icon.WarningStamp}),"Â ",p("zi_product_aboutProduct_safetyNotice")),o.a.createElement("div",{className:c("&-warningContent"),dangerouslySetInnerHTML:{__html:l}})),e&&n&&o.a.createElement("div",{className:c("&-section")},o.a.createElement("div",{className:c("&-header")},p("zi_product_MAX_Tabs_ProductInfo_TabTitle")),o.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}})))}}},1351:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=a(1730);function r(){const e=Object(n.useContext)(i.a);if(!e)throw new Error("useVideoContext must be used within a VideoProvider");return e}},1353:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),i=a(5),r=a(147);function o(e){const t=Object(i.d)();return Object(n.useCallback)(a=>{t(Object(r.Yb)(e,a))},[e])}},1360:function(e,t,a){e.exports={root:"ChatZazzlerBadge_root",editorBadge:"ChatZazzlerBadge_editorBadge",editorBadgeLarge:"ChatZazzlerBadge_editorBadgeLarge",badgeTooltipTitle:"ChatZazzlerBadge_badgeTooltipTitle",badgeTooltip:"ChatZazzlerBadge_badgeTooltip"}},1388:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n),r=a(234),o=a(10),s=a(54);a(1609);const l=Object(o.a)("Z4DSLoadingOverlay"),c=Object(r.a)(e=>{const t=Object(n.useContext)(s.a);return i.a.createElement("svg",{className:l("&",e.className,`&-${t&&t.theme}${t&&t.z4DarkMode?"Dark":""}Theme`),viewBox:"-70 -50 140 100",width:"140",height:"100"},i.a.createElement("circle",{className:l("&-main"),r:"50"}),i.a.createElement("circle",{className:l("&-circle1"),r:"18"}),i.a.createElement("circle",{className:l("&-circle2"),r:"15"}))})},1389:function(e,t){var a=new Error("Element already at target scroll position"),n=new Error("Scroll cancelled"),i=Math.min,r=Date.now;function o(e){return function(t,o,c,u){"function"==typeof(c=c||{})&&(u=c,c={}),"function"!=typeof u&&(u=l);var d=r(),h=t[e],p=c.ease||s,m=isNaN(c.duration)?350:+c.duration,g=!1;return h===o?u(a,t[e]):requestAnimationFrame((function a(s){if(g)return u(n,t[e]);var l=r(),c=i(1,(l-d)/m),f=p(c);t[e]=f*(o-h)+h,c<1?requestAnimationFrame(a):requestAnimationFrame((function(){u(null,t[e])}))})),function(){g=!0}}}function s(e){return.5*(1-Math.cos(Math.PI*e))}function l(){}e.exports={left:o("scrollLeft"),top:o("scrollTop")}},1393:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0);function i(){const[e,t]=Object(n.useState)(!1),a=Object(n.useRef)();Object(n.useEffect)(()=>{!e&&a.current&&a.current.complete&&t(!0)});const i=Object(n.useCallback)(()=>{e||t(!0)},[]);return[a,i,e]}},1395:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(3),i=a(224),r=a.n(i),o=a(0),s=a.n(o),l=a(1389),c=a.n(l),u=a(10),d=a(54),h=a(241);a(435);const p=Object(u.a)("UnderlineTabBar"),m=e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1;class g extends s.a.Component{constructor(...e){super(...e),Object(n.a)(this,"state",{}),Object(n.a)(this,"scrollerElement",void 0),Object(n.a)(this,"tabElements",[]),Object(n.a)(this,"tabsElement",void 0),Object(n.a)(this,"getActiveIndex",(e,t)=>t.findIndex(t=>t.value===e)),Object(n.a)(this,"updateUnderlinePosition",()=>{const{activeTab:e,tabs:t}=this.props;if(!this.tabsElement)return;const a=this.tabsElement.getBoundingClientRect(),n=this.tabElements[this.getActiveIndex(e,t)].getBoundingClientRect(),i=n.left-a.left,r=n.width;this.setState({underlineLeft:i,underlineWidth:r});const o=this.scrollerElement.getBoundingClientRect(),s=o.left+o.width/2-n.width/2,l=n.left-s;c.a.left(this.scrollerElement,this.scrollerElement.scrollLeft+l,{duration:400,ease:m})})}componentDidMount(){setTimeout(this.updateUnderlinePosition,200),window.addEventListener("resize",this.updateUnderlinePosition)}componentWillUnmount(){window.removeEventListener("resize",this.updateUnderlinePosition)}componentDidUpdate(e){this.props.activeTab===e.activeTab&&r()(e.tabs,this.props.tabs)||this.updateUnderlinePosition()}render(){const{activeTab:e,specialTabs:t=[],underlineTabBarClassName:a,tabClassName:n,tabs:i}=this.props;return s.a.createElement("div",{className:p("&",`&--${this.context&&this.context.theme}Theme`,this.props.className)},s.a.createElement(h.a,{direction:"horizontal",scrollerRef:e=>{this.scrollerElement=e}},s.a.createElement("div",{className:p("&-tabs",i.length<this.props.centerIfLessThan&&"&-tabs--centered",a),ref:e=>{this.tabsElement=e}},i.map((a,i)=>{const r=a.value===e,o=t.includes(a.value),l={"&-tab--active":r,"&-tab--special":o};return n&&(l[n+"--active"]=r,l[n+"--special"]=o),s.a.createElement("button",{className:p("&-tab",l,n),key:"tab|"+a.value,onClick:()=>{this.props.onSelectTab(a.value)},ref:e=>{this.tabElements[i]=e}},a.display)}),s.a.createElement("div",{className:p("&-underline",{"&-underline--special":t.includes(e)}),style:{transform:`translateX(${this.state.underlineLeft}px)`,width:this.state.underlineWidth}}))))}}Object(n.a)(g,"defaultProps",{centerIfLessThan:3,tabWidthMultiplier:40}),Object(n.a)(g,"contextType",d.a)},1396:function(e,t,a){},1397:function(e,t,a){},1398:function(e,t,a){},1399:function(e,t,a){},1411:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(0),i=a.n(n),r=a(445),o=a(137),s=a(6),l=a(44),c=a(10),u=a(1393),d=a(7),h=a(8);a(1622);function p(e){e.preventDefault()}const m=Object(c.a)("JustifiedGridItem"),g=i.a.forwardRef((e,t)=>{const[a,c,g]=Object(u.a)(),[f,b]=Object(n.useState)(!1),v=Object(n.useRef)(!1),y=Object(h.e)(),_=Object(n.useCallback)(e.onCancel?t=>{t.stopPropagation(),e.onCancel()}:void 0,[e.onCancel]),S=Object(n.useCallback)(e.onToggleDetails?t=>{t.stopPropagation(),e.onToggleDetails()}:void 0,[e.onToggleDetails]),D=Object(n.useCallback)(()=>{v.current||b(!0)},[]),C=Object(n.useCallback)(()=>{v.current=!1,b(!1)},[]),E=Object(n.useCallback)(()=>{v.current=!0},[]),O=_&&i.a.createElement("div",{className:m("&-cancelButton"),onClick:_}),w=S&&i.a.createElement("div",{className:m("&-detailsButton"),onClick:S}),j=i.a.createElement("button",{className:m("&",{"&--imageLoaded":g,"&--mobileDevice":Object(d.a)().isMobileDevice},e.className),disabled:e.isDisabled,onClick:e.onClick,onDragStart:p,onMouseEnter:D,onMouseLeave:C,onTouchStart:E,ref:t,style:e.style},f&&e.showRoyaltyFree&&i.a.createElement("div",{className:m("&-royaltyFree"),onClick:e=>e.stopPropagation()},i.a.createElement(s.a,{iconName:l.a.Logo}),i.a.createElement("div",{className:m("&-ignoreOverflow")},i.a.createElement(o.a,{includeCaret:!0,caretPosition:"top",caretLeftOffset:20,className:m("&-royaltyMsg")},y("zi_create_Royalty_RoyaltyFreeMsging")))),i.a.createElement("div",{className:m("&-placeholder")}),e.imageSrc&&i.a.createElement("img",{alt:e.imageAlt,className:m("&-image"),onContextMenu:t=>{e.preventImageRightClick&&t.preventDefault()},onLoad:c,ref:a,src:e.imageSrc}),e.children,f&&!Object(d.a)().isMobileDevice&&(e.infoText||O||w)&&i.a.createElement("div",{className:m("&-infoBar",{"&-infoBar--hasText":!!e.infoText})},e.infoText&&i.a.createElement("div",{className:m("&-infoText",e.infoTextClassName)},e.infoText),O,w));return e.tooltip?i.a.createElement(r.a,{hideOnScroll:!0,overlay:e.tooltip,overlayClassName:m("&-tooltipOverlay"),overlayOnCenter:!0,overlayPlacement:"bottom"},j):j})},1417:function(e,t,a){},1457:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(3),i=a(0),r=a.n(i),o=a(5),s=a(40),l=a(143),c=a(6),u=a(44),d=a(10),h=a(46),p=a(8),m=a(704),g=a(1213),f=a(384),b=a(1120),v=a(659),y=a(1086),_=a(1119);a(1627);const S=Object(d.a)("ZazzleImagesGrid");class D extends r.a.Component{constructor(...e){super(...e),Object(n.a)(this,"state",{}),Object(n.a)(this,"simulatedUploadProgressInterval",void 0),Object(n.a)(this,"handleImageItemClick",e=>{if(!this.simulatedUploadProgressInterval){this.setState({uploadProgress:0,uploadProgressId:e});let t=1;this.simulatedUploadProgressInterval=setInterval(()=>{this.setState({uploadProgress:Math.atan(t/5)/(Math.PI/2)}),t++},32),this.props.onUpload({nounId:e,cb:e=>{clearInterval(this.simulatedUploadProgressInterval),this.simulatedUploadProgressInterval=null,this.setState({uploadProgress:null,uploadProgressId:null}),e&&this.props.onSubmit([e])}})}}),Object(n.a)(this,"loadMoreRows",()=>{this.props.page.loading||this.props.onNextPage()})}componentWillUnmount(){clearInterval(this.simulatedUploadProgressInterval)}render(){const{mode:e,page:t,zString:a}=this.props;return r.a.createElement(y.a,{bottomMargin:200,className:S("&","&--"+e,this.props.className),hasMore:!!t.nextPageId,isLoading:!!t.loading,onLoad:this.loadMoreRows,ref:this.props.scrollerRef},this.props.topContent,r.a.createElement("div",{className:S("&-grid")},t.icons.map(e=>r.a.createElement(_.a,{className:S("&-gridItem"),id:e.id,key:e.id,onClick:this.handleImageItemClick,isSelectable:!1,thumbnailUrl:e.thumbnailUrl,title:e.title,zString:a,progress:e.id===this.state.uploadProgressId?this.state.uploadProgress:void 0}))))}}Object(n.a)(D,"defaultProps",{mode:"full"});const C=Object(o.b)(e=>({page:e.zazzleImages,zString:Object(p.a)(e)}),e=>Object(s.b)({onNextPage:v.a.nextPage,onUpload:v.a.upload},e),void 0,{forwardRef:!0})(D);a(1626);const E=Object(d.a)("ZazzleImages");class O extends r.a.Component{constructor(...e){super(...e),Object(n.a)(this,"state",{showWelcomeMessage:!1}),Object(n.a)(this,"handleDoSearch",e=>{this.props.onSearch({query:e,pageSize:60}),this.props.onSearchPassive&&this.props.onSearchPassive(e)}),Object(n.a)(this,"handleWelcomeMessageClose",()=>{Object(h.e)(h.a.MB_ZAZZLE_IMAGES_WELCOME_DISMISSED,!0),this.setState({showWelcomeMessage:!1})}),Object(n.a)(this,"handleCategoryClick",e=>{this.props.onSearch({query:e,pageSize:60})})}componentDidMount(){"minimal"!==this.props.mode&&this.setState({showWelcomeMessage:!Object(h.c)(h.a.MB_ZAZZLE_IMAGES_WELCOME_DISMISSED)})}render(){const{mode:e,noResultsContent:t,page:a,scrollerRef:n,zString:i}=this.props,o=r.a.createElement(g.a,{key:this.props.page.query?"hasvalue":"empty",className:E("&-searchInput"),defaultValue:this.props.page.query,doSearch:this.handleDoSearch,placeholder:i("zi_myzazzle_MediaBrowser_ZazzleImages_Search"),size:"large"});let s,d=!0;if("search"===a.loading)s=r.a.createElement("div",{className:E("&-loadingOverlay")},r.a.createElement(f.b,{hasOwnContainer:!0,isShown:!0,shieldColor:"transparent",size:"small",useTransition:!0}));else if(a.query)0===a.icons.length?s=t||i("zi_myzazzle_MediaBrowser_NoSearchResults",{searchTerm:a.query}):(this.props.pinTopContent||(d=!1),s=r.a.createElement(l.b,null,r.a.createElement(C,{key:a.query+a.pageSize,mode:e,onSubmit:this.props.onSubmit,scrollerRef:n,topContent:!d&&o})));else{const t=r.a.createElement(r.a.Fragment,null,this.state.showWelcomeMessage&&r.a.createElement(b.a,{onClose:this.handleWelcomeMessageClose},i("zi_myzazzle_MediaBrowser_ZazzleImages_Welcome1",{zazzle:r.a.createElement(c.a,{key:"1",iconName:u.a.LogoLetterform,className:E("&-zazzleLogoIcon")})}),r.a.createElement("br",null),i("zi_myzazzle_MediaBrowser_ZazzleImages_Welcome2")),"minimal"===e?r.a.createElement("div",{className:E("&-categoriesHeader")},i("zi_create_Z4_DesignSpace_PopularCategoriesLabel")):r.a.createElement("h3",{className:E("&-categoriesHeader")},i("zi_myzazzle_MediaBrowser_ZazzleImages_Categories")));0;let a=r.a.createElement("div",{className:E("&-categories"),ref:n},!d&&r.a.createElement("div",{className:E("&-innerTopContent")},o,t),function(e){return[{displayId:27078,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Animals"),searchTerm:"animals"},{displayId:346199,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Borders"),searchTerm:"borders"},{displayId:1730368,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Cats"),searchTerm:"cats"},{displayId:1616071,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Dogs"),searchTerm:"dogs"},{displayId:40322,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Flowers"),searchTerm:"flowers"},{displayId:1272578,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Food"),searchTerm:"food"},{displayId:1320683,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Emojis"),searchTerm:"emojis"},{displayId:1922333,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Occupations"),searchTerm:"occupations"},{displayId:1106339,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Ornament"),searchTerm:"ornaments"},{displayId:1473837,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Sports"),searchTerm:"sports"},{displayId:1118737,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Vehicles"),searchTerm:"vehicles"},{displayId:1929849,displayName:e("zi_myzazzle_MediaBrowser_ZazzleImages_Categories_Wedding"),searchTerm:"wedding"}]}(i).map(t=>r.a.createElement(m.a,{bordered:"minimal"!==e,key:t.displayId,className:E("&-category"),onClick:()=>this.handleCategoryClick(t.searchTerm)},r.a.createElement("img",{src:`https://static.thenounproject.com/png/${t.displayId}-84.png`}),t.displayName)));"narrow"!==e&&(a=r.a.createElement(l.b,null,a)),s=r.a.createElement("div",{className:E("&-content")},d&&t,a),"narrow"===e&&(s=r.a.createElement(l.b,null,s))}return r.a.createElement("div",{className:E("&","&--"+e,this.props.className)},d&&o,s)}}Object(n.a)(O,"defaultProps",{mode:"full",pinTopContent:!0});const w=Object(o.b)(e=>({page:e.zazzleImages,zString:Object(p.a)(e)}),e=>Object(s.b)({onSearch:v.a.search},e))(O)},1458:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(0),i=a.n(n),r=a(5),o=a(81),s=a(6),l=a(8),c=a(93),u=a(1467),d=a.n(u);const h=Object(n.memo)(({isFollowing:e,storeId:t})=>{const a=Object(r.d)(),n=Object(l.e)();return i.a.createElement(c.a,{color:e?"blueOutline":"blue",onClick:()=>{a(Object(o.h)(t,!e,!1))},size:"mini"},e?i.a.createElement("div",null,i.a.createElement(s.a,{className:d.a.check,iconName:s.a.Icon.Check}),n("zi_store_Profile_Following")):i.a.createElement("div",null,n("zi_store_Profile_Follow")))})},1467:function(e,t,a){e.exports={check:"FollowButton_check"}},147:function(e,t,a){"use strict";a.d(t,"i",(function(){return i})),a.d(t,"sb",(function(){return r})),a.d(t,"h",(function(){return o})),a.d(t,"rb",(function(){return s})),a.d(t,"o",(function(){return l})),a.d(t,"Ab",(function(){return c})),a.d(t,"n",(function(){return u})),a.d(t,"zb",(function(){return d})),a.d(t,"s",(function(){return h})),a.d(t,"Eb",(function(){return p})),a.d(t,"v",(function(){return m})),a.d(t,"Hb",(function(){return g})),a.d(t,"t",(function(){return f})),a.d(t,"Fb",(function(){return b})),a.d(t,"u",(function(){return v})),a.d(t,"Gb",(function(){return y})),a.d(t,"p",(function(){return _})),a.d(t,"Bb",(function(){return S})),a.d(t,"r",(function(){return D})),a.d(t,"Db",(function(){return C})),a.d(t,"m",(function(){return E})),a.d(t,"yb",(function(){return O})),a.d(t,"l",(function(){return w})),a.d(t,"wb",(function(){return j})),a.d(t,"S",(function(){return I})),a.d(t,"vb",(function(){return N})),a.d(t,"T",(function(){return k})),a.d(t,"xb",(function(){return T})),a.d(t,"k",(function(){return x})),a.d(t,"ub",(function(){return z})),a.d(t,"q",(function(){return P})),a.d(t,"Cb",(function(){return F})),a.d(t,"V",(function(){return M})),a.d(t,"Ib",(function(){return A})),a.d(t,"O",(function(){return R})),a.d(t,"mb",(function(){return B})),a.d(t,"W",(function(){return L})),a.d(t,"Jb",(function(){return U})),a.d(t,"P",(function(){return K})),a.d(t,"ec",(function(){return G})),a.d(t,"F",(function(){return H})),a.d(t,"jc",(function(){return Z})),a.d(t,"A",(function(){return W})),a.d(t,"db",(function(){return V})),a.d(t,"Xb",(function(){return q})),a.d(t,"gb",(function(){return $})),a.d(t,"ic",(function(){return X})),a.d(t,"fb",(function(){return Y})),a.d(t,"hc",(function(){return Q})),a.d(t,"j",(function(){return J})),a.d(t,"tb",(function(){return ee})),a.d(t,"cb",(function(){return te})),a.d(t,"Mb",(function(){return ae})),a.d(t,"b",(function(){return ne})),a.d(t,"x",(function(){return ie})),a.d(t,"Ob",(function(){return re})),a.d(t,"D",(function(){return oe})),a.d(t,"Tb",(function(){return se})),a.d(t,"E",(function(){return le})),a.d(t,"Ub",(function(){return ce})),a.d(t,"I",(function(){return ue})),a.d(t,"Yb",(function(){return de})),a.d(t,"G",(function(){return he})),a.d(t,"Vb",(function(){return pe})),a.d(t,"g",(function(){return me})),a.d(t,"qb",(function(){return ge})),a.d(t,"y",(function(){return fe})),a.d(t,"Pb",(function(){return be})),a.d(t,"e",(function(){return ve})),a.d(t,"nb",(function(){return ye})),a.d(t,"U",(function(){return _e})),a.d(t,"Kb",(function(){return Se})),a.d(t,"C",(function(){return De})),a.d(t,"Sb",(function(){return Ce})),a.d(t,"z",(function(){return Ee})),a.d(t,"Qb",(function(){return Oe})),a.d(t,"X",(function(){return we})),a.d(t,"cc",(function(){return je})),a.d(t,"Y",(function(){return Ie})),a.d(t,"dc",(function(){return Ne})),a.d(t,"ab",(function(){return ke})),a.d(t,"fc",(function(){return Te})),a.d(t,"bb",(function(){return xe})),a.d(t,"gc",(function(){return ze})),a.d(t,"L",(function(){return Pe})),a.d(t,"Zb",(function(){return Fe})),a.d(t,"c",(function(){return Me})),a.d(t,"jb",(function(){return Ae})),a.d(t,"w",(function(){return Re})),a.d(t,"Nb",(function(){return Be})),a.d(t,"J",(function(){return Le})),a.d(t,"bc",(function(){return Ue})),a.d(t,"d",(function(){return Ke})),a.d(t,"kb",(function(){return Ge})),a.d(t,"B",(function(){return He})),a.d(t,"Rb",(function(){return Ze})),a.d(t,"N",(function(){return We})),a.d(t,"pb",(function(){return Ve})),a.d(t,"a",(function(){return qe})),a.d(t,"hb",(function(){return $e})),a.d(t,"eb",(function(){return Xe})),a.d(t,"ac",(function(){return Ye})),a.d(t,"K",(function(){return Qe})),a.d(t,"ib",(function(){return Je})),a.d(t,"Z",(function(){return et})),a.d(t,"Lb",(function(){return tt})),a.d(t,"H",(function(){return at})),a.d(t,"Wb",(function(){return nt})),a.d(t,"f",(function(){return it})),a.d(t,"ob",(function(){return rt})),a.d(t,"R",(function(){return ot})),a.d(t,"Q",(function(){return st})),a.d(t,"M",(function(){return lt})),a.d(t,"lb",(function(){return ct}));var n=a(2);const i="Chat/INITIALIZE_INBOX";function r(e){return Object(n.a)({type:i},e)}const o="Chat/INITIALIZE_COLLAB";function s(e){return Object(n.a)({type:o},e)}const l="Chat/ON_ROOM_ADD";function c(e){return{type:l,roomId:e}}const u="Chat/ON_PERMISSION_DISCONNECT";function d(e){return{type:u,roomId:e}}const h="Chat/ON_USER_ADD";function p(e,t){return{type:h,memberId:t,roomId:e}}const m="Chat/ON_USER_REMOVE";function g(e,t){return{type:m,memberId:t,roomId:e}}const f="Chat/ON_USER_JOIN";function b(e,t){return{type:f,memberId:t,roomId:e}}const v="Chat/ON_USER_LEAVE";function y(e,t){return{type:v,memberId:t,roomId:e}}const _="Chat/ON_SEEN_MESSAGE";function S(e,t,a){return{type:_,lastMessageSeenIndex:a,memberId:t,roomId:e}}const D="Chat/ON_TYPING";function C(e,t,a){return{type:D,memberId:t,roomId:e,utcTime:a}}const E="Chat/ON_NOT_TYPING";function O(e,t){return{type:E,memberId:t,roomId:e}}const w="Chat/ON_HEADLINE_SET";function j(e,t,a){return{type:w,headline:a,memberId:t,roomId:e}}const I="Chat/ON_MESSAGE";function N(e,t){return{type:I,message:t,roomId:e}}const k="Chat/ON_MESSAGE_STATE_CHANGE";function T(e){return{type:k,roomId:e}}const x="Chat/ON_CHAT_CLOSED";function z(e){return{type:x,roomId:e}}const P="Chat/ON_SHUTDOWN";function F(){return{type:P}}const M="Chat/RECEIVE_INBOX";function A(e,t){return{type:M,state:t,_stateKey:e}}const R="Chat/GET_INBOX_HISTORY";function B(e,t){return{type:R,_stateKey:e,newRoomTypes:t}}const L="Chat/RECEIVE_INBOX_ROOMS";function U(e,t,a){return{roomIdsToStateKey:a,type:L,state:t,_stateKey:e}}const K="Chat/UPDATE_INBOX_ROOMS_LOADING";function G(e,t){return{type:K,isLoading:t,_stateKey:e}}const H="Chat/UPDATE_SETTING_DIALOG_STATE";function Z(e,t){return{type:H,isOpen:t,_stateKey:e}}const W="Chat/UPDATE_ROOM_TYPE_FILTER_STATE";const V="Chat/SET_MOBILE_DIALOG_VISIBILITY";function q(e,t){return{_stateKey:e,isMobileChatDialogOpen:t,type:V}}const $="Chat/UPDATE_SELECTED_ROOM";function X(e,t){return{type:$,roomId:t,_stateKey:e}}const Y="Chat/UPDATE_SELECTED_DRAFT";function Q(e,t){return{type:Y,draftStateKey:t,_stateKey:e}}const J="Chat/JOIN_ROOM";function ee(e,t,a=null){return{_stateKey:e,inboxStateKey:a,roomId:t,type:J}}const te="Chat/RECEIVE_ROOM";function ae(e,t){return{type:te,state:t,_stateKey:e}}const ne="Chat/ADD_USER";const ie="Chat/REMOVE_USER";function re(e,t){return{type:ie,memberId:t,_stateKey:e}}const oe="Chat/SEND_SEEN_MESSAGE";function se(e,t,a){return{type:oe,messageId:t,roomId:a,_stateKey:e}}const le="Chat/SEND_TYPING";function ce(e){return{type:le,_stateKey:e}}const ue="Chat/SET_TAB";function de(e,t){return{type:ue,tab:t,_stateKey:e}}const he="Chat/SET_HAS_USER_DISMISSED_LANG_NOTIFICATION";function pe(e,t){return{_stateKey:e,hasDismissedNotification:t,type:he}}const me="Chat/HIDE_ROOM";function ge(e){return{type:me,_stateKey:e}}const fe="Chat/REPORT_USER";function be(e,t,a,n){return{type:fe,callback:n,memberId:t,reason:a,_stateKey:e}}const ve="Chat/GET_MESSAGE_HISTORY";function ye(e,t){return{type:ve,pageSize:t,_stateKey:e}}const _e="Chat/RECEIVE_MESSAGE_HISTORY";function Se(e,t,a){return{type:_e,messageIds:t,messageParams:a,_stateKey:e}}const De="Chat/SEND_MESSAGE";function Ce(e,t,a){return{type:De,inProgressMessage:t,callback:a,_stateKey:e}}const Ee="Chat/RESEND_FAILED_MESSAGE";function Oe(e,t){return{type:Ee,pendingMessageId:t,_stateKey:e}}const we="Chat/RECEIVE_INPROGRESS_MESSAGE";function je(e,t){return{type:we,inProgressMessage:t,_stateKey:e}}const Ie="Chat/RECEIVE_INPROGRESS_MESSAGE_ATTACHMENTS";function Ne(e,t){return{type:Ie,attachmentIds:t,_stateKey:e}}const ke="Chat/RECEIVE_PENDING_DRAFT";function Te(e,t){return{type:ke,inProgressMessage:t,_stateKey:e}}const xe="Chat/RECEIVE_PENDING_DRAFT_ATTACHMENTS";function ze(e,t){return{type:xe,attachmentIds:t,_stateKey:e}}const Pe="Chat/SHOW_DRAFT_INFO";function Fe(e,t){return{type:Pe,showingInfo:t,_stateKey:e}}const Me="Chat/CREATE_DRAFT";function Ae(e,t){return{type:Me,inboxStateKey:e,recipientIds:t}}const Re="Chat/RECEIVE_UPDATE_DRAFTS";function Be(e,t){return{type:Re,draftStateKeys:t,_stateKey:e}}const Le="Chat/UPDATE_DRAFT";function Ue(e,t){return{type:Le,draft:t,_stateKey:e}}const Ke="Chat/DELETE_DRAFT";function Ge(e){return{type:Ke,draftStateKey:e}}const He="Chat/SEND_DRAFT";function Ze(e,t){return{type:He,callback:t,draftStateKey:e}}const We="Chat/GET_PROFILES";function Ve(e){return{type:We,profileIds:e}}const qe="Chat/BLOCK_USER";function $e(e,t,a){return{type:qe,callback:a,memberId:t,_stateKey:e}}const Xe="Chat/UNBLOCK_USER";function Ye(e,t,a){return{type:Xe,callback:a,memberId:t,_stateKey:e}}const Qe="Chat/COMPLETE_ONBOARDING";function Je(e,t,a,n,i,r,o){return{type:Qe,memberId:e,memberFirstName:t,memberLastName:a,memberGender:n,memberBirthYear:i,memberBirthMonth:r,memberBirthDay:o}}const et="Chat/RECEIVE_ONBOARDING_STATUS";function tt(e){return{type:et,hasCompletedOnboarding:e}}const at="Chat/SET_HEADLINE";function nt(e,t){return{type:at,headline:t,_stateKey:e}}const it="Chat/GET_PARTICIPANT_INFO";function rt(e){return{type:it,memberId:e}}const ot="Chat/MAKE_ONLINE";const st="Chat/MAKE_OFFLINE";const lt="Chat/GET_COLLABORATION_ENTITIES";function ct(e){return{type:lt,collabIds:e}}},1490:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(0),i=a.n(n),r=a(34),o=a(29),s=a(6),l=a(44),c=a(10),u=a(7),d=a(8),h=a(14),p=a(1120);a(1649);const m=Object(c.a)("MobileUploadContent"),g=e=>{const t=Object(d.e)(),a=Object(h.f)();return i.a.createElement("div",{className:m("&")},!e.isLoggedIn&&i.a.createElement(p.a,null,t("zi_myzazzle_MediaBrowser_MobileNotLoggedIn",{log_in_now_text:i.a.createElement(o.a,{key:"1",onClick:e.showLogin},t("zi_myzazzle_MediaBrowser_UploadNotLoggedIn_LogInText"))})),i.a.createElement("div",{className:m("&-mobileUploadHeader")},i.a.createElement(s.a,{className:m("&-mobileIcon"),iconName:l.a.MobileDevice}),t("zi_myzazzle_MediaBrowser_AddImagesFromMobile")),!Object(u.a)().isDisneyIframe&&e.isLoggedIn&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:m("&-followInstruction")},t("zi_myzazzle_MediaBrowser_FollowInstruction")),i.a.createElement("div",{className:m("&-stepContainer")},i.a.createElement("div",{className:m("&-step")},t("zi_myzazzle_MediaBrowser_Step1")),i.a.createElement("div",{className:m("&-stepContent")},i.a.createElement("p",{className:m("&-visit")},t("zi_myzazzle_MediaBrowser_VisitThisUrl"),i.a.createElement("span",{className:m("&-mobileUploadUrl")},a("WwwPag","upload").substring(8))),i.a.createElement("p",null,t("zi_myzazzle_MediaBrowser_MobileOr")),i.a.createElement("p",null,t("zi_myzazzle_MediaBrowser_MobileQR")),i.a.createElement("img",{className:m("&-QR"),src:a("WwwAst","z4/QRCodes/uploadQR.svg"),alt:t("zi_myzazzle_MediaBrowser_UploadPart")}))),i.a.createElement("div",{className:m("&-stepContainer")},i.a.createElement("div",{className:m("&-step")},t("zi_myzazzle_MediaBrowser_Step2")),i.a.createElement("div",{className:m("&-stepContent")},t("zi_myzazzle_MediaBrowser_LoginToMobile"))),i.a.createElement("div",{className:m("&-stepContainer")},i.a.createElement("div",{className:m("&-step")},t("zi_myzazzle_MediaBrowser_Step3")),i.a.createElement("div",{className:m("&-stepContent")},t("zi_myzazzle_MediaBrowser_DoneUploadingMsg"),i.a.createElement(r.d,{className:m("&-doneUploading"),onClick:e.doneUploading,styleType:r.d.Style.Submit},t("zi_myzazzle_MediaBrowser_DoneUploading"))))))}},152:function(e,t,a){var n;
/*! Hammer.JS - v2.0.9 - 2019-10-09
 * http://hammerjs.github.io/
 *
 * Copyright (c)  Jorik Tangelder;
 * Licensed under the MIT license */!function(i,r,o,s){"use strict";function l(e,t){return void 0===e?t:e}var c=["","webkit","Moz","MS","ms","o"],u=r.createElement("div"),d=Math.round,h=Math.abs,p=Date.now;function m(e,t){for(var a=void 0,n=void 0,i=t[0].toUpperCase()+t.slice(1),r=0;r<c.length;){if((n=(a=c[r])?a+i:t)in e)return n;r++}}var g=m(u.style,"touchAction"),f=void 0!==g,b=function(){if(!f)return!1;var e={},t=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(a){return e[a]=!t||i.CSS.supports("touch-action",a)})),e}(),v="ontouchstart"in i,y=v&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),_=["x","y"],S=["clientX","clientY"],D="function"!=typeof Object.assign?function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),a=1;a<arguments.length;a++){var n=arguments[a];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}return t}:Object.assign,C=1;function E(e,t,a){var n=void 0;if(e)if(e.forEach)e.forEach(t,a);else if(void 0!==e.length)for(n=0;n<e.length;)t.call(a,e[n],n,e),n++;else for(n in e)e.hasOwnProperty(n)&&t.call(a,e[n],n,e)}function O(e,t,a){return!!Array.isArray(e)&&(E(e,a[t],a),!0)}function w(e,t,a){if(e.indexOf&&!a)return e.indexOf(t);for(var n=0;n<e.length;){if(a&&e[n][a]==t||!a&&e[n]===t)return n;n++}return-1}var j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},N=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),k=function e(t,a,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,a);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,a,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},T=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},z=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(l){i=!0,r=l}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function P(e,t){return"function"===(void 0===e?"undefined":j(e))?e.apply(t&&t[0]||void 0,t):e}function F(e,t){var a=t.manager;return a?a.get(e):e}function M(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}var A=function(){function e(t){I(this,e),this.options=D({},this.defaults,t||{}),this.id=C++,this.manager=null,this.options.enable=l(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}return N(e,[{key:"set",value:function(e){return D(this.options,e),this.manager&&this.manager.touchAction.update(),this}},{key:"recognizeWith",value:function(e){if(O(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=F(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this}},{key:"dropRecognizeWith",value:function(e){return O(e,"dropRecognizeWith",this)||(e=F(e,this),delete this.simultaneous[e.id]),this}},{key:"requireFailure",value:function(e){if(O(e,"requireFailure",this))return this;var t=this.requireFail;return-1===w(t,e=F(e,this))&&(t.push(e),e.requireFailure(this)),this}},{key:"dropRequireFailure",value:function(e){if(O(e,"dropRequireFailure",this))return this;e=F(e,this);var t=w(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this}},{key:"hasRequireFailures",value:function(){return this.requireFail.length>0}},{key:"canRecognizeWith",value:function(e){return!!this.simultaneous[e.id]}},{key:"emit",value:function(e){var t=this,a=this.state;function n(a){t.manager.emit(a,e)}a<8&&n(t.options.event+M(a)),n(t.options.event),e.additionalEvent&&n(e.additionalEvent),a>=8&&n(t.options.event+M(a))}},{key:"tryEmit",value:function(e){if(this.canEmit())return this.emit(e);this.state=32}},{key:"canEmit",value:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0}},{key:"recognize",value:function(e){var t=D({},e);if(!P(this.options.enable,[this,t]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)}},{key:"process",value:function(e){}},{key:"getTouchAction",value:function(){}},{key:"reset",value:function(){}}]),e}();A.prototype.defaults={};var R=function(e){function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),N(t,[{key:"attrTest",value:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t}},{key:"process",value:function(e){var t=this.state,a=e.eventType,n=6&t,i=this.attrTest(e);return n&&(8&a||!i)?16|t:n||i?4&a?8|t:2&t?4|t:2:32}}]),t}(A);R.prototype.defaults={pointers:1};var B=function(e){function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),N(t,[{key:"getTouchAction",value:function(){return["none"]}},{key:"attrTest",value:function(e){return k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attrTest",this).call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}]),t}(R);B.prototype.defaults={event:"rotate",threshold:0,pointers:2};var L=function(e){function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),N(t,[{key:"getTouchAction",value:function(){return["none"]}},{key:"attrTest",value:function(e){return k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attrTest",this).call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)}},{key:"emit",value:function(e){if(1!==e.scale){var a=e.scale<1?"in":"out";e.additionalEvent=this.options.event+a}k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).call(this,e)}}]),t}(R);function U(e){return 16===e?"down":8===e?"up":2===e?"left":4===e?"right":""}L.prototype.defaults={event:"pinch",threshold:0,pointers:2};var K=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.pX=null,e.pY=null,e}return T(t,e),N(t,[{key:"getTouchAction",value:function(){var e=this.options.direction,t=[];return 6&e&&t.push("pan-y"),24&e&&t.push("pan-x"),t}},{key:"directionTest",value:function(e){var t=this.options,a=!0,n=e.distance,i=e.direction,r=e.deltaX,o=e.deltaY;return i&t.direction||(6&t.direction?(i=0===r?1:r<0?2:4,a=r!==this.pX,n=Math.abs(e.deltaX)):(i=0===o?1:o<0?8:16,a=o!==this.pY,n=Math.abs(e.deltaY))),e.direction=i,a&&n>t.threshold&&i&t.direction}},{key:"attrTest",value:function(e){return R.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))}},{key:"emit",value:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var a=U(e.direction);a&&(e.additionalEvent=this.options.event+a),k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).call(this,e)}}]),t}(R);K.prototype.defaults={event:"pan",threshold:10,pointers:1,direction:30};var G=function(e){function t(){return I(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,e),N(t,[{key:"getTouchAction",value:function(){return K.prototype.getTouchAction.call(this)}},{key:"attrTest",value:function(e){var a=this.options.direction,n=void 0;return 30&a?n=e.overallVelocity:6&a?n=e.overallVelocityX:24&a&&(n=e.overallVelocityY),k(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attrTest",this).call(this,e)&&a&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&h(n)>this.options.velocity&&4&e.eventType}},{key:"emit",value:function(e){var t=U(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}]),t}(R);function H(e,t){return function(){return e.apply(t,arguments)}}function Z(e,t,a){return setTimeout(H(e,a),t)}function W(e,t,a){a||(a=_);var n=t[a[0]]-e[a[0]],i=t[a[1]]-e[a[1]];return Math.sqrt(n*n+i*i)}G.prototype.defaults={event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1};var V=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.pTime=!1,e.pCenter=!1,e._timer=null,e._input=null,e.count=0,e}return T(t,e),N(t,[{key:"getTouchAction",value:function(){return["manipulation"]}},{key:"process",value:function(e){var t=this,a=this.options,n=e.pointers.length===a.pointers,i=e.distance<a.threshold,r=e.deltaTime<a.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(i&&r&&n){if(4!==e.eventType)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<a.interval,s=!this.pCenter||W(this.pCenter,e.center)<a.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e,0===this.count%a.taps)return this.hasRequireFailures()?(this._timer=Z((function(){t.state=8,t.tryEmit()}),a.interval,this),2):8}return 32}},{key:"failTimeout",value:function(){var e=this;return this._timer=Z((function(){e.state=32}),this.options.interval,this),32}},{key:"reset",value:function(){clearTimeout(this._timer)}},{key:"emit",value:function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}]),t}(A);V.prototype.defaults={event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10};var q=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._timer=null,e._input=null,e}return T(t,e),N(t,[{key:"getTouchAction",value:function(){return["auto"]}},{key:"process",value:function(e){var t=this,a=this.options,n=e.pointers.length===a.pointers,i=e.distance<a.threshold,r=e.deltaTime>a.time;if(this._input=e,!i||!n||12&e.eventType&&!r)this.reset();else if(1&e.eventType)this.reset(),this._timer=Z((function(){t.state=8,t.tryEmit()}),a.time,this);else if(4&e.eventType)return 8;return 32}},{key:"reset",value:function(){clearTimeout(this._timer)}},{key:"emit",value:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}]),t}(A);function $(e,t){return e.indexOf(t)>-1}q.prototype.defaults={event:"press",pointers:1,time:251,threshold:9};var X=function(){function e(t,a){I(this,e),this.manager=t,this.set(a)}return N(e,[{key:"set",value:function(e){"compute"===e&&(e=this.compute()),f&&this.manager.element.style&&b[e]&&(this.manager.element.style[g]=e),this.actions=e.toLowerCase().trim()}},{key:"update",value:function(){this.set(this.manager.options.touchAction)}},{key:"compute",value:function(){var e=[];return E(this.manager.recognizers,(function(t){P(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if($(e,"none"))return"none";var t=$(e,"pan-x"),a=$(e,"pan-y");return t&&a?"none":t||a?t?"pan-x":"pan-y":$(e,"manipulation")?"manipulation":"auto"}(e.join(" "))}},{key:"preventDefaults",value:function(e){var t=e.srcEvent,a=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var n=this.actions,i=$(n,"none")&&!b.none,r=$(n,"pan-y")&&!b["pan-y"],o=$(n,"pan-x")&&!b["pan-x"];if(i){var s=1===e.pointers.length,l=e.distance<2,c=e.deltaTime<250;if(s&&l&&c)return}if(!o||!r)return i||r&&6&a||o&&24&a?this.preventSrc(t):void 0}}},{key:"preventSrc",value:function(e){this.manager.session.prevented=!0,e.preventDefault()}}]),e}();function Y(e,t){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function Q(e){var t=e.length;if(1===t)return{x:d(e[0].clientX),y:d(e[0].clientY)};for(var a=0,n=0,i=0;i<t;)a+=e[i].clientX,n+=e[i].clientY,i++;return{x:d(a/t),y:d(n/t)}}function J(e){for(var t=[],a=0;a<e.pointers.length;)t[a]={clientX:d(e.pointers[a].clientX),clientY:d(e.pointers[a].clientY)},a++;return{timeStamp:p(),pointers:t,center:Q(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ee(e,t,a){a||(a=_);var n=t[a[0]]-e[a[0]],i=t[a[1]]-e[a[1]];return 180*Math.atan2(i,n)/Math.PI}function te(e,t){return e===t?1:h(e)>=h(t)?e<0?2:4:t<0?8:16}function ae(e,t,a){return{x:t/e||0,y:a/e||0}}function ne(e,t){var a=e.session,n=t.pointers,i=n.length;a.firstInput||(a.firstInput=J(t)),i>1&&!a.firstMultiple?a.firstMultiple=J(t):1===i&&(a.firstMultiple=!1);var r=a.firstInput,o=a.firstMultiple,s=o?o.center:r.center,l=t.center=Q(n);t.timeStamp=p(),t.deltaTime=t.timeStamp-r.timeStamp,t.angle=ee(s,l),t.distance=W(s,l),function(e,t){var a=t.center,n=e.offsetDelta||{},i=e.prevDelta||{},r=e.prevInput||{};1!==t.eventType&&4!==r.eventType||(i=e.prevDelta={x:r.deltaX||0,y:r.deltaY||0},n=e.offsetDelta={x:a.x,y:a.y}),t.deltaX=i.x+(a.x-n.x),t.deltaY=i.y+(a.y-n.y)}(a,t),t.offsetDirection=te(t.deltaX,t.deltaY);var c,u,d=ae(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=d.x,t.overallVelocityY=d.y,t.overallVelocity=h(d.x)>h(d.y)?d.x:d.y,t.scale=o?(c=o.pointers,W((u=n)[0],u[1],S)/W(c[0],c[1],S)):1,t.rotation=o?function(e,t){return ee(t[1],t[0],S)+ee(e[1],e[0],S)}(o.pointers,n):0,t.maxPointers=a.prevInput?t.pointers.length>a.prevInput.maxPointers?t.pointers.length:a.prevInput.maxPointers:t.pointers.length,function(e,t){var a=e.lastInterval||t,n=t.timeStamp-a.timeStamp,i=void 0,r=void 0,o=void 0,s=void 0;if(8!==t.eventType&&(n>25||void 0===a.velocity)){var l=t.deltaX-a.deltaX,c=t.deltaY-a.deltaY,u=ae(n,l,c);r=u.x,o=u.y,i=h(u.x)>h(u.y)?u.x:u.y,s=te(l,c),e.lastInterval=t}else i=a.velocity,r=a.velocityX,o=a.velocityY,s=a.direction;t.velocity=i,t.velocityX=r,t.velocityY=o,t.direction=s}(a,t);var m=e.element;Y(t.srcEvent.target,m)&&(m=t.srcEvent.target),t.target=m}function ie(e,t,a){var n=a.pointers.length,i=a.changedPointers.length,r=1&t&&n-i==0,o=12&t&&n-i==0;a.isFirst=!!r,a.isFinal=!!o,r&&(e.session={}),a.eventType=t,ne(e,a),e.emit("hammer.input",a),e.recognize(a),e.session.prevInput=a}function re(e){return e.trim().split(/\s+/g)}function oe(e,t,a){E(re(t),(function(t){e.addEventListener(t,a,!1)}))}function se(e,t,a){E(re(t),(function(t){e.removeEventListener(t,a,!1)}))}function le(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow||i}var ce=function(){function e(t,a){I(this,e);var n=this;this.manager=t,this.callback=a,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){P(t.options.enable,[t])&&n.handler(e)}}return N(e,[{key:"handler",value:function(){}},{key:"init",value:function(){this.evEl&&oe(this.element,this.evEl,this.domHandler),this.evTarget&&oe(this.target,this.evTarget,this.domHandler),this.evWin&&oe(le(this.element),this.evWin,this.domHandler)}},{key:"destroy",value:function(){this.evEl&&se(this.element,this.evEl,this.domHandler),this.evTarget&&se(this.target,this.evTarget,this.domHandler),this.evWin&&se(le(this.element),this.evWin,this.domHandler)}}]),e}(),ue={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},de={2:"touch",3:"pen",4:"mouse",5:"kinect"},he="pointerdown",pe="pointermove pointerup pointercancel";i.MSPointerEvent&&!i.PointerEvent&&(he="MSPointerDown",pe="MSPointerMove MSPointerUp MSPointerCancel");var me=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.evEl=he,e.evWin=pe,e.init(),e.store=e.manager.session.pointerEvents=[],e}return T(t,e),N(t,[{key:"handler",value:function(e){var t=this.store,a=!1,n=e.type.toLowerCase().replace("ms",""),i=ue[n],r=de[e.pointerType]||e.pointerType,o="touch"===r,s=w(t,e.pointerId,"pointerId");1&i&&(0===e.button||o)?s<0&&(t.push(e),s=t.length-1):12&i&&(a=!0),s<0||(t[s]=e,this.callback(this.manager,i,{pointers:t,changedPointers:[e],pointerType:r,srcEvent:e}),a&&t.splice(s,1))}}]),t}(ce);function ge(e){return Array.prototype.slice.call(e,0)}function fe(e,t,a){for(var n=[],i=[],r=0;r<e.length;){var o=t?e[r][t]:e[r];w(i,o)<0&&n.push(e[r]),i[r]=o,r++}return a&&(n=t?n.sort((function(e,a){return e[t]>a[t]})):n.sort()),n}var be={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ve=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.evTarget="touchstart touchmove touchend touchcancel",e.targetIds={},e.init(),e}return T(t,e),N(t,[{key:"handler",value:function(e){var t=be[e.type],a=ye.call(this,e,t);a&&this.callback(this.manager,t,{pointers:a[0],changedPointers:a[1],pointerType:"touch",srcEvent:e})}}]),t}(ce);function ye(e,t){var a=ge(e.touches),n=this.targetIds;if(3&t&&1===a.length)return n[a[0].identifier]=!0,[a,a];var i=void 0,r=void 0,o=ge(e.changedTouches),s=[],l=this.target;if(r=a.filter((function(e){return Y(e.target,l)})),1===t)for(i=0;i<r.length;)n[r[i].identifier]=!0,i++;for(i=0;i<o.length;)n[o[i].identifier]&&s.push(o[i]),12&t&&delete n[o[i].identifier],i++;return s.length?[fe(r.concat(s),"identifier",!0),s]:void 0}var _e={mousedown:1,mousemove:2,mouseup:4},Se=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.evEl="mousedown",e.evWin="mousemove mouseup",e.pressed=!1,e.init(),e}return T(t,e),N(t,[{key:"handler",value:function(e){var t=_e[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}}]),t}(ce),De=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));e.init();var a=H(e.handler,e);return e.touch=new ve(e.manager,a),e.mouse=new Se(e.manager,a),e.primaryTouch=null,e.lastTouches=[],e}return T(t,e),N(t,[{key:"handler",value:function(e,t,a){var n="touch"===a.pointerType,i="mouse"===a.pointerType;if(!(i&&a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents)){if(n)Ce.call(this,t,a);else if(i&&Oe.call(this,a))return;this.callback(e,t,a)}}},{key:"destroy",value:function(){this.touch.destroy(),this.mouse.destroy()}}]),t}(ce);function Ce(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,Ee.call(this,t)):12&e&&Ee.call(this,t)}function Ee(e){var t=z(e.changedPointers,1)[0];if(t.identifier===this.primaryTouch){var a={x:t.clientX,y:t.clientY};this.lastTouches.push(a);var n=this.lastTouches;setTimeout((function(){var e=n.indexOf(a);e>-1&&n.splice(e,1)}),2500)}}function Oe(e){for(var t=e.srcEvent.clientX,a=e.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],r=Math.abs(t-i.x),o=Math.abs(a-i.y);if(r<=25&&o<=25)return!0}return!1}var we=function(){function e(t,a){var n,i=this;I(this,e),this.options=D({},Ie.defaults,a||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(y?ve:v?De:Se))(n,ie),this.touchAction=new X(this,this.options.touchAction),je(this,!0),E(this.options.recognizers,(function(e){var t=i.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}return N(e,[{key:"set",value:function(e){return D(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}},{key:"stop",value:function(e){this.session.stopped=e?2:1}},{key:"recognize",value:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var a=void 0,n=this.recognizers,i=t.curRecognizer;(!i||i&&8&i.state)&&(i=t.curRecognizer=null);for(var r=0;r<n.length;)a=n[r],2===t.stopped||i&&a!==i&&!a.canRecognizeWith(i)?a.reset():a.recognize(e),!i&&14&a.state&&(i=t.curRecognizer=a),r++}}},{key:"get",value:function(e){if(e instanceof A)return e;for(var t=this.recognizers,a=0;a<t.length;a++)if(t[a].options.event===e)return t[a];return null}},{key:"add",value:function(e){if(O(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}},{key:"remove",value:function(e){if(O(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,a=w(t,e);-1!==a&&(t.splice(a,1),this.touchAction.update())}return this}},{key:"on",value:function(e,t){if(void 0!==e&&void 0!==t){var a=this.handlers;return E(re(e),(function(e){a[e]=a[e]||[],a[e].push(t)})),this}}},{key:"off",value:function(e,t){if(void 0!==e){var a=this.handlers;return E(re(e),(function(e){t?a[e]&&a[e].splice(w(a[e],t),1):delete a[e]})),this}}},{key:"emit",value:function(e,t){this.options.domEvents&&function(e,t){var a=r.createEvent("Event");a.initEvent(e,!0,!0),a.gesture=t,t.target.dispatchEvent(a)}(e,t);var a=this.handlers[e]&&this.handlers[e].slice();if(a&&a.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var n=0;n<a.length;)a[n](t),n++}}},{key:"destroy",value:function(){this.element&&je(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}}]),e}();function je(e,t){var a=e.element;if(a.style){var n=void 0;E(e.options.cssProps,(function(i,r){n=m(a.style,r),t?(e.oldCssProps[n]=a.style[n],a.style[n]=i):a.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={})}}var Ie=function e(t,a){return I(this,e),(a=a||{}).recognizers=l(a.recognizers,e.defaults.preset),new we(t,a)};Ie.VERSION="2.0.9",Ie.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[B,{enable:!1}],[L,{enable:!1},["rotate"]],[G,{direction:6}],[K,{direction:6},["swipe"]],[V],[V,{event:"doubletap",taps:2},["tap"]],[q]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ne={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ke=function(e){function t(){I(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.evTarget="touchstart",e.evWin="touchstart touchmove touchend touchcancel",e.started=!1,e.init(),e}return T(t,e),N(t,[{key:"handler",value:function(e){var t=Ne[e.type];if(1===t&&(this.started=!0),this.started){var a=Te.call(this,e,t);12&t&&a[0].length-a[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:a[0],changedPointers:a[1],pointerType:"touch",srcEvent:e})}}}]),t}(ce);function Te(e,t){var a=ge(e.touches),n=ge(e.changedTouches);return 12&t&&(a=fe(a.concat(n),"identifier",!0)),[a,n]}function xe(e,t,a){var n="DEPRECATED METHOD: "+t+"\n"+a+" AT \n";return function(){var t=new Error("get-stack-trace"),a=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=i.console&&(i.console.warn||i.console.log);return r&&r.call(i.console,n,a),e.apply(this,arguments)}}var ze=xe((function(e,t,a){for(var n=Object.keys(t),i=0;i<n.length;)(!a||a&&void 0===e[n[i]])&&(e[n[i]]=t[n[i]]),i++;return e}),"extend","Use `assign`."),Pe=xe((function(e,t){return ze(e,t,!0)}),"merge","Use `assign`.");D(Ie,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:32,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:we,Input:ce,TouchAction:X,TouchInput:ve,MouseInput:Se,PointerEventInput:me,TouchMouseInput:De,SingleTouchInput:ke,Recognizer:A,AttrRecognizer:R,Tap:V,Pan:K,Swipe:G,Pinch:L,Rotate:B,Press:q,on:oe,off:se,each:E,merge:Pe,extend:ze,assign:D,inherit:function(e,t,a){var n=t.prototype,i=void 0;(i=e.prototype=Object.create(n)).constructor=e,i._super=n,a&&D(i,a)},bindFn:H,prefixed:m,toArray:ge,inArray:w,uniqueArray:fe,splitStr:re,boolOrFn:P,hasParent:Y,addEventListeners:oe,removeEventListeners:se}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=Ie,void 0===(n=function(){return Ie}.call(t,a,t,e))||(e.exports=n)}(window,document)},1539:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(10);a(1880);const o=Object(r.a)("ColorPointer");t.a=()=>i.a.createElement("div",{className:o("&-pointer",{"&-isMobile":!1})},i.a.createElement("div",{className:o("&-outerCircle")},i.a.createElement("div",{className:o("&-innerCircle")})))},1545:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(3),i=a(0),r=a.n(i),o=a(6),s=a(10),l=a(14),c=a(873),u=a(232);a(1892);const d=Object(s.a)("ChatUploader");class h extends r.a.Component{constructor(...e){super(...e),Object(n.a)(this,"state",{isDragging:!1,isUploading:!1,removeOverlay:!0}),Object(n.a)(this,"handleUploadFinish",e=>{this.props.onAddImages([e.fileGuid]),this.handleSetRemoveOverlay(!0)}),Object(n.a)(this,"handleSetDragState",e=>{this.setState({isDragging:e})}),Object(n.a)(this,"handleSetUploadState",e=>{this.setState({isUploading:e})}),Object(n.a)(this,"handleSetRemoveOverlay",e=>{this.setState({removeOverlay:e})})}render(){const{uploaderId:e,zString:t}=this.props;return r.a.createElement("div",{className:d("&")},!this.state.removeOverlay&&r.a.createElement("div",{className:d("&-overlay")},this.state.isDragging&&r.a.createElement("div",null,r.a.createElement(o.a,{className:d("&-icon"),iconName:o.a.Icon.DragDrop}),t("zi_myzazzle_MediaBrowser_DragDropImage")),this.state.isUploading&&r.a.createElement("div",null,t("zi_myzazzle_MediaBrowser_DragDropImageUploading"))),r.a.createElement(c.a,{className:d("&-fileInput"),uploaderID:e,onSetOverlayState:this.handleSetRemoveOverlay,onSetUploadState:this.handleSetUploadState,onUploadFinish:this.handleUploadFinish,onSetDragState:this.handleSetDragState,onSetDragEnterEventHandler:this.props.onSetDragEnterEventHandler,uploadParams:{[l.a.CategoryId]:"1"},createPreview:!0,accept:u.a.Any,buttonContent:""}))}}},1546:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),i=a.n(n),r=a(445),o=a(6),s=a(8),l=a(1360),c=a.n(l);const u=()=>{const e=Object(s.e)();return i.a.createElement(r.a,{className:c.a.root,overlay:i.a.createElement(i.a.Fragment,null,i.a.createElement(o.b,{className:c.a.editorBadgeLarge,name:"Editor22"}),i.a.createElement("div",{className:c.a.badgeTooltipTitle},e("zi_common_ZazzleTeammate")),i.a.createElement("div",null,e("zi_common_ZazzleTeammate_Explanation"))),overlayClassName:c.a.badgeTooltip,overlayPlacement:"bottom"},i.a.createElement(o.b,{className:c.a.editorBadge,name:"Editor22"}))}},1548:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),i=a.n(n),r=a(5),o=(a(9),a(25)),s=a(520),l=a(147),c=a(1554),u=a(1771),d=a.n(u),h=a(1353);const p=Object(r.b)((e,t)=>{const a=Object(s.k)(e,t),n=a&&a.otherParticipants||[],i=a&&a.myself,r=Object(o.b)(e,t.chatStateKey),l=r&&r.roomId&&e.entities.chatConversations[r.roomId];return{allowHideRoom:l&&!("DesignToolDriver"===t.style||"DesignToolWatcher"===t.style),allowMessageUser:l&&!("collab_chat"===l.type&&("DesignToolDriver"===t.style||"DesignToolWatcher"===t.style)),allowRemoveFromGroup:l&&"group_chat"===l.type,inboxStateKey:(null==r?void 0:r.inboxStateKey)||"",myselfAsParticipant:i,participants:n,profileEntities:e.entities.profiles}},(e,t)=>({dispatchGetProfiles:t=>e(Object(l.pb)(t)),dispatchRemoveUser:a=>{e(Object(l.Ob)(t.chatStateKey,a))}}))(e=>{const{allowHideRoom:t,allowMessageUser:a,allowRemoveFromGroup:n,chatStateKey:r,dispatchGetProfiles:o,dispatchRemoveUser:s,inboxStateKey:l,myselfAsParticipant:u,participants:p,profileEntities:m,style:g}=e;Object(h.a)(r);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:d.a.root},i.a.createElement(c.a,{allowHideRoom:t,allowMessageUser:a,allowRemoveFromGroup:n,allowReportUser:!0,chatStateKey:r,dispatchGetProfiles:o,dispatchRemoveUser:s,inboxStateKey:l,myselfAsParticipant:u,participants:p,profileEntities:m,style:g})),!1)})},1554:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var n=a(0),i=a.n(n),r=a(143),o=a(10),s=a(5),l=a(29),c=a(137),u=a(1353),d=a(25),h=a(6),p=a(44),m=a(8),g=a(129),f=a(23),b=a(520),v=a(147),y=a(617),_=a(16),S=a(1546);a(1895);const D=Object(o.a)("ChatMemberListEntry"),C=Object(s.b)(e=>({profileEntities:e.entities.profiles,zString:Object(m.c)(e)}),()=>({}))(e=>{const{allowMessageUser:t=!0,allowRemoveFromGroup:a=!1,allowReportUser:r=!0,isBlocked:o=!1,isInboxOwner:s=!1,onBlockUser:u,onMessageUser:d,onRemoveUserFromGroup:m,onReportUser:g,onUnblockUser:f,participant:b,profileEntities:v,showDropdownMenu:C=!0,zString:E}=e,O=v[b.memberId]||null,[w,j]=Object(n.useState)(!1),[I,N]=Object(n.useState)(0),k=Object(n.useRef)(null);return i.a.createElement("div",{className:D("&",{"&--isMobile":!1}),onClick:void 0},i.a.createElement("div",{className:D("&-entryContainer"),onMouseLeave:()=>j(!1)},i.a.createElement("div",{className:D("&-userDetails")},i.a.createElement(y.b,{size:y.a.Medium,user:b}),i.a.createElement("div",{className:D("&-userName","&-truncateText")},i.a.createElement("div",{className:D("&-userNameContainer","&-truncateText")},b.displayName||E("zi_common_Anonymous"),!s&&b.isEditor&&i.a.createElement(S.a,null)),i.a.createElement("div",{className:D("&-headline")},b.headline)),s&&i.a.createElement("div",{className:D("&-youTag")},E("zi_myzazzle_chat_you"))),C&&i.a.createElement("div",{className:D("&-moreWrapper")},i.a.createElement(l.a,{className:D("&-more"),elementRef:k,onClick:()=>{const e=k.current;if(e){const t=e.getBoundingClientRect();N(t.left+t.width/2)}j(!0)}},i.a.createElement(h.a,{iconName:p.a.More})),w&&i.a.createElement(c.a,{caretViewportHorzOffset:I,caretPosition:"top",className:D("&-settingsPalette"),includeCaret:!0,onRequestClose:()=>j(!1)},!o&&t&&i.a.createElement(l.a,{className:D("&-paletteButton"),onClick:()=>{d&&j(!1),d(b)}},i.a.createElement("div",{className:D("&-paletteOption")},E("zi_myzazzle_chat_message"))),i.a.createElement(_.a,{className:D("&-paletteButton"),href:O&&O.link,target:"_blank"},i.a.createElement("div",{className:D("&-paletteOption")},E("zi_myzazzle_chat_viewProfile"))),i.a.createElement("div",{className:D("&-paletteSeparator")}),!b.unblockable&&!o&&i.a.createElement(l.a,{className:D("&-paletteButton"),onClick:()=>{u&&j(!1),u(b)}},i.a.createElement("div",{className:D("&-paletteOption","&-dangerOption")},E("zi_myzazzle_chat_blockUser"))),!b.unblockable&&o&&i.a.createElement(l.a,{className:D("&-paletteButton"),onClick:()=>{f&&j(!1),f(b)}},i.a.createElement("div",{className:D("&-paletteOption")},E("zi_myzazzle_chat_unblockUser"))),a&&i.a.createElement(l.a,{className:D("&-paletteButton"),onClick:()=>{m&&j(!1),m(b)}},i.a.createElement("div",{className:D("&-paletteOption","&-dangerOption")},E("zi_myzazzle_chat_removeFromGroup"))),r&&i.a.createElement(l.a,{className:D("&-paletteButton"),onClick:()=>{g&&j(!1),g(b)}},i.a.createElement("div",{className:D("&-paletteOption","&-dangerOption")},E("zi_myzazzle_chat_reportuser")))))))});a(1894);const E=i.a.lazy(()=>a.e(407).then(a.bind(null,2938))),O=i.a.lazy(()=>a.e(388).then(a.bind(null,3563))),w=Object(o.a)("GroupChatInfo"),j=Object(s.b)((e,t)=>{const a=Object(g.j)(e,t.inboxStateKey),n=a&&a.settings&&a.settings.blockedUsers||[],i=Object(d.b)(e,t.chatStateKey);return{activeTab:null==i?void 0:i.activeTab,blocklist:n,zString:Object(m.c)(e)}},e=>({dispatchBlockUser:(t,a)=>{e(Object(v.hb)(t,a))},dispatchUnblockUser:(t,a)=>{e(Object(v.ac)(t,a))},dispatchCreateDraft:(t,a)=>{e(Object(v.jb)(t,[a]))},dispatchCloseDialog:t=>{e(Object(f.c)(t))},dispatchOpenDialog:(t,a)=>{e(Object(f.d)(t,a))},dispatchHideRoom:t=>{e(Object(v.qb)(t))}}))(e=>{const{activeTab:t,allowHideRoom:a,allowMessageUser:r,allowRemoveFromGroup:o,allowReportUser:s,blocklist:d,dispatchBlockUser:m,dispatchCloseDialog:g,dispatchCreateDraft:f,dispatchHideRoom:v,dispatchOpenDialog:_,dispatchUnblockUser:S,inboxStateKey:D,maxAvatarSlots:j,myselfAsParticipant:I,onRemoveUser:N,participants:k,style:T,zString:x}=e,[z,P]=Object(n.useState)(!1),[F,M]=Object(n.useState)(0),A="Inbox"===T,R=Object(n.useRef)(null),B=Object(u.a)(e.chatStateKey),L=e=>{const t=i.a.createElement(E,{title:x("zi_myzazzle_chat_blockPerson"),bodyText:`${x("zi_myzazzle_chat_areYouSureBlock")}\n${x("zi_myzazzle_chat_blockExplanation")}`,okayButtonText:x("zi_myzazzle_chat_block"),participants:[e],onCloseOrCancel:()=>{g(t)},onConfirm:()=>{g(t),m(D,e.memberId)}});_(t)},U=e=>{S(D,e.memberId)},K=e=>{f(D,e.memberId)},G=e=>{const t=i.a.createElement(E,{title:x("zi_myzazzle_chat_removeFromGroup"),bodyText:`${x("zi_myzazzle_chat_areYouSureRemove")}\n${x("zi_myzazzle_chat_removeExplanation")}`,okayButtonText:x("zi_myzazzle_chat_remove"),participants:[e],onCloseOrCancel:()=>{g(t)},onConfirm:()=>{g(t),N(e.memberId)}});_(t)},H=t=>{const a=()=>{g(n)},n=i.a.createElement(O,{chatStateKey:e.chatStateKey,participant:t,onCloseOrCancel:a,onConfirm:a});_(n)},Z=Object(n.useCallback)(()=>{if(e.chatStateKey){const t=i.a.createElement(E,{title:x("zi_myzazzle_chat_deleteconversation"),bodyText:x("zi_myzazzle_chat_deleteconversation_message2",{names:Object(b.c)(k,x)}),okayButtonText:x("zi_common_Application_Delete"),participants:k,onCloseOrCancel:()=>{g(t)},onConfirm:()=>{g(t),v(e.chatStateKey)}});_(t,"hideRoomDialog")}},[e.chatStateKey,k]);let W,V,q=0,$=[];if(k.length<=j)$=k.slice().reverse(),q=0;else{const e=j-1;$=k.slice(0,e).reverse(),q=k.length-e}const X=Object(b.c)(k,x);W=i.a.createElement("div",{className:w("&-groupMemberContent")},i.a.createElement("div",{className:w("&-groupAvatars","&-contentItem")},q>0&&i.a.createElement("div",{className:w("&-avatarContainer","&-remainingMembers")},i.a.createElement("b",null,"+",q)),$.map(e=>i.a.createElement("div",{className:w("&-avatarContainer"),key:e.memberId},i.a.createElement(y.b,{size:y.a.XLarge,user:e})))),i.a.createElement("div",{className:w("&-groupNames","&-contentItem","&-truncateText")},X));const Y={};d.forEach(e=>{Y[e.memberId]=!0});const Q=[],J=[];return k.forEach(e=>{Y[e.memberId]?J.push(e):Q.push(e)}),V=i.a.createElement("div",{className:w("&-userListContent")},i.a.createElement("div",{className:w("&-titleItem")},i.a.createElement("b",null,x("zi_myzazzle_MediaBrowser_Details")),a&&e.chatStateKey&&i.a.createElement("div",{className:w("&-moreWrapper")},i.a.createElement(l.a,{className:w("&-more"),elementRef:R,onClick:()=>{const e=R.current;if(e){const t=e.getBoundingClientRect();M(t.left+t.width/2)}P(!0)}},i.a.createElement(h.a,{iconName:p.a.More})),A&&"info"===t&&i.a.createElement("button",{className:w("&-close"),onClick:()=>{B("chat")}},i.a.createElement(h.a,{iconName:h.a.Icon.BurgerEndWIZ,title:x("zi_myzazzle_chat_viewInformation")})),z&&i.a.createElement(c.a,{caretViewportHorzOffset:F,caretPosition:"top",className:w("&-settingsPalette"),includeCaret:!0,onRequestClose:()=>P(!1)},i.a.createElement(l.a,{className:w("&-paletteButton"),onClick:Z},i.a.createElement("div",{className:w("&-paletteOption")},x("zi_myzazzle_chat_deleteconversation")))))),i.a.createElement("div",{className:w("&-userList")},Q.map(e=>i.a.createElement(C,{key:e.memberId,allowMessageUser:r,allowRemoveFromGroup:o,allowReportUser:s,onBlockUser:L,onMessageUser:K,onRemoveUserFromGroup:G,onReportUser:H,participant:e})),I&&i.a.createElement(C,{isInboxOwner:!0,participant:I,showDropdownMenu:!1})),J.length>0&&i.a.createElement("div",null,i.a.createElement("div",{className:w("&-contentItem")},i.a.createElement("b",null,x("zi_myzazzle_chat_blocked"))),i.a.createElement("div",{className:w("&-userList")},J.map(e=>i.a.createElement(C,{key:e.memberId,allowRemoveFromGroup:o,allowReportUser:s,isBlocked:!0,onRemoveUserFromGroup:G,onReportUser:H,onUnblockUser:U,participant:e}))))),i.a.createElement("div",{className:w("&")},i.a.createElement("div",{className:w("&-userListContainer")},V))});a(1893);const I=Object(o.a)("InfoPanel"),N=e=>{const{allowHideRoom:t,allowMessageUser:a,allowRemoveFromGroup:o,allowReportUser:s,dispatchGetProfiles:l,dispatchRemoveUser:c,inboxStateKey:u,myselfAsParticipant:d,participants:h,profileEntities:p,style:m}=e;return Object(n.useEffect)(()=>{const e=h?h.map(e=>e.memberId):[],t=[];e.forEach(e=>{p[e]||t.push(e)}),t.length>0&&l(t)},[]),i.a.createElement("div",{className:I("&","&--"+m,{"&--isMobile":!1})},i.a.createElement("div",{className:I("&-panelContainer")},i.a.createElement(r.b,null,i.a.createElement("div",{className:I("&-panelContent")},h.length>=0&&i.a.createElement(j,{allowHideRoom:t,allowMessageUser:a,allowRemoveFromGroup:o,allowReportUser:s,chatStateKey:e.chatStateKey,inboxStateKey:u,maxAvatarSlots:3,myselfAsParticipant:d,onRemoveUser:c,participants:h,style:m})))))}},1555:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var n=a(109),i=a.n(n),r=a(0),o=a.n(r),s=a(29),l=a(6),c=a(10),u=a(13),d=a(14),h=a(89),p=a(8),m=a(7);a(1890);const g=Object(c.a)("ChatInputAttachments"),f=e=>{const t=Object(p.e)(),{attachmentIds:a,onRemoveAttachment:n}=e,i=a?a.length:0;return o.a.createElement("div",{className:g("&")},o.a.createElement("span",{className:g("&-label")},1==i?t("zi_myzazzle_chat_Attachments_OneAttachment"):t("zi_myzazzle_chat_Attachments_MoreThanOneAttachment",{num:i})),o.a.createElement("div",{className:g("&-attachments")},a&&a.map(e=>o.a.createElement("div",{key:e,className:g("&-attachment")},o.a.createElement("div",{className:g("&-remove"),onClick:()=>{n(e)}},o.a.createElement(l.a,{iconName:l.a.Icon.CloseStamp})),o.a.createElement("div",{className:g("&-imageContainer")},o.a.createElement(h.c,{baseSrc:Object(u.c)(Object(m.a)().staticRealviewGetImageBase,{id:e,[d.a.RlvMaxDim]:50,[d.a.RlvImageType]:"png"}),className:g("&-image")}))))))};var b=a(1750),v=(a(1889),a(28));const y=Object(c.a)("ChatInput"),_=e=>{const t=Object(v.c)(),[a,n]=Object(r.useState)(!0),c=Object(r.useRef)(null),u=Object(r.useRef)(null),d=Object(r.useRef)(null),h=!!e.message,p=e.attachmentIds&&e.attachmentIds.length>0,m=t("String","www","Chat.SuggestCSContactKeywords","").split(",").filter(e=>e.trim().length>0),g=e=>{if(null==c?void 0:c.current)if(c.current.getBoundingClientRect().height<c.current.scrollHeight)c.current.style.height=c.current.scrollHeight+"px";else if(e){const e=document.activeElement;c.current.style.visibility="hidden",c.current.style.height="0",setTimeout(()=>{(null==c?void 0:c.current)&&(c.current.style.height=c.current.scrollHeight+"px",c.current.style.visibility="visible"),null==e||e.focus()},100)}else c.current.style.height="0",c.current.style.height=c.current.scrollHeight+"px"},_=()=>{e.disableSubmit||!(h&&!a||p||e.message)||""===c.current.value.trim()&&!p||e.sendMessage(()=>{c.current&&(c.current.style.height="0")})},S=t=>{var a;t.length>0&&((t=>{const a=e.attachmentIds?[...e.attachmentIds,...t]:t;e.onUpdateInProgressMessage(e.message,a)})(t),null===(a=c.current)||void 0===a||a.focus())},D=()=>g(!1);Object(r.useEffect)(()=>(window.addEventListener("resize",D),D(),e.focusInputOnMount&&c.current&&c.current.focus(),()=>{window.removeEventListener("resize",D),d.current&&clearTimeout(d.current)}),[]),Object(r.useEffect)(()=>{d.current=setTimeout(()=>{g(!0)},100)},[e.showingInfo]),Object(r.useEffect)(()=>{c.current&&u.current&&(c.current.selectionStart=u.current,c.current.selectionEnd=u.current)});const{whoIsTyping:C,zString:E}=e;let O=null;return C&&(1===C.length?O=E("zi_myzazzle_chat_UserIsTyping",{user:C[0].displayName}):2===C.length?O=E("zi_myzazzle_chat_TwoUsersAreTyping",{user1:C[0].displayName,user2:C[1].displayName}):3===C.length?O=E("zi_myzazzle_chat_ThreeUsersAreTyping",{user1:C[0].displayName,user2:C[1].displayName,user3:C[2].displayName}):C.length>3&&(O=E("zi_myzazzle_chat_MultipleUsersAreTyping"))),o.a.createElement("div",{className:y("&","&--"+e.style,{"&--isMobile":!1})},o.a.createElement("div",{className:y("&-contentsContainer")},p&&o.a.createElement("div",{className:y("&-attachments")},o.a.createElement(f,{attachmentIds:e.attachmentIds,onRemoveAttachment:t=>{(t=>{const{attachmentIds:a}=e;if(a){const n=a.indexOf(t);if(n>-1){const t=i()(a);t.splice(n,1),e.onUpdateInProgressMessage(e.message,t)}}})(t)}})),o.a.createElement("div",{className:y("&-inputContainer")},o.a.createElement("div",{className:y("&-contents")},!1,o.a.createElement("div",{className:y("&-textContainer")},o.a.createElement("div",null,o.a.createElement("textarea",{className:y("&-input"),onChange:t=>{const{allowSuggestContactCSMessage:a,onMatchCSContactKeywords:i}=e;g();const r=t.currentTarget.value;""===c.current.value.trim()?n(!0):n(!1),r!==e.message&&(e.onUpdateInProgressMessage(r,e.attachmentIds),u.current=c.current&&c.current.selectionStart);const o=r.toLowerCase();a&&i&&m.some(e=>o.includes(e))&&i()},placeholder:E("zi_myzazzle_chat_TypeSomething"),value:e.message?e.message:"",onKeyDown:e=>{"Enter"===e.key&&(e.shiftKey||e.ctrlKey)||"Enter"===e.key&&(e.preventDefault(),_())},ref:c,maxLength:2e3})))),o.a.createElement("div",{className:y("&-attachment"),onClick:()=>{e.onShowMediaBrowser({additionalTip:E("zi_myzazzle_MediaBrowser_TipDesign"),onDone:S,rootFilter:void 0,showZazzleImages:!1,submitButtonContent:E("zi_create_design_addToDesign"),view:"MyImages"})}},o.a.createElement(l.a,{style:{color:"#0098FF"},iconName:l.a.Icon.TabFit,title:E("zi_myzazzle_chat_AttachAnImage")})),!1)),o.a.createElement("div",{className:y("&-under")},o.a.createElement("div",{className:y("&-typing")},O),o.a.createElement(b.a,{className:y("&-limit"),limit:2e3,message:e.message})),e.showCustomerServicePrompt&&!!e.inboxOwner&&o.a.createElement("div",{className:y("&-customerServicePromptWrapper")},o.a.createElement("span",{className:y("&-customerServicePrompt")},E("zi_myzazzle_SellerInfo_CustomerServiceWarning")),o.a.createElement(s.a,{className:y("&-autoResponseLink"),onClick:()=>{const t=E("zi_myzazzle_SellerInfo_CustomerServiceMessage",{designerName:e.inboxOwner.displayName});e.onUpdateInProgressMessage(t.replace(/\\n/g,"\n"),e.attachmentIds),u.current=c.current&&c.current.selectionStart,g(!0)}},E("zi_myzazzle_SendAutoResponse"))))}},1556:function(e,t,a){e.exports={root:"ChatCSContactMessage_root",title:"ChatCSContactMessage_title",dismissButton:"ChatCSContactMessage_dismissButton"}},1608:function(e,t,a){},1609:function(e,t,a){},1613:function(e,t,a){},1615:function(e,t,a){},1616:function(e,t,a){},1617:function(e,t,a){},1621:function(e,t,a){},1622:function(e,t,a){},1623:function(e,t,a){},1624:function(e,t,a){},1625:function(e,t,a){},1626:function(e,t,a){},1627:function(e,t,a){},1628:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(2),i=a(15),r=a(0),o=a.n(r),s=a(16),l=a(10),c=a(8),u=a(14),d=a(97),h=a(1215);a(1616);const p=Object(l.a)("PlaceholderCell"),m=o.a.memo(e=>{let{renderImage:t=!0,showTitle:a=!0,useSeoTitle:r=!0}=e,l=Object(i.a)(e,["renderImage","showTitle","useSeoTitle"]);const m={"&--showTitle":a},g=Object(c.e)(),f=Object(u.f)();const{imageUrl:b,linkUrl:v,onClick:y,text:_,title:S}=Object(n.a)({imageUrl:l.placeholder.imageUrl,linkUrl:l.transferFromProduct?Object(d.j)(l.transferFromProduct.designId,l.transferFromProduct.templates,l.transferFromProduct.isCustomizing,f):l.linkUrl||l.placeholder.linkUrl,onClick:l.onClick,text:l.placeholder.text,title:r?l.placeholder.titleSeo:l.placeholder.title},function(e){switch(e){case"TransferChooseAProduct":return{imageUrl:f("WwwAst","z4/uniquePages/product/transferPlaceholder.svg"),text:g("zi_product_Page_TransferPlaceholder"),title:g("zi_product_Page_TransferPlaceholderDescription")};default:return{}}}(l.placeholder.template));return o.a.createElement(s.a,{className:p("&","GA-MaybeProduct",m,h.b),href:v,onClick:y,rel:"nofollow",target:l.newTab?"_blank":null,tabIndex:l.disableTabbing?-1:null},o.a.createElement("div",{className:p("&-contentSizer")},o.a.createElement("div",{className:p("&-content")},_&&o.a.createElement("span",{className:p("&-text")},_),t&&b&&o.a.createElement("img",{src:b,"aria-hidden":"true",alt:g("zi_product_Page_TransferPlaceholder")}))),o.a.createElement("div",{className:p("&-title")},S),_&&o.a.createElement("div",{className:p("&-altTitle")},_))})},1642:function(e,t,a){},1643:function(e,t,a){},1649:function(e,t,a){},1651:function(e,t,a){"use strict";e.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDF])\u200D[\u2640\u2642])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}},1676:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n),r=a(6),o=a(10),s=a(8);a(1888);const l=Object(o.a)("ChatErrorMessage"),c=e=>{const t=Object(s.e)(),{onToggleExpanded:a}=e,n=!a||e.isExpanded;return i.a.createElement("div",{className:l("&")},a&&i.a.createElement("div",{className:l("&-titleBar"),onClick:a},i.a.createElement("div",{className:l("&-toggle")},i.a.createElement(r.a,{iconName:n?r.a.Icon.SizeDecrease:r.a.Icon.SizeIncrease}))),n&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:l("&-icon")},"ðŸ˜¥"),i.a.createElement("div",{className:l("&-title")},t("zi_myzazzle_chat_Hang_OhNuts")),i.a.createElement("div",{className:l("&-description")}," ",t("zi_myzazzle_chat_Hang_LooksLikeWereExperiencingProblems"))))}},170:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return b}));var n=a(2),i=a(3),r=a(9),o=a.n(r),s=a(0),l=a.n(s),c=a(29),u=a(6),d=a(108),h=a(13),p=a(19);a(456);const m={Error:u.a.Icon.RevisedErrorIcon,Info:u.a.Icon.InfoStamp,Success:u.a.Icon.CheckStamp,SuccessAlternate:u.a.Icon.Check,Warning:u.a.Icon.WarningStamp},g=Object(h.h)({clickToDismiss:!1,duration:5e3,extendOnMouseOver:!1,okText:"Ok",showClose:!0,showIcon:!0,showOk:!1,type:"None"});class f extends l.a.Component{constructor(...e){super(...e),Object(i.a)(this,"timeout",void 0),Object(i.a)(this,"handledClose",void 0),Object(i.a)(this,"close",()=>{this.handledClose||(clearTimeout(this.timeout),this.handledClose=!0,this.props.onRequestClose&&this.props.onRequestClose())}),Object(i.a)(this,"dismissAndClose",()=>{this.handledClose||(this.props.onDismiss&&this.props.onDismiss(),this.close())}),Object(i.a)(this,"reset",()=>{clearTimeout(this.timeout),this.props.duration>0&&(this.timeout=setTimeout(this.dismissAndClose,this.props.duration))}),Object(i.a)(this,"handleDismissClick",e=>{e.stopPropagation(),this.dismissAndClose()}),Object(i.a)(this,"handleOkClick",e=>{e.stopPropagation(),this.props.onOk&&this.props.onOk(),this.close()}),Object(i.a)(this,"handleRootClick",e=>{this.props.clickToDismiss?this.handleDismissClick(e):this.props.onSelect&&(this.props.onSelect(),this.close())}),Object(i.a)(this,"onMouseOver",()=>{this.props.extendOnMouseOver&&this.reset()})}componentDidMount(){this.reset(),d.a.push()}componentWillUnmount(){clearTimeout(this.timeout),this.props.onComponentWillUnmount&&this.props.onComponentWillUnmount(),d.a.pop()}render(){const{okText:e,type:t,showClose:a,showOk:n,showIcon:i,title:r,clickToDismiss:s}=this.props;let d,h,p,g;r&&(d=l.a.createElement("div",{className:"Toast-title"},r)),a&&(h=l.a.createElement(c.a,{className:"Toast-close",onClick:this.handleDismissClick},l.a.createElement(u.a,{iconName:u.a.Icon.MultiplyLight}))),n&&e&&(p=l.a.createElement(c.a,{className:"Toast-ok",onClick:this.handleOkClick},e)),i&&"None"!==t&&"SuccessBlack"!==t&&(g=l.a.createElement("div",{className:"Toast-icon"},l.a.createElement(u.a,{iconName:m[t]})));const f=o()("Toast","Toast--"+t,{"Toast--clickToDismiss":s,"Toast--showClose":!!h,"Toast--showIcon":!!g,"Toast--mobile":!1});return l.a.createElement("div",{className:f,onClick:this.handleRootClick,onMouseOver:this.onMouseOver},g,h,l.a.createElement("div",{className:"Toast-content"},l.a.createElement("div",{className:"Toast-topContent"},d),l.a.createElement("div",{className:"Toast-middleContent"},this.props.children),l.a.createElement("div",{className:"Toast-bottomContent"},p)))}}function b(e,t){return{key:Object(p.i)("toast"),group:t,options:Object(n.a)(Object(n.a)({},g),e)}}Object(i.a)(f,"defaultProps",Object(n.a)({},g))},1727:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0);function i(e){const t=Object(n.useRef)(),[a,i]=Object(n.useState)(e),r=Object(n.useCallback)(()=>{i(e=>{if(t.current){const a=t.current.getBoundingClientRect();return a===e||e&&a.top===e.top&&a.left===e.left&&a.width===e.width&&a.height===e.height?e:a}})},[]);return[t,a,r]}},1728:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"g",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"i",(function(){return h})),a.d(t,"j",(function(){return m})),a.d(t,"k",(function(){return g})),a.d(t,"l",(function(){return f})),a.d(t,"m",(function(){return b})),a.d(t,"n",(function(){return v})),a.d(t,"o",(function(){return y}));var n=a(395);function i(){return[1,0,0,1,0,0]}function r(e){const t=Math.cos(e),a=Math.sin(e);return[t,-a,a,t,0,0]}function o(e,t,a){const n=[1,0,0,1,0,0];return g(n,e),m(n,t*Math.PI/180),b(n,a),n}function s(e){let t=e.slice(0,2),a=e.slice(2,4),i=e.slice(4,6),r=e.slice(6,8);const o=Object(n.q)(Object(n.b)(t,i),.5);return t=Object(n.r)(t,o),a=Object(n.r)(a,o),i=Object(n.r)(i,o),r=Object(n.r)(r,o),[...Object(n.b)(a,i),...Object(n.b)(i,r),...o]}function l(e){return e.slice(4,6)}function c(e){const t=[0,1];p(e,t);let a=90-180*Math.atan2(t[1],t[0])/Math.PI;return a<-180&&(a+=360),a>180&&(a-=360),a}function u(e){return[Object(n.n)([e[0],e[1]]),Object(n.n)([e[2],e[3]])]}function d(e){const t=e,a=[1,0,0,1,0,0];a[0]=t[3],a[1]=-t[1],a[2]=-t[2],a[3]=t[0],a[4]=t[2]*t[5]-t[3]*t[4],a[5]=t[1]*t[4]-t[0]*t[5];const n=t[0]*a[0]+t[1]*a[1];Math.abs(n)>1e-7?(t[0]=a[0]/n,t[1]=a[1]/n,t[2]=a[2]/n,t[3]=a[3]/n,t[4]=a[4]/n,t[5]=a[5]/n):(t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0)}function h(e,t){const a=e,n=t,i=[1,0,0,1,0,0];i[0]=a[0]*n[0]+a[1]*n[2],i[1]=a[0]*n[1]+a[1]*n[3],i[2]=a[2]*n[0]+a[3]*n[2],i[3]=a[2]*n[1]+a[3]*n[3],i[4]=n[4]+a[4]*n[0]+a[5]*n[2],i[5]=n[5]+a[4]*n[1]+a[5]*n[3],a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[4]=i[4],a[5]=i[5]}function p(e,t){for(let a=0;a<t.length;a+=2){const n=t[a+0],i=t[a+1];let r=0,o=0;r=n*e[0],r+=i*e[2],o=n*e[1],o+=i*e[3],t[a]=r,t[a+1]=o}}function m(e,t){h(e,r(t))}function g(e,t){h(e,[t[0],0,0,t[1],0,0])}function f(e,t=0){return e.map(e=>e.toFixed(t)).join()}function b(e,t){e[4]+=t[0],e[5]+=t[1]}function v(e,t){p(e,t);for(let a=0;a<t.length;a+=2)t[a+0]+=e[4],t[a+1]+=e[5]}function y(e,t){t.forEach(t=>v(e,t.data))}},1730:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(200),i=a.n(n),r=a(0);const o=Object(r.createContext)({closeSettingsDialog:i.a,collabStateKey:"",disconnect:i.a,getLocalDevices:i.a,initialize:()=>Promise.resolve(!1),isShowingSettingsDialog:!1,openSettingsDialog:i.a})},1731:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(2),i=a(15),r=a(224),o=a.n(r),s=a(0),l=a.n(s),c=a(1741),u=a.n(c),d=a(568),h=a.n(d),p=a(616);function m(e){const t=u()(e);function a(e){const[a,r]=Object(s.useState)(null),c=Object(s.useRef)(h()(p.a.HEX(e.value)?Object(p.c)(e.value):e.value).toHsl()),u=Object(s.useRef)(h()(p.a.HEX(e.value)?Object(p.c)(e.value):e.value).toHsl()),d=Object(s.useRef)(e.value);o()(e.value,d.current)?c.current=u.current:(e=>{let t=e;p.a.HEX(e)&&(t=Object(p.c)(e));const a=h()(t);u.current=a.toHsl(),c.current=a.toHsl(),d.current=e})(e.value),Object(s.useEffect)(()=>{if(a){const[t,n]=a;o()(t,n)||e.onChange(t),r(null)}},[a]);const{colorFormat:m,onChange:g,value:f}=e,b=Object(i.a)(e,["colorFormat","onChange","value"]);return l.a.createElement(t,Object(n.a)(Object(n.a)({},b),{},{color:c.current,onChange:t=>{let a=t[e.colorFormat];p.a.HEX(a)&&(1!==t.hsl.a&&(a=Object(p.d)(h()(t.hsl).toHex8())),a=a.replace("#","")),u.current=t.hsl,d.current=a,r([d.current,e.value])}}))}return a.defaultProps={colorFormat:"hex",onChange:()=>{},value:"ffffff"},a}},1732:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n=a(2),i=a(149),r=a.n(i),o=a(0),s=a.n(o),l=a(1735),c=a.n(l),u=a(1739),d=a.n(u),h=a(1740),p=a.n(h),m=a(568),g=a.n(m),f=a(143),b=a(29),v=a(616),y=a(10),_=a(183),S=a(92),D=(a(1879),a(1539)),C=a(423),E=a.n(C),O=(a(1881),a(5)),w=a(38),j=a.n(w),I=a(384),N=a(704),k=a(6),T=a(242),x=a(7),z=a(12);const P=Object(y.a)("EyeDropper"),F=e=>{const{className:t,clipEleRect:a,designStateKey:n,posEleRect:i,imgSrc:r,onActiveChange:l,onChange:c,onHoverChange:u,style:d}=e,h=Object(o.useRef)(null),p=Object(o.useRef)(null),m=Object(O.d)(),[g,f]=Object(o.useState)(!1),[b,v]=Object(o.useState)(!1),[y,_]=Object(o.useState)({x:0,y:0}),[S,D]=Object(o.useState)(!1),C=Object(o.useRef)(r),w=Object(o.useRef)(null),F=Object(o.useRef)(!1);Object(o.useEffect)(()=>{l&&l(g),g?F.current=!1:S&&D(!1)},[g]),Object(o.useEffect)(()=>{if(b)return window.addEventListener("keydown",U,!0),()=>{window.removeEventListener("keydown",U,!0)}},[b]),Object(o.useEffect)(()=>{if(g&&(null==w.current||r!==C.current?(w.current=new Image,w.current.onload=()=>{M(),v(!1)},v(!0),Object(x.a)().userAgent.includes("Edge")&&(w.current.crossOrigin="anonymous"),w.current.src=r,C.current=r):h.current&&M(),!b))return document.body.addEventListener("click",A),document.body.addEventListener("touchend",R,!0),document.addEventListener("keydown",B,!0),()=>{document.body.removeEventListener("click",A),document.body.removeEventListener("touchend",R,!0),document.removeEventListener("keydown",B,!0)}},[g,b,r]);const M=()=>{if(h.current){const e=h.current.getContext("2d");e.fillStyle="white",e.fillRect(0,0,h.current.width,h.current.height),e.drawImage(w.current,0,0)}};Object(o.useEffect)(()=>{if(g&&!b){const e=h.current.getBoundingClientRect(),t=y.x-e.left,a=y.y-e.top,n=p.current.getContext("2d");n.imageSmoothingEnabled=!1,n.fillStyle="white",n.fillRect(0,0,p.current.width,p.current.height),n.drawImage(h.current,Math.floor(t-H),Math.floor(a-H),G,G,0,0,K,K);const i=K/G,r=Math.floor(G/2);n.lineWidth=1,n.strokeStyle="black",n.strokeRect(i*r,i*r,i,i),n.strokeStyle="white",n.strokeRect(i*r-1,i*r-1,i+2,i+2),n.lineWidth=2,n.arc(K/2,K/2,K/2,0,2*Math.PI),n.stroke(),q(u)}},[y.x,y.y]);const A=e=>{e.target!==h.current&&(e.stopImmediatePropagation(),f(!1))},R=e=>{e.target!==h.current&&(e.stopImmediatePropagation(),e.preventDefault(),f(!1))},B=e=>{const t=e.shiftKey?10:1;switch(e.stopImmediatePropagation(),e.preventDefault(),e.which){case 27:f(!1);break;case 38:L(0,-t);break;case 40:L(0,t);break;case 37:L(-t,0);break;case 39:L(t,0);break;case 13:case 32:e.preventDefault(),q(c),f(!1)}},L=(e,t)=>{S||D(!0),_(a=>({x:E()(a.x+e,i.left+Z,i.right),y:E()(a.y+t,i.top+Z,i.bottom)}))},U=e=>{e.stopImmediatePropagation(),e.preventDefault()},K=150,G=11,H=G/2,Z=Object(x.b)()||Object(x.a)().userAgent.includes("Edge")?Math.ceil(H)+1:1,W=Object(T.a)(e=>{0===e.movementX&&0===e.movementY||(S||F.current||D(!0),_({x:E()(e.clientX,i.left+Z,i.right),y:E()(e.clientY,i.top+Z,i.bottom)})),e.stopPropagation()},50),V=Object(T.a)(e=>{e.preventDefault();const t=e.touches[0].clientX,a=e.touches[0].clientY,n=t<i.left||t>i.right||a<i.top||a>i.bottom;S&&n?D(!1):S||n||D(!0),_({x:t,y:a})},50),q=e=>{try{const t=p.current.getContext("2d");e(t.getImageData(K/2,K/2,1,1).data)}catch(t){if(n){const e={Name:"Eyedropper Error",Code:123,Exception:t};m(Object(z.kc)(n,e)),logToServer(`EyedropperCanvasError: ${t}\nURL: ${r}\n`)}f(!1)}},$=a?{height:a.height,left:a.left,top:a.top,width:a.width}:{height:"100%",left:0,top:0,width:"100%"},X={display:S?"block":"none",transform:`translate(${y.x-K/2}px, ${y.y-(Object(x.a)().isDesktop?K/2:.75*K)}px)`};return s.a.createElement(s.a.Fragment,null,s.a.createElement(N.a,{active:g,className:P("&",t),onClick:()=>{f(!0)},bordered:!0,disabled:b,style:d},s.a.createElement(k.a,{iconName:k.a.Icon.EyeDropper})),g&&j.a.createPortal(s.a.createElement(s.a.Fragment,null,b?s.a.createElement("div",{className:P("&-loadingFixedDiv"),style:$},s.a.createElement("div",{className:P("&-loadingOverlayDiv")},s.a.createElement(I.b,{size:"normal",hasOwnContainer:!0,isShown:!0,className:P("&-loadingOverlay")}))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:P("&-canvasDiv")},s.a.createElement("div",{className:P("&-canvasOverflow"),style:$},s.a.createElement("canvas",{tabIndex:0,className:P("&-canvas"),ref:h,onMouseEnter:()=>{D(!0),F.current=!1},onMouseLeave:()=>{D(!1),F.current=!0},onMouseMove:e=>{e.persist(),W(e)},onTouchMove:e=>{e.persist(),V(e)},onTouchEnd:e=>{e.persist(),(e=>{e.changedTouches[0]&&e.preventDefault(),q(c),f(!1),D(!1),e.stopPropagation()})(e)},onTouchStart:e=>{e.preventDefault(),D(!0)},style:{left:i.left,top:i.top,transform:`translate(-${a.left}px, -${a.top}px)`},onClick:e=>{q(c),f(!1),e.stopPropagation()},width:i.width,height:i.height})),s.a.createElement("canvas",{className:P("&-magCanvas"),ref:p,style:X,height:K,width:K})))),document.body))};function M(e){e&&e.addEventListener("touchmove",e=>{e.preventDefault()},r.a.passiveeventlisteners?{passive:!1}:void 0)}var A;!function(e){e[e.BackgroundTab=0]="BackgroundTab",e[e.Default=1]="Default",e[e.InputOnlyToggleSliders=2]="InputOnlyToggleSliders"}(A||(A={}));const R=Object(y.a)("ColorAdvancedInput"),B=e=>1===e.a?g()(e).toHex():Object(v.d)(g()(e).toHex8()),L=e=>{const[t,a]=Object(o.useState)(!1),[i,r]=Object(o.useState)(e.hsl&&e.allowTransparent?Object(v.g)(B(e.hsl)):""),[l,u]=Object(o.useState)(e.hsl?B(e.hsl):null),[h,m]=Object(o.useState)(e.hsl),y=Object(o.useRef)(null),C=Object(o.useRef)(null),E=Object(o.useRef)(null),O=Object(o.useRef)(null),w=Object(_.a)(e.onChange,e.debounceDuration);Object(o.useEffect)(()=>{M(y.current),M(E.current),M(O.current)},[]),Object(o.useEffect)(()=>{j(e.hsl)},[e.hsl]);const j=t=>{const a=B(t),n=e.allowTransparent?Object(v.g)(a):"";i!==n&&r(n),l!==a&&u(a),h!==t&&m(t)},I=(t,a=!1)=>(e.allowTransparent?a?/^#?([0-9a-fA-F]{8})$/:/^#?(?:[0-9a-fA-F]{3,4}){1,2}$/:a?/^#?([0-9a-fA-F]{6})$/:/^#?(?:[0-9a-fA-F]{3}){1,2}$/).test(t),{eyeDropperClipEleRect:N,eyeDropperDesignStateKey:k,eyeDropperOnActiveChange:T,eyeDropperPositionRect:x,eyeDropperImgSrc:z}=e,P=g()(h),L={hex:P.toHex(),hsl:h,hsv:P.toHsv(),rgb:P.toRgb()},U=s.a.createElement("div",{className:R("&-hue","&-bg"),ref:E},s.a.createElement(f.b,{allowTouchMove:!0},s.a.createElement(d.a,Object(n.a)(Object(n.a)({},L),{},{pointer:D.a,onChange:t=>{e.allowTransparent||(t.a=1),m(t),u(B(t)),w(t)}})))),K=s.a.createElement("div",{className:R("&-saturation","&-bg"),ref:O},s.a.createElement(f.b,{allowTouchMove:!0},s.a.createElement(p.a,Object(n.a)(Object(n.a)({},L),{},{pointer:D.a,onChange:t=>{e.allowTransparent||(t.a=1);const a=g()(t).toHsl();a.h=h.h,m(a),u(B(a)),w(a)}})))),G=e.allowTransparent&&s.a.createElement("div",{className:R("&-alphaRow")},s.a.createElement("span",{className:R("&-opacityLabel")},e.zString("zi_create_design_colors_opacity")),s.a.createElement("div",{className:R("&-alpha"),ref:y},s.a.createElement(f.b,{allowTouchMove:!0},s.a.createElement(c.a,Object(n.a)(Object(n.a)({},L),{},{pointer:D.a,onChange:e=>{r(Math.round(100*e.a).toString()),u(B(e)),m(e),w(e)}})))),s.a.createElement("div",{className:R("&-alphaInput")},s.a.createElement(S.a,{value:i,onChange:e=>{r(e);let t=parseInt(e,10);if(!isNaN(t)){t>100?(t=100,r("100")):t<0&&(t=0,r("0"));const e=l.replace("#",""),a=Object(v.b)(t),n=(8===e.length?e.substr(2,6):e)+a;w(n)}},onBlur:()=>{if(isNaN(parseInt(i,10))){const e=Object(v.g)(l);r(e)}else{const e=parseInt(i.toString(),10).toString();r(e)}},type:"number"}))),H=e.mode===A.BackgroundTab,Z=s.a.createElement(s.a.Fragment,null,H&&U,H&&s.a.createElement("div",{className:R("&-bg")}," ",e.colorLabel),s.a.createElement("div",{className:R("&-row")},e.mode===A.Default&&U,x&&z&&s.a.createElement(F,{className:R("&-eyeDropper"),clipEleRect:N,designStateKey:k,imgSrc:z,posEleRect:x,onActiveChange:T,onHoverChange:e=>{u(g()({r:e[0],g:e[1],b:e[2]}).toHex()),m(g()({r:e[0],g:e[1],b:e[2]}).toHsl())},onChange:t=>e.onChange(g()({r:t[0],g:t[1],b:t[2]}).toHex()),style:{marginRight:H?0:void 0}}),s.a.createElement("div",{className:R("&-previewSwatchContainer"),style:{backgroundImage:`url(${e.zUrl("WwwAst","z2/cr/transparent_swatch.gif")})`,marginLeft:z?void 0:0}},s.a.createElement("div",{className:R("&-previewSwatch"),style:{backgroundColor:P.toRgbString()}})),s.a.createElement("div",{className:R("&-hexInput")},s.a.createElement(S.a,{value:"#"+l,onFocus:()=>{C.current&&C.current.select()},onChange:t=>{const a=t.replace("#","");u(a),I(t,!0)&&e.onChange(Object(v.c)(a))},onChangeComplete:t=>{if(I(t)){const a=t.replace("#","");e.onChange(Object(v.c)(a))}else u(B(e.hsl))},inputRef:C}))));return s.a.createElement("div",{className:R("&",{"&--isMobile":!1},e.className)},e.mode===A.InputOnlyToggleSliders?s.a.createElement(s.a.Fragment,null,Z,s.a.createElement("div",{className:R("&-showMoreLink")},s.a.createElement(b.a,{onClick:()=>{a(!t)}},e.zString("zi_create_ColorPalette_CustomColorPicker"))),t&&s.a.createElement("div",{className:R("&-sliders")},K,!1,s.a.createElement("div",{className:R("&-row")},U),G)):s.a.createElement(s.a.Fragment,null,K,!1,Z,G))};L.defaultProps={debounceDuration:500,hex:"",hsl:null,hsv:null,mode:A.Default,onChange:()=>{},rgb:null};t.b=L},1734:function(e,t,a){"use strict";var n=a(5),i=a(8),r=a(14),o=a(1732),s=a(1731);const l=Object(n.b)((function(e){return{zString:Object(i.c)(e),zUrl:Object(r.d)(e)}}))(o.b);t.a=Object(s.a)(l)},1738:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(3),i=a(0),r=a.n(i),o=a(10);a(1884);const s=Object(o.a)("TilePatternSelector");class l extends r.a.PureComponent{constructor(...e){super(...e),Object(n.a)(this,"getOptions",()=>{const{zUrl:e,zString:t}=this.props;return[{label:t("zi_create_DesignInspector_Tile_Pattern_None"),thumbnailUrl:e("WwwAst","z4/uniquePages/tilingColorful/tiling-none.png"),value:""},{label:t("zi_create_DesignInspector_Tile_Pattern_Centered"),thumbnailUrl:e("WwwAst","z4/uniquePages/tilingColorful/tiling-center-2.png"),value:"classic"},{label:t("zi_create_DesignInspector_Tile_Pattern_Basic"),thumbnailUrl:e("WwwAst","z4/uniquePages/tilingColorful/tiling-basic.png"),value:"basic"},{label:t("zi_create_DesignInspector_Tile_Pattern_HalfBrick"),thumbnailUrl:e("WwwAst","z4/uniquePages/tilingColorful/tiling-halfbrick.png"),value:"halfBrick"},{label:t("zi_create_DesignInspector_Tile_Pattern_HalfDrop"),thumbnailUrl:e("WwwAst","z4/uniquePages/tilingColorful/tiling-halfdrop.png"),value:"halfDrop"},{label:t("zi_create_DesignInspector_Tile_Pattern_Mirror"),thumbnailUrl:e("WwwAst","z4/uniquePages/tilingColorful/tiling-mirror.png"),value:"mirror"}]}),Object(n.a)(this,"makeClickHandler",e=>()=>{this.props.onChange(e)}),Object(n.a)(this,"renderOptions",()=>this.getOptions().map(e=>"classic"!==e.value||this.props.includeClassicTiling?r.a.createElement("button",{"aria-checked":this.props.value===e.value,className:s("&-tileOption",{"&-tileOption--selected":this.props.value===e.value}),key:e.value,onClick:this.makeClickHandler(e.value),role:"radio"},r.a.createElement("img",{className:s("&-tileOptionThumbnail"),src:e.thumbnailUrl}),!this.props.hideLabels&&r.a.createElement("div",{className:s("&-tileOptionLabel")},e.label)):null))}render(){return r.a.createElement("div",{className:s("&",this.props.className),role:"radioGroup"},this.renderOptions())}}},1749:function(e,t,a){"use strict";a.d(t,"a",(function(){return N}));var n=a(15),i=a(146),r=a.n(i),o=a(0),s=a.n(o),l=a(5),c=a(254),u=a(181),d=a(111),h=a(16),p=a(1210),m=a(6),g=a(10),f=a(28),b=a(7),v=a(8),y=a(14),_=a(13),S=a(37),D=a(1332),C=a(89),E=a(30),O=a(151),w=a(1334);a(1908);const j=e=>{const t=Object(v.e)(),a=Object(l.e)(t=>e.makerProfileId?t.entities.profiles[e.makerProfileId]:null),n="0"!==e.merchantSellerId&&a&&a.isVisible?s.a.createElement(h.a,{key:"0",href:a.link,target:"_blank"},s.a.createElement("span",null,a.name?a.name:a.storeHandle)):s.a.createElement(m.a,{key:"0",className:"ValueMessaging-zazzleLogo",iconName:m.a.Icon.LogoLetterform});return s.a.createElement("div",{className:"ValueMessaging"},t("zi_search_SoldBy",{name:n}))};a(1907);const I=Object(g.a)("AboutThisProduct"),N=e=>{let{includeProfileCard:t=!0,realviewLayout:a="horizontal"}=e,i=Object(n.a)(e,["includeProfileCard","realviewLayout"]);const o=Object(f.c)(),g=Object(v.e)(),N=Object(y.f)(),[k,T]=Object(d.b)({buffer:300}),x=Object(l.e)(e=>{const t=i.product||Object(S.d)(e,i.productStateKey);return{blankRealviewId:t.blankRealviewId,isCyo:Object(c.d)(t),isNoCreate:t.isNoCreate,isVizLite:t.isVizLite,makerProfileId:t.makerProfileId,merchantSellerId:t.merchantSellerId,productAttributes:t.attributes,productDescription:t.description,productDescriptionBackstory:t.descriptionBackstory,productDescriptionProp65:t.descriptionProp65,productDescriptionSafety:t.descriptionSafety,productDescriptionTechSpecs:t.descriptionTechSpecs,productDescriptionWarranty:t.descriptionWarranty,productTitle:t.title,productType:t.productType,productTypeName:t.productTypeSingularName,realviews:t.realviews,useSrcSet:o("Boolean","ImageSourceSet","AboutProduct",!1)}},l.c),{isCyo:z,isNoCreate:P,isVizLite:F,makerProfileId:M,merchantSellerId:A,productAttributes:R,productDescription:B,productDescriptionBackstory:L,productDescriptionProp65:U,productDescriptionSafety:K,productDescriptionTechSpecs:G,productDescriptionWarranty:H,productTitle:Z,productType:W,productTypeName:V,useSrcSet:q}=x,$=!F&&!Object(b.a)().isDisneyIframe&&(()=>{const e=x.realviews.find(e=>e.id===x.blankRealviewId);return e?Object(u.d)(e,Object(b.a)().staticRealviewUrlBase,{max_dim:110,design:null}):null})(),X="horizontal"===a;return s.a.createElement("div",{ref:k,className:I("&","row")},s.a.createElement("div",{className:I(i.floatProfileCard?"large-6":"large-12","column")},s.a.createElement(j,{makerProfileId:M,merchantSellerId:A}),s.a.createElement("div",{className:"row"},$&&s.a.createElement("div",{className:I(X?"large-3 push-9":"large-12","column","small-12","&-realviewContainer")},T&&s.a.createElement("div",null,s.a.createElement(C.c,{alt:V,baseSrc:$,useSrcSet:q})),!z&&!P&&!Object(b.a)().isDisneyIframe&&s.a.createElement(h.a,{className:I("&-cyoLink"),href:Object(_.c)("/pd/spp/pt-"+W,r()(R,e=>e.value)),target:"_blank",onClick:e=>{var t;Object(E.h)(O.a.StartFromScratchLinkClick()),null===(t=i.onStartFromScratchClick)||void 0===t||t.call(i,e)}},g("zi_product_Z3_CYOFromScratch")," ",s.a.createElement(m.a,{iconName:m.a.Icon.AttSignedOpen}))),s.a.createElement("div",{className:I($&&X?"large-9 pull-3":"large-12","small-12","column")},s.a.createElement(p.a,{height:F?350:250,hideLessMarkup:i.forceExpanded,isExpanded:i.forceExpanded,onToggleExpanded:()=>{Object(E.h)(O.a.ToggleMoreProductDetails())}},s.a.createElement(w.a,{productAttributes:R,productDescription:B,productDescriptionSafety:K,productDescriptionTechSpecs:G,productDescriptionWarranty:H,productDescriptionBackstory:L,productDescriptionProp65:null,productTitle:Z,isVizLite:F,zString:g,zUrl:N})),U&&s.a.createElement("div",{className:I("&-section","&-prop65",{"&--isMobile":!1,"&--isVizLite":F})},s.a.createElement("div",{className:I("&-header")},g("zi_product_aboutProduct_prop65")),s.a.createElement("div",{className:I("&-warningContent")},s.a.createElement("img",{src:N("WwwAst","z4/zmisc/warning.png"),className:I("&-warningIcon"),alt:g("zi_myzazzle_Warning")}),s.a.createElement("span",{dangerouslySetInnerHTML:{__html:U}})))))),t&&s.a.createElement("div",{className:I(i.floatProfileCard?"large-6":"large-12","column","&-profileCardColumn")},!F&&s.a.createElement(D.a,{productStateKey:i.productStateKey,profileId:M,renderImages:T})))}},1750:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a.n(n),r=a(10),o=a(8);a(1891);const s=Object(r.a)("ChatMessageCharacterCountdown"),l=e=>{const{className:t,limit:a,message:n}=e,r=Object(o.e)(),l=n&&a-n.length;return i.a.createElement("div",{className:s("&",t)},l&&l!==a?r(l>1?"zi_myzazzle_ChatInputFieldCountdownPluralWithNum":"zi_myzazzle_ChatInputFieldCountdownSingularWithNum",{num:l}):r("zi_myzazzle_ChatInputFieldCharacterLimitTextWithNum",{num:a}))}},1770:function(e,t,a){e.exports=a(1902).default},1771:function(e,t,a){e.exports={root:"ChatInfoPanel_root",root__isMobile:"ChatInfoPanel_root__isMobile"}},1775:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(3),i=a(1101),r=a.n(i),o=a(188),s=a.n(o),l=a(196),c=a.n(l),u=a(9),d=a.n(u),h=a(0),p=a.n(h),m=a(428),g=a(601),f=a(92);a(1910);class b extends p.a.PureComponent{constructor(...e){super(...e),Object(n.a)(this,"state",{isLocked:!0}),Object(n.a)(this,"toggleIsLocked",()=>{this.setState({isLocked:!this.state.isLocked})}),Object(n.a)(this,"debouncedChangeHandler",c()((e,t)=>{this.props.onChange(e,t)},500)),Object(n.a)(this,"handleHeightBlur",()=>{this.setState({heightInputIsChanging:!1,tentativeHeight:s()(this.convertFromInches(this.props.height),2).toString()})}),Object(n.a)(this,"handleWidthBlur",()=>{this.setState({widthInputIsChanging:!1,tentativeWidth:s()(this.convertFromInches(this.props.width),2).toString()})}),Object(n.a)(this,"handleWidthChange",e=>{if(this.props.readOnly){const t=parseFloat(e),a=this.convertToInches(this.props.width),n=t>a?1:t<a?-1:0;this.props.onStepChange(n,this.state.isLocked?n:0)}else{this.setState({widthInputIsChanging:!0,tentativeWidth:e});const t=parseFloat(e);if(!r()(t)){const e=this.convertToInches(t);let a=this.props.height;this.state.isLocked&&(a*=e,a/=this.props.width),this.debouncedChangeHandler(e,a)}}}),Object(n.a)(this,"handleHeightChange",e=>{if(this.props.readOnly){const t=parseFloat(e),a=this.convertToInches(this.props.height),n=t>a?1:t<a?-1:0;this.props.onStepChange(this.state.isLocked?n:0,n)}else{this.setState({heightInputIsChanging:!0,tentativeHeight:e});const t=parseFloat(e);if(!r()(t)){const e=this.convertToInches(t);let a=this.props.width;this.state.isLocked&&(a*=e,a/=this.props.height),this.debouncedChangeHandler(a,e)}}})}componentWillUnmount(){this.debouncedChangeHandler.flush()}formatDimension(e){return e+(this.props.readOnly?this.props.displayUnits===m.b.inches?" in":" cm":"")}convertFromInches(e){return this.props.displayUnits===m.b.centimeters?2.54*e:e}convertToInches(e){return this.props.displayUnits===m.b.centimeters?e/2.54:e}UNSAFE_componentWillMount(){this.setState({tentativeWidth:s()(this.convertFromInches(this.props.width),2).toString(),tentativeHeight:s()(this.convertFromInches(this.props.height),2).toString()})}UNSAFE_componentWillReceiveProps(e){const t={};let a=!1;this.props.width===e.width||this.state.widthInputIsChanging||(t.tentativeWidth=s()(this.convertFromInches(e.width),2).toString(),a=!0),this.props.height===e.height||this.state.heightInputIsChanging||(t.tentativeHeight=s()(this.convertFromInches(e.height),2).toString(),a=!0),a&&this.setState(t)}render(){const{areaPhysicalSize:e,readOnly:t,zString:a,zUrl:n}=this.props;let i=this.convertToInches(e);return p.a.createElement("div",{className:d()("TileSizeInput",{"TileSizeInput--isLocked":this.state.isLocked})},a("zi_create_Z3_DesignTool_Width_Short"),p.a.createElement(f.a,{className:"TileSizeInput-textInput",min:0,max:i,onBlur:this.handleWidthBlur,onChange:this.handleWidthChange,precision:2,readOnly:t,step:.05*i,type:"number",value:this.state.tentativeWidth}),p.a.createElement(g.b,{overlay:a("zi_create_DesignInspector_SizeLink")},p.a.createElement("img",{className:"TileSizeInput-lockIcon",src:n("WwwAst","s.gif"),style:{backgroundImage:"url("+n("WwwAst","z3/components/icons/productOptions/ratioLinkSprite.gif")+")"},onClick:this.toggleIsLocked})),a("zi_create_Z3_DesignTool_Height_Short"),p.a.createElement(f.a,{className:"TileSizeInput-textInput",min:0,max:i,onBlur:this.handleHeightBlur,onChange:this.handleHeightChange,precision:2,readOnly:t,step:.05*i,type:"number",value:this.state.tentativeHeight}))}}Object(n.a)(b,"defaultProps",{displayUnits:m.b.inches,readOnly:!0})},1776:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(0),i=a.n(n),r=a(38),o=a.n(r),s=a(143),l=a(34),c=a(165),u=a(6),d=a(44),h=a(10),p=a(7),m=a(8),g=a(14),f=a(13),b=a(19);a(1924);const v=Object(h.a)("LiveJobInfoCard"),y=i.a.memo(({onAccept:e,className:t,customer:a,onDecline:r,isLoading:h,job:y,onImageClick:_,view:S})=>{const D=Object(m.e)(),C=Object(g.f)(),[E,O]=Object(n.useState)(""),[w,j]=Object(n.useState)(""),I={description:"",title:""};let N=!1;const k="CREATED"===S,T="VIEW"===S;switch(S){case"ACCEPTED":I.title=D("zi_live_JobPage_Accepted_Title"),I.description=D("zi_live_JobPage_Accepted_Description1",{customerName:a.name})+"\n\n"+D("zi_live_JobPage_Accepted_Description2",{customerName:a.name}),N=!0;break;case"DECLINED":I.title=D("zi_live_JobPage_Declined_Title"),I.description=D("zi_live_JobPage_Declined_Description");break;case"CANCELED":I.title=D("zi_live_JobPage_Canceled_Title"),I.description=D("zi_live_JobPage_Canceled_Description");break;case"CREATED":I.title=D("zi_live_JobPage_Created_Title"),I.description=y.description,N=!0;break;case"VIEW":I.title=D("zi_live_DesignRequest"),I.description=y.description}return i.a.createElement("div",{className:v("&",{"&--mobile":!1},t)},i.a.createElement("h1",null,I.title),k&&i.a.createElement("h2",{className:v("&-jobType")},y.type.title),a&&i.a.createElement("div",{className:v("&-cardContainer")},a.imageUrl?i.a.createElement("img",{className:v("&-avatar"),src:Object(f.c)(a.imageUrl,{max_dim:160})}):i.a.createElement(u.a,{className:v("&-avatarIcon"),iconName:d.a.Account}),i.a.createElement("div",{className:v("&-card")},i.a.createElement("div",{className:v("&-name")},a.name),a.showLocation&&a.location&&i.a.createElement("div",{className:v("&-location")},i.a.createElement(u.a,{iconName:d.a.Location}),a.location),T&&i.a.createElement("hr",{className:v("&-viewDivider")}),i.a.createElement("div",{className:v("&-description")},I.description),"ACCEPTED"===S&&y.collaboration_id?i.a.createElement("div",{className:v("&-collabLink")},i.a.createElement(l.d,{styleType:l.d.Style.Submit,className:v("&-collabButton"),isLink:!0,href:`${C("WwwPag","collaborations")}/${y.collaboration_id}`},D("zi_create_Collab_CollaboarateNow"))):null,!1,(k||T)&&y.assets&&y.assets.length>0&&i.a.createElement("div",{className:v("&-attachments")},i.a.createElement("div",{className:v("&-attachmentTitle")},D("zi_myzazzle_Messaging_Create_Attachments")),i.a.createElement("div",{className:v("&-imgs")},y.assets.map((e,t)=>{const a=Object(f.c)(Object(p.a)().staticRealviewGetImageBase,{id:e.asset_id,[g.a.RlvMaxDim]:50});return i.a.createElement("button",{key:t,className:v("&-buttonReset"),onClick:()=>{_?_(e.asset_id):O(Object(f.c)(a,{[g.a.RlvMaxDim]:1024}))}},i.a.createElement("img",{src:Object(f.c)(a,{square_it:"fill"})}))}))),N&&i.a.createElement(i.a.Fragment,null,i.a.createElement("hr",{className:v("&-divider")}),i.a.createElement("div",{className:v("&-bottomContent"),style:{justifyContent:k?void 0:"center"}},k?i.a.createElement(i.a.Fragment,null,k&&i.a.createElement("div",{className:v("&-buttons")},i.a.createElement(l.d,{disabled:h,styleType:l.c.Submit,size:l.b.Large,onClick:()=>{j("accept"),e()}},h&&"accept"===w&&i.a.createElement(c.a,{ringColor:"#fd58b1",size:18,spinnerColor:"#d60085"}),D("zi_live_JobPage_Created_AcceptJob")),i.a.createElement(l.d,{disabled:h,styleType:l.c.HighVisibility,size:l.b.Large,onClick:()=>{j("decline"),r()}},h&&"decline"===w&&i.a.createElement(c.a,{ringColor:"#ffb8de",spinnerColor:"#ff1493",size:18}),D("zi_live_JobPage_Created_DeclineJob")))):i.a.createElement("div",{className:v("&-bottomDescription")},i.a.createElement("div",{className:v("&-description")},y.description),y.assets&&y.assets.length>0&&i.a.createElement("div",{className:v("&-attachments")},i.a.createElement("div",{className:v("&-attachmentTitle")},D("zi_myzazzle_Messaging_Create_Attachments")),i.a.createElement("div",{className:v("&-imgs")},y.assets.map((e,t)=>{const a=Object(f.c)(Object(p.a)().staticRealviewGetImageBase,{id:e.asset_id,[g.a.RlvMaxDim]:50});return i.a.createElement("button",{key:t,className:v("&-buttonReset"),onClick:()=>{_?_(e.asset_id):O(Object(f.c)(a,{max_dim:1024}))}},i.a.createElement("img",{src:Object(f.c)(a,{square_it:"fill"})}))}))))))),E&&o.a.createPortal(i.a.createElement(s.a,null,i.a.createElement("div",{className:v("&-overlay"),onClick:()=>O(""),onContextMenu:b.f},i.a.createElement("div",{className:v("&-contents")},i.a.createElement("div",{className:v("&-close"),onClick:()=>O("")},i.a.createElement(u.a,{iconName:u.a.Icon.MultiplyLight})),i.a.createElement("img",{src:E})))),document.body)))})},1786:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=a(244);function r(){var e;const[t,a]=Object(n.useState)(null===(e=i.a.pageInfo)||void 0===e?void 0:e.clientHeight);return Object(n.useEffect)(()=>{const e=e=>{e.clientHeight!==t&&a(e.clientHeight)};return i.a.onPageInfo(e),()=>{i.a.offPageInfo(e)}},[t]),t}},1791:function(e,t,a){"use strict";a.d(t,"a",(function(){return ye}));var n=a(0),i=a.n(n),r=a(5),o=a(18),s=a(10),l=a(8),c=a(14),u=a(1351),d=a(25),h=a(147),p=a(34),m=a(59),g=a(54),f=a(129),b=a(667),v=a(617);a(1899);const y=Object(s.a)("ChatCollabBanner"),_={theme:"create"},S=Object(r.b)((e,t)=>{const a=Object(d.b)(e,t.chatStateKey),n=a&&e.entities.chatConversations[a.roomId],i=n&&n.collabId,r=i&&Object(f.b)(e,i),o=r&&Object(b.a)(e,r.designId);return{collab:r,collabClosed:n&&n.isClosed,design:o,isMinimized:a.messageIds&&a.messageIds.length>0,zString:Object(l.c)(e),zUrl:Object(c.d)(e)}},e=>({}))(e=>{const{collab:t,collabClosed:a,design:r,isMinimized:o,zString:s,zUrl:l}=e;if(!t||!r||a)return null;const c=r?r.imageUrl:l("WwwAst","s.gif"),u=r&&r.title?r.title:s("zi_create_design_untitled"),d=r?new Date(r.dateModified):null,h=t?t.owner:null,f=t?l.collabPag(t.collaborationId):null,[b,S]=Object(n.useState)(!1);return i.a.createElement("div",{className:y("&",{"&--isMobile":!1,"&--minimal":o})},!b&&i.a.createElement("div",{className:y("&-container")},i.a.createElement("div",{className:y("&-image")},i.a.createElement("img",{src:c})),i.a.createElement("div",{className:y("&-description")},i.a.createElement("div",{className:y("&-descriptionFirstRow")},i.a.createElement("div",{className:y("&-firstRowText")},i.a.createElement("div",{className:y("&-title")},u),d&&i.a.createElement("div",{className:y("&-date")},Object(m.b)(d))),!1),h&&i.a.createElement("div",{className:y("&-owner")},i.a.createElement(v.b,{className:y("&-icon"),size:v.a.Small,user:h}),i.a.createElement("span",null,s("zi_create_Collab_StartedBy",{name:h.displayName})))),i.a.createElement(g.a.Provider,{value:_},i.a.createElement("div",{className:y("&-cta")},i.a.createElement(p.d,{isLink:!0,href:f,styleType:p.d.Style.Submit},s(o?"zi_create_Collab_SeeDesign":"zi_create_Collab_CollaboarateNow"))))),!1)});var D=a(40),C=a(35),E=a(1555);const O=Object(r.b)((e,t)=>{var a,n,i;const r=Object(d.b)(e,t.stateKey),o=r&&Object(f.j)(e,r.inboxStateKey),s=null==r?void 0:r.inProgressMessage,c=r&&e.entities.chatConversations[r.roomId],u=null==c?void 0:c.participants,h=null==u?void 0:u.filter(e=>null==e?void 0:e.typing).map(e=>null==e?void 0:e.participant),p=null==u||null===(a=u.find(e=>(null==e?void 0:e.participant.memberId)===(null==o?void 0:o.inboxOwnerId)))||void 0===a?void 0:a.participant,m=null===(n=e.entities.profiles[null==p?void 0:p.memberId])||void 0===n?void 0:n.isSeller,g="chat"===(null==c?void 0:c.type),b=!!r&&!!p&&m&&g&&!(null==r||null===(i=r.messageParams)||void 0===i?void 0:i.hasOlderMessages)&&!(null==r?void 0:r.messageIds.some(t=>{var a;return(null===(a=e.entities.chatMessages[t].sentBy)||void 0===a?void 0:a.memberId)===(null==o?void 0:o.inboxOwnerId)})),v=!!r&&!!p&&g&&!m;return{attachmentIds:null==s?void 0:s.attachmentIds,disableSubmit:!(null==o?void 0:o.hasInitialized),inboxOwner:p,message:null==s?void 0:s.message,showCustomerServicePrompt:b,allowSuggestContactCSMessage:v,showingInfo:"info"===(null==r?void 0:r.activeTab),whoIsTyping:h,zString:Object(l.c)(e)}},(e,t)=>({onShowMediaBrowser:Object(D.b)(C.b.showMediaBrowserDialog,e),onUpdateInProgressMessage:(a,n)=>{e(h.cc(t.stateKey,{message:a,attachmentIds:n})),e(h.Ub(t.stateKey))},sendMessage:a=>{e(h.Sb(t.stateKey,void 0,a))}}))(E.a);var w=a(3),j=a(303),I=a.n(j),N=a(38),k=a.n(N),T=a(143),x=a(16),z=a(520),P=a(384),F=a(6),M=a(7),A=a(19),R=a(13),B=a(217),L=a(1770),U=a.n(L);a(1903);Object(s.a)("ChatMessageContent");const K=e=>{let{messageContent:t}=e;return t=t&&t.trim(),i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(U.a,{options:{nl2br:!0}},t)))};a(1901);const G=i.a.lazy(()=>a.e(436).then(a.bind(null,3564))),H=Object(s.a)("ChatMessage");class Z extends i.a.Component{constructor(...e){super(...e),Object(w.a)(this,"openAttachment",e=>{if(this.props.addGlobalElement){const t=i.a.createElement(G,{attachmentInfo:e,chatStateKey:this.props.chatStateKey,onClose:()=>{this.props.removeGlobalElement(t)}});this.props.addGlobalElement(t,"chatAttachmentOverlay")}}),Object(w.a)(this,"isAllEmojis",Object(A.e)(z.h))}render(){const{room:e,isSelf:t,message:a,messageId:n,nextMessage:r,previousMessage:o,sender:s,zString:l}=this.props,u=o&&o.sentBy&&o.sentBy.memberId,d=null===r,h=e&&("chat"===e.type||e.participants&&e.participants.length<=2);let p=Object(z.e)(a,s&&s.memberId,o,u);const m=Object(z.d)(a,r,s);let g=!1;m?p||(g=!0):s.memberId===u&&Object(z.e)(r,r&&r.sentBy&&r.sentBy.memberId,a,s&&s.memberId)&&(p||(g=!0),p=!0);const f=s&&s.memberId!==u;if(!a)return null;if(a.isHidden)return null;const b=a.sentDate?a.sentDate:null,y=s&&s.displayName,_=this.isAllEmojis(a.contents),S=(()=>{if(e){const t=e.lastSeenIndex;return e.participants.every(e=>e.lastSeenIndex===t)}return!1})(),D=n&&d&&(h&&t||!h)&&S;let C=null;return a.attachmentInfos&&a.attachmentInfos.length>0&&(C=i.a.createElement(i.a.Fragment,null,a.attachmentInfos.map(e=>{const t=e.attachmentId,a=e.height?e.height:0,n=e.width?e.width:0;let r=200,o=200;a>0&&n>0&&(a<=200&&n<=200?(r=a,o=n):a>=n?(r=200,o=Math.round(n/a*200)):(r=Math.round(a/n*200),o=200));const s={height:r,maxWidth:o};return i.a.createElement("span",{className:H("&-attachment"),key:`${t}_${r}_${o}`},i.a.createElement("span",{onClick:()=>{this.openAttachment(e)}},i.a.createElement("img",{style:s,src:Object(R.c)(Object(M.a)().staticRealviewGetImageBase,{id:t,[c.a.RlvMaxDim]:200,[c.a.RlvImageType]:"png"})})))}))),i.a.createElement("div",{className:H("&",{"&--EmptyMessageContainer":void 0===a.contents||""===a.contents.trim(),"&--attachmentOnly":!a.contents&&null!==C,"&--isFirstInStackedMessages":f||g,"&--isOnlyEmojis":_,"&--isStacked":p,"&--notSelf":!t,"&--self":t})},i.a.createElement("div",{className:H("&-chatAvatar",{"&--isLastStackedAvatar":m,"&--isPointOfStackChange":f||g,"&--isStackedAvatar":p})},i.a.createElement(v.b,{className:H("&-icon"),showStatus:!0,size:v.b.Sizes.Medium,user:a.sentBy})),i.a.createElement("div",{className:H("&-message",{"&--isLastStackedMessage":m,"&--isPointOfSelfChangeMessage":f,"&--isStackedMessage":p})},y&&i.a.createElement("span",{className:H("&-senderDisplayName",{"&--isLastStackedDisplayName":m,"&--isPointOfStackChange":f||g,"&--isStackedSenderName":p}),title:y},y),i.a.createElement("div",{className:H("&-content",{"&--EmptyMessage":void 0===a.contents||""===a.contents.trim()})},i.a.createElement(K,{messageContent:a.contents})),C,i.a.createElement("span",null,b&&i.a.createElement("span",{className:H("&-dateSent",{"&--isLastStackedDate":m,"&--isPointOfStackChange":f||g,"&--isStackedDate":p})},Object(z.f)(b)),D&&i.a.createElement(F.a,{className:H("&-readIcon"),iconName:F.a.Icon.CheckStamp,title:l("zi_myzazzle_chatReadIconTitle")}))))}}const W=Object(r.b)((e,t)=>{var a;const n=t.messageId&&e.entities.chatMessages[t.messageId],i=t.previousMessageId?e.entities.chatMessages[t.previousMessageId]:null,r=t.nextMessageId?e.entities.chatMessages[t.nextMessageId]:null,o=Object(d.b)(e,t.chatStateKey),s=Object(f.j)(e,o.inboxStateKey),c=Object(z.g)(o,s),u=n&&c&&n.sentBy&&n.sentBy.memberId===c;return{room:null===(a=e.entities.chatConversations)||void 0===a?void 0:a[o.roomId],isSelf:u,message:n,nextMessage:r,previousMessage:i,sender:n&&n.sentBy,zString:Object(l.c)(e)}},e=>Object(D.b)({addGlobalElement:B.c.addGlobalElement,removeGlobalElement:B.c.removeGlobalElement},e))(Z);var V=a(98),q=a.n(V),$=a(29);a(1904);const X=Object(s.a)("ChatPendingMessage"),Y=Object(r.b)((e,t)=>{const a=Object(d.b)(e,t.chatStateKey),n=a&&a.roomId&&e.entities.chatConversations[a.roomId],i=Object(f.j)(e,a.inboxStateKey),r=Object(z.g)(a,i);return{profile:e.entities.profiles[r],zString:Object(l.c)(e),room:n}},(e,t)=>({retryPendingMessageSend:()=>{e(h.Qb(t.chatStateKey,t.pendingMessage.uid))}}))(e=>{const{chatStateKey:t,pendingMessage:a,profile:n,retryPendingMessageSend:r,zString:o,room:s}=e,l=a.failed,c=a.pending,u=q()(a.message);return u.sentBy||(u.sentBy={memberId:n.memberId,displayName:n.name,profileImageUrl:n.imageUrl}),i.a.createElement("div",{className:X("&",{"&--failed":l,"&--pending":c})},i.a.createElement(Z,{key:a.uid,chatStateKey:t,isSelf:!0,message:u,messageId:null}),l&&i.a.createElement("div",{className:X("&-error")},i.a.createElement(F.a,{iconName:F.a.Icon.WarningStamp}),o("zi_myzazzle_chat_Message_OopsFailedToSend"),s.isClosed?null:c?i.a.createElement("span",{className:X("&-retrying")},o("zi_myzazzle_chat_Message_FailedToSend_Retrying")):i.a.createElement($.a,{className:X("&-retry"),onClick:r},o("zi_myzazzle_chat_Message_FailedToSend_Retry"))))});a(1900);const Q=Object(s.a)("ChatMessageBoard");class J extends i.a.Component{constructor(...e){super(...e),Object(w.a)(this,"state",{isShowingNewMessageIndicator:!1}),Object(w.a)(this,"scrollAtBottom",!0),Object(w.a)(this,"isSwitchingRooms",!1),Object(w.a)(this,"addedPendingMessage",!1),Object(w.a)(this,"locationOfNewMessages",null),Object(w.a)(this,"messageListScrollHeight",0),Object(w.a)(this,"messageListScrollTop",0),Object(w.a)(this,"messageListElement",i.a.createRef()),Object(w.a)(this,"loadingRef",i.a.createRef()),Object(w.a)(this,"observer",void 0),Object(w.a)(this,"loadingIsInView",!1),Object(w.a)(this,"initialLastSeenIndex",void 0),Object(w.a)(this,"setInitialLastSeenIndexAndNewMessageIndicator",e=>{const{room:t}=this.props;this.initialLastSeenIndex=t&&t.lastSeenIndex,this.setState({isShowingNewMessageIndicator:e})}),Object(w.a)(this,"getMessageHistory",I()(()=>{this.props.getMessageHistory()},100)),Object(w.a)(this,"canGetMessages",()=>this.props.chatState&&this.props.chatState.hasJoinedSdkRoom),Object(w.a)(this,"scrollToPreviousPosition",()=>{const e=this.messageListElement.current;k.a.findDOMNode(e).scrollTop=e.scrollHeight-this.messageListScrollHeight+this.messageListScrollTop}),Object(w.a)(this,"scrollToBottom",()=>{const e=this.messageListElement.current,t=e.scrollHeight-e.clientHeight;k.a.findDOMNode(e).scrollTop=t>0?t:0}),Object(w.a)(this,"getNewMessageDivider",e=>{const{chatMessages:t,room:a,zString:n}=this.props,r=a&&a.latestMessageIndex;return this.initialLastSeenIndex!==r&&t[e].messageIndex===this.initialLastSeenIndex&&this.state.isShowingNewMessageIndicator?i.a.createElement("div",{className:Q("&-newMessageDivider")},i.a.createElement("div",{className:Q("&-newMessageLine")}),i.a.createElement("div",{className:Q("&-newMessageText")},n("zi_myzazzle_chatNewMessagesIndicatorText")),i.a.createElement("div",{className:Q("&-newMessageLine")})):null}),Object(w.a)(this,"getRoomClosedIndicator",()=>{const{zString:e,room:t,dispatchOpenInfo:a,zUrl:n,memberId:r}=this.props;let o;if(t&&t.participants)for(const i of t.participants)if(i.participant&&i.participant.memberId!==r){o=i.participant,o&&""===o.displayName&&(o.displayName=e("zi_common_Anonymous"));break}let s=null;return t&&t.collabIsLive?s=i.a.createElement("div",{className:Q("&-closedRoomIndicatorSubText")},e("zi_myzazzle_closedRoomIndicatorSubText_Live")+" ",i.a.createElement(x.a,{href:n("WwwPag","about/ask")},e("zi_myzazzle_closedRoomIndicatorLinkText_Live"))):t&&t.participants&&t.participants.length>2?s=i.a.createElement("div",{className:Q("&-closedRoomIndicatorSubText")},e("zi_myzazzle_closedRoomIndicatorSubText_moreThan2")+" ",i.a.createElement(x.a,{href:"#",onClick:()=>{a()}},e("zi_myzazzle_closedRoomIndicatorLinkText_moreThan2"))):t&&t.participants&&2===t.participants.length?s=i.a.createElement("div",{className:Q("&-closedRoomIndicatorSubText")},e("zi_myzazzle_closedRoomIndicatorSubText_2Participants")+", ",i.a.createElement(x.a,{href:n("WwwPag","chat",{prf:o&&o.memberId})},e("zi_myzazzle_closedRoomIndicatorLinkText_2Participants")+" "+(o&&o.displayName))):t&&t.participants&&1===t.participants.length&&(s=i.a.createElement("div",{className:Q("&-closedRoomIndicatorSubText")},e("zi_myzazzle_closedRoomIndicatorSubText_1Participant")+" ",i.a.createElement(x.a,{href:n("WwwPag","create/designtool"),target:"_blank"},e("zi_myzazzle_closedRoomIndicatorLinkText_1Participant")))),i.a.createElement("div",null,i.a.createElement("div",{className:Q("&-closedRoomIndicator")},i.a.createElement("div",{className:Q("&-closedRoomLine")}),i.a.createElement("div",{className:Q("&-closedRoomText")},e("zi_myzazzle_closedRoomIndicatorText")),i.a.createElement("div",{className:Q("&-closedRoomLine")})),s)}),Object(w.a)(this,"getFooterMessage",()=>{const{zString:e,zUrl:t}=this.props;return i.a.createElement("div",{className:Q("&-footerMessage")},i.a.createElement("div",null,e("zi_myzazzle_ChatMessageFooterMessageLine1")," ",i.a.createElement(x.a,{href:t("WwwPag","my/account/notificationsettings")},e("zi_myzazzle_ChangeEmailPreferences")),i.a.createElement("br",null),e("zi_myzazzle_ChatMessageFooterMessageLine2"),i.a.createElement(x.a,{href:t("External","helpHome"),target:"_blank"},this.props.zString("zi_myzazzle_ChatMessageFooterMessageLinkText"))))})}shouldComponentUpdate(e){const{chatState:t,room:a}=this.props,n=e.chatState;this.isSwitchingRooms=this.props.chatStateKey!==e.chatStateKey,this.addedPendingMessage=!1;const i=t.messageIds||[],r=n.messageIds||[],o=i.length,s=r.length;if(!this.isSwitchingRooms){var l,c,u;const d=(null===(l=t.pendingMessages)||void 0===l?void 0:l.length)||0,h=(null===(c=n.pendingMessages)||void 0===c?void 0:c.length)||0,p=!(null==a?void 0:a.isClosed)&&(null===(u=e.room)||void 0===u?void 0:u.isClosed);if(s===o&&d===h)this.locationOfNewMessages=null;else if(s!==o){const e=i?i[0]:null,t=r?r[0]:null;this.locationOfNewMessages=e!==t?"top":"bottom"}else d<h&&(this.locationOfNewMessages="bottom",this.addedPendingMessage=!0);if(this.locationOfNewMessages||p||t.inProgressMessage!==n.inProgressMessage){const e=this.messageListElement.current,t=e.scrollTop,a=e.scrollHeight-e.clientHeight,n=30;this.scrollAtBottom=a<=0||Math.abs(a-t)<n,this.messageListScrollHeight=e.scrollHeight,this.messageListScrollTop=e.scrollTop}}return!0}componentDidUpdate(e,t){var a,n,i,r,o;const{chatMessages:s,chatConversations:l,chatState:c,dispatchSeenMessage:u,inboxState:d,inboxStatus:h,memberId:p,room:m,selectedRoomId:g}=this.props,f=null==c?void 0:c.messageIds,b=null===(a=e.chatState)||void 0===a?void 0:a.messageIds,v=(null==f?void 0:f.length)>0?f[f.length-1]:null,y=v&&s[v],_=(null==y?void 0:y.sentBy.memberId)===p,S=null==d||null===(n=d.rooms)||void 0===n?void 0:n.roomIds,D=null===(i=e.inboxState)||void 0===i||null===(r=i.rooms)||void 0===r?void 0:r.roomIds,C=(null==f?void 0:f.length)>(null==b?void 0:b.length)&&((null==b?void 0:b.length)>0&&f[(null==f?void 0:f.length)-1]!==b[(null==b?void 0:b.length)-1]||0===(null==b?void 0:b.length))&&g===(null==c?void 0:c.roomId)&&"reading"===h,E=this.state.isShowingNewMessageIndicator&&this.state.isShowingNewMessageIndicator!==t.isShowingNewMessageIndicator,O=(null==c?void 0:c.inProgressMessage)!==(null===(o=e.chatState)||void 0===o?void 0:o.inProgressMessage);let w=!0;if(S&&D&&l!==e.chatConversations&&S.length===D.length)for(const j of S)if(e.chatConversations[j]&&l[j].latestMessageIndex!==e.chatConversations[j].latestMessageIndex&&j!==g){w=!1;break}if(this.isSwitchingRooms||E)this.scrollToBottom();else if(O&&this.scrollAtBottom)this.scrollToBottom();else if(this.locationOfNewMessages){const e="bottom"===this.locationOfNewMessages&&_||"bottom"===this.locationOfNewMessages&&this.addedPendingMessage;this.scrollAtBottom||e?this.scrollToBottom():"top"===this.locationOfNewMessages&&this.scrollToPreviousPosition()}(this.isSwitchingRooms||C)&&(w&&(this.isSwitchingRooms?this.setInitialLastSeenIndexAndNewMessageIndicator(!0):_&&this.setInitialLastSeenIndexAndNewMessageIndicator(!1)),m&&f&&f.length>0&&u(f[f.length-1],c.roomId));(c&&!c.isLoadingMessages&&null==this.props.chatState.messageParams&&this.canGetMessages()||this.loadingIsInView&&c&&!c.isLoadingMessages&&e.chatState&&e.chatState.isLoadingMessages)&&this.getMessageHistory()}componentDidMount(){this.scrollToBottom();const{chatState:e,dispatchSeenMessage:t,room:a}=this.props,n=e&&e.messageIds,i=a&&a.lastSeenIndex,r=a&&a.latestMessageIndex;this.observer=new IntersectionObserver(t=>{this.loadingIsInView=t[0].isIntersecting,!this.loadingIsInView||e&&e.isLoadingMessages||!this.canGetMessages()||this.getMessageHistory()},{}),this.observer.observe(this.loadingRef.current),i!==r?this.setInitialLastSeenIndexAndNewMessageIndicator(!0):this.setInitialLastSeenIndexAndNewMessageIndicator(!1),e&&n&&n.length>0&&t(n[n.length-1],e.roomId)}componentWillUnmount(){this.getMessageHistory.cancel(),this.observer&&this.observer.disconnect()}render(){const{chatState:e,chatStateKey:t,chatMessages:a,memberId:n,room:r}=this.props,o=e&&e.messageIds,s=e&&e.pendingMessages,l={};!e||!e.messageParams||e.messageParams.hasOlderMessages||(l.display="none");const c=this.getFooterMessage();let u=!1,d=0;for(let i=0;o&&i<o.length;i++){var h,p;const e=(null===(h=a[o[i]])||void 0===h||null===(p=h.sentBy)||void 0===p?void 0:p.memberId)===n,t=i<o.length-1?o[i+1]:"",r=o[i]?a[o[i]]:null,s=t?a[t]:null,l=r&&r.sentBy;Object(z.d)(r,s,l)&&e&&d++,u=e}return i.a.createElement(T.b,null,i.a.createElement("div",{className:Q("&",this.props.className,{"&--isMobile":!1}),ref:this.messageListElement},i.a.createElement("div",{className:Q("&-loading"),ref:this.loadingRef,style:l},i.a.createElement(P.b,{hasOwnContainer:!0,isShown:!0,shieldColor:"light",size:"small",useTransition:!0})),o&&o.map((e,a)=>{const n=this.getNewMessageDivider(e),r=i.a.createElement(W,{chatStateKey:t,messageId:e,previousMessageId:a>0?o[a-1]:"",nextMessageId:a<o.length-1?o[a+1]:""});return i.a.createElement("div",{key:e},r,n)}),1!==d||!u||r&&r.isClosed?null:c,s&&s.map(e=>i.a.createElement(Y,{key:e.uid,chatStateKey:t,pendingMessage:e})),r&&r.isClosed&&this.getRoomClosedIndicator()))}}const ee=Object(r.b)((e,t)=>{const a=Object(d.b)(e,t.chatStateKey),n=Object(f.j)(e,a&&a.inboxStateKey),i=a&&a.roomId&&e.entities.chatConversations[a.roomId],r=n&&n.status,o=n&&n.selectedRoomIdOrDraftStateKey,s=e.entities.chatConversations,u=Object(z.g)(a,n);return{chatConversations:s,chatMessages:e.entities.chatMessages,chatState:a,inboxState:n,inboxStatus:r,memberId:u,room:i,selectedRoomId:o,zString:Object(l.c)(e),zUrl:Object(c.d)(e)}},(e,t)=>({getMessageHistory:()=>{e(h.nb(t.chatStateKey))},dispatchSeenMessage:(a,n)=>{e(h.Tb(t.chatStateKey,a,n))},dispatchOpenInfo:()=>{e(h.Yb(t.chatStateKey,"info"))}}))(J);var te=a(30),ae=a(151),ne=a(1353);a(1897);const ie=Object(s.a)("ChatRoomTitleBar"),re=Object(r.b)((e,t)=>{var a;const n=Object(d.b)(e,t.chatStateKey),i=Object(z.k)(e,t),r=n&&e.entities.chatConversations[n.roomId],o=!(!r||!r.latestMessageIndex)&&r.latestMessageIndex>r.lastSeenIndex,s=n&&(null===(a=e.entities.chatMessages[n.messageIds[0]])||void 0===a?void 0:a.culture.slice(0,2)),c=null==n?void 0:n.messageIds,u=r&&r.collabId,h=u&&Object(f.b)(e,u);return{activeTab:null==n?void 0:n.activeTab,chatMembers:i&&i.otherParticipants||[],chatMessages:e.entities.chatMessages,collab:h,firstMessageLang:s,hasUserDismissedLangNotification:n&&n.hasUserDismissedLangNotification,inboxStateKey:n&&n.inboxStateKey||"",isUnread:o,messageIds:c,myselfAsParticipant:i&&i.myself,roomType:r&&r.type,zString:Object(l.c)(e)}},(e,t)=>({closeMobileDialog:(a,n)=>{e("info"===n?h.Yb(t.chatStateKey,"chat"):h.Xb(a,!1))},setHasUserDismissedLangNotification:a=>{e(h.Vb(t.chatStateKey,a))}}))(e=>{const{activeTab:t,chatMembers:a,chatMessages:r,closeMobileDialog:o,collab:s,firstMessageLang:l,hasUserDismissedLangNotification:d,inboxStateKey:h,isUnread:p,messageIds:m,myselfAsParticipant:g,onToggleExpanded:f,roomType:b,setHasUserDismissedLangNotification:v,style:y,zString:_}=e,S=Object(ne.a)(e.chatStateKey),D=!f||f&&e.isExpanded,C="Inbox"===y,E=Object(u.a)(),O=Object(c.f)(),w=s?O.collabPag(s.collaborationId):null,j=Object(M.a)().languageTwoLetter,I=Object(n.useMemo)(()=>{let e=!1;if("collab_chat"!==b&&l&&l!==j&&1===a.length){e=!0;for(const t of m)if(r[t].sentBy.memberId===g.memberId){e=!1;break}}return e},[b,l,a,m,g]),N=!d&&I;let k=0===a.length?i.a.createElement("span",{className:ie("&-memberNames"),key:"memberNames"},g&&g.displayName+" "+_("zi_myzazzle_chat_you")):i.a.createElement("span",{className:ie("&-memberNames"),key:"memberNames"},Object(z.j)(a,_));return"collab_chat"===b&&"Inbox"===y&&a&&0===a.length&&(k=i.a.createElement("div",{className:ie("&-collabNames","&-truncateText")},i.a.createElement("span",{className:ie("&-justYouLabel")},_("zi_myzazzle_chat_JustYou")),i.a.createElement(x.a,{href:w,target:"_blank"},i.a.createElement("span",{className:ie("&-viewDesignLink")},_("zi_myzazzle_Chat_ViewDesign"))))),i.a.createElement("div",{className:ie("&","&--"+y,{"&--expandable":!!f,"&--isMobile":!1,"&--langNotificationOpen":N,"&--unread":!D&&p})},!1,"DesignToolDriver"!==y&&i.a.createElement($.a,{className:ie("&-members"),onClick:f},i.a.createElement("div",{className:ie("&-conversationTitleContainer")},D&&i.a.createElement("div",{className:ie("&-truncateText")},i.a.createElement("span",{className:ie("&-conversationType")},_("collab_chat"===b?"zi_myzazzle_Chat_DesignCollaboration":"zi_myzazzle_Chat_Conversation"))),D&&k&&i.a.createElement("div",{className:ie("&-truncateText")},k))),"DesignToolDriver"===y&&i.a.createElement($.a,{className:ie("&-videoAndChat"),onClick:f},!D&&E.room&&i.a.createElement(F.b,{className:ie("&-videoIcon"),name:"VideoOn"}),_("zi_common_Chat")),C&&D&&"info"!==t&&i.a.createElement("button",{className:ie("&-info","&--makeLink"),onClick:()=>{S("chat"===t?"info":"chat")}},i.a.createElement(F.a,{iconName:F.a.Icon.More,title:_("zi_myzazzle_chat_viewInformation")})),f&&i.a.createElement("button",{className:ie("&-toggle","&--makeLink"),onClick:f},i.a.createElement(F.a,{iconName:D?F.a.Icon.SizeDecrease:F.a.Icon.SizeIncrease})),N&&i.a.createElement("div",{className:ie("&-langNotification")},i.a.createElement("div",{className:ie("&-notificationText")},_("zi_myzazzle_ChatLanguageNotification"),i.a.createElement(x.a,{className:ie("&-helpLink"),href:O("WwwPag","about/ask",{topic:"Other / general inquiry",subtopic:"Other / feedback"}),target:"_blank",onClick:()=>Object(te.h)(ae.a.ClickChatLanguageNotificationHelp())},_("zi_myzazzle_MessageDialog_ZazzleCustomerCare"))),i.a.createElement(F.a,{iconName:F.a.Icon.CloseStroke,onClick:()=>v(!0)})))});var oe=a(1395);a(1898);const se=Object(s.a)("ChatRoomTitleBarTabs"),le=e=>{const{onSelectTab:t}=e,a=Object(u.a)(),r=Object(l.e)(),{activeTab:o,hasUnreadChatMessages:s}=ce(e),c=Object(n.useMemo)(()=>{const e=[];return a.room&&e.push({display:r("zi_create_Collab_Video_Video"),value:"video"}),e.push({display:i.a.createElement("div",{className:se("&-unreadWrapper")},r("zi_common_Chat"),s&&i.a.createElement("div",{className:se("&-unreadMessages")})),value:"chat"},{display:r("zi_store_Maker_Profile_Info"),value:"info"}),e},[s,a.room]),d=Object(n.useMemo)(()=>c.find(e=>e.value===o)?o:"chat",[o,c]);return i.a.createElement("div",{className:se("&")},i.a.createElement(oe.a,{activeTab:d,className:se("&-chatFilter"),onSelectTab:t,tabs:c,underlineTabBarClassName:se("&-noBottomBorder")}))},ce=e=>Object(r.e)(t=>{const a=Object(d.b)(t,e.chatStateKey),n=a&&t.entities.chatConversations[a.roomId];return{activeTab:null==a?void 0:a.activeTab,hasUnreadChatMessages:n&&n.latestMessageIndex&&n.latestMessageIndex>n.lastSeenIndex}},R.q);var ue=a(1545);const de=Object(r.b)((e,t)=>({zString:Object(l.c)(e)}),(e,t)=>({onAddImages:a=>{e(h.dc(t.stateKey,a))}}))(ue.a);var he=a(1548),pe=a(1556),me=a.n(pe);const ge=()=>{const e=Object(l.e)(),t=Object(c.f)(),[a,r]=Object(n.useState)(!0);return i.a.createElement(i.a.Fragment,null,a&&i.a.createElement("div",{className:me.a.root},i.a.createElement("div",{className:me.a.title},e("zi_myzazzle_chat_DesignersAreResponsible_Title")),i.a.createElement("div",null,e("zi_myzazzle_chat_DesignersAreResponsible2",{contactCS:i.a.createElement(x.a,{key:"aboutask",href:t("WwwPag","/about/ask")},e("zi_myzazzle_chat_DesignersAreResponsible_contactCS"))})),i.a.createElement($.a,{className:me.a.dismissButton,onClick:()=>{r(!1)}},e("zi_myzazzle_chat_Dismiss"))))};a(1896);const fe=i.a.lazy(()=>a.e(375).then(a.bind(null,3607))),be=Object(s.a)("ChatRoom"),ve=Object(n.memo)(e=>{const{activeTab:t,chatStateKey:a,focusInputOnMount:r,isRoomClosed:s,onToggleExpanded:l,roomType:c,style:d}=e,h=!l||e.isExpanded,p="Inbox"===d&&"collab_chat"===c,m=Object(u.a)();Object(n.useEffect)(()=>{m.room||"video"!==t||e.dispatchSetTab("chat")},[t,m.room]);const[g,f]=Object(n.useState)(),[b,v]=Object(n.useState)(!1);return i.a.createElement("div",{className:be("&","&--"+d,{"&--expanded":h,"&--collapsed":!h})},i.a.createElement("div",{className:be("&-headContent")},("Inbox"===d||"DesignToolDriver"===d)&&i.a.createElement(re,{chatStateKey:a,isExpanded:h,onToggleExpanded:l,style:d}),h&&("DesignToolDriver"===d||"DesignToolWatcher"===d)&&i.a.createElement(le,{chatStateKey:a,onSelectTab:t=>{e.dispatchSetTab(t)}})),h&&i.a.createElement("div",{className:be("&-roomContent")},("Inbox"===d||"chat"===t)&&i.a.createElement("div",{className:be("&-chatRoom"),onDragEnter:g},p&&i.a.createElement(S,{chatStateKey:a}),i.a.createElement(ee,{chatStateKey:a,className:be("&-scrollableContent")}),b&&i.a.createElement(ge,null),!s&&i.a.createElement(O,{focusInputOnMount:r,onMatchCSContactKeywords:()=>{v(!0)},stateKey:a,style:d}),!s&&i.a.createElement(de,{stateKey:a,onSetDragEnterEventHandler:f,uploaderId:"ChatRoomFileInput"})),"info"===t&&"Inbox"!==d&&i.a.createElement(he.a,{chatStateKey:a,style:d}),"video"===t&&i.a.createElement(o.a,null,i.a.createElement(n.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(fe,null)))))}),ye=Object(r.b)((e,t)=>{const a=Object(d.b)(e,t.chatStateKey),n=a&&a.roomId&&e.entities.chatConversations[a.roomId],i=n&&n.type;return{activeTab:null==a?void 0:a.activeTab,isRoomClosed:n&&n.isClosed,roomType:i,zString:Object(l.c)(e),zUrl:Object(c.d)(e)}},(e,t)=>({dispatchSetTab:a=>e(Object(h.Yb)(t.chatStateKey,a))}))(ve)},180:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),i=a(13);function r(e){const t=Object(n.useRef)(),a=t.current;return Object(i.q)(a,e)||(t.current=e),t.current}},183:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(196),i=a.n(n),r=a(0);function o(e,t,a={},n=!1){const o=Object(r.useRef)(e);o.current=e;const s=Object(r.useMemo)(()=>"function"==typeof o.current?i()((...e)=>{var t;return null===(t=o.current)||void 0===t?void 0:t.apply(null,e)},t,a):void 0,[!!o.current,t,a.leading,a.maxWait,a.trailing]);return Object(r.useEffect)(()=>{if(s)return()=>{n?s.flush():s.cancel()}},[s,n]),s}},1879:function(e,t,a){},1880:function(e,t,a){},1881:function(e,t,a){},1884:function(e,t,a){},1888:function(e,t,a){},1889:function(e,t,a){},1890:function(e,t,a){},1891:function(e,t,a){},1892:function(e,t,a){},1893:function(e,t,a){},1894:function(e,t,a){},1895:function(e,t,a){},1896:function(e,t,a){},1897:function(e,t,a){},1898:function(e,t,a){},1899:function(e,t,a){},1900:function(e,t,a){},1901:function(e,t,a){},1902:function(e,t,a){"use strict";t.__esModule=!0;var n,i=a(0),r=(n=i)&&n.__esModule?n:{default:n},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(1751));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=o.options,u=c.Options;function d(e,t){for(var a=o.tokenize(e),n=[],i=0,s=0;s<a.length;s++){var l=a[s];if("nl"===l.type&&t.nl2br)n.push(r.default.createElement("br",{key:"linkified-"+ ++i}));else if(l.isLink&&t.check(l)){var c=t.resolve(l),u=c.formatted,d=c.formattedHref,h=c.tagName,p=c.className,m=c.target,g=c.attributes,f={key:"linkified-"+ ++i,href:d};if(p&&(f.className=p),m&&(f.target=m),g)for(var b in g)f[b]=g[b];n.push(r.default.createElement(h,f,u))}else n.push(l.toString())}return n}var h=function(e){function t(){return s(this,t),l(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e={key:"linkified-element-0"};for(var t in this.props)"options"!==t&&"tagName"!==t&&(e[t]=this.props[t]);var a=new u(this.props.options),n=this.props.tagName||"span";return function e(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===r.default.Children.count(t.props.children))return t;var i=[];r.default.Children.forEach(t.props.children,(function(t){"string"==typeof t?(n+=1,i.push.apply(i,d(t,a))):r.default.isValidElement(t)?"string"==typeof t.type&&c.contains(a.ignoreTags,t.type.toUpperCase())?i.push(t):i.push(e(t,a,++n)):i.push(t)}));var o={key:"linkified-element-"+n};for(var s in t.props)o[s]=t.props[s];return r.default.cloneElement(t,o,i)}(r.default.createElement(n,e),a,0)},t}(r.default.Component);t.default=h},1903:function(e,t,a){},1904:function(e,t,a){},1907:function(e,t,a){},1908:function(e,t,a){},1910:function(e,t,a){},1924:function(e,t,a){},206:function(e,t,a){var n=a(553),i=a(496),r=a(238),o=Math.min;e.exports=function(e,t){if((e=r(e))<1||e>9007199254740991)return[];var a=4294967295,s=o(e,4294967295);t=i(t),e-=4294967295;for(var l=n(s,t);++a<e;)t(a);return l}},231:function(e,t,a){"use strict";a.d(t,"b",(function(){return _}));var n=a(61),i=a.n(n),r=a(152),o=a.n(r),s=a(0),l=a.n(s),c=a(309),u=a(10),d=a(102),h=a(54),p=a(8),m=a(241),g=a(6);a(489);const f=()=>{},b=Object(u.a)("LinearPaginator"),v={arrowOnly:0,circle:0,square:0},y=({arrowButtonType:e,arrowPosition:t,arrowSize:a,arrowStyleNext:n,arrowStylePrev:r,arrowVisibility:u,children:f,className:y,disableNext:_,disablePrev:S,enableSwiping:D,height:C,hideScrollBarWhenUsingNativeControls:E,onScrollNext:O,onScrollPrev:w,orientation:j,rootRef:I,scrollPxOrPercent:N,scrollerTabIndex:k,useNativeControls:T})=>{const x=Object(s.useContext)(h.a),z=Object(p.e)(),[P,F]=Object(s.useState)(!1),[M,A]=Object(s.useState)(null),R=Object(s.useRef)(!1),B=Object(s.useRef)(null),L=Object(s.useRef)(null);Object(s.useEffect)(()=>{D&&!T&&(R.current=!0)},[D,T]),Object(s.useEffect)(()=>{["insideContainerPressContent","insideContainerSqueezeContent"].includes(t)&&F(!0)},[t,a,u,_,S]),Object(d.a)(()=>{["insideContainerPressContent","insideContainerSqueezeContent"].includes(t)&&F(!0)},100,"debounce");const U="horizontal"===j,K=e=>{const t=U?o.a.DIRECTION_RIGHT:o.a.DIRECTION_DOWN,a=U?o.a.DIRECTION_LEFT:o.a.DIRECTION_UP,n=!S&&e.direction===t,i=!_&&e.direction===a;n?w():i&&O()},G=b(y,"&",`&--${x&&x.theme}Theme`,"&--buttonType-"+e,"&--orientation-"+j,"&--position-"+t,"&--size-"+a,"&--visibility-"+u,{"&--native":T}),H=t=>{var a;const n=null==t||null===(a=t.getBoundingClientRect())||void 0===a?void 0:a.width;return n?n+v[e]:0};Object(s.useEffect)(()=>{if(!P)return;const e=H(L.current),a=H(B.current),n=["hide","showOnHoverIfEnabled","showIfEnabled"].includes(u),i=S&&!_&&n,r=_&&!S&&n;"insideContainerPressContent"===t?A({bottom:"vertical"===j&&r&&e/-2,left:"horizontal"===j&&i&&a/-2,right:"horizontal"===j&&r&&e/-2,top:"vertical"===j&&i&&a/-2,height:"vertical"===j&&`calc(100% - ${e+a}px)`,width:"horizontal"===j&&`calc(100% - ${e+a}px)`}):"insideContainerSqueezeContent"===t&&A({height:"vertical"===j&&`calc(100% - ${2*Math.max(e,a)}px)`,width:"horizontal"===j&&`calc(100% - ${2*Math.max(e,a)}px)`}),F(!1)},[P]);let Z={};if(!T){let e=N;i()(e)&&(e+="px");const t=(U?"translateX":"translateY")+`(-${e})`;Z={msTransform:t,OTransform:t,WebkitTransform:t,transform:t}}let W=l.a.createElement("div",{className:b("&-contentWrapper"),style:{height:C}},l.a.createElement("div",{className:b("&-content"),style:Z},f));if(D&&!T||R.current){const e=D?U?"DIRECTION_HORIZONTAL":"DIRECTION_ALL":"DIRECTION_NONE";W=l.a.createElement(c.a,{onSwipe:D?K:null,direction:e},W)}let V=l.a.createElement("div",{className:b("&-wrapper")},l.a.createElement("button",{"aria-label":z("zi_common_Previous"),className:b("&-arrow","&-prevArrow"),disabled:S,onClick:w,ref:L,style:r,tabIndex:-1},l.a.createElement(g.a,{iconName:g.a.Icon.Less,title:z("zi_common_Previous")})),W,l.a.createElement("button",{"aria-label":z("zi_common_Next"),className:b("&-arrow","&-nextArrow"),disabled:_,onClick:O,ref:B,style:n,tabIndex:-1},l.a.createElement(g.a,{iconName:g.a.Icon.Greater,title:z("zi_common_Next")})));return T&&E&&(V=l.a.createElement(m.a,{direction:U?"horizontal":"vertical",scrollerTabIndex:k},V)),l.a.createElement("div",{className:G,ref:I,style:M},V)},_={arrowButtonType:"circle",arrowPosition:"insideContainerSqueezeContent",arrowSize:"large",arrowVisibility:"showIfEnabled",disableNext:!1,disablePrev:!1,enableSwiping:!1,hideScrollBarWhenUsingNativeControls:!1,onScrollNext:f,onScrollPrev:f,orientation:"horizontal",scrollPxOrPercent:0,useNativeControls:!1};y.defaultProps=_,t.a=y},2342:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2347),i=a(2345);t.Factory={addGetterSetter:function(e,t,a,n,i){this.addGetter(e,t,a),this.addSetter(e,t,n,i),this.addOverloadedGetterSetter(e,t)},addGetter:function(e,t,a){var i="get"+n.Util._capitalize(t);e.prototype[i]=e.prototype[i]||function(){var e=this.attrs[t];return void 0===e?a:e}},addSetter:function(e,a,i,r){var o="set"+n.Util._capitalize(a);e.prototype[o]||t.Factory.overWriteSetter(e,a,i,r)},overWriteSetter:function(e,t,a,i){var r="set"+n.Util._capitalize(t);e.prototype[r]=function(e){return a&&null!=e&&(e=a.call(this,e,t)),this._setAttr(t,e),i&&i.call(this),this}},addComponentsGetterSetter:function(e,t,a,r,o){var s,l,c=a.length,u=n.Util._capitalize,d="get"+u(t),h="set"+u(t);e.prototype[d]=function(){var e={};for(s=0;s<c;s++)e[l=a[s]]=this.getAttr(t+u(l));return e};var p=i.getComponentValidator(a);e.prototype[h]=function(e){var a,n=this.attrs[t];for(a in r&&(e=r.call(this,e)),p&&p.call(this,e,t),e)e.hasOwnProperty(a)&&this._setAttr(t+u(a),e[a]);return this._fireChangeEvent(t,n,e),o&&o.call(this),this},this.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter:function(e,t){var a=n.Util._capitalize(t),i="set"+a,r="get"+a;e.prototype[t]=function(){return arguments.length?(this[i](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter:function(e,t,a,i){n.Util.error("Adding deprecated "+t);var r="get"+n.Util._capitalize(t),o=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[r]=function(){n.Util.error(o);var e=this.attrs[t];return void 0===e?a:e},this.addSetter(e,t,i,(function(){n.Util.error(o)})),this.addOverloadedGetterSetter(e,t)},backCompat:function(e,t){n.Util.each(t,(function(t,a){var i=e.prototype[a],r="get"+n.Util._capitalize(t),o="set"+n.Util._capitalize(t);function s(){i.apply(this,arguments),n.Util.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+a+'" instead.')}e.prototype[t]=s,e.prototype[r]=s,e.prototype[o]=s}))},afterSetFilter:function(){this._filterUpToDate=!1}}},2344:function(e,t,a){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=Math.PI/180;var n=function(e){var t=e.indexOf("msie ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("trident/")>0){var a=e.indexOf("rv:");return parseInt(e.substring(a+3,e.indexOf(".",a)),10)}var n=e.indexOf("edge/");return n>0&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)};t._parseUA=function(e){var t=e.toLowerCase(),a=/(chrome)[ /]([\w.]+)/.exec(t)||/(webkit)[ /]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],i=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),r=!!e.match(/IEMobile/i);return{browser:a[1]||"",version:a[2]||"0",isIE:n(t),mobile:i,ieMobile:r}},t.glob=void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},t.Konva={_global:t.glob,version:"3.4.1",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:function(e){return t.Konva.angleDeg?e*a:e},enableTrace:!1,_pointerEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return t.Konva.DD.isDragging},isDragReady:function(){return!!t.Konva.DD.node},UA:t._parseUA(t.glob.navigator&&t.glob.navigator.userAgent||""),document:t.glob.document,_injectGlobal:function(e){t.glob.Konva=e},_parseUA:t._parseUA},t._NODES_REGISTRY={},t._registerNode=function(e){t._NODES_REGISTRY[e.prototype.getClassName()]=e,t.Konva[e.prototype.getClassName()]=e}}).call(this,a(211))},2345:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2344),i=a(2347);function r(e){return i.Util._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||i.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}t.RGBComponent=function(e){return e>255?255:e<0?0:Math.round(e)},t.alphaComponent=function(e){return e>1?1:e<1e-4?1e-4:e},t.getNumberValidator=function(){if(n.Konva.isUnminified)return function(e,t){return i.Util._isNumber(e)||i.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}},t.getNumberOrAutoValidator=function(){if(n.Konva.isUnminified)return function(e,t){return i.Util._isNumber(e)||"auto"===e||i.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}},t.getStringValidator=function(){if(n.Konva.isUnminified)return function(e,t){return i.Util._isString(e)||i.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}},t.getFunctionValidator=function(){if(n.Konva.isUnminified)return function(e,t){return i.Util._isFunction(e)||i.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}},t.getNumberArrayValidator=function(){if(n.Konva.isUnminified)return function(e,t){return i.Util._isArray(e)?e.forEach((function(e){i.Util._isNumber(e)||i.Util.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")})):i.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.'),e}},t.getBooleanValidator=function(){if(n.Konva.isUnminified)return function(e,t){return!0===e||!1===e||i.Util.warn(r(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}},t.getComponentValidator=function(e){if(n.Konva.isUnminified)return function(t,a){return i.Util.isObject(t)||i.Util.warn(r(t)+' is a not valid value for "'+a+'" attribute. The value should be an object with properties '+e),t}}},2347:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2344),i=function(){function e(){}return e.toCollection=function(t){var a,n=new e,i=t.length;for(a=0;a<i;a++)n.push(t[a]);return n},e._mapMethod=function(t){e.prototype[t]=function(){var e,a=this.length,n=[].slice.call(arguments);for(e=0;e<a;e++)this[e][t].apply(this[e],n);return this}},e.mapMethods=function(t){var a=t.prototype;for(var n in a)e._mapMethod(n)},e}();t.Collection=i,i.prototype=[],i.prototype.each=function(e){for(var t=0;t<this.length;t++)e(this[t],t)},i.prototype.toArray=function(){var e,t=[],a=this.length;for(e=0;e<a;e++)t.push(this[e]);return t};var r=function(){function e(e){void 0===e&&(e=[1,0,0,1,0,0]),this.m=e&&e.slice()||[1,0,0,1,0,0]}return e.prototype.copy=function(){return new e(this.m)},e.prototype.point=function(e){var t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}},e.prototype.translate=function(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this},e.prototype.scale=function(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),a=Math.sin(e),n=this.m[0]*t+this.m[2]*a,i=this.m[1]*t+this.m[3]*a,r=this.m[0]*-a+this.m[2]*t,o=this.m[1]*-a+this.m[3]*t;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=o,this},e.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},e.prototype.skew=function(e,t){var a=this.m[0]+this.m[2]*t,n=this.m[1]+this.m[3]*t,i=this.m[2]+this.m[0]*e,r=this.m[3]+this.m[1]*e;return this.m[0]=a,this.m[1]=n,this.m[2]=i,this.m[3]=r,this},e.prototype.multiply=function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],a=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],i=this.m[1]*e.m[2]+this.m[3]*e.m[3],r=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=a,this.m[2]=n,this.m[3]=i,this.m[4]=r,this.m[5]=o,this},e.prototype.invert=function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,a=-this.m[1]*e,n=-this.m[2]*e,i=this.m[0]*e,r=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=a,this.m[2]=n,this.m[3]=i,this.m[4]=r,this.m[5]=o,this},e.prototype.getMatrix=function(){return this.m},e.prototype.setAbsolutePosition=function(e,t){var a=this.m[0],n=this.m[1],i=this.m[2],r=this.m[3],o=this.m[4],s=(a*(t-this.m[5])-n*(e-o))/(a*r-n*i),l=(e-o-i*s)/a;return this.translate(l,s)},e}();t.Transform=r;var o=Math.PI/180,s=180/Math.PI,l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},c=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,u=[];t.Util={_isElement:function(e){return!(!e||1!=e.nodeType)},_isFunction:function(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject:function(e){return!!e&&e.constructor===Object},_isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},_isNumber:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e)},_isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},_isBoolean:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},isObject:function(e){return e instanceof Object},isValidSelector:function(e){if("string"!=typeof e)return!1;var t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:function(e){return 0===e?0:e>0?1:-1},requestAnimFrame:function(e){u.push(e),1===u.length&&requestAnimationFrame((function(){var e=u;u=[],e.forEach((function(e){e()}))}))},createCanvasElement:function(){var e=document.createElement("canvas");try{e.style=e.style||{}}catch(t){}return e},createImageElement:function(){return document.createElement("img")},_isInDocument:function(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_simplifyArray:function(e){var a,n,i=[],r=e.length,o=t.Util;for(a=0;a<r;a++)n=e[a],o._isNumber(n)?n=Math.round(1e3*n)/1e3:o._isString(n)||(n=n.toString()),i.push(n);return i},_urlToImage:function(e,t){var a=new n.glob.Image;a.onload=function(){t(a)},a.src=e},_rgbToHex:function(e,t,a){return((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1)},_hexToRgb:function(e){e=e.replace("#","");var t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor:function(){for(var e=(16777215*Math.random()<<0).toString(16);e.length<6;)e="0"+e;return"#"+e},get:function(e,t){return void 0===e?t:e},getRGB:function(e){var t;return e in l?{r:(t=l[e])[0],g:t[1],b:t[2]}:"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=c.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(e){return e=e||"black",t.Util._namedColorToRBA(e)||t.Util._hex3ColorToRGBA(e)||t.Util._hex6ColorToRGBA(e)||t.Util._rgbColorToRGBA(e)||t.Util._rgbaColorToRGBA(e)},_namedColorToRBA:function(e){var t=l[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA:function(e){if(0===e.indexOf("rgb(")){var t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA:function(e){if(0===e.indexOf("rgba(")){var t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex6ColorToRGBA:function(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},haveIntersection:function(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject:function(e){var t={};for(var a in e)this._isPlainObject(e[a])?t[a]=this.cloneObject(e[a]):this._isArray(e[a])?t[a]=this.cloneArray(e[a]):t[a]=e[a];return t},cloneArray:function(e){return e.slice(0)},_degToRad:function(e){return e*o},_radToDeg:function(e){return e*s},_capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw:function(e){throw new Error("Konva error: "+e)},error:function(e){console.error("Konva error: "+e)},warn:function(e){n.Konva.showWarnings&&console.warn("Konva warning: "+e)},extend:function(e,t){function a(){this.constructor=e}a.prototype=t.prototype;var n=e.prototype;for(var i in e.prototype=new a,n)n.hasOwnProperty(i)&&(e.prototype[i]=n[i]);e.__super__=t.prototype,e.super=t},_getControlPoints:function(e,t,a,n,i,r,o){var s=Math.sqrt(Math.pow(a-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(i-a,2)+Math.pow(r-n,2)),c=o*s/(s+l),u=o*l/(s+l);return[a-c*(i-e),n-c*(r-t),a+u*(i-e),n+u*(r-t)]},_expandPoints:function(e,a){var n,i,r=e.length,o=[];for(n=2;n<r-2;n+=2)i=t.Util._getControlPoints(e[n-2],e[n-1],e[n],e[n+1],e[n+2],e[n+3],a),o.push(i[0]),o.push(i[1]),o.push(e[n]),o.push(e[n+1]),o.push(i[2]),o.push(i[3]);return o},each:function(e,t){for(var a in e)t(a,e[a])},_inRange:function(e,t,a){return t<=e&&e<a},_getProjectionToSegment:function(e,t,a,n,i,r){var o,s,l,c=(e-a)*(e-a)+(t-n)*(t-n);if(0==c)o=e,s=t,l=(i-a)*(i-a)+(r-n)*(r-n);else{var u=((i-e)*(a-e)+(r-t)*(n-t))/c;u<0?(o=e,s=t,l=(e-i)*(e-i)+(t-r)*(t-r)):u>1?(o=a,s=n,l=(a-i)*(a-i)+(n-r)*(n-r)):l=((o=e+u*(a-e))-i)*(o-i)+((s=t+u*(n-t))-r)*(s-r)}return[o,s,l]},_getProjectionToLine:function(e,a,n){var i=t.Util.cloneObject(e),r=Number.MAX_VALUE;return a.forEach((function(o,s){if(n||s!==a.length-1){var l=a[(s+1)%a.length],c=t.Util._getProjectionToSegment(o.x,o.y,l.x,l.y,e.x,e.y),u=c[0],d=c[1],h=c[2];h<r&&(i.x=u,i.y=d,r=h)}})),i},_prepareArrayForTween:function(e,a,n){var i,r=[],o=[];if(e.length>a.length){var s=a;a=e,e=s}for(i=0;i<e.length;i+=2)r.push({x:e[i],y:e[i+1]});for(i=0;i<a.length;i+=2)o.push({x:a[i],y:a[i+1]});var l=[];return o.forEach((function(e){var a=t.Util._getProjectionToLine(e,r,n);l.push(a.x),l.push(a.y)})),l},_prepareToStringify:function(e){var a;for(var n in e.visitedByCircularReferenceRemoval=!0,e)if(e.hasOwnProperty(n)&&e[n]&&"object"==typeof e[n])if(a=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||t.Util._isElement(e[n])){if(!a.configurable)return null;delete e[n]}else if(null===t.Util._prepareToStringify(e[n])){if(!a.configurable)return null;delete e[n]}return delete e.visitedByCircularReferenceRemoval,e},_assign:function(e,t){for(var a in t)e[a]=t[a];return e}}},2358:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2347),i=a(2342),r=a(2415),o=a(2344),s=a(2430),l=a(2345);t.ids={},t.names={};t._removeId=function(e,a){e&&t.ids[e]===a&&delete t.ids[e]},t._addName=function(e,a){a&&(t.names[a]||(t.names[a]=[]),t.names[a].push(e))},t._removeName=function(e,a){if(e){var n=t.names[e];if(n){for(var i=0;i<n.length;i++){n[i]._id===a&&n.splice(i,1)}0===n.length&&delete t.names[e]}}};var c=["id"],u=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" "),d=["scaleXChange.konva","scaleYChange.konva"].join(" "),h=new n.Collection,p=1,m=function(){function e(e){var t=this;this._id=p++,this.eventListeners={},this.attrs={},this.index=0,this.parent=null,this._cache=new Map,this._lastPos=null,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=h,this.setAttrs(e),this.on(u,(function(){t._clearCache("transform"),t._clearSelfAndDescendantCache("absoluteTransform")})),this.on(d,(function(){t._clearSelfAndDescendantCache("absoluteScale")})),this.on("visibleChange.konva",(function(){t._clearSelfAndDescendantCache("visible")})),this.on("listeningChange.konva",(function(){t._clearSelfAndDescendantCache("listening")})),this.on("opacityChange.konva",(function(){t._clearSelfAndDescendantCache("absoluteOpacity")}))}return e.prototype.hasChildren=function(){return!1},e.prototype.getChildren=function(){return h},e.prototype._clearCache=function(e){e?this._cache.delete(e):this._cache.clear()},e.prototype._getCache=function(e,t){var a=this._cache.get(e);return void 0===a&&(a=t.call(this),this._cache.set(e,a)),a},e.prototype._getCanvasCache=function(){return this._cache.get("canvas")},e.prototype._clearSelfAndDescendantCache=function(e){this._clearCache(e),this._getCanvasCache()||this.children&&this.children.each((function(t){t._clearSelfAndDescendantCache(e)}))},e.prototype.clearCache=function(){return this._cache.delete("canvas"),this._clearSelfAndDescendantCache(),this},e.prototype.cache=function(e){var t=e||{},a={};void 0!==t.x&&void 0!==t.y&&void 0!==t.width&&void 0!==t.height||(a=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=t.width||a.width,o=t.height||a.height,s=t.pixelRatio,l=void 0===t.x?a.x:t.x,c=void 0===t.y?a.y:t.y,u=t.offset||0,d=t.drawBorder||!1;if(i&&o){i+=2*u,o+=2*u,l-=u,c-=u;var h=new r.SceneCanvas({pixelRatio:s,width:i,height:o}),p=new r.SceneCanvas({pixelRatio:s,width:i,height:o}),m=new r.HitCanvas({pixelRatio:1,width:i,height:o}),g=h.getContext(),f=m.getContext();return m.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(h.getContext()._context.imageSmoothingEnabled=!1,p.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),g.save(),f.save(),g.translate(-l,-c),f.translate(-l,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache("absoluteOpacity"),this._clearSelfAndDescendantCache("absoluteScale"),this.drawScene(h,this,!0),this.drawHit(m,this,!0),this._isUnderCache=!1,g.restore(),f.restore(),d&&(g.save(),g.beginPath(),g.rect(0,0,i,o),g.closePath(),g.setAttr("strokeStyle","red"),g.setAttr("lineWidth",5),g.stroke(),g.restore()),this._cache.set("canvas",{scene:h,filter:p,hit:m,x:l,y:c}),this}n.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")},e.prototype.getClientRect=function(e){throw new Error('abstract "getClientRect" method call')},e.prototype._transformedRect=function(e,t){var a,n,i,r,o=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=this.getAbsoluteTransform(t);return o.forEach((function(e){var t=s.point(e);void 0===a&&(a=i=t.x,n=r=t.y),a=Math.min(a,t.x),n=Math.min(n,t.y),i=Math.max(i,t.x),r=Math.max(r,t.y)})),{x:a,y:n,width:i-a,height:r-n}},e.prototype._drawCachedSceneCanvas=function(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);var t=this._getCanvasCache();e.translate(t.x,t.y);var a=this._getCachedSceneCanvas(),n=a.pixelRatio;e.drawImage(a._canvas,0,0,a.width/n,a.height/n),e.restore()},e.prototype._drawCachedHitCanvas=function(e){var t=this._getCanvasCache(),a=t.hit;e.save(),e._applyGlobalCompositeOperation(this),e.translate(t.x,t.y),e.drawImage(a._canvas,0,0),e.restore()},e.prototype._getCachedSceneCanvas=function(){var e,t,a,i,r=this.filters(),o=this._getCanvasCache(),s=o.scene,l=o.filter,c=l.getContext();if(r){if(!this._filterUpToDate){var u=s.pixelRatio;try{for(e=r.length,c.clear(),c.drawImage(s._canvas,0,0,s.getWidth()/u,s.getHeight()/u),t=c.getImageData(0,0,l.getWidth(),l.getHeight()),a=0;a<e;a++)"function"==typeof(i=r[a])?(i.call(this,t),c.putImageData(t,0,0)):n.Util.error("Filter should be type of function, but got "+typeof i+" insted. Please check correct filters")}catch(d){n.Util.error("Unable to apply filter. "+d.message)}this._filterUpToDate=!0}return l}return s},e.prototype.on=function(e,t){if(3===arguments.length)return this._delegate.apply(this,arguments);var a,n,i,r,o=e.split(" "),s=o.length;for(a=0;a<s;a++)i=(n=o[a].split("."))[0],r=n[1]||"",this.eventListeners[i]||(this.eventListeners[i]=[]),this.eventListeners[i].push({name:r,handler:t});return this},e.prototype.off=function(e,t){var a,n,i,r,o,s=(e||"").split(" "),l=s.length;if(!e)for(n in this.eventListeners)this._off(n);for(a=0;a<l;a++)if(r=(i=s[a].split("."))[0],o=i[1],r)this.eventListeners[r]&&this._off(r,o,t);else for(n in this.eventListeners)this._off(n,o,t);return this},e.prototype.dispatchEvent=function(e){var t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this},e.prototype.addEventListener=function(e,t){return this.on(e,(function(e){t.call(this,e.evt)})),this},e.prototype.removeEventListener=function(e){return this.off(e),this},e.prototype._delegate=function(e,t,a){var i=this;this.on(e,(function(e){for(var r=e.target.findAncestors(t,!0,i),o=0;o<r.length;o++)(e=n.Util.cloneObject(e)).currentTarget=r[o],a.call(r[o],e)}))},e.prototype.remove=function(){return s.DD.node&&s.DD.node===this&&this.stopDrag(),this._remove(),this},e.prototype._remove=function(){this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache("absoluteTransform"),this._clearSelfAndDescendantCache("visible"),this._clearSelfAndDescendantCache("listening"),this._clearSelfAndDescendantCache("absoluteOpacity");var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)},e.prototype.destroy=function(){t._removeId(this.id(),this);for(var e=(this.name()||"").split(/\s/g),a=0;a<e.length;a++){var n=e[a];t._removeName(n,this._id)}return this.remove(),this},e.prototype.getAttr=function(e){var t="get"+n.Util._capitalize(e);return n.Util._isFunction(this[t])?this[t]():this.attrs[e]},e.prototype.getAncestors=function(){for(var e=this.getParent(),t=new n.Collection;e;)t.push(e),e=e.getParent();return t},e.prototype.getAttrs=function(){return this.attrs||{}},e.prototype.setAttrs=function(e){var t,a;if(!e)return this;for(t in e)"children"!==t&&(a="set"+n.Util._capitalize(t),n.Util._isFunction(this[a])?this[a](e[t]):this._setAttr(t,e[t]));return this},e.prototype.isListening=function(){return this._getCache("listening",this._isListening)},e.prototype._isListening=function(){var e=this.listening(),t=this.getParent();return"inherit"===e?!t||t.isListening():e},e.prototype.isVisible=function(){return this._getCache("visible",this._isVisible)},e.prototype._isVisible=function(e){var t=this.visible(),a=this.getParent();return"inherit"===t?!a||a===e||a._isVisible(e):t},e.prototype.shouldDrawHit=function(){var e=this.getLayer();return!e&&this.isListening()&&this.isVisible()||e&&e.hitGraphEnabled()&&this.isListening()&&this.isVisible()},e.prototype.show=function(){return this.visible(!0),this},e.prototype.hide=function(){return this.visible(!1),this},e.prototype.getZIndex=function(){return this.index||0},e.prototype.getAbsoluteZIndex=function(){var e,t,a,n,i=this.getDepth(),r=this,o=0;return"Stage"!==r.nodeType&&function s(l){for(e=[],t=l.length,a=0;a<t;a++)n=l[a],o++,"Shape"!==n.nodeType&&(e=e.concat(n.getChildren().toArray())),n._id===r._id&&(a=t);e.length>0&&e[0].getDepth()<=i&&s(e)}(r.getStage().getChildren()),o},e.prototype.getDepth=function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},e.prototype.setPosition=function(e){return this.x(e.x),this.y(e.y),this},e.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},e.prototype.getAbsolutePosition=function(e){var t=this.getAbsoluteTransform(e).getMatrix(),a=new n.Transform,i=this.offset();return a.m=t.slice(),a.translate(i.x,i.y),a.getTranslation()},e.prototype.setAbsolutePosition=function(e){var t,a=this._clearTransform();return this.attrs.x=a.x,this.attrs.y=a.y,delete a.x,delete a.y,(t=this.getAbsoluteTransform()).invert(),t.translate(e.x,e.y),e={x:this.attrs.x+t.getTranslation().x,y:this.attrs.y+t.getTranslation().y},this.setPosition({x:e.x,y:e.y}),this._setTransform(a),this},e.prototype._setTransform=function(e){var t;for(t in e)this.attrs[t]=e[t];this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._clearTransform=function(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform"),e},e.prototype.move=function(e){var t=e.x,a=e.y,n=this.x(),i=this.y();return void 0!==t&&(n+=t),void 0!==a&&(i+=a),this.setPosition({x:n,y:i}),this},e.prototype._eachAncestorReverse=function(e,t){var a,n,i=[],r=this.getParent();if(t&&t._id===this._id)e(this);else{for(i.unshift(this);r&&(!t||r._id!==t._id);)i.unshift(r),r=r.parent;for(a=i.length,n=0;n<a;n++)e(i[n])}},e.prototype.rotate=function(e){return this.rotation(this.rotation()+e),this},e.prototype.moveToTop=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},e.prototype.moveUp=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)},e.prototype.moveDown=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)},e.prototype.moveToBottom=function(){if(!this.parent)return n.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)},e.prototype.setZIndex=function(e){if(!this.parent)return n.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&n.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this},e.prototype.getAbsoluteOpacity=function(){return this._getCache("absoluteOpacity",this._getAbsoluteOpacity)},e.prototype._getAbsoluteOpacity=function(){var e=this.opacity(),t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e},e.prototype.moveTo=function(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this},e.prototype.toObject=function(){var e,t,a,i,r={},o=this.getAttrs();for(e in r.attrs={},o)t=o[e],n.Util.isObject(t)&&!n.Util._isPlainObject(t)&&!n.Util._isArray(t)||(a="function"==typeof this[e]&&this[e],delete o[e],i=a?a.call(this):null,o[e]=t,i!==t&&(r.attrs[e]=t));return r.className=this.getClassName(),n.Util._prepareToStringify(r)},e.prototype.toJSON=function(){return JSON.stringify(this.toObject())},e.prototype.getParent=function(){return this.parent},e.prototype.findAncestors=function(e,t,a){var n=[];t&&this._isMatch(e)&&n.push(this);for(var i=this.parent;i;){if(i===a)return n;i._isMatch(e)&&n.push(i),i=i.parent}return n},e.prototype.isAncestorOf=function(e){return!1},e.prototype.findAncestor=function(e,t,a){return this.findAncestors(e,t,a)[0]},e.prototype._isMatch=function(e){if(!e)return!1;if("function"==typeof e)return e(this);var t,a,i=e.replace(/ /g,"").split(","),r=i.length;for(t=0;t<r;t++)if(a=i[t],n.Util.isValidSelector(a)||(n.Util.warn('Selector "'+a+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),n.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),n.Util.warn("Konva is awesome, right?")),"#"===a.charAt(0)){if(this.id()===a.slice(1))return!0}else if("."===a.charAt(0)){if(this.hasName(a.slice(1)))return!0}else if(this.className===e||this.nodeType===e)return!0;return!1},e.prototype.getLayer=function(){var e=this.getParent();return e?e.getLayer():null},e.prototype.getStage=function(){return this._getCache("stage",this._getStage)},e.prototype._getStage=function(){var e=this.getParent();return e?e.getStage():void 0},e.prototype.fire=function(e,t,a){return(t=t||{}).target=t.target||this,a?this._fireAndBubble(e,t):this._fire(e,t),this},e.prototype.getAbsoluteTransform=function(e){return e?this._getAbsoluteTransform(e):this._getCache("absoluteTransform",this._getAbsoluteTransform)},e.prototype._getAbsoluteTransform=function(e){var t=new n.Transform;return this._eachAncestorReverse((function(e){var a=e.getTransformsEnabled();"all"===a?t.multiply(e.getTransform()):"position"===a&&t.translate(e.getX()-e.getOffsetX(),e.getY()-e.getOffsetY())}),e),t},e.prototype.getAbsoluteScale=function(e){return e?this._getAbsoluteScale(e):this._getCache("absoluteScale",this._getAbsoluteScale)},e.prototype._getAbsoluteScale=function(e){for(var t=this;t;)t._isUnderCache&&(e=t),t=t.getParent();var a=1,n=1;return this._eachAncestorReverse((function(e){a*=e.scaleX(),n*=e.scaleY()}),e),{x:a,y:n}},e.prototype.getTransform=function(){return this._getCache("transform",this._getTransform)},e.prototype._getTransform=function(){var e=new n.Transform,t=this.x(),a=this.y(),i=o.Konva.getAngle(this.rotation()),r=this.scaleX(),s=this.scaleY(),l=this.skewX(),c=this.skewY(),u=this.offsetX(),d=this.offsetY();return 0===t&&0===a||e.translate(t,a),0!==i&&e.rotate(i),0===l&&0===c||e.skew(l,c),1===r&&1===s||e.scale(r,s),0===u&&0===d||e.translate(-1*u,-1*d),e},e.prototype.clone=function(e){var t,a,i,r,o,s=n.Util.cloneObject(this.attrs);for(var l in c){delete s[c[l]]}for(t in e)s[t]=e[t];var u=new this.constructor(s);for(t in this.eventListeners)for(i=(a=this.eventListeners[t]).length,r=0;r<i;r++)(o=a[r]).name.indexOf("konva")<0&&(u.eventListeners[t]||(u.eventListeners[t]=[]),u.eventListeners[t].push(o));return u},e.prototype._toKonvaCanvas=function(e){e=e||{};var t=this.getClientRect(),a=this.getStage(),n=void 0!==e.x?e.x:t.x,i=void 0!==e.y?e.y:t.y,o=e.pixelRatio||1,s=new r.SceneCanvas({width:e.width||t.width||(a?a.getWidth():0),height:e.height||t.height||(a?a.getHeight():0),pixelRatio:o}),l=s.getContext();return l.save(),(n||i)&&l.translate(-1*n,-1*i),this.drawScene(s),l.restore(),s},e.prototype.toCanvas=function(e){return this._toKonvaCanvas(e)._canvas},e.prototype.toDataURL=function(e){var t=(e=e||{}).mimeType||null,a=e.quality||null,n=this._toKonvaCanvas(e).toDataURL(t,a);return e.callback&&e.callback(n),n},e.prototype.toImage=function(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var t=e.callback;delete e.callback,n.Util._urlToImage(this.toDataURL(e),(function(e){t(e)}))},e.prototype.setSize=function(e){return this.width(e.width),this.height(e.height),this},e.prototype.getSize=function(){return{width:this.width(),height:this.height()}},e.prototype.getClassName=function(){return this.className||this.nodeType},e.prototype.getType=function(){return this.nodeType},e.prototype.getDragDistance=function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():o.Konva.dragDistance},e.prototype._off=function(e,t,a){var n,i,r,o=this.eventListeners[e];for(n=0;n<o.length;n++)if(i=o[n].name,r=o[n].handler,!("konva"===i&&"konva"!==t||t&&i!==t||a&&a!==r)){if(o.splice(n,1),0===o.length){delete this.eventListeners[e];break}n--}},e.prototype._fireChangeEvent=function(e,t,a){this._fire(e+"Change",{oldVal:t,newVal:a})},e.prototype.setId=function(e){var a=this.id();return t._removeId(a,this),function(e,a){a&&(t.ids[a]=e)}(this,e),this._setAttr("id",e),this},e.prototype.setName=function(e){var a,n,i=(this.name()||"").split(/\s/g),r=(e||"").split(/\s/g);for(n=0;n<i.length;n++)a=i[n],-1===r.indexOf(a)&&a&&t._removeName(a,this._id);for(n=0;n<r.length;n++)a=r[n],-1===i.indexOf(a)&&a&&t._addName(this,a);return this._setAttr("name",e),this},e.prototype.addName=function(e){if(!this.hasName(e)){var t=this.name(),a=t?t+" "+e:e;this.setName(a)}return this},e.prototype.hasName=function(e){if(!e)return!1;var t=this.name();return!!t&&-1!==(t||"").split(/\s/g).indexOf(e)},e.prototype.removeName=function(e){var t=(this.name()||"").split(/\s/g),a=t.indexOf(e);return-1!==a&&(t.splice(a,1),this.setName(t.join(" "))),this},e.prototype.setAttr=function(e,t){var a=this["set"+n.Util._capitalize(e)];return n.Util._isFunction(a)?a.call(this,t):this._setAttr(e,t),this},e.prototype._setAttr=function(e,t){var a=this.attrs[e];(a!==t||n.Util.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._fireChangeEvent(e,a,t))},e.prototype._setComponentAttr=function(e,t,a){var n;void 0!==a&&((n=this.attrs[e])||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=a,this._fireChangeEvent(e,n,a))},e.prototype._fireAndBubble=function(e,t,a){if(t&&"Shape"===this.nodeType&&(t.target=this),!(("mouseenter"===e||"mouseleave"===e)&&(a&&(this===a||this.isAncestorOf&&this.isAncestorOf(a))||"Stage"===this.nodeType&&!a))){this._fire(e,t);var n=("mouseenter"===e||"mouseleave"===e)&&a&&a.isAncestorOf&&a.isAncestorOf(this)&&!a.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!n&&(a&&a.parent?this._fireAndBubble.call(this.parent,e,t,a.parent):this._fireAndBubble.call(this.parent,e,t))}},e.prototype._fire=function(e,t){var a,n=this.eventListeners[e];if(n)for((t=t||{}).currentTarget=this,t.type=e,a=0;a<n.length;a++)n[a].handler.call(this,t)},e.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},e.prototype.startDrag=function(){var e=this.getStage(),t=this.getLayer(),a=e.getPointerPosition(),n=this.getAbsolutePosition();a&&(s.DD.node&&s.DD.node.stopDrag(),s.DD.node=this,s.DD.startPointerPos=a,s.DD.offset.x=a.x-n.x,s.DD.offset.y=a.y-n.y,s.DD.anim.setLayers(t||this.getLayers()),s.DD.anim.start(),this._setDragPosition())},e.prototype._setDragPosition=function(e){var t=this.getStage().getPointerPosition(),a=this.dragBoundFunc();if(t){var n={x:t.x-s.DD.offset.x,y:t.y-s.DD.offset.y};void 0!==a&&(n=a.call(this,n,e)),this.setAbsolutePosition(n),this._lastPos&&this._lastPos.x===n.x&&this._lastPos.y===n.y||(s.DD.anim.dirty=!0),this._lastPos=n}},e.prototype.stopDrag=function(){var e={};s.DD._endDragBefore(e),s.DD._endDragAfter(e)},e.prototype.setDraggable=function(e){this._setAttr("draggable",e),this._dragChange()},e.prototype.isDragging=function(){return!(!s.DD.node||s.DD.node!==this||!s.DD.isDragging)},e.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",(function(e){(!(void 0!==e.evt.button)||o.Konva.dragButtons.indexOf(e.evt.button)>=0)&&(s.DD.node||this.startDrag())}))},e.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage(),t=s.DD;e&&t.node&&t.node._id===this._id&&t.node.stopDrag()}},e.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},e.create=function(e,t){return n.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)},e._createNode=function(t,a){var i,r,s,l=e.prototype.getClassName.call(t),c=t.children;if(a&&(t.attrs.container=a),o._NODES_REGISTRY[l]||(n.Util.warn('Can not find a node with class name "'+l+'". Fallback to "Shape".'),l="Shape"),i=new(0,o._NODES_REGISTRY[l])(t.attrs),c)for(r=c.length,s=0;s<r;s++)i.add(e._createNode(c[s]));return i},e}();t.Node=m,m.prototype.nodeType="Node",m.prototype._attrsAffectingSize=[],i.Factory.addGetterSetter(m,"zIndex"),i.Factory.addGetterSetter(m,"absolutePosition"),i.Factory.addGetterSetter(m,"position"),i.Factory.addGetterSetter(m,"x",0,l.getNumberValidator()),i.Factory.addGetterSetter(m,"y",0,l.getNumberValidator()),i.Factory.addGetterSetter(m,"globalCompositeOperation","source-over",l.getStringValidator()),i.Factory.addGetterSetter(m,"opacity",1,l.getNumberValidator()),i.Factory.addGetterSetter(m,"name","",l.getStringValidator()),i.Factory.addGetterSetter(m,"id","",l.getStringValidator()),i.Factory.addGetterSetter(m,"rotation",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(m,"scale",["x","y"]),i.Factory.addGetterSetter(m,"scaleX",1,l.getNumberValidator()),i.Factory.addGetterSetter(m,"scaleY",1,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(m,"skew",["x","y"]),i.Factory.addGetterSetter(m,"skewX",0,l.getNumberValidator()),i.Factory.addGetterSetter(m,"skewY",0,l.getNumberValidator()),i.Factory.addComponentsGetterSetter(m,"offset",["x","y"]),i.Factory.addGetterSetter(m,"offsetX",0,l.getNumberValidator()),i.Factory.addGetterSetter(m,"offsetY",0,l.getNumberValidator()),i.Factory.addGetterSetter(m,"dragDistance",null,l.getNumberValidator()),i.Factory.addGetterSetter(m,"width",0,l.getNumberValidator()),i.Factory.addGetterSetter(m,"height",0,l.getNumberValidator()),i.Factory.addGetterSetter(m,"listening","inherit",(function(e){return!0===e||!1===e||"inherit"===e||n.Util.warn(e+' is a not valid value for "listening" attribute. The value may be true, false or "inherit".'),e})),i.Factory.addGetterSetter(m,"preventDefault",!0,l.getBooleanValidator()),i.Factory.addGetterSetter(m,"filters",null,(function(e){return this._filterUpToDate=!1,e})),i.Factory.addGetterSetter(m,"visible","inherit",(function(e){return!0===e||!1===e||"inherit"===e||n.Util.warn(e+' is a not valid value for "visible" attribute. The value may be true, false or "inherit".'),e})),i.Factory.addGetterSetter(m,"transformsEnabled","all",l.getStringValidator()),i.Factory.addGetterSetter(m,"size"),i.Factory.addGetterSetter(m,"dragBoundFunc"),i.Factory.addGetterSetter(m,"draggable",!1,l.getBooleanValidator()),i.Factory.backCompat(m,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),n.Collection.mapMethods(m)},2363:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(2347),s=a(2342),l=a(2358),c=a(2345),u=a(2344),d=a(2520);function h(){return r||(r=o.Util.createCanvasElement().getContext("2d"))}function p(){this._clearCache("hasShadow")}function m(){this._clearCache("shadowRGBA")}function g(){this._clearCache("patternImage")}function f(){this._clearCache("linearGradient")}function b(){this._clearCache("radialGradient")}t.shapes={};var v=function(e){function a(a){for(var n,i=e.call(this,a)||this;!(n=o.Util.getRandomColor())||n in t.shapes;);return i.colorKey=n,t.shapes[n]=i,i.on("shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",p),i.on("shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),i.on("fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva",g),i.on("fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",f),i.on("fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",b),i}return i(a,e),a.prototype.getContext=function(){return this.getLayer().getContext()},a.prototype.getCanvas=function(){return this.getLayer().getCanvas()},a.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},a.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},a.prototype.hasShadow=function(){return this._getCache("hasShadow",this._hasShadow)},a.prototype._hasShadow=function(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},a.prototype._getFillPattern=function(){return this._getCache("patternImage",this.__getFillPattern)},a.prototype.__getFillPattern=function(){if(this.fillPatternImage())return h().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat")},a.prototype._getLinearGradient=function(){return this._getCache("linearGradient",this.__getLinearGradient)},a.prototype.__getLinearGradient=function(){var e=this.fillLinearGradientColorStops();if(e){for(var t=h(),a=this.fillLinearGradientStartPoint(),n=this.fillLinearGradientEndPoint(),i=t.createLinearGradient(a.x,a.y,n.x,n.y),r=0;r<e.length;r+=2)i.addColorStop(e[r],e[r+1]);return i}},a.prototype._getRadialGradient=function(){return this._getCache("radialGradient",this.__getRadialGradient)},a.prototype.__getRadialGradient=function(){var e=this.fillRadialGradientColorStops();if(e){for(var t=h(),a=this.fillRadialGradientStartPoint(),n=this.fillRadialGradientEndPoint(),i=t.createRadialGradient(a.x,a.y,this.fillRadialGradientStartRadius(),n.x,n.y,this.fillRadialGradientEndRadius()),r=0;r<e.length;r+=2)i.addColorStop(e[r],e[r+1]);return i}},a.prototype.getShadowRGBA=function(){return this._getCache("shadowRGBA",this._getShadowRGBA)},a.prototype._getShadowRGBA=function(){if(this.hasShadow()){var e=o.Util.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}},a.prototype.hasFill=function(){return!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops())},a.prototype.hasStroke=function(){return this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops())},a.prototype.intersects=function(e){var t=this.getStage().bufferHitCanvas;return t.getContext().clear(),this.drawHit(t),t.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0},a.prototype.destroy=function(){return l.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this},a.prototype._useBufferCanvas=function(e){return!(e&&!this.hasShadow()||!this.perfectDrawEnabled()||1===this.getAbsoluteOpacity()||!this.hasFill()||!this.hasStroke()||!this.getStage())},a.prototype.setStrokeHitEnabled=function(e){e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},a.prototype.getStrokeHitEnabled=function(){return 0!==this.hitStrokeWidth()},a.prototype.getSelfRect=function(){var e=this.size();return{x:this._centroid?Math.round(-e.width/2):0,y:this._centroid?Math.round(-e.height/2):0,width:e.width,height:e.height}},a.prototype.getClientRect=function(e){var t=(e=e||{}).skipTransform,a=e.relativeTo,n=this.getSelfRect(),i=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,r=n.width+i,o=n.height+i,s=!e.skipShadow&&this.hasShadow(),l=s?this.shadowOffsetX():0,c=s?this.shadowOffsetY():0,u=r+Math.abs(l),d=o+Math.abs(c),h=s&&this.shadowBlur()||0,p=u+2*h,m=d+2*h,g=0;Math.round(i/2)!==i/2&&(g=1);var f={width:p+g,height:m+g,x:-Math.round(i/2+h)+Math.min(l,0)+n.x,y:-Math.round(i/2+h)+Math.min(c,0)+n.y};return t?f:this._transformedRect(f,a)},a.prototype.drawScene=function(e,t,a,n){var i,r,o=this.getLayer(),s=e||o.getCanvas(),l=s.getContext(),c=this._getCanvasCache(),u=this.sceneFunc(),d=this.hasShadow(),h=this.hasStroke();if(!this.isVisible()&&!a)return this;if(c)return l.save(),o._applyTransform(this,l,t),this._drawCachedSceneCanvas(l),l.restore(),this;if(!u)return this;if(l.save(),this._useBufferCanvas(a)&&!n){if((r=(i=this.getStage().bufferCanvas).getContext()).clear(),r.save(),r._applyLineJoin(this),!a)if(o)o._applyTransform(this,r,t);else{var p=this.getAbsoluteTransform(t).getMatrix();l.transform(p[0],p[1],p[2],p[3],p[4],p[5])}u.call(this,r,this),r.restore();var m=i.pixelRatio;d&&!s.hitCanvas?(l.save(),l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(i._canvas,0,0,i.width/m,i.height/m),l.restore()):(l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(i._canvas,0,0,i.width/m,i.height/m))}else{if(l._applyLineJoin(this),!a)if(o)o._applyTransform(this,l,t);else{var g=this.getAbsoluteTransform(t).getMatrix();l.transform(g[0],g[1],g[2],g[3],g[4],g[5])}d&&h&&!s.hitCanvas?(l.save(),a||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore(),this.hasFill()&&this.shadowForStrokeEnabled()&&u.call(this,l,this)):d&&!s.hitCanvas?(l.save(),a||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),l._applyShadow(this),u.call(this,l,this),l.restore()):(a||(l._applyOpacity(this),l._applyGlobalCompositeOperation(this)),u.call(this,l,this))}return l.restore(),this},a.prototype.drawHit=function(e,t,a){var n=this.getLayer(),i=e||n.hitCanvas,r=i&&i.getContext(),s=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||o.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()"),!this.shouldDrawHit()&&!a)return this;if(c)return r.save(),n._applyTransform(this,r,t),this._drawCachedHitCanvas(r),r.restore(),this;if(!s)return this;if(r.save(),r._applyLineJoin(this),!a)if(n)n._applyTransform(this,r,t);else{var u=this.getAbsoluteTransform(t).getMatrix();r.transform(u[0],u[1],u[2],u[3],u[4],u[5])}return s.call(this,r,this),r.restore(),this},a.prototype.drawHitFromCache=function(e){void 0===e&&(e=0);var t,a,n,i,r,s=this._getCanvasCache(),l=this._getCachedSceneCanvas(),c=s.hit,u=c.getContext(),d=c.getWidth(),h=c.getHeight();u.clear(),u.drawImage(l._canvas,0,0,d,h);try{for(n=(a=(t=u.getImageData(0,0,d,h)).data).length,i=o.Util._hexToRgb(this.colorKey),r=0;r<n;r+=4)a[r+3]>e?(a[r]=i.r,a[r+1]=i.g,a[r+2]=i.b,a[r+3]=255):a[r+3]=0;u.putImageData(t,0,0)}catch(p){o.Util.error("Unable to draw hit graph from cached scene canvas. "+p.message)}return this},a.prototype.hasPointerCapture=function(e){return d.hasPointerCapture(e,this)},a.prototype.setPointerCapture=function(e){d.setPointerCapture(e,this)},a.prototype.releaseCapture=function(e){d.releaseCapture(e,this)},a}(l.Node);t.Shape=v,v.prototype._fillFunc=function(e){e.fill()},v.prototype._strokeFunc=function(e){e.stroke()},v.prototype._fillFuncHit=function(e){e.fill()},v.prototype._strokeFuncHit=function(e){e.stroke()},v.prototype._centroid=!1,v.prototype.nodeType="Shape",u._registerNode(v),s.Factory.addGetterSetter(v,"stroke",void 0,c.getStringValidator()),s.Factory.addGetterSetter(v,"strokeWidth",2,c.getNumberValidator()),s.Factory.addGetterSetter(v,"hitStrokeWidth","auto",c.getNumberOrAutoValidator()),s.Factory.addGetterSetter(v,"strokeHitEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(v,"perfectDrawEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(v,"shadowForStrokeEnabled",!0,c.getBooleanValidator()),s.Factory.addGetterSetter(v,"lineJoin"),s.Factory.addGetterSetter(v,"lineCap"),s.Factory.addGetterSetter(v,"sceneFunc"),s.Factory.addGetterSetter(v,"hitFunc"),s.Factory.addGetterSetter(v,"dash"),s.Factory.addGetterSetter(v,"dashOffset",0,c.getNumberValidator()),s.Factory.addGetterSetter(v,"shadowColor",void 0,c.getStringValidator()),s.Factory.addGetterSetter(v,"shadowBlur",0,c.getNumberValidator()),s.Factory.addGetterSetter(v,"shadowOpacity",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(v,"shadowOffset",["x","y"]),s.Factory.addGetterSetter(v,"shadowOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(v,"shadowOffsetY",0,c.getNumberValidator()),s.Factory.addGetterSetter(v,"fillPatternImage"),s.Factory.addGetterSetter(v,"fill",void 0,c.getStringValidator()),s.Factory.addGetterSetter(v,"fillPatternX",0,c.getNumberValidator()),s.Factory.addGetterSetter(v,"fillPatternY",0,c.getNumberValidator()),s.Factory.addGetterSetter(v,"fillLinearGradientColorStops"),s.Factory.addGetterSetter(v,"strokeLinearGradientColorStops"),s.Factory.addGetterSetter(v,"fillRadialGradientStartRadius",0),s.Factory.addGetterSetter(v,"fillRadialGradientEndRadius",0),s.Factory.addGetterSetter(v,"fillRadialGradientColorStops"),s.Factory.addGetterSetter(v,"fillPatternRepeat","repeat"),s.Factory.addGetterSetter(v,"fillEnabled",!0),s.Factory.addGetterSetter(v,"strokeEnabled",!0),s.Factory.addGetterSetter(v,"shadowEnabled",!0),s.Factory.addGetterSetter(v,"dashEnabled",!0),s.Factory.addGetterSetter(v,"strokeScaleEnabled",!0),s.Factory.addGetterSetter(v,"fillPriority","color"),s.Factory.addComponentsGetterSetter(v,"fillPatternOffset",["x","y"]),s.Factory.addGetterSetter(v,"fillPatternOffsetX",0,c.getNumberValidator()),s.Factory.addGetterSetter(v,"fillPatternOffsetY",0,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(v,"fillPatternScale",["x","y"]),s.Factory.addGetterSetter(v,"fillPatternScaleX",1,c.getNumberValidator()),s.Factory.addGetterSetter(v,"fillPatternScaleY",1,c.getNumberValidator()),s.Factory.addComponentsGetterSetter(v,"fillLinearGradientStartPoint",["x","y"]),s.Factory.addComponentsGetterSetter(v,"strokeLinearGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillLinearGradientStartPointX",0),s.Factory.addGetterSetter(v,"strokeLinearGradientStartPointX",0),s.Factory.addGetterSetter(v,"fillLinearGradientStartPointY",0),s.Factory.addGetterSetter(v,"strokeLinearGradientStartPointY",0),s.Factory.addComponentsGetterSetter(v,"fillLinearGradientEndPoint",["x","y"]),s.Factory.addComponentsGetterSetter(v,"strokeLinearGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillLinearGradientEndPointX",0),s.Factory.addGetterSetter(v,"strokeLinearGradientEndPointX",0),s.Factory.addGetterSetter(v,"fillLinearGradientEndPointY",0),s.Factory.addGetterSetter(v,"strokeLinearGradientEndPointY",0),s.Factory.addComponentsGetterSetter(v,"fillRadialGradientStartPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillRadialGradientStartPointX",0),s.Factory.addGetterSetter(v,"fillRadialGradientStartPointY",0),s.Factory.addComponentsGetterSetter(v,"fillRadialGradientEndPoint",["x","y"]),s.Factory.addGetterSetter(v,"fillRadialGradientEndPointX",0),s.Factory.addGetterSetter(v,"fillRadialGradientEndPointY",0),s.Factory.addGetterSetter(v,"fillPatternRotation",0),s.Factory.backCompat(v,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),o.Collection.mapMethods(v)},2371:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(2),i=a(0),r=a.n(i),o=a(10),s=a(80);a(2460);const l=Object(o.a)("Z4Dialog"),c=e=>r.a.createElement(s.default,Object(n.a)(Object(n.a)({},e),{},{className:l("&",e.className)}))},2383:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0);const i=a.n(n).a.createContext({flavor:"marketplace",isStandalone:!1})},2405:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2358),l=a(2430),c=a(2345),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.children=new r.Collection,t}return i(t,e),t.prototype.getChildren=function(e){if(!e)return this.children;var t=new r.Collection;return this.children.each((function(a){e(a)&&t.push(a)})),t},t.prototype.hasChildren=function(){return this.getChildren().length>0},t.prototype.removeChildren=function(){for(var e,t=0;t<this.children.length;t++)(e=this.children[t]).parent=null,e.index=0,e.remove();return this.children=new r.Collection,this},t.prototype.destroyChildren=function(){for(var e,t=0;t<this.children.length;t++)(e=this.children[t]).parent=null,e.index=0,e.destroy();return this.children=new r.Collection,this},t.prototype.add=function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}if(e.getParent())return e.moveTo(this),this;var a=this.children;return this._validateAdd(e),e.index=a.length,e.parent=this,a.push(e),this._fire("add",{child:e}),e.isDragging()&&l.DD.anim.setLayers(e.getLayer()),this},t.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),e.prototype.destroy.call(this),this},t.prototype.find=function(e){return this._generalFind(e,!1)},t.prototype.get=function(e){return r.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(e)},t.prototype.findOne=function(e){var t=this._generalFind(e,!0);return t.length>0?t[0]:void 0},t.prototype._generalFind=function(e,t){var a=[];return this._descendants((function(n){var i=n._isMatch(e);return i&&a.push(n),!(!i||!t)})),r.Collection.toCollection(a)},t.prototype._descendants=function(e){for(var t=0;t<this.children.length;t++){var a=this.children[t];if(e(a))return!0;if(a.hasChildren()&&a._descendants(e))return!0}return!1},t.prototype.toObject=function(){var e=s.Node.prototype.toObject.call(this);e.children=[];for(var t=this.getChildren(),a=t.length,n=0;n<a;n++){var i=t[n];e.children.push(i.toObject())}return e},t.prototype._getDescendants=function(e){for(var t=[],a=e.length,n=0;n<a;n++){var i=e[n];this.isAncestorOf(i)&&t.push(i)}return t},t.prototype.isAncestorOf=function(e){for(var t=e.getParent();t;){if(t._id===this._id)return!0;t=t.getParent()}return!1},t.prototype.clone=function(e){var t=s.Node.prototype.clone.call(this,e);return this.getChildren().each((function(e){t.add(e.clone())})),t},t.prototype.getAllIntersections=function(e){var t=[];return this.find("Shape").each((function(a){a.isVisible()&&a.intersects(e)&&t.push(a)})),t},t.prototype._setChildrenIndices=function(){this.children.each((function(e,t){e.index=t}))},t.prototype.drawScene=function(e,t,a){var n=this.getLayer(),i=e||n&&n.getCanvas(),r=i&&i.getContext(),o=this._getCanvasCache(),s=o&&o.scene;return(this.isVisible()||a)&&(!a&&s?(r.save(),n._applyTransform(this,r,t),this._drawCachedSceneCanvas(r),r.restore()):this._drawChildren(i,"drawScene",t,!1,a,a)),this},t.prototype.drawHit=function(e,t,a){var n=this.getLayer(),i=e||n&&n.hitCanvas,r=i&&i.getContext(),o=this._getCanvasCache(),s=o&&o.hit;return(this.shouldDrawHit(i)||a)&&(!a&&s?(r.save(),n._applyTransform(this,r,t),this._drawCachedHitCanvas(r),r.restore()):this._drawChildren(i,"drawHit",t,!1,a,a)),this},t.prototype._drawChildren=function(e,t,a,n,i,r){var o,s,l=this.getLayer(),c=e&&e.getContext(),u=this.clipWidth(),d=this.clipHeight(),h=this.clipFunc(),p=u&&d||h;if(p&&l){c.save();var m=this.getAbsoluteTransform(a),g=m.getMatrix();c.transform(g[0],g[1],g[2],g[3],g[4],g[5]),c.beginPath(),h?h.call(this,c,this):(o=this.clipX(),s=this.clipY(),c.rect(o,s,u,d)),c.clip(),g=m.copy().invert().getMatrix(),c.transform(g[0],g[1],g[2],g[3],g[4],g[5])}var f="source-over"!==this.globalCompositeOperation()&&!r;f&&l&&(c.save(),c._applyGlobalCompositeOperation(this)),this.children.each((function(r){r[t](e,a,n,i)})),f&&l&&c.restore(),p&&l&&c.restore()},t.prototype.shouldDrawHit=function(e){var t=this.getLayer(),a=l.DD.isDragging&&-1!==l.DD.anim.getLayers().indexOf(t);return e&&e.isCache||t&&t.hitGraphEnabled()&&this.isVisible()&&!a},t.prototype.getClientRect=function(e){var t,a,n,i,r=(e=e||{}).skipTransform,o=e.relativeTo,s={x:1/0,y:1/0,width:0,height:0},l=this;this.children.each((function(r){if(r.visible()){var o=r.getClientRect({relativeTo:l,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===o.width&&0===o.height||(void 0===t?(t=o.x,a=o.y,n=o.x+o.width,i=o.y+o.height):(t=Math.min(t,o.x),a=Math.min(a,o.y),n=Math.max(n,o.x+o.width),i=Math.max(i,o.y+o.height)))}}));for(var c=this.find("Shape"),u=!1,d=0;d<c.length;d++){if(c[d]._isVisible(this)){u=!0;break}}return s=u?{x:t,y:a,width:n-t,height:i-a}:{x:0,y:0,width:0,height:0},r?s:this._transformedRect(s,o)},t}(s.Node);t.Container=u,o.Factory.addComponentsGetterSetter(u,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(u,"clipX",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipY",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipWidth",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipHeight",void 0,c.getNumberValidator()),o.Factory.addGetterSetter(u,"clipFunc"),r.Collection.mapMethods(u)},2408:function(e,t,a){},241:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(15),i=a(0),r=a.n(i),o=a(10),s=a(143);a(350);const l=Object(o.a)("ScrollbarHider"),c=e=>{let{className:t,direction:a,onScroll:o,scrollerClassName:c,scrollerRef:u,scrollerTabIndex:d,style:h}=e,p=Object(n.a)(e,["className","direction","onScroll","scrollerClassName","scrollerRef","scrollerTabIndex","style"]);const m=Object(i.useRef)(),g=Object(i.useCallback)(()=>{m.current.scrollTop=0},[]),[f,b]=Object(i.useState)(!1),v=Object(i.useCallback)(()=>{void 0!==d&&b(!1)},[d]),y=Object(i.useCallback)(()=>{void 0!==d&&b(!0)},[d]),_=l("&",{"&--horizontal":"horizontal"===a||"both"===a,"&--vertical":"vertical"===a||"both"===a,"&--focused":f},t);return r.a.createElement("div",{className:_,onScroll:g,ref:m,style:h},r.a.createElement(s.b,null,r.a.createElement("div",{className:l("&-content",c),onBlur:v,onFocus:y,onScroll:o,ref:u,tabIndex:d},p.children)))}},2415:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(2347),s=a(2519),l=a(2344),c=a(2342),u=a(2345);var d=function(){function e(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=(e||{}).pixelRatio||l.Konva.pixelRatio||function(){if(r)return r;var e=o.Util.createCanvasElement().getContext("2d");return r=(l.Konva._global.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}();this.pixelRatio=t,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return e.prototype.getContext=function(){return this.context},e.prototype.getPixelRatio=function(){return this.pixelRatio},e.prototype.setPixelRatio=function(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)},e.prototype.setWidth=function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)},e.prototype.setHeight=function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio;this.getContext()._context.scale(t,t)},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.setSize=function(e,t){this.setWidth(e),this.setHeight(t)},e.prototype.toDataURL=function(e,t){try{return this._canvas.toDataURL(e,t)}catch(a){try{return this._canvas.toDataURL()}catch(n){return o.Util.error("Unable to get data URL. "+n.message),""}}},e}();t.Canvas=d,c.Factory.addGetterSetter(d,"pixelRatio",void 0,u.getNumberValidator());var h=function(e){function t(t){void 0===t&&(t={width:0,height:0});var a=e.call(this,t)||this;return a.context=new s.SceneContext(a),a.setSize(t.width,t.height),a}return i(t,e),t}(d);t.SceneCanvas=h;var p=function(e){function t(t){void 0===t&&(t={width:0,height:0});var a=e.call(this,t)||this;return a.hitCanvas=!0,a.context=new s.HitContext(a),a.setSize(t.width,t.height),a}return i(t,e),t}(d);t.HitCanvas=p},2416:function(e,t,a){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a(2686);a(2517);e.exports=n({},i)},242:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(2),i=a(183);function r(e,t,a={},r=!1){const o=Object(n.a)(Object(n.a)({leading:!0},a),{},{maxWait:t});return Object(i.a)(e,t,o,r)}},2430:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2431),i=a(2344);t.DD={startPointerPos:{x:0,y:0},anim:new n.Animation((function(){var e=this.dirty;return this.dirty=!1,e})),isDragging:!1,justDragged:!1,offset:{x:0,y:0},node:null,_drag:function(e){var a=t.DD.node;if(a){if(!t.DD.isDragging){var n=a.getStage().getPointerPosition();n||(a.getStage().setPointersPositions(e),n=a.getStage().getPointerPosition());var i=a.dragDistance();if(Math.max(Math.abs(n.x-t.DD.startPointerPos.x),Math.abs(n.y-t.DD.startPointerPos.y))<i)return}if(a.getStage().setPointersPositions(e),!t.DD.isDragging&&(t.DD.isDragging=!0,a.fire("dragstart",{type:"dragstart",target:a,evt:e},!0),!a.isDragging()))return;a._setDragPosition(e),a.fire("dragmove",{type:"dragmove",target:a,evt:e},!0)}},_endDragBefore:function(e){var a=t.DD.node;if(a){t.DD.anim.stop(),t.DD.isDragging&&(t.DD.isDragging=!1,t.DD.justDragged=!0,i.Konva.listenClickTap=!1,e&&(e.dragEndNode=a)),t.DD.node=null;var n=a.getLayer()||a instanceof i.Konva.Stage&&a;n&&n.draw()}},_endDragAfter:function(e){var t=(e=e||{}).dragEndNode;e&&t&&t.fire("dragend",{type:"dragend",target:t,evt:e},!0)}},i.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1))},2431:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2344),i=n.glob.performance&&n.glob.performance.now?function(){return n.glob.performance.now()}:function(){return(new Date).getTime()},r=function(){function e(t,a){this.id=e.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:i(),frameRate:0},this.func=t,this.setLayers(a)}return e.prototype.setLayers=function(e){var t=[];return t=e?e.length>0?e:[e]:[],this.layers=t,this},e.prototype.getLayers=function(){return this.layers},e.prototype.addLayer=function(e){var t,a=this.layers,n=a.length;for(t=0;t<n;t++)if(a[t]._id===e._id)return!1;return this.layers.push(e),!0},e.prototype.isRunning=function(){var t,a=e.animations,n=a.length;for(t=0;t<n;t++)if(a[t].id===this.id)return!0;return!1},e.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=i(),e._addAnimation(this),this},e.prototype.stop=function(){return e._removeAnimation(this),this},e.prototype._updateFrameObject=function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},e._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},e._removeAnimation=function(e){var t,a=e.id,n=this.animations,i=n.length;for(t=0;t<i;t++)if(n[t].id===a){this.animations.splice(t,1);break}},e._runFrames=function(){var e,t,a,n,r,o,s,l,c={},u=this.animations;for(n=0;n<u.length;n++)if(t=(e=u[n]).layers,a=e.func,e._updateFrameObject(i()),o=t.length,!a||!1!==a.call(e,e.frame))for(r=0;r<o;r++)void 0!==(s=t[r])._id&&(c[s._id]=s);for(l in c)c.hasOwnProperty(l)&&c[l].draw()},e._animationLoop=function(){var t=e;t.animations.length?(t._runFrames(),requestAnimationFrame(t._animationLoop)):t.animRunning=!1},e._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},e.animations=[],e.animIdCounter=0,e.animRunning=!1,e}();t.Animation=r},2458:function(e,t,a){e.exports={buttonThumbnail:"MessageUserContent_buttonThumbnail",buttonTitle:"MessageUserContent_buttonTitle",buttonTextWrapper:"MessageUserContent_buttonTextWrapper",messageMakerText:"MessageUserContent_messageMakerText",helpCenter:"MessageUserContent_helpCenter",helpText:"MessageUserContent_helpText",messageButton:"MessageUserContent_messageButton",messageButton__isMaker:"MessageUserContent_messageButton__isMaker",zazzleLogoContainer:"MessageUserContent_zazzleLogoContainer",root__isMobile:"MessageUserContent_root__isMobile"}},2459:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(0),i=a.n(n),r=a(6),o=a(40),s=a(9),l=a.n(s),c=a(170),u=a(154),d=a(2516),h=a.n(d),p=a(5),m=a(8);const g=Object(n.memo)(({className:e,onCopy:t,value:a,buttonMode:o="text"})=>{const s=Object(n.useRef)(),u=Object(m.e)(),d=f(),p=Object(n.useCallback)(()=>{null==t||t(a),window.getSelection().selectAllChildren(s.current),document.execCommand("copy");const e=Object(c.a)({content:u("zi_common_Application_CopiedToClipboard"),type:"Success"},"textToClipboard");d.queueToast(e)},[a]);let g;return"text"===o?g=u("zi_common_Application_Copy"):"icon"===o&&(g=i.a.createElement(r.a,{iconName:r.a.Icon.Copy})),i.a.createElement("div",{className:l()(h.a.root,e)},i.a.createElement("div",{className:h.a.valueWrapper,ref:s},i.a.createElement("div",{className:h.a.value},a)),i.a.createElement("button",{className:h.a.button,onClick:p,title:u("zi_common_Application_CopyToClipboard")},g))}),f=()=>{const e=Object(p.d)();return Object(n.useMemo)(()=>Object(o.b)({queueToast:u.e},e),[])}},2460:function(e,t,a){},2461:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2405),s=a(2344),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._validateAdd=function(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&r.Util.throw("You may only add groups and shapes to groups.")},t}(o.Container);t.Group=l,l.prototype.nodeType="Group",s._registerNode(l),r.Collection.mapMethods(l)},2462:function(e,t,a){"use strict";var n=function(e){if(void 0===e)throw new Error("invariant(...): Second argument must be a string.")};e.exports=function(e,t){for(var a=arguments.length,i=new Array(a>2?a-2:0),r=2;r<a;r++)i[r-2]=arguments[r];if(n(t),!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=0;(o=new Error(t.replace(/%s/g,(function(){return String(i[s++])})))).name="Invariant Violation"}throw o.framesToPop=1,o}}},2463:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(0),i=a.n(n),r=a(9),o=a.n(r),s=a(8),l=a(16),c=a(2464),u=a.n(c);const d=e=>{const{className:t,showAnnotation:a,tentativeValue:n}=e,r=Object(s.e)();return i.a.createElement("div",{className:o()(n.length>60&&u.a.root__error,t)},a&&n.length<=60&&r("zi_product_EnterURLForQRCode"),n.length>60&&r("zi_error_URLValidationForQRCode",{tinyurl:i.a.createElement(l.a,{href:"https://tinyurl.com/",rel:"noopener",target:"_blank"},r("zi_error_URLValidationForQRCode_Tinyurl")),bitly:i.a.createElement(l.a,{href:"https://bitly.com/",rel:"noopener",target:"_blank"},r("zi_error_URLValidationForQRCode_Bitly"))}))}},2464:function(e,t,a){e.exports={root__error:"QRCodeAnnotationError_root__error"}},2480:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),i=a.n(n),r=a(10),o=a(8);a(2645);const s=Object(r.a)("Z4DSSearchHeader"),l=i.a.forwardRef((e,t)=>{const a=Object(o.e)(),r=Object(n.useCallback)(e.onClick&&e.departmentId?t=>{t.preventDefault(),e.onClick(e.departmentId)}:void 0,[e.onClick,e.departmentId]);return i.a.createElement("div",{className:s("&"),ref:t,style:e.style},r?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:s("&-title"),onClick:r},e.title),i.a.createElement("button",{onClick:r},a("zi_common_ViewAll")," ",">")):i.a.createElement("h3",{className:s("&-title")},e.title))})},2481:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(15),i=a(188),r=a.n(i),o=a(423),s=a.n(o),l=a(0),c=a.n(l),u=a(183),d=a(6),h=a(10),p=a(704);a(2699);const m=Object(h.a)("NumericInput"),g=e=>{let{alwaysShowStep:t,ariaLabelledby:a,className:i,disabled:o,max:h=1/0,min:g=-1/0,onBlur:f,onFocus:b,precision:v=2,step:y=1}=e,_=Object(n.a)(e,["alwaysShowStep","ariaLabelledby","className","disabled","max","min","onBlur","onFocus","precision","step"]);function S(e){return s()(e,g,h)}function D(e){return r()(e,v)}const C=Object(u.a)(_.onChange,1e3),E=Object(l.useRef)(),[O,w]=Object(l.useState)(D(_.value)),[j,I]=Object(l.useState)(!1);function N(e,t=!1,a=!1){k(S(D(O+y*e*(t?.1:a?10:1))))}function k(e){if(w(e),!isNaN(e)){const t=S(e);C(t)}}return Object(l.useEffect)(()=>{j||w(r()(_.value,v))},[j,_.value]),c.a.createElement("div",{className:m("&",t&&"&--showStep",i)},c.a.createElement("input",{"aria-labelledby":a,disabled:o,max:h,min:g,onBlur:()=>{I(!1),f&&f()},onChange:e=>{k(parseFloat(e.currentTarget.value))},onFocus:()=>{I(!0),b&&b()},onKeyUp:e=>{switch(e.key){case"Enter":case"Escape":E.current.blur()}},ref:E,step:y,type:"number",value:isNaN(O)?"":O}),(t||!j&&!o)&&c.a.createElement("div",{className:m("&-stepButtons")},c.a.createElement(p.a,{className:m("&-stepButton"),onClick:e=>{e.preventDefault(),N(1,e.ctrlKey||e.metaKey,e.shiftKey)}},c.a.createElement(d.a,{iconName:d.a.Icon.CaretDown})),c.a.createElement(p.a,{className:m("&-stepButton"),onClick:e=>{e.preventDefault(),N(-1,e.ctrlKey||e.metaKey,e.shiftKey)}},c.a.createElement(d.a,{iconName:d.a.Icon.CaretDown}))))}},2482:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),i=a.n(n),r=a(10);a(2528);const o=Object(r.a)("Toggle"),s=Object(n.memo)(e=>{const t=i.a.createElement("button",{"aria-hidden":e.ariaHidden,className:o("&-button"),disabled:e.disabled,onClick:()=>{e.onChange(!e.value)}},e.label&&i.a.createElement("div",{className:"screenreader-only"},e.label)),a=o("&",e.value&&"&--on");return e.label?i.a.createElement("label",{className:a},i.a.createElement("div",{className:o("&-label")},e.label),t):i.a.createElement("div",{className:a},t)})},2501:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return k}));var n,i=a(3),r=a(168),o=a.n(r),s=a(322),l=a.n(s),c=a(2640),u=a.n(c),d=a(196),h=a.n(d),p=a(182),m=a.n(p),g=a(9),f=a.n(g),b=a(0),v=a.n(b),y=a(29),_=a(137),S=a(6),D=a(616),C=a(54),E=a(92),O=a(1735),w=a.n(O),j=a(1731),I=Object(j.a)(w.a),N=a(1539);a(2641);!function(e){e[e.ShowAll=0]="ShowAll",e[e.Scroll=1]="Scroll",e[e.Link=2]="Link",e[e.HideOverflow=3]="HideOverflow"}(n||(n={}));class k extends v.a.PureComponent{constructor(...e){super(...e),Object(i.a)(this,"state",{expanded:!1,showBgTabFlyout:!1,bgTabFlyUp:!1,spaceAboveSwatches:0,swatchesContainerHeight:0,tentativeAlphaPercent:Object(D.g)(this.props.valueWithAlpha),tentativeAlphaSliderHex:this.props.valueWithAlpha||this.props.value}),Object(i.a)(this,"swatchesContainerElement",void 0),Object(i.a)(this,"advPlusButtonRef",v.a.createRef()),Object(i.a)(this,"handleAlphaBlur",()=>{const e=parseInt(this.state.tentativeAlphaPercent);isNaN(e)?this.setState({tentativeAlphaPercent:Object(D.g)(this.props.value)}):this.setState({tentativeAlphaPercent:e.toString()})}),Object(i.a)(this,"handleAlphaInputChange",e=>{this.setState({tentativeAlphaPercent:e});let t=parseInt(e);if(!isNaN(t)){t>100?t=100:t<0&&(t=0);const e=8===this.props.value.length?this.props.value.substr(2,6):this.props.value;this.setState({tentativeAlphaPercent:t.toString(),tentativeAlphaSliderHex:Object(D.b)(t)+e}),this.debouncedAlphaChange(t)}}),Object(i.a)(this,"handleAlphaSliderChange",e=>{this.props.value&&(this.setState({tentativeAlphaPercent:Object(D.g)(e),tentativeAlphaSliderHex:e}),this.debouncedAlphaSliderChange(e))}),Object(i.a)(this,"debouncedAlphaSliderChange",h()(e=>{this.props.onChange(e,"")},500)),Object(i.a)(this,"debouncedAlphaChange",h()(e=>{const t=8===this.props.value.length?this.props.value.substr(2,6):this.props.value;this.props.onChange(Object(D.b)(e)+t)},500)),Object(i.a)(this,"debouncedCheckButtonPosition",h()(()=>{this.checkButtonPosition()},500)),Object(i.a)(this,"handleReset",()=>{this.setState({tentativeAlphaPercent:"100",tentativeAlphaSliderHex:"00ffffff"}),this.props.onChange("","")}),Object(i.a)(this,"checkButtonPosition",e=>{if(this.props.showAdvInSwatchRows&&this.advPlusButtonRef.current){const t=window.innerHeight-this.advPlusButtonRef.current.getBoundingClientRect().bottom,a=e||this.state.spaceAboveSwatches;t<275&&a>275?this.state.bgTabFlyUp||this.setState({bgTabFlyUp:!0}):this.state.bgTabFlyUp&&this.setState({bgTabFlyUp:!1})}}),Object(i.a)(this,"renderSwatchRow",e=>{const{isDarkMode:t,numColumns:a}=this.props;let n={width:`calc(${100/a}% - ${2*this.props.swatchMargin}px)`};this.props.leftAlignSwatches?(n.marginTop=this.props.swatchMargin,n.marginBottom=this.props.swatchMargin,n.marginRight=2*this.props.swatchMargin):n.margin=this.props.swatchMargin;return e.map(e=>{if("advPlusButton"!==e.displayName){const a=t?"394754":"f9f9f9",i=Object(D.e)(a,Object(D.c)(e.hexCode)),r=f()("ColorSwatchInput-swatch",{"ColorSwatchInput--selected":this.props.value.toLowerCase()===e.hexCode.toLowerCase(),"ColorSwatchInput-swatchBorder--lightBackground":!t&&i<3,"ColorSwatchInput-swatchBorder--darkBackground":t&&i<15});let o="#"+u()(e.hexCode);return e.displayName&&(o+=" | "+e.displayName),v.a.createElement("button",{className:r,"data-hex":e.hexCode.toLowerCase(),key:e.hexCode,onClick:()=>{this.swatchOnClick(e)},style:n,title:o},v.a.createElement("div",{className:"ColorSwatchInput-swatchInner",style:{backgroundImage:`url(${this.props.zUrl("WwwAst","z2/cr/transparent_swatch.gif")})`}},v.a.createElement("div",{className:"ColorSwatchInput-swatchInnerColor",style:{backgroundColor:"#"+Object(D.c)(e.hexCode)}})))}return v.a.createElement(v.a.Fragment,{key:"fragment"},v.a.createElement("button",{ref:this.advPlusButtonRef,key:"plusMinus",className:"ColorSwatchInput-plus",style:n,onClick:()=>{this.setState(e=>({showBgTabFlyout:!e.showBgTabFlyout}))},title:this.props.zString("zi_create_design_chooseCustomColor")},v.a.createElement(S.a,{iconName:S.a.Icon.SizeIncrease})),this.state.showBgTabFlyout&&v.a.createElement(_.a,{key:"flyouts",caretLeftOffset:20,caretPosition:this.state.bgTabFlyUp?"bottom":"top",className:"ColorSwatchInput-bgTabFlyout",closeOnEscapePress:!0,closeOnBodyClick:!0,includeCaret:!0,onRequestClose:()=>{this.setState({showBgTabFlyout:!1})},style:{top:this.state.bgTabFlyUp?"-265px":void 0}},this.props.bgTabFlyoutContent))})}),Object(i.a)(this,"swatchOnClick",e=>{let t;if(8===e.hexCode.length)t=e.hexCode,this.setState({tentativeAlphaPercent:Object(D.g)(t)});else{const a=Object(D.b)(parseInt(this.state.tentativeAlphaPercent));"00ffffff"===this.props.value?(t=e.hexCode,this.setState({tentativeAlphaPercent:"100"})):t=a+e.hexCode}this.setState({tentativeAlphaSliderHex:t}),this.props.onChange(t,e.displayName),this.props.addRecentColor(e,this.props.numRecentSwatchRows*this.props.numColumns)}),Object(i.a)(this,"renderSwatches",()=>{let e=this.props.swatches;if(this.props.showAdvInSwatchRows){const t=this.props.swatches.slice(0);t.unshift({displayName:"advPlusButton",hexCode:""}),e=t}return l()(e,this.props.numColumns).map((e,t)=>{let a=this.props.showMoreSwatchesOption;return a===n.ShowAll||a===n.Scroll||a===n.Link&&(this.state.expanded||t<this.props.numRows)||a===n.HideOverflow&&t<this.props.numRows?v.a.createElement("div",{className:"ColorSwatchInput-swatchRow",key:"row"+t},this.renderSwatchRow(e)):null})}),Object(i.a)(this,"renderRecentSwatches",()=>l()(this.props.recentSwatches,this.props.numColumns-(this.props.showAdvInSwatchRows?1:0)).map((e,t)=>t<this.props.numRecentSwatchRows?v.a.createElement("div",{className:"ColorSwatchInput-swatchRow",key:"row"+t},this.renderSwatchRow(e)):null)),Object(i.a)(this,"renderColorLabel",()=>{const{value:e,zString:t}=this.props;let a=t("zi_common_Application_none");if(e){const t=this.getColorName(e);a="#"+u()(e),t&&(a+=" | "+t)}return v.a.createElement("div",{className:"ColorSwatchInput-colorLabel"},v.a.createElement("span",{className:"ColorSwatchInput-colorLabelTitle"},t("zi_create_DesignInspector_SelectedColor"))," ",a)}),Object(i.a)(this,"getSwatchesContainerStyle",()=>this.props.showMoreSwatchesOption===n.Scroll?{height:this.state.swatchesContainerHeight,overflowY:"scroll"}:null),Object(i.a)(this,"toggleExpanded",()=>{this.setState({expanded:!this.state.expanded})}),Object(i.a)(this,"updateSwatchesContainerHeight",()=>{if(this.props.showMoreSwatchesOption===n.Scroll){const e=this.swatchesContainerElement.clientWidth/this.props.numColumns*this.props.numRows;this.setState({swatchesContainerHeight:e})}}),Object(i.a)(this,"updateSpaceAboveSwatches",()=>{var e;const{spaceAboveSwatches:t}=this.state,a=null===(e=this.advPlusButtonRef.current)||void 0===e?void 0:e.getBoundingClientRect().top;t!==a&&(this.setState({spaceAboveSwatches:a}),this.checkButtonPosition(a))})}componentWillUnmount(){this.debouncedAlphaChange.cancel(),this.debouncedAlphaSliderChange.cancel(),this.debouncedCheckButtonPosition.cancel(),window.removeEventListener("resize",this.debouncedCheckButtonPosition)}getColorName(e){const t=m()(this.props.swatches,t=>t.hexCode===e);return t?t.displayName:""}componentDidMount(){this.updateSwatchesContainerHeight(),this.updateSpaceAboveSwatches(),window.addEventListener("resize",this.debouncedCheckButtonPosition)}componentDidUpdate(){this.updateSwatchesContainerHeight(),this.updateSpaceAboveSwatches()}render(){const{allowPartialTransparent:e,allowTransparent:t,isArea:a,numColumns:i,numRows:r,recentSwatches:s,showAdvInSwatchRows:l,showAdvancedOption:c,showMoreSwatchesOption:u,showRecentSwatchesAbove:d,showResetLink:h,swatches:p,toggleAdvancedInputShown:m,zString:g}=this.props,b=f()("ColorSwatchInput",`ColorSwatchInput--${this.context&&this.context.theme}Theme`,this.props.className,{"ColorSwatchInput-hasShowMoreLink":u===n.Link}),_=l||(c||!o()(p)&&p.length>i)&&!o()(s),D=!a&&c,C=p&&u===n.Link&&p.length>i*r;return v.a.createElement("div",{className:b},_&&(l||d)&&v.a.createElement("div",{className:"ColorSwatchInput-swatchesContainer ColorSwatchInput-recentSwatches ColorSwatchInput-recentSwatches--BGTab"},s.length>0&&v.a.createElement("div",{className:"ColorSwatchInput-recentSwatchesLabel"},g("zi_create_design_recentlyUsedColors")),this.renderRecentSwatches()),p&&v.a.createElement("div",{ref:e=>this.swatchesContainerElement=e,className:"ColorSwatchInput-swatchesContainer",style:this.getSwatchesContainerStyle()},this.renderSwatches()),(C||D)&&v.a.createElement("div",{className:"ColorSwatchInput-showMoreSwatchesRow"},C&&v.a.createElement(y.a,{onClick:this.toggleExpanded},this.state.expanded?g("zi_common_Application_ShowLess"):g("zi_common_Application_ShowMore")),D&&v.a.createElement("div",null,g("zi_controls_ColorPicker_TriggerAdvanced",{link:v.a.createElement(y.a,{key:"0",onClick:m},g("zi_controls_ColorPicker_ColorPicker"))}))),_&&!l&&!d&&v.a.createElement("div",{className:"ColorSwatchInput-swatchesContainer ColorSwatchInput-recentSwatches"},s.length>0&&v.a.createElement("div",{className:"ColorSwatchInput-recentSwatchesLabel"},g("zi_create_design_recentlyUsedColors")),this.renderRecentSwatches()),this.props.showColorLabel&&this.renderColorLabel(),D&&this.props.value&&v.a.createElement("div",{className:"ColorSwatchInput-bottomRow"},t&&e&&v.a.createElement("div",{className:"ColorSwatchInput-transparencyGroup"},g("zi_create_design_colors_opacity"),v.a.createElement("div",{className:"ColorSwatchInput-alpha"},v.a.createElement(I,{pointer:N.a,value:this.state.tentativeAlphaSliderHex,onChange:e=>{this.handleAlphaSliderChange(e)}})),v.a.createElement(E.a,{className:"ColorSwatchInput-transparencyInput",disabled:!this.props.value,max:100,min:0,focusOnStep:!0,onBlur:this.handleAlphaBlur,onChange:this.handleAlphaInputChange,precision:1,step:1,type:"number",value:this.state.tentativeAlphaPercent})),h&&v.a.createElement(y.a,{onClick:this.handleReset},v.a.createElement(S.a,{iconName:S.a.Icon.RotateCcw}),g("zi_create_design_colorPickerReset"))))}}Object(i.a)(k,"contextType",C.a),Object(i.a)(k,"defaultProps",{addRecentColor:()=>{},isArea:!1,isDarkMode:!1,numColumns:16,numRecentSwatchRows:1,numRows:3,onChange:()=>{},showColorLabel:!1,showRecentSwatchesAbove:!1,showMoreSwatchesOption:n.Link,swatchMargin:2,swatches:[],toggleAdvancedInputShown:()=>{},value:null})},2507:function(e,t,a){var n=a(359),i=/[\\^$.*+?()[\]{}|]/g,r=RegExp(i.source);e.exports=function(e){return(e=n(e))&&r.test(e)?e.replace(i,"\\$&"):e}},2508:function(e,t,a){},2512:function(e,t,a){},2516:function(e,t,a){e.exports={root:"TextToClipboard_root",valueWrapper:"TextToClipboard_valueWrapper",value:"TextToClipboard_value",button:"TextToClipboard_button"}},2517:function(e,t,a){var n=a(2649).Konva;n._injectGlobal(n),t.default=n,e.exports=t.default},2518:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2344),i=a(2347),r=a(2358),o=a(2405),s=a(2650),l=a(2651),c=a(2652),u=a(2461),d=a(2430),h=a(2363),p=a(2431),m=a(2653),g=a(2519),f=a(2415);t.Konva=i.Util._assign(n.Konva,{Collection:i.Collection,Util:i.Util,Node:r.Node,ids:r.ids,names:r.names,Container:o.Container,Stage:s.Stage,stages:s.stages,Layer:l.Layer,FastLayer:c.FastLayer,Group:u.Group,DD:d.DD,Shape:h.Shape,shapes:h.shapes,Animation:p.Animation,Tween:m.Tween,Easings:m.Easings,Context:g.Context,Canvas:f.Canvas})},2519:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2344),s=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],l=function(){function e(e){this.canvas=e,this._context=e._canvas.getContext("2d"),o.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return e.prototype.fillShape=function(e){e.getFillEnabled()&&this._fill(e)},e.prototype._fill=function(e){},e.prototype.strokeShape=function(e){e.getStrokeEnabled()&&this._stroke(e)},e.prototype._stroke=function(e){},e.prototype.fillStrokeShape=function(e){e.getFillEnabled()&&this._fill(e),e.getStrokeEnabled()&&this._stroke(e)},e.prototype.getTrace=function(e){var t,a,n,i,o=this.traceArr,s=o.length,l="";for(t=0;t<s;t++)(n=(a=o[t]).method)?(i=a.args,l+=n,e?l+="()":r.Util._isArray(i[0])?l+="(["+i.join(",")+"])":l+="("+i.join(",")+")"):(l+=a.property,e||(l+="="+a.val)),l+=";";return l},e.prototype.clearTrace=function(){this.traceArr=[]},e.prototype._trace=function(e){var t=this.traceArr;t.push(e),t.length>=100&&t.shift()},e.prototype.reset=function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},e.prototype.getCanvas=function(){return this.canvas},e.prototype.clear=function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)},e.prototype._applyLineCap=function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},e.prototype._applyOpacity=function(e){var t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)},e.prototype._applyLineJoin=function(e){var t=e.getLineJoin();t&&this.setAttr("lineJoin",t)},e.prototype.setAttr=function(e,t){this._context[e]=t},e.prototype.arc=function(e,t,a,n,i,r){this._context.arc(e,t,a,n,i,r)},e.prototype.arcTo=function(e,t,a,n,i,r){this._context.arc(e,t,a,n,i,r)},e.prototype.beginPath=function(){this._context.beginPath()},e.prototype.bezierCurveTo=function(e,t,a,n,i,r){this._context.bezierCurveTo(e,t,a,n,i,r)},e.prototype.clearRect=function(e,t,a,n){this._context.clearRect(e,t,a,n)},e.prototype.clip=function(){this._context.clip()},e.prototype.closePath=function(){this._context.closePath()},e.prototype.createImageData=function(e,t){var a=arguments;return 2===a.length?this._context.createImageData(e,t):1===a.length?this._context.createImageData(e):void 0},e.prototype.createLinearGradient=function(e,t,a,n){return this._context.createLinearGradient(e,t,a,n)},e.prototype.createPattern=function(e,t){return this._context.createPattern(e,t)},e.prototype.createRadialGradient=function(e,t,a,n,i,r){return this._context.createRadialGradient(e,t,a,n,i,r)},e.prototype.drawImage=function(e,t,a,n,i,r,o,s,l){var c=arguments,u=this._context;3===c.length?u.drawImage(e,t,a):5===c.length?u.drawImage(e,t,a,n,i):9===c.length&&u.drawImage(e,t,a,n,i,r,o,s,l)},e.prototype.ellipse=function(e,t,a,n,i,r,o,s){this._context.ellipse(e,t,a,n,i,r,o,s)},e.prototype.isPointInPath=function(e,t){return this._context.isPointInPath(e,t)},e.prototype.fill=function(){this._context.fill()},e.prototype.fillRect=function(e,t,a,n){this._context.fillRect(e,t,a,n)},e.prototype.strokeRect=function(e,t,a,n){this._context.strokeRect(e,t,a,n)},e.prototype.fillText=function(e,t,a){this._context.fillText(e,t,a)},e.prototype.measureText=function(e){return this._context.measureText(e)},e.prototype.getImageData=function(e,t,a,n){return this._context.getImageData(e,t,a,n)},e.prototype.lineTo=function(e,t){this._context.lineTo(e,t)},e.prototype.moveTo=function(e,t){this._context.moveTo(e,t)},e.prototype.rect=function(e,t,a,n){this._context.rect(e,t,a,n)},e.prototype.putImageData=function(e,t,a){this._context.putImageData(e,t,a)},e.prototype.quadraticCurveTo=function(e,t,a,n){this._context.quadraticCurveTo(e,t,a,n)},e.prototype.restore=function(){this._context.restore()},e.prototype.rotate=function(e){this._context.rotate(e)},e.prototype.save=function(){this._context.save()},e.prototype.scale=function(e,t){this._context.scale(e,t)},e.prototype.setLineDash=function(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)},e.prototype.getLineDash=function(){return this._context.getLineDash()},e.prototype.setTransform=function(e,t,a,n,i,r){this._context.setTransform(e,t,a,n,i,r)},e.prototype.stroke=function(){this._context.stroke()},e.prototype.strokeText=function(e,t,a,n){this._context.strokeText(e,t,a,n)},e.prototype.transform=function(e,t,a,n,i,r){this._context.transform(e,t,a,n,i,r)},e.prototype.translate=function(e,t){this._context.translate(e,t)},e.prototype._enableTrace=function(){var e,t,a=this,n=s.length,i=r.Util._simplifyArray,o=this.setAttr,l=function(e){var n,r=a[e];a[e]=function(){return t=i(Array.prototype.slice.call(arguments,0)),n=r.apply(a,arguments),a._trace({method:e,args:t}),n}};for(e=0;e<n;e++)l(s[e]);a.setAttr=function(){o.apply(a,arguments);var e=arguments[0],t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),a._trace({property:e,val:t})}},e.prototype._applyGlobalCompositeOperation=function(e){var t=e.getGlobalCompositeOperation();"source-over"!==t&&this.setAttr("globalCompositeOperation",t)},e}();t.Context=l,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach((function(e){Object.defineProperty(l.prototype,e,{get:function(){return this._context[e]},set:function(t){this._context[e]=t}})}));var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._fillColor=function(e){var t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)},t.prototype._fillPattern=function(e){var t=e.getFillPatternX(),a=e.getFillPatternY(),n=e.getFillPatternScaleX(),i=e.getFillPatternScaleY(),r=o.Konva.getAngle(e.getFillPatternRotation()),s=e.getFillPatternOffsetX(),l=e.getFillPatternOffsetY();(t||a)&&this.translate(t||0,a||0),r&&this.rotate(r),(n||i)&&this.scale(n,i),(s||l)&&this.translate(-1*s,-1*l),this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)},t.prototype._fillLinearGradient=function(e){var t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))},t.prototype._fillRadialGradient=function(e){var t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))},t.prototype._fill=function(e){var t=e.fill(),a=e.getFillPriority();if(t&&"color"===a)this._fillColor(e);else{var n=e.getFillPatternImage();if(n&&"pattern"===a)this._fillPattern(e);else{var i=e.getFillLinearGradientColorStops();if(i&&"linear-gradient"===a)this._fillLinearGradient(e);else{var r=e.getFillRadialGradientColorStops();r&&"radial-gradient"===a?this._fillRadialGradient(e):t?this._fillColor(e):n?this._fillPattern(e):i?this._fillLinearGradient(e):r&&this._fillRadialGradient(e)}}}},t.prototype._strokeLinearGradient=function(e){var t=e.getStrokeLinearGradientStartPoint(),a=e.getStrokeLinearGradientEndPoint(),n=e.getStrokeLinearGradientColorStops(),i=this.createLinearGradient(t.x,t.y,a.x,a.y);if(n){for(var r=0;r<n.length;r+=2)i.addColorStop(n[r],n[r+1]);this.setAttr("strokeStyle",i)}},t.prototype._stroke=function(e){var t=e.dash(),a=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!a){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),a||this.restore()}},t.prototype._applyShadow=function(e){var t=r.Util,a=t.get(e.getShadowRGBA(),"black"),n=t.get(e.getShadowBlur(),5),i=t.get(e.getShadowOffset(),{x:0,y:0}),o=e.getAbsoluteScale(),s=this.canvas.getPixelRatio(),l=o.x*s,c=o.y*s;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",n*Math.min(Math.abs(l),Math.abs(c))),this.setAttr("shadowOffsetX",i.x*l),this.setAttr("shadowOffsetY",i.y*c)},t}(l);t.SceneContext=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._fill=function(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()},t.prototype._stroke=function(e){if(e.hasStroke()&&e.hitStrokeWidth()){var t=e.getStrokeScaleEnabled();if(!t){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e);var n=e.hitStrokeWidth(),i="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}},t}(l);t.HitContext=u},2520:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;function i(e){return{evt:e,pointerId:e.pointerId}}function r(e,t){var a=n.get(e);if(a){var r=a.getStage();r&&r.content&&r.content.releasePointerCapture(e),n.delete(e),a._fire("lostpointercapture",i(new PointerEvent("lostpointercapture")))}}t.getCapturedShape=function(e){return n.get(e)},t.createEvent=i,t.hasPointerCapture=function(e,t){return n.get(e)===t},t.setPointerCapture=function(e,t){r(e),t.getStage()&&(n.set(e,t),t._fire("gotpointercapture",i(new PointerEvent("gotpointercapture"))))},t.releaseCapture=r},2521:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2405),s=a(2358),l=a(2342),c=a(2415),u=function(e){function t(t){var a=e.call(this,t)||this;return a.canvas=new c.SceneCanvas,a._waitingForDraw=!1,a.on("visibleChange",a._checkVisibility),a._checkVisibility(),a.on("imageSmoothingEnabledChange",a._checkSmooth),a._checkSmooth(),a}return i(t,e),t.prototype.createPNGStream=function(){return this.canvas._canvas.createPNGStream()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.getHitCanvas=function(){return this.hitCanvas},t.prototype.getContext=function(){return this.getCanvas().getContext()},t.prototype.clear=function(e){return this.getContext().clear(e),this},t.prototype.setZIndex=function(t){e.prototype.setZIndex.call(this,t);var a=this.getStage();return a&&(a.content.removeChild(this.getCanvas()._canvas),t<a.getChildren().length-1?a.content.insertBefore(this.getCanvas()._canvas,a.getChildren()[t+1].getCanvas()._canvas):a.content.appendChild(this.getCanvas()._canvas)),this},t.prototype.moveToTop=function(){s.Node.prototype.moveToTop.call(this);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),e.content.appendChild(this.getCanvas()._canvas)),!0},t.prototype.moveUp=function(){if(!s.Node.prototype.moveUp.call(this))return!1;var e=this.getStage();return!!e&&(e.content.removeChild(this.getCanvas()._canvas),this.index<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas),!0)},t.prototype.moveDown=function(){if(s.Node.prototype.moveDown.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[this.index+1].getCanvas()._canvas)}return!0}return!1},t.prototype.moveToBottom=function(){if(s.Node.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var t=e.getChildren();e.content.removeChild(this.getCanvas()._canvas),e.content.insertBefore(this.getCanvas()._canvas,t[1].getCanvas()._canvas)}return!0}return!1},t.prototype.getLayer=function(){return this},t.prototype.remove=function(){var e=this.getCanvas()._canvas;return s.Node.prototype.remove.call(this),e&&e.parentNode&&r.Util._isInDocument(e)&&e.parentNode.removeChild(e),this},t.prototype.getStage=function(){return this.parent},t.prototype.setSize=function(e){var t=e.width,a=e.height;return this.canvas.setSize(t,a),this},t.prototype._toKonvaCanvas=function(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),s.Node.prototype._toKonvaCanvas.call(this,e)},t.prototype._checkVisibility=function(){var e=this.visible();this.canvas._canvas.style.display=e?"block":"none"},t.prototype._checkSmooth=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},t.prototype.getWidth=function(){if(this.parent)return this.parent.width()},t.prototype.setWidth=function(){r.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},t.prototype.getHeight=function(){if(this.parent)return this.parent.height()},t.prototype.setHeight=function(){r.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},t.prototype.getIntersection=function(e,t){return null},t.prototype.batchDraw=function(){var e=this;return this._waitingForDraw||(this._waitingForDraw=!0,r.Util.requestAnimFrame((function(){e.draw(),e._waitingForDraw=!1}))),this},t.prototype._applyTransform=function(e,t,a){var n=e.getAbsoluteTransform(a).getMatrix();t.transform(n[0],n[1],n[2],n[3],n[4],n[5])},t}(o.Container);t.BaseLayer=u,u.prototype.nodeType="BaseLayer",l.Factory.addGetterSetter(u,"imageSmoothingEnabled",!0),l.Factory.addGetterSetter(u,"clearBeforeDraw",!0),r.Collection.mapMethods(u)},2522:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2345),c=a(2344),u=function(e){function t(t){var a=e.call(this,t)||this;return a.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",(function(){this._clearCache("tensionPoints")})),a}return i(t,e),t.prototype._sceneFunc=function(e){var t,a,n,i=this.points(),r=i.length,o=this.tension(),s=this.closed(),l=this.bezier();if(r){if(e.beginPath(),e.moveTo(i[0],i[1]),0!==o&&r>4){for(a=(t=this.getTensionPoints()).length,n=s?0:4,s||e.quadraticCurveTo(t[0],t[1],t[2],t[3]);n<a-2;)e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);s||e.quadraticCurveTo(t[a-2],t[a-1],i[r-2],i[r-1])}else if(l)for(n=2;n<r;)e.bezierCurveTo(i[n++],i[n++],i[n++],i[n++],i[n++],i[n++]);else for(n=2;n<r;n+=2)e.lineTo(i[n],i[n+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}},t.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},t.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():r.Util._expandPoints(this.points(),this.tension())},t.prototype._getTensionPointsClosed=function(){var e=this.points(),t=e.length,a=this.tension(),n=r.Util._getControlPoints(e[t-2],e[t-1],e[0],e[1],e[2],e[3],a),i=r.Util._getControlPoints(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],a),o=r.Util._expandPoints(e,a);return[n[2],n[3]].concat(o).concat([i[0],i[1],e[t-2],e[t-1],i[2],i[3],n[0],n[1],e[0],e[1]])},t.prototype.getWidth=function(){return this.getSelfRect().width},t.prototype.getHeight=function(){return this.getSelfRect().height},t.prototype.getSelfRect=function(){for(var e,t,a,n=(e=0!==this.tension()?this._getTensionPoints():this.points())[0],i=e[0],r=e[1],o=e[1],s=0;s<e.length/2;s++)t=e[2*s],a=e[2*s+1],n=Math.min(n,t),i=Math.max(i,t),r=Math.min(r,a),o=Math.max(o,a);return{x:Math.round(n),y:Math.round(r),width:Math.round(i-n),height:Math.round(o-r)}},t}(s.Shape);t.Line=u,u.prototype.className="Line",u.prototype._attrsAffectingSize=["points","bezier","tension"],c._registerNode(u),o.Factory.addGetterSetter(u,"closed",!1),o.Factory.addGetterSetter(u,"bezier",!1),o.Factory.addGetterSetter(u,"tension",0,l.getNumberValidator()),o.Factory.addGetterSetter(u,"points",[],l.getNumberArrayValidator()),r.Collection.mapMethods(u)},2523:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2344),c=function(e){function t(a){var n=e.call(this,a)||this;n.dataArray=[],n.pathLength=0,n.dataArray=t.parsePathData(n.data()),n.pathLength=0;for(var i=0;i<n.dataArray.length;++i)n.pathLength+=n.dataArray[i].pathLength;return n.on("dataChange.konva",(function(){this.dataArray=t.parsePathData(this.data()),this.pathLength=0;for(var e=0;e<this.dataArray.length;++e)this.pathLength+=this.dataArray[e].pathLength})),n}return i(t,e),t.prototype._sceneFunc=function(e){var t=this.dataArray;e.beginPath();for(var a=0;a<t.length;a++){var n=t[a].command,i=t[a].points;switch(n){case"L":e.lineTo(i[0],i[1]);break;case"M":e.moveTo(i[0],i[1]);break;case"C":e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"Q":e.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"A":var r=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5],d=i[6],h=i[7],p=s>l?s:l,m=s>l?1:s/l,g=s>l?l/s:1;e.translate(r,o),e.rotate(d),e.scale(m,g),e.arc(0,0,p,c,c+u,1-h),e.scale(1/m,1/g),e.rotate(-d),e.translate(-r,-o);break;case"z":e.closePath()}}e.fillStrokeShape(this)},t.prototype.getSelfRect=function(){var e=[];this.dataArray.forEach((function(t){e=e.concat(t.points)}));for(var t,a,n=e[0],i=e[0],r=e[1],o=e[1],s=0;s<e.length/2;s++)t=e[2*s],a=e[2*s+1],isNaN(t)||(n=Math.min(n,t),i=Math.max(i,t)),isNaN(a)||(r=Math.min(r,a),o=Math.max(o,a));return{x:Math.round(n),y:Math.round(r),width:Math.round(i-n),height:Math.round(o-r)}},t.prototype.getLength=function(){return this.pathLength},t.prototype.getPointAtLength=function(e){var a,n=0,i=this.dataArray.length;if(!i)return null;for(;n<i&&e>this.dataArray[n].pathLength;)e-=this.dataArray[n].pathLength,++n;if(n===i)return{x:(a=this.dataArray[n-1].points.slice(-2))[0],y:a[1]};if(e<.01)return{x:(a=this.dataArray[n].points.slice(0,2))[0],y:a[1]};var r=this.dataArray[n],o=r.points;switch(r.command){case"L":return t.getPointOnLine(e,r.start.x,r.start.y,o[0],o[1]);case"C":return t.getPointOnCubicBezier(e/r.pathLength,r.start.x,r.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return t.getPointOnQuadraticBezier(e/r.pathLength,r.start.x,r.start.y,o[0],o[1],o[2],o[3]);case"A":var s=o[0],l=o[1],c=o[2],u=o[3],d=o[4],h=o[5],p=o[6];return d+=h*e/r.pathLength,t.getPointOnEllipticalArc(s,l,c,u,d,p)}return null},t.getLineLength=function(e,t,a,n){return Math.sqrt((a-e)*(a-e)+(n-t)*(n-t))},t.getPointOnLine=function(e,t,a,n,i,r,o){void 0===r&&(r=t),void 0===o&&(o=a);var s=(i-a)/(n-t+1e-8),l=Math.sqrt(e*e/(1+s*s));n<t&&(l*=-1);var c,u=s*l;if(n===t)c={x:r,y:o+u};else if((o-a)/(r-t+1e-8)===s)c={x:r+l,y:o+u};else{var d,h,p=this.getLineLength(t,a,n,i);if(p<1e-8)return;var m=(r-t)*(n-t)+(o-a)*(i-a);d=t+(m/=p*p)*(n-t),h=a+m*(i-a);var g=this.getLineLength(r,o,d,h),f=Math.sqrt(e*e-g*g);l=Math.sqrt(f*f/(1+s*s)),n<t&&(l*=-1),c={x:d+l,y:h+(u=s*l)}}return c},t.getPointOnCubicBezier=function(e,t,a,n,i,r,o,s,l){function c(e){return e*e*e}function u(e){return 3*e*e*(1-e)}function d(e){return 3*e*(1-e)*(1-e)}function h(e){return(1-e)*(1-e)*(1-e)}return{x:s*c(e)+r*u(e)+n*d(e)+t*h(e),y:l*c(e)+o*u(e)+i*d(e)+a*h(e)}},t.getPointOnQuadraticBezier=function(e,t,a,n,i,r,o){function s(e){return e*e}function l(e){return 2*e*(1-e)}function c(e){return(1-e)*(1-e)}return{x:r*s(e)+n*l(e)+t*c(e),y:o*s(e)+i*l(e)+a*c(e)}},t.getPointOnEllipticalArc=function(e,t,a,n,i,r){var o=Math.cos(r),s=Math.sin(r),l=a*Math.cos(i),c=n*Math.sin(i);return{x:e+(l*o-c*s),y:t+(l*s+c*o)}},t.parsePathData=function(e){if(!e)return[];var t=e,a=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(var n=0;n<a.length;n++)t=t.replace(new RegExp(a[n],"g"),"|"+a[n]);var i,r=t.split("|"),o=[],s=[],l=0,c=0,u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(n=1;n<r.length;n++){var d=r[n],h=d.charAt(0);for(d=d.slice(1),s.length=0;i=u.exec(d);)s.push(i[0]);for(var p=[],m=0,g=s.length;m<g;m++){var f=parseFloat(s[m]);isNaN(f)?p.push(0):p.push(f)}for(;p.length>0&&!isNaN(p[0]);){var b,v,y,_,S,D,C,E,O,w,j=null,I=[],N=l,k=c;switch(h){case"l":l+=p.shift(),c+=p.shift(),j="L",I.push(l,c);break;case"L":l=p.shift(),c=p.shift(),I.push(l,c);break;case"m":var T=p.shift(),x=p.shift();if(l+=T,c+=x,j="M",o.length>2&&"z"===o[o.length-1].command)for(var z=o.length-2;z>=0;z--)if("M"===o[z].command){l=o[z].points[0]+T,c=o[z].points[1]+x;break}I.push(l,c),h="l";break;case"M":l=p.shift(),c=p.shift(),j="M",I.push(l,c),h="L";break;case"h":l+=p.shift(),j="L",I.push(l,c);break;case"H":l=p.shift(),j="L",I.push(l,c);break;case"v":c+=p.shift(),j="L",I.push(l,c);break;case"V":c=p.shift(),j="L",I.push(l,c);break;case"C":I.push(p.shift(),p.shift(),p.shift(),p.shift()),l=p.shift(),c=p.shift(),I.push(l,c);break;case"c":I.push(l+p.shift(),c+p.shift(),l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),j="C",I.push(l,c);break;case"S":v=l,y=c,"C"===(b=o[o.length-1]).command&&(v=l+(l-b.points[2]),y=c+(c-b.points[3])),I.push(v,y,p.shift(),p.shift()),l=p.shift(),c=p.shift(),j="C",I.push(l,c);break;case"s":v=l,y=c,"C"===(b=o[o.length-1]).command&&(v=l+(l-b.points[2]),y=c+(c-b.points[3])),I.push(v,y,l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),j="C",I.push(l,c);break;case"Q":I.push(p.shift(),p.shift()),l=p.shift(),c=p.shift(),I.push(l,c);break;case"q":I.push(l+p.shift(),c+p.shift()),l+=p.shift(),c+=p.shift(),j="Q",I.push(l,c);break;case"T":v=l,y=c,"Q"===(b=o[o.length-1]).command&&(v=l+(l-b.points[0]),y=c+(c-b.points[1])),l=p.shift(),c=p.shift(),j="Q",I.push(v,y,l,c);break;case"t":v=l,y=c,"Q"===(b=o[o.length-1]).command&&(v=l+(l-b.points[0]),y=c+(c-b.points[1])),l+=p.shift(),c+=p.shift(),j="Q",I.push(v,y,l,c);break;case"A":_=p.shift(),S=p.shift(),D=p.shift(),C=p.shift(),E=p.shift(),O=l,w=c,l=p.shift(),c=p.shift(),j="A",I=this.convertEndpointToCenterParameterization(O,w,l,c,C,E,_,S,D);break;case"a":_=p.shift(),S=p.shift(),D=p.shift(),C=p.shift(),E=p.shift(),O=l,w=c,l+=p.shift(),c+=p.shift(),j="A",I=this.convertEndpointToCenterParameterization(O,w,l,c,C,E,_,S,D)}o.push({command:j||h,points:I,start:{x:N,y:k},pathLength:this.calcLength(N,k,j||h,I)})}"z"!==h&&"Z"!==h||o.push({command:"z",points:[],start:void 0,pathLength:0})}return o},t.calcLength=function(e,a,n,i){var r,o,s,l,c=t;switch(n){case"L":return c.getLineLength(e,a,i[0],i[1]);case"C":for(r=0,o=c.getPointOnCubicBezier(0,e,a,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)s=c.getPointOnCubicBezier(l,e,a,i[0],i[1],i[2],i[3],i[4],i[5]),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return r;case"Q":for(r=0,o=c.getPointOnQuadraticBezier(0,e,a,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)s=c.getPointOnQuadraticBezier(l,e,a,i[0],i[1],i[2],i[3]),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return r;case"A":r=0;var u=i[4],d=i[5],h=i[4]+d,p=Math.PI/180;if(Math.abs(u-h)<p&&(p=Math.abs(u-h)),o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),d<0)for(l=u-p;l>h;l-=p)s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(l=u+p;l<h;l+=p)s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),r+=c.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),r+=c.getLineLength(o.x,o.y,s.x,s.y)}return 0},t.convertEndpointToCenterParameterization=function(e,t,a,n,i,r,o,s,l){var c=l*(Math.PI/180),u=Math.cos(c)*(e-a)/2+Math.sin(c)*(t-n)/2,d=-1*Math.sin(c)*(e-a)/2+Math.cos(c)*(t-n)/2,h=u*u/(o*o)+d*d/(s*s);h>1&&(o*=Math.sqrt(h),s*=Math.sqrt(h));var p=Math.sqrt((o*o*(s*s)-o*o*(d*d)-s*s*(u*u))/(o*o*(d*d)+s*s*(u*u)));i===r&&(p*=-1),isNaN(p)&&(p=0);var m=p*o*d/s,g=p*-s*u/o,f=(e+a)/2+Math.cos(c)*m-Math.sin(c)*g,b=(t+n)/2+Math.sin(c)*m+Math.cos(c)*g,v=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},y=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(v(e)*v(t))},_=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(y(e,t))},S=_([1,0],[(u-m)/o,(d-g)/s]),D=[(u-m)/o,(d-g)/s],C=[(-1*u-m)/o,(-1*d-g)/s],E=_(D,C);return y(D,C)<=-1&&(E=Math.PI),y(D,C)>=1&&(E=0),0===r&&E>0&&(E-=2*Math.PI),1===r&&E<0&&(E+=2*Math.PI),[f,b,o,s,S,E,c,r]},t}(s.Shape);t.Path=c,c.prototype.className="Path",c.prototype._attrsAffectingSize=["data"],l._registerNode(c),o.Factory.addGetterSetter(c,"data"),r.Collection.mapMethods(c)},2524:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2344),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){var t=this.cornerRadius(),a=this.width(),n=this.height();if(e.beginPath(),t){var i=0,r=0,o=0,s=0;"number"==typeof t?i=r=o=s=Math.min(t,a/2,n/2):(i=Math.min(t[0],a/2,n/2),r=Math.min(t[1],a/2,n/2),s=Math.min(t[2],a/2,n/2),o=Math.min(t[3],a/2,n/2)),e.moveTo(i,0),e.lineTo(a-r,0),e.arc(a-r,r,r,3*Math.PI/2,0,!1),e.lineTo(a,n-s),e.arc(a-s,n-s,s,0,Math.PI/2,!1),e.lineTo(o,n),e.arc(o,n-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,i),e.arc(i,i,i,Math.PI,3*Math.PI/2,!1)}else e.rect(0,0,a,n);e.closePath(),e.fillStrokeShape(this)},t}(s.Shape);t.Rect=c,c.prototype.className="Rect",l._registerNode(c),o.Factory.addGetterSetter(c,"cornerRadius",0),r.Collection.mapMethods(c)},2525:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r,o=a(2347),s=a(2342),l=a(2363),c=a(2344),u=a(2345),d=a(2344),h=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],p=h.length;function m(){return r||(r=o.Util.createCanvasElement().getContext("2d"))}var g=function(e){function t(t){var a=e.call(this,function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(t))||this;a._partialTextX=0,a._partialTextY=0;for(var n=0;n<p;n++)a.on(h[n]+"Change.konva",a._setTextData);return a._setTextData(),a}return i(t,e),t.prototype._sceneFunc=function(e){var t,a=this.padding(),n=this.fontSize(),i=this.lineHeight()*n,r=this.textArr,o=r.length,s=this.verticalAlign(),l=0,c=this.align(),u=this.getWidth(),d=this.letterSpacing(),h=this.fill(),p=this.textDecoration(),m=-1!==p.indexOf("underline"),g=-1!==p.indexOf("line-through"),f=0,b=(f=i/2,0),v=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline","middle"),e.setAttr("textAlign","left"),"middle"===s?l=(this.getHeight()-o*i-2*a)/2:"bottom"===s&&(l=this.getHeight()-o*i-2*a),e.translate(a,l+a),t=0;t<o;t++){b=0,v=0;var y,_,S,D=r[t],C=D.text,E=D.width,O=t!==o-1;if(e.save(),"right"===c?b+=u-E-2*a:"center"===c&&(b+=(u-E-2*a)/2),m&&(e.save(),e.beginPath(),e.moveTo(b,f+v+Math.round(n/2)),_=0===(y=C.split(" ").length-1),S="justify"===c&&O&&!_?u-2*a:E,e.lineTo(b+Math.round(S),f+v+Math.round(n/2)),e.lineWidth=n/15,e.strokeStyle=h,e.stroke(),e.restore()),g&&(e.save(),e.beginPath(),e.moveTo(b,f+v),_=0===(y=C.split(" ").length-1),S="justify"===c&&O&&!_?u-2*a:E,e.lineTo(b+Math.round(S),f+v),e.lineWidth=n/15,e.strokeStyle=h,e.stroke(),e.restore()),0!==d||"justify"===c){y=C.split(" ").length-1;for(var w=0;w<C.length;w++){var j=C[w];" "===j&&t!==o-1&&"justify"===c&&(b+=Math.floor((u-2*a-E)/y)),this._partialTextX=b,this._partialTextY=f+v,this._partialText=j,e.fillStrokeShape(this),b+=Math.round(this.measureSize(j).width)+d}}else this._partialTextX=b,this._partialTextY=f+v,this._partialText=C,e.fillStrokeShape(this);e.restore(),o>1&&(f+=i)}},t.prototype._hitFunc=function(e){var t=this.getWidth(),a=this.getHeight();e.beginPath(),e.rect(0,0,t,a),e.closePath(),e.fillStrokeShape(this)},t.prototype.setText=function(e){var t=o.Util._isString(e)?e:(e||"").toString();return this._setAttr("text",t),this},t.prototype.getWidth=function(){return"auto"===this.attrs.width||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width},t.prototype.getHeight=function(){return"auto"===this.attrs.height||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height},t.prototype.getTextWidth=function(){return this.textWidth},t.prototype.getTextHeight=function(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},t.prototype.measureSize=function(e){var t,a=m(),n=this.fontSize();return a.save(),a.font=this._getContextFont(),t=a.measureText(e),a.restore(),{width:t.width,height:n}},t.prototype._getContextFont=function(){return c.Konva.UA.isIE?this.fontStyle()+" "+this.fontSize()+"px "+this.fontFamily():this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+this.fontFamily()},t.prototype._addTextLine=function(e){"justify"===this.align()&&(e=e.trim());var t=this._getTextWidth(e);return this.textArr.push({text:e,width:t})},t.prototype._getTextWidth=function(e){var t=this.letterSpacing(),a=e.length;return m().measureText(e).width+(a?t*(a-1):0)},t.prototype._setTextData=function(){var e=this.text().split("\n"),t=+this.fontSize(),a=0,n=this.lineHeight()*t,i=this.attrs.width,r=this.attrs.height,o="auto"!==i&&void 0!==i,s="auto"!==r&&void 0!==r,l=this.padding(),c=i-2*l,u=r-2*l,d=0,h=this.wrap(),p="none"!==h,g="char"!==h&&p,f=this.ellipsis()&&!p;this.textArr=[],m().font=this._getContextFont();for(var b=f?this._getTextWidth("â€¦"):0,v=0,y=e.length;v<y;++v){var _=e[v],S=this._getTextWidth(_);if(o&&S>c)for(;_.length>0;){for(var D=0,C=_.length,E="",O=0;D<C;){var w=D+C>>>1,j=_.slice(0,w+1),I=this._getTextWidth(j)+b;I<=c?(D=w+1,E=j+(f?"â€¦":""),O=I):C=w}if(!E)break;if(g){var N,k=_[E.length];(N=(" "===k||"-"===k)&&O<=c?E.length:Math.max(E.lastIndexOf(" "),E.lastIndexOf("-"))+1)>0&&(D=N,E=E.slice(0,D),O=this._getTextWidth(E))}if(E=E.trimRight(),this._addTextLine(E),a=Math.max(a,O),d+=n,!p||s&&d+n>u)break;if((_=(_=_.slice(D)).trimLeft()).length>0&&(S=this._getTextWidth(_))<=c){this._addTextLine(_),d+=n,a=Math.max(a,S);break}}else this._addTextLine(_),d+=n,a=Math.max(a,S);if(s&&d+n>u)break}this.textHeight=t,this.textWidth=a},t.prototype.getStrokeScaleEnabled=function(){return!0},t}(l.Shape);t.Text=g,g.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype._strokeFunc=function(e){e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},g.prototype.className="Text",g.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight"],d._registerNode(g),s.Factory.overWriteSetter(g,"width",u.getNumberOrAutoValidator()),s.Factory.overWriteSetter(g,"height",u.getNumberOrAutoValidator()),s.Factory.addGetterSetter(g,"fontFamily","Arial"),s.Factory.addGetterSetter(g,"fontSize",12,u.getNumberValidator()),s.Factory.addGetterSetter(g,"fontStyle","normal"),s.Factory.addGetterSetter(g,"fontVariant","normal"),s.Factory.addGetterSetter(g,"padding",0,u.getNumberValidator()),s.Factory.addGetterSetter(g,"align","left"),s.Factory.addGetterSetter(g,"verticalAlign","top"),s.Factory.addGetterSetter(g,"lineHeight",1,u.getNumberValidator()),s.Factory.addGetterSetter(g,"wrap","word"),s.Factory.addGetterSetter(g,"ellipsis",!1),s.Factory.addGetterSetter(g,"letterSpacing",0,u.getNumberValidator()),s.Factory.addGetterSetter(g,"text","",u.getStringValidator()),s.Factory.addGetterSetter(g,"textDecoration",""),o.Collection.mapMethods(g)},2526:function(e,t,a){var n=a(2518).Konva;n._injectGlobal(n),t.default=n,n.default=n,e.exports=t.default},2527:function(e,t,a){"use strict";t.__esModule=!0,t.toggleStrictMode=function(e){s=e},t.applyNodeProps=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;t===a&&console.error("same props");!i&&"zIndex"in t&&(console.warn(c),i=!0);if(!r&&t.draggable){var h=void 0!==t.x||void 0!==t.y,p=t.onDragEnd||t.onDragMove;h&&!p&&(console.warn(l),r=!0)}for(var m in a)if(!n[m]){var g="on"===m.slice(0,2),f=a[m]!==t[m];if(g&&f)"content"===(C=m.substr(2).toLowerCase()).substr(0,7)&&(C="content"+C.substr(7,1).toUpperCase()+C.substr(8)),e.off(C,a[m]);var b=!t.hasOwnProperty(m);b&&e.setAttr(m,void 0)}var v=s||t._useStrictMode,y={},_=!1,S={};for(var m in t)if(!n[m]){g="on"===m.slice(0,2);var D=a[m]!==t[m];if(g&&D)"content"===(C=m.substr(2).toLowerCase()).substr(0,7)&&(C="content"+C.substr(7,1).toUpperCase()+C.substr(8)),t[m]&&(S[C]=t[m]);!g&&(t[m]!==a[m]||v&&t[m]!==e.getAttr(m))&&(_=!0,y[m]=t[m])}_&&(e.setAttrs(y),d(e));for(var C in S)e.on(C+o,S[C])},t.updatePicture=d;var n={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0},i=!1,r=!1,o=t.EVENTS_NAMESPACE=".react-konva-event",s=!1;var l="ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.\nPosition of a node will be changed during drag&drop, so you should update state of the react app as well.\nConsider to add onDragMove or onDragEnd events.\nFor more info see: https://github.com/konvajs/react-konva/issues/256\n",c='ReactKonva: You are using "zIndex" attribute for a Konva node.\nreact-konva may get confused with ordering. Just define correct order of elements in your render function of a component.\nFor more info see: https://github.com/konvajs/react-konva/issues/194\n',u={};function d(e){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}},2528:function(e,t,a){},2557:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(2),i=a(15),r=a(3),o=a(0),s=a.n(o),l=a(180),c=a(136),u=a(9),d=a.n(u),h=a(54),p=a(19),m=a(92);a(2508);function g(){}class f extends s.a.PureComponent{constructor(...e){super(...e),Object(r.a)(this,"id",Object(p.i)("autosuggestbase")),Object(r.a)(this,"getItemId",(e,t)=>{if(null===t)return null;const a=null===e?"":"section-"+e;return`react-autosuggestbase-${this.id}-${a}-item-${t}`}),Object(r.a)(this,"getItemsContainerId",()=>"react-whatever-"+this.id),Object(r.a)(this,"renderItemsList",(e,t=null)=>e.map((e,a)=>{const n="function"==typeof this.props.itemProps?this.props.itemProps(e,a):this.props.itemProps,{onMouseEnter:i,onMouseLeave:r,onMouseDown:o,onClick:l}=n,c=l?e=>l(e,{sectionIndex:t,itemIndex:a}):g,u=o?e=>o(e,{sectionIndex:t,itemIndex:a}):g,h=i?e=>i(e,{sectionIndex:t,itemIndex:a}):g,p=r?e=>r(e,{sectionIndex:t,itemIndex:a}):g,m=a===this.props.focusedItem.itemIndex&&(!this.props.multiSection||t===this.props.focusedItem.sectionIndex);return s.a.createElement("button",{className:d()("AutoSuggestBase-item",{"AutoSuggestBase-itemFocused":m}),"data-section-index":t,"data-suggestion-index":a,id:this.getItemId(t,a),key:a,onClick:c,onMouseDown:u,onMouseEnter:h,onMouseLeave:p,role:"option"},this.props.renderItem(e))})),Object(r.a)(this,"renderRichContent",()=>this.props.renderRichContent?this.props.renderRichContent(this.props.focusedItem):null),Object(r.a)(this,"renderNoItems",()=>{const e=this.props.renderNoItems();if(null==e)return null;const t={sectionIndex:null,itemIndex:0},a="function"==typeof this.props.itemProps?this.props.itemProps(null,0):this.props.itemProps,{onMouseEnter:n,onMouseLeave:i,onMouseDown:r,onClick:o}=a,l=o?e=>o(e,t):g,c=r?e=>r(e,t):g,u=n?e=>n(e,t):g,h=i?e=>i(e,t):g;return s.a.createElement("div",{className:d()("AutoSuggestBase-itemsContainer")},s.a.createElement("ul",{id:this.getItemsContainerId(),className:"AutoSuggestBase-listsContainer",role:"listbox",ref:this.props.listsContainerRef},s.a.createElement("li",{className:d()("AutoSuggestBase-item"),"data-section-index":null,"data-suggestion-index":0,id:this.getItemId(null,0),onClick:l,onMouseEnter:u,onMouseDown:c,onMouseLeave:h},e)))}),Object(r.a)(this,"renderSections",()=>{const e=this.props.items,t=e.map(e=>this.props.getSectionItems(e));if(t.every(e=>0===e.length))return this.renderNoItems();const{shouldRenderSection:a,renderSectionTitle:i}=this.props,r=this.renderRichContent();return s.a.createElement("div",{className:d()("AutoSuggestBase-itemsContainer",{"AutoSuggestBase-itemsContainer--hasRichContent":null!=r}),id:this.getItemsContainerId(),role:"listbox"},s.a.createElement("div",{className:"AutoSuggestBase-listsContainer",ref:this.props.listsContainerRef},e.map((e,n)=>{if(!a(e))return null;const r=i?i(e):null;return s.a.createElement("div",{key:n,className:d()(n,"AutoSuggestBase-sectionContainer")},r&&s.a.createElement("div",{className:d()("AutoSuggestBase-sectionTitle")},r),s.a.createElement("ul",{className:d()("AutoSuggestBase-sectionItemsContainer")},this.renderItemsList(t[n],n)))})),r&&s.a.createElement("div",Object(n.a)(Object(n.a)({className:d()("AutoSuggestBase-richContentContainer")},this.props.richContentProps),{},{ref:this.props.richContentRef}),r))}),Object(r.a)(this,"renderItems",()=>{const e=this.props.items;if(0===e.length)return this.renderNoItems();const t=this.renderRichContent();return s.a.createElement("div",{className:d()("AutoSuggestBase-itemsContainer",{"AutoSuggestBase-itemsContainer--hasRichContent":null!=t})},s.a.createElement("ul",{id:this.getItemsContainerId(),className:"AutoSuggestBase-listsContainer",role:"listbox",ref:this.props.listsContainerRef},this.renderItemsList(e)),t&&s.a.createElement("div",Object(n.a)(Object(n.a)({className:d()("AutoSuggestBase-richContentContainer")},this.props.richContentProps),{},{ref:this.props.richContentRef}),t))})}render(){const{multiSection:e,inputProps:t,focusedItem:a}=this.props,i=e?this.renderSections():this.renderItems(),r=null!==i,o=this.getItemId(a.sectionIndex,a.itemIndex);return s.a.createElement("div",{className:d()("AutoSuggestBase",this.context&&this.context.theme&&`AutoSuggestBase--${this.context.theme}${this.context.z4DarkMode?"Dark":""}Theme`,"AutoSuggestBase-container",{"AutoSuggestBase-containerOpen":r}),ref:this.props.rootRef},s.a.createElement(m.a,Object(n.a)({"aria-autocomplete":"list","aria-expanded":r,"aria-activedescendant":o,autoComplete:"off",className:d()("AutoSuggestBase-input"),role:"combobox",type:"search"},t)),i)}}Object(r.a)(f,"defaultProps",{getSuggestion:()=>null,multiSection:!1,shouldRenderSection:()=>!0,renderItem:()=>{throw new Error("`renderItem` must be provided")},renderNoItems:()=>null,renderSectionTitle:()=>{throw new Error("`renderSectionTitle` must be provided")},getSectionItems:()=>{throw new Error("`getSectionItems` must be provided")},inputProps:null,itemProps:null,items:[],focusedItem:{sectionIndex:null,itemIndex:null}}),Object(r.a)(f,"contextType",h.a);const b=[];var v=s.a.memo((function(e){const t=Object(o.useRef)(null),a=Object(o.useRef)(),i=Object(o.useRef)(),r=Object(o.useRef)(),u=Object(o.useRef)(),d=Object(o.useRef)(!1);Object(o.useEffect)(()=>()=>{clearTimeout(u.current)},[]),Object(o.useEffect)(()=>{const{suggestions:t,inputProps:a,shouldRenderSuggestions:n,shouldRenderNoSuggestions:i,isCollapsed:r,revealSuggestions:o,lastAction:s}=e;r&&s&&"click"!==s&&"enter"!==s&&(t.length>0&&n(a.value)||0==t.length&&i(a.value))&&o()},[e.suggestions]);const h=Object(o.useCallback)(t=>{if(e.multiSection){if(null!==t.sectionIndex&&null!==t.itemIndex)return e.getSectionItems(e.suggestions[t.sectionIndex])[t.itemIndex]}else if(null!=t.itemIndex)return e.suggestions[t.itemIndex];return null},[e.multiSection,e.getSectionItems,e.suggestions]),p=Object(o.useCallback)(e=>{const t=e.getAttribute("data-section-index"),a=e.getAttribute("data-suggestion-index");return{sectionIndex:"string"==typeof t?parseInt(t,10):null,itemIndex:parseInt(a,10)}},[]),m=Object(o.useCallback)(e=>{let t=e;do{if(null!==t.getAttribute("data-suggestion-index"))return t;t=t.parentElement}while(null!==t);throw console.error("Clicked element:",e),new Error("Couldn't find suggestion element")},[]),g=Object(o.useCallback)(()=>{i.current=!0},[i]),v=Object(o.useCallback)(()=>{i.current=!1},[i]),_=Object(o.useCallback)((t,a)=>{t!==e.inputProps.value&&e.inputProps.onChange&&e.inputProps.onChange(t)},[e.inputProps.value,e.inputProps.onChange]),S=Object(o.useCallback)((t,a)=>{e.shouldRenderSuggestions(t)&&e.onSuggestionsUpdateRequested(t,a)},[e.shouldRenderSuggestions,e.onSuggestionsUpdateRequested]),D=Object(o.useCallback)(()=>e.suggestions.length>0&&e.shouldRenderSuggestions(e.inputProps.value)||0==e.suggestions.length&&e.shouldRenderNoSuggestions(e.inputProps.value),[e.suggestions,e.shouldRenderSuggestions,e.shouldRenderNoSuggestions,e.inputProps.value]),C=Object(o.useCallback)(a=>{t.current=a,"function"==typeof e.inputRef?e.inputRef(a):e.inputRef&&(e.inputRef.current=a)},[t,e.inputRef]),E=Object(o.useCallback)(t=>{i.current||(e.onInputFocus(e.shouldRenderSuggestions(e.inputProps.value)),e.inputProps.onFocus&&e.inputProps.onFocus(t))},[i,e.onInputFocus,e.shouldRenderSuggestions,e.inputProps.value,e.inputProps.onFocus]),O=Object(o.useCallback)(t=>{r.current=t,i.current||d.current?d.current&&(d.current=!1):(e.onInputBlur(),e.inputProps.onBlur&&e.inputProps.onBlur(t),null!==e.valueBeforeUpDown&&e.inputProps.value!==e.valueBeforeUpDown&&S(e.inputProps.value,"blur"))},[r,i,d,e.onInputBlur,e.inputProps.onBlur,e.valueBeforeUpDown,e.inputProps.value]),w=Object(o.useCallback)(t=>{_(t,"type"),e.onInputChange(e.shouldRenderSuggestions(t),"type"),S(t,"type")},[_,e.onInputChange,e.shouldRenderSuggestions,S]),j=Object(o.useCallback)(t=>{const{multiSection:a,suggestions:n,getSectionItems:i}=e,r=y(a?n.map(e=>i(e).length):n.length,a),o="ArrowDown"===t.key?"next":"prev",[s,l]=r[o]([e.focusedItem.sectionIndex,e.focusedItem.itemIndex]);if(e.isCollapsed)D()&&e.revealSuggestions();else if(n.length>0){const a={sectionIndex:s,itemIndex:l};let n;n=null===l?e.valueBeforeUpDown:e.getSuggestionValue(h(a)),e.updateFocusedSuggestion(a,e.inputProps.value),_(n,"ArrowDown"===t.key?"down":"up")}t.preventDefault()},[e.multiSection,e.suggestions,e.getSectionItems,e.focusedItem.sectionIndex,e.focusedItem.itemIndex,e.isCollapsed,D,e.revealSuggestions,e.valueBeforeUpDown,e.getSuggestionValue,h,e.updateFocusedSuggestion,e.inputProps.value,_]),I=Object(o.useCallback)(t=>{const a=h(e.focusedItem);e.closeSuggestions("enter"),null!==a?(e.onSuggestionSelected(t,{suggestion:a,suggestionValue:e.getSuggestionValue(a),suggestionIndex:e.focusedItem.itemIndex,sectionIndex:e.focusedItem.sectionIndex,source:"enter"}),S(e.inputProps.value,"enter")):e.onNoSuggestionSelected(t,"enter")},[h,e.closeSuggestions,e.onSuggestionSelected,e.getSuggestionValue,e.focusedItem.itemIndex,e.focusedItem.sectionIndex,e.inputProps.value,e.onNoSuggestionSelected]),N=Object(o.useCallback)(t=>{const a=e.isFocused&&!e.isCollapsed&&D();a&&t.preventDefault(),null===e.valueBeforeUpDown?a||(_("","escape"),S("","escape")):_(e.valueBeforeUpDown,"escape"),e.closeSuggestions("escape")},[e.isFocused,e.isCollapsed,D,e.valueBeforeUpDown,_,S,e.closeSuggestions]),k=Object(o.useCallback)(t=>{switch(t.key){case"ArrowDown":case"ArrowUp":j(t);break;case"Enter":I(t);break;case"Escape":N(t);break;case"Tab":d.current=!1;break;case"ArrowRight":d.current=!0,a.current&&Object(c.a)(a.current);break;case"ArrowLeft":d.current=!0}e.inputProps.onKeyDown&&e.inputProps.onKeyDown(t)},[j,I,N,d,a,e.inputProps.onKeyDown]),T=Object(o.useCallback)((t,a)=>{e.itemMouseEnterDelay?(clearTimeout(u.current),a&&null!=a.itemIndex&&(u.current=setTimeout(()=>{clearTimeout(u.current),e.updateFocusedSuggestion(a)},e.itemMouseEnterDelay))):e.updateFocusedSuggestion(a)},[e.itemMouseEnterDelay,u,e.updateFocusedSuggestion]),x=Object(o.useCallback)(a=>{const n=p(m(a.target)),i=h(n);if(null!=i){const o=e.getSuggestionValue(i);_(o,"click"),e.onSuggestionSelected(a,{suggestion:i,suggestionValue:o,suggestionIndex:n.itemIndex,sectionIndex:n.sectionIndex,source:"click"}),e.closeSuggestions("click"),!0===e.focusInputOnSuggestionClick?t.current.focus():(e.onInputBlur(),e.inputProps.onBlur&&e.inputProps.onBlur(r.current)),S(o,"click"),v()}else e.onNoSuggestionSelected(a,"click")},[p,m,h,e.getSuggestionValue,_,e.onSuggestionSelected,e.closeSuggestions,e.focusInputOnSuggestionClick,t,e.onInputBlur,e.inputProps.onBlur,r,S,v,e.onNoSuggestionSelected]),z=Object(o.useCallback)(t=>{e.itemMouseEnterDelay&&clearTimeout(u.current)},[e.itemMouseEnterDelay,u]),P=Object(o.useCallback)(e=>{e.preventDefault(),g()},[g]),F=Object(o.useCallback)(e=>{v()},[v]),M=Object(o.useCallback)(e=>{let n;switch(e.key){case"Escape":t.current&&t.current.focus();break;case"Tab":e.preventDefault();break;case"ArrowRight":if(n=Object(c.b)(a.current),n&&n.length>0)for(let e=0;e<n.length;e++)if(n[e]===document.activeElement){e===n.length-1?n[0].focus():n[e+1].focus();break}break;case"ArrowLeft":if(n=Object(c.b)(a.current),n&&n.length>0)for(let e=0;e<n.length;e++)if(n[e]===document.activeElement){0!==e?n[e-1].focus():t.current&&t.current.focus();break}}},[t,a]),A=Object(o.useCallback)(t=>e.renderItem(t,{value:e.inputProps.value,valueBeforeUpDown:e.valueBeforeUpDown}),[e.renderItem,e.inputProps.value,e.valueBeforeUpDown]),R=e.isFocused&&!e.isCollapsed&&D(),B=Object(l.a)(Object(n.a)(Object(n.a)({},e.inputProps),{},{onFocus:E,onBlur:O,onChange:w,onKeyDown:k,inputRef:C})),L=Object(l.a)({onMouseEnter:T,onMouseDown:g,onClick:x}),U=Object(l.a)({onMouseEnter:z,onMouseDown:P,onClick:F,onKeyDown:M}),K=Object(o.useMemo)(()=>R?e.renderNoItems:()=>null,[R,e.renderNoItems]),G=Object(o.useRef)();return Object(o.useEffect)(()=>{function t(t){!G.current.contains(t.target)&&e.onInputBlur()}return document.body.addEventListener("click",t),()=>{document.body.removeEventListener("click",t)}},[]),s.a.createElement(f,{focusedItem:e.focusedItem,getSectionItems:e.getSectionItems,getSuggestion:h,inputProps:B,itemProps:L,items:R?e.suggestions:b,listsContainerRef:e.listsContainerRef,multiSection:e.multiSection,renderItem:A,renderNoItems:K,renderRichContent:e.renderRichContent,renderSectionTitle:e.renderSectionTitle,richContentProps:U,richContentRef:a,rootRef:G})}));const y=function(e,t){function a(a){let[n,i]=a;return t?null===i||i===e[n]-1?(n=function(t){for(null===t?t=0:t++;t<e.length&&0===e[t];)t++;return t===e.length?null:t}(n),null===n?[null,null]:[n,0]):[n,i+1]:0===e||i===e-1?[null,null]:null===i?[null,0]:[null,i+1]}return{next:a,prev:function(a){let[n,i]=a;return t?null===i||0===i?(n=function(t){for(null===t?t=e.length-1:t--;t>=0&&0===e[t];)t--;return-1===t?null:t}(n),null===n?[null,null]:[n,e[n]-1]):[n,i-1]:0===e||0===i?[null,null]:null===i?[null,e-1]:[null,i-1]},isLast:function(e){return null===a(e)[1]}}};function _(){}class S extends s.a.PureComponent{constructor(...e){super(...e),Object(r.a)(this,"state",{focusedItem:{sectionIndex:null,itemIndex:null},input:void 0,isCollapsed:!0,isFocused:!1,lastAction:null,valueBeforeUpDown:null}),Object(r.a)(this,"onInputFocus",e=>{this.setState({isFocused:!0,isCollapsed:!e})}),Object(r.a)(this,"onInputBlur",()=>{this.setState({isFocused:!1,focusedItem:{sectionIndex:null,itemIndex:null},valueBeforeUpDown:null,isCollapsed:!0})}),Object(r.a)(this,"onInputChange",(e,t)=>{this.setState({focusedItem:{sectionIndex:null,itemIndex:null},valueBeforeUpDown:null,isCollapsed:!e,lastAction:t})}),Object(r.a)(this,"updateFocusedSuggestion",(e,t)=>{const a=null===this.state.valueBeforeUpDown&&void 0!==t?t:this.state.valueBeforeUpDown;this.setState({focusedItem:e,valueBeforeUpDown:a})}),Object(r.a)(this,"revealSuggestions",()=>{this.setState({isCollapsed:!1})}),Object(r.a)(this,"closeSuggestions",e=>{this.setState({focusedItem:{sectionIndex:null,itemIndex:null},valueBeforeUpDown:null,isCollapsed:!0,lastAction:e})})}render(){const e=this.state,{input:t}=e,a=Object(i.a)(e,["input"]);return s.a.createElement(v,Object(n.a)(Object(n.a)(Object(n.a)({},this.props),a),{},{onInputBlur:this.onInputBlur,onInputChange:this.onInputChange,onInputFocus:this.onInputFocus,closeSuggestions:this.closeSuggestions,revealSuggestions:this.revealSuggestions,updateFocusedSuggestion:this.updateFocusedSuggestion}))}}Object(r.a)(S,"defaultProps",{focusInputOnSuggestionClick:!0,getSectionItems:()=>{throw new Error("`getSectionSuggestions` must be provided")},multiSection:!1,onNoSuggestionSelected:_,onSuggestionSelected:_,onSuggestionsUpdateRequested:_,renderItem:()=>{throw new Error("`renderItem` must be provided")},renderNoItems:()=>null,renderSectionTitle:()=>{throw new Error("`renderSectionTitle` must be provided")},shouldRenderNoSuggestions:e=>!1,shouldRenderSuggestions:e=>e&&e.trim().length>0})},2559:function(e,t,a){"use strict";a.d(t,"a",(function(){return A}));var n=a(2),i=a(3),r=a(109),o=a.n(r),s=a(224),l=a.n(s),c=a(9),u=a.n(c),d=a(149),h=a.n(d),p=a(0),m=a.n(p),g=a(5),f=a(143),b=a(13),v=a(14),y=a(240),_=(a(2512),a(98)),S=a.n(_),D=a(19);var C,E;function O(e){return(e+2)%4}function w(e,t){return Math.abs(e[t]-e[O(t)])}function j(e){return e===C.left||e===C.right}function I(e,t,a){if(void 0===a&&(a=e[t]),function(e){return e===C.left||e===C.top}(t)){if(a>e[O(t)])return!0}else if(a<e[O(t)])return!0;return!1}function N(e,t){return e-1e-6<t&&e+1e-6>t}function k(e){return e+1>e}function T(e){if(e[C.left]>e[C.right]){const t=e[C.left];e[C.left]=e[C.right],e[C.right]=t}if(e[C.top]>e[C.bottom]){const t=e[C.top];e[C.top]=e[C.bottom],e[C.bottom]=t}}function x(e,t,a,n,i){let r=w(e,C.left),o=w(e,C.top),s=0,l=0;r<a&&(s=a-r,r=a),o<n&&(l=n-o,o=n);const c=[0,0,0,0],u=[0,0,0,0];i[C.left]<0?(c[C.left]=c[C.right]=e[C.right],u[C.left]=-r):(c[C.right]=c[C.left]=e[C.left],u[C.right]=r),i[C.top]<0?(c[C.top]=c[C.bottom]=e[C.bottom],u[C.top]=-o):(c[C.bottom]=c[C.top]=e[C.top],u[C.bottom]=o);const d=z(c,u,a,n,t,!0);e[0]=d[0],e[1]=d[1],e[2]=d[2],e[3]=d[3]}function z(e,t,a=0,n=0,i,r){if(e=S()(e),t=S()(t),w(e,C.left)-t[C.left]+t[C.right]>1.000001&&(e[C.left]=0,e[C.right]=1,t[C.left]=0,t[C.right]=0),w(e,C.top)-t[C.top]+t[C.bottom]>1.000001&&(e[C.top]=0,e[C.bottom]=1,t[C.top]=0,t[C.bottom]=0),a=a||0,n=n||0,i?(a=Math.max(a,n*i),n=a/i,a>1&&(n/=a,a/=a),n>1&&(a/=n,n/=n)):(a=Math.min(a,1),n=Math.min(n,1)),N(t[C.right],t[C.left])&&N(t[C.bottom],t[C.top])&&(!N(t[C.left],0)||!N(t[C.top],0))){let a=t[C.right],n=t[C.bottom];e[C.left]+a<0&&(a=-e[C.left]),e[C.top]+n<0&&(n=-e[C.top]),e[C.right]+a>1&&(a=1-e[C.right]),e[C.bottom]+n>1&&(n=1-e[C.bottom]),e[C.left]+=a,e[C.right]+=a,e[C.top]+=n,e[C.bottom]+=n,t[0]=t[1]=t[2]=t[3]=0}if(T(e),!r){if(i){const r=w(e,C.left)/w(e,C.top);(w(e,C.left)!==w(e,C.top)||0!==w(e,C.top)||0===w(t,C.left)&&0===w(t,C.top))&&(N(r,i)||x(e,i,a,n,t))}(e[C.left]+1e-6<0||e[C.top]+1e-6<0||e[C.right]-1e-6>1||e[C.bottom]-1e-6>1)&&x(e,i,a,n,t)}const o=[!1,!1,!1,!1];let s=[!1,!1,!1,!1],l=!1;s.forEach((function(e,a){0!==t[a]&&(s[a]=!0,l=!0)})),l||(s=[!0,!0,!0,!0]);let c=0,u=0;for(let g=0;g<4;g++)if(t[g]){let e=Math.abs(t[g]);j(g)&&i&&(e/=i),e>u&&(c=g,u=e)}let d=c;for(let g=0;g<4;g++)p(d),d=(d+1)%4;function h(i,r,o){const l=j(i)?a:n,c=e[i];let u=0,d=1;const h=O(i);let p=e[h];t[h]&&!s[h]&&(p+=t[h]);let m=p-l,g=p+l;if(o){let a=c;t[i]&&s[i]&&(a+=t[i]),I(e,i,a)&&(a<p?d=m:u=g)}m>d&&(m=d),g<u&&(g=u);const f=c+r;if(u-1e-6<=f&&f<=m+1e-6)return r;if(g-1e-6<=f&&f<=d+1e-6)return r;let b=[];m>u&&b.push(m,u),g<d&&b.push(g,d),b.length<=0&&(b=[m,g]);let v=b[0];return b.forEach((function(e){Math.abs(e-f)<Math.abs(v-f)&&(v=e)})),r=v-e[i]}function p(a){if(o[a])throw new Error("Trying to applied side delta multiple times, if we allow this the code could run forever.");o[a]=!0;let n=t[a];if(0===n&&!s[a])return;if(t[a]=0,n=h(a,n),0===n)return;const r=e[a],l=r+n,c=e[O(a)];let u=function(e){if(e===C.left)return C.top;if(e===C.top)return C.left;if(e===C.right)return C.bottom;if(e===C.bottom)return C.right;throw new Error("Invalid iSide "+e)}(a),d=1;if(I(e,a,l)){const t=2*(c-r);e[a]+=t,n-=t,u=O(u)}else Math.abs(t[u])<Math.abs(t[O(u)])&&(u=O(u),d=-1);if(i&&s[a]){let e=j(a)?n/i:n*i;e*=d;const r=e,s=!!t[u];o[u]||(e-=m(u,e)*d),Math.abs(e)>1e-6&&!s&&(u=O(u),o[u]||(e-=-m(u,-e)*d)),Math.abs(e)>1e-6&&(n=j(a)?(r-e)*i:(r-e)/i)}e[a]+=n}function m(e,a){let n=t[e];s[e]&&(n=0);const i=h(e,a+n,!0);return i!==n||o[e]?(t[e]=i,s[e]=!1,i-n):0}return T(e),function(e){Object(D.a)(w(e,C.left)<1.000001,"Width of rect is too large to shift it in bounds "+JSON.stringify(e)),Object(D.a)(w(e,C.top)<1.000001,"Height of rect is too large to shift it in bounds "+JSON.stringify(e));let t=0;e[C.left]<0&&(t=-e[C.left]),e[C.right]>1&&(t=1-e[C.right]);let a=0;e[C.top]<0&&(a=-e[C.top]),e[C.bottom]>1&&(a=1-e[C.bottom]),e[C.left]+=t,e[C.right]+=t,e[C.top]+=a,e[C.bottom]+=a}(e),r||(w(e,C.left)<a||w(e,C.top)<n)&&x(e,i,a,n,t),e}function P(e){return[e.left,e.top,e.right,e.bottom]}function F(e){return{left:e[E.left],top:e[E.top],right:e[E.right],bottom:e[E.bottom]}}!function(e){e[e.left=0]="left",e[e.top=1]="top",e[e.right=2]="right",e[e.bottom=3]="bottom"}(C||(C={})),function(e){e[e.left=0]="left",e[e.top=1]="top",e[e.right=2]="right",e[e.bottom=3]="bottom"}(E||(E={}));class M extends m.a.Component{constructor(...e){super(...e),Object(i.a)(this,"state",{dragPositions:[],requestedImageInfos:{}}),Object(i.a)(this,"focused",void 0),Object(i.a)(this,"dragBaseRect",null),Object(i.a)(this,"relative",void 0),Object(i.a)(this,"selectArea",void 0),Object(i.a)(this,"rect",void 0),Object(i.a)(this,"dragUpIdentifiers",[]),Object(i.a)(this,"nextIdentifier",0),Object(i.a)(this,"selectStartMousePos",null),Object(i.a)(this,"handleHolder",void 0),Object(i.a)(this,"getMouseCoords",e=>{const{rect:t}=this;return{identifier:"identifier"in e&&void 0!==e.identifier?e.identifier:"mouse",x:e.clientX-t.left,y:e.clientY-t.top}}),Object(i.a)(this,"mouseDown",(e,t,a,i)=>{this.rect=this.handleHolder.getBoundingClientRect();const r=this.getMouseCoords(e),o=Object(n.a)({sides:t},r);this.dragDown([o],a,i)}),Object(i.a)(this,"mouseMove",e=>{if(0===this.state.dragPositions.length)return;const t=this.getMouseCoords(e);this.dragMove([t])}),Object(i.a)(this,"mouseUp",()=>{this.dragUp(["mouse"])}),Object(i.a)(this,"touchStart",(e,t)=>{this.rect=this.handleHolder.getBoundingClientRect();const a=this.getMouseCoords(e),i=Object(n.a)({sides:t},a);this.dragDown([i])}),Object(i.a)(this,"touchMove",e=>{if(!this.rect)return;const t=Array.from(e.changedTouches);this.dragMove(t.map(this.getMouseCoords)),e.preventDefault()}),Object(i.a)(this,"touchEnd",e=>{const t=Array.from(e.changedTouches);this.dragUp(t.map(e=>e.identifier))}),Object(i.a)(this,"dragDown",(e,t,a)=>{0===this.state.dragPositions.length&&(this.dragBaseRect=P(this.state.crop));const n=[];for(const i of e){i.lastX=i.x,i.lastY=i.y;let e=!1;const t=[];for(const a of this.state.dragPositions){const n=i.sides.filter(e=>a.sides.indexOf(e)>=0);if(n.length>0){if(!(this.dragUpIdentifiers.indexOf(a.identifier)>=0)){e=!0;break}if(t.push(a.identifier),n.indexOf(E.left)||n.indexOf(E.right)){const e=a.lastX-a.x;i.x-=e}if(n.indexOf(E.top)||n.indexOf(E.bottom)){const e=a.lastY-a.y;i.y-=e}}}e||(this.dragUpIdentifiers=this.dragUpIdentifiers.filter(e=>t.indexOf(e)<0),this.state.dragPositions=this.state.dragPositions.filter(e=>t.indexOf(e.identifier)<0),n.push(i))}if(0!==(e=n).length){for(const t of e){const e=o()(t);this.state.dragPositions.push(e)}for(const t of e)t.x=t.lastX,t.y=t.lastY;this.relative=t,this.selectArea=a,this.dragMove(e),this.setState({dragPositions:this.state.dragPositions})}}),Object(i.a)(this,"dragMove",e=>{const{width:t,height:a}=this.rect;let n=!1;const i=[0,0,0,0];for(const r of this.state.dragPositions){const o=e.filter(e=>e.identifier===r.identifier)[0];let s;o?(n=!0,s=o):s={x:r.lastX,y:r.lastY};let l=r.sides;this.selectArea&&(l=[],l.push(s.x<r.x?E.left:E.right),l.push(s.y<r.y?E.top:E.bottom));const c=(s.x-r.x)/t,u=(s.y-r.y)/a;l.forEach(e=>{const t=e===E.left||e===E.right;i[e]+=t?c:u}),this.relative&&(r.x=s.x,r.y=s.y),r.lastX=s.x,r.lastY=s.y}n&&this.setCrop(this.relative?this.state.crop:F(this.dragBaseRect),i)}),Object(i.a)(this,"dragUp",e=>{for(const a of e)this.dragUpIdentifiers.push(a);0===this.state.dragPositions.filter(e=>this.dragUpIdentifiers.indexOf(e.identifier)<0).length&&(this.dragUpIdentifiers=[],this.state.dragPositions=[],this.setState({dragPositions:this.state.dragPositions}));const t={};for(const a of e)t[a]="internal_id_"+this.nextIdentifier++;this.dragUpIdentifiers=this.dragUpIdentifiers.map(e=>t[e]||e),this.state.dragPositions.forEach(e=>{e.identifier=t[e.identifier]||e.identifier})}),Object(i.a)(this,"touchClosestStart",(e,t)=>{this.rect=this.handleHolder.getBoundingClientRect();const a=Array.from(e.touches);if(1===a.length){const e=this.getMouseCoords(a[0]);if(t)this.dragDown([Object(n.a)({sides:[E.left,E.top,E.right,E.bottom]},e)],!0);else{const{width:t,height:a}=this.rect,i=e.x/t,r=e.y/a;this.state.crop={left:i,top:r,right:i,bottom:r},this.dragDown([Object(n.a)({sides:[E.left,E.top]},e)],!1,!0)}}else if(2===a.length){const e=a.map(this.getMouseCoords),t=e[0],i=e[1],r=[],o=[];t.x<i.x?(r.push(E.left),o.push(E.right)):(r.push(E.right),o.push(E.left)),t.y<i.y?(r.push(E.top),o.push(E.bottom)):(r.push(E.bottom),o.push(E.top));const s=Object(n.a)({sides:r},t),l=Object(n.a)({sides:o},i),{width:c,height:u}=this.rect,d=s.x/c,h=s.y/u,p=l.x/c,m=l.y/u;this.state.crop={bottom:Math.min(h,m),left:Math.min(d,p),right:Math.max(d,p),top:Math.max(h,m)},this.state.dragPositions=[],this.dragDown([s,l])}}),Object(i.a)(this,"resetCrop",()=>{this.setCrop(this.state.crop,[-1,-1,2,2])}),Object(i.a)(this,"scroll",e=>{if(!this.focused)return;e.preventDefault();const t=e.deltaX,a=e.deltaY,n=Math.abs(t)>Math.abs(a)?t:a;let i=1;e.shiftKey&&(i*=4),e.ctrlKey&&(i*=.25);const r=Math.pow(1.1,n*i/100),o=P(this.state.crop),s=o[E.bottom]-o[E.top],l=(o[E.right]-o[E.left])*(1-r),c=s*(1-r),u=[-l/2,-c/2,+l/2,+c/2];this.setCrop(this.state.crop,u)}),Object(i.a)(this,"handleKeyDown",e=>{let t=0,a=0,n=.002;switch(e.key){case"ArrowUp":a=-1;break;case"ArrowDown":a=1;break;case"ArrowLeft":t=-1;break;case"ArrowRight":t=1}e.altKey&&(n=.01),e.shiftKey&&(n=.05),t*=n,a*=n,e.preventDefault(),0===t&&0===a||this.setCrop(this.state.crop,[t,a,t,a])}),Object(i.a)(this,"handleMouseUp",e=>{if(this.selectStartMousePos){const t=this.getMouseCoords(e),a=t.x-this.selectStartMousePos.x,n=t.y-this.selectStartMousePos.y;Math.sqrt(a*a+n*n)<3&&this.resetCrop(),this.selectStartMousePos=null}}),Object(i.a)(this,"handleMouseDown",e=>{this.rect=this.handleHolder.getBoundingClientRect();const t=this.getMouseCoords(e);this.selectStartMousePos=t;const{width:a,height:n}=this.rect,i=t.x/a,r=t.y/n;this.state.crop={left:i,top:r,right:i,bottom:r},this.mouseDown(e,[E.left,E.top],!1,!0)}),Object(i.a)(this,"renderDragHandle",(e,t,a,n,i,r,o)=>{const s={left:a,top:n};return i&&(s.width=i),r&&(s.height=r),m.a.createElement("div",{className:"CropImage-handle CropImage-"+e,style:s,onMouseDown:e=>this.mouseDown(e,t,o),onTouchStart:e=>{o?this.touchClosestStart(e,!0):this.touchStart(e.changedTouches[0],t)}})})}UNSAFE_componentWillMount(){("imageId"===this.props.imageType&&this.props.image||"imageUrl"===this.props.imageType)&&(this.setCrop(F(this.props.imagePlacementInfo.crop||[0,0,1,1])),this.props.exposeGetCrop(()=>P(this.state.crop))),this.props.exposeResetCrop&&this.props.exposeResetCrop(this.resetCrop)}componentDidMount(){document.addEventListener("mousemove",this.mouseMove),document.addEventListener("mouseup",this.mouseUp),document.addEventListener("touchmove",this.touchMove,h.a.passiveeventlisteners?{passive:!1}:void 0),document.addEventListener("touchend",this.touchEnd),document.addEventListener("touchcancel",this.touchEnd)}componentWillUnmount(){document.removeEventListener("mousemove",this.mouseMove),document.removeEventListener("mouseup",this.mouseUp),document.removeEventListener("touchmove",this.touchMove),document.removeEventListener("touchend",this.touchEnd),document.removeEventListener("touchcancel",this.touchEnd)}UNSAFE_componentWillReceiveProps(e){l()(e.imagePlacementInfo.crop,this.props.imagePlacementInfo.crop)||this.setCrop(F(e.imagePlacementInfo.crop||[0,0,1,1]))}getConstrainedComponentSize(){const{constrainToBounds:e,image:t,imageType:a,imageUrl:n}=this.props;if(!e)return null;const i="imageId"===a?t.width/t.height:n.width/n.height;let r=0,o=0;return i>=e[0]/e[1]?(r=e[0],o=e[0]/i):(o=e[1],r=e[1]*i),{width:r,height:o}}getConstraints(){return(this.props.imagePlacementInfo||{}).constraints||{}}getPadRect(){const{image:e,imageType:t,imageUrl:a}=this.props,n=this.getConstraints(),i=n.padMode,r=n.maxPadFraction||0,o=n.aspectRatioPx||0;let s=n.minWidthPx||0,l=n.minHeightPx||0;if(!i)return[0,0,0,0];let c=0,u=0;return i.padToFixAspectRatio&&i.padToFixMinSize&&o&&(s&&(l=Math.max(l||0,s/o)),l&&(s=Math.max(s||0,l*o))),i.padToFixAspectRatio||i.padToFixMinSize?(i.padToFixAspectRatio&&function(){if(o){const n="imageId"===t?e.width/e.height:a.width/a.height;Math.round(100*n)!==Math.round(100*o)&&(n<o?c=Math.max(c,(o-n)/n):u=Math.max(u,(1/o-1/n)*n))}}(),i.padToFixMinSize&&function(){if(s){const n="imageId"===t?e.width:a.width;n<s&&(c=Math.max(c,s/n-1))}if(l){const n="imageId"===t?e.height:a.height;n<l&&(u=Math.max(u,l/n-1))}}(),c>r&&(c=r),u>r&&(u=r),[c/2,u/2,c/2,u/2]):[0,0,0,0]}getImageUrl(){const{image:e,imageType:t,imageUrl:a,zUrl:i}=this.props;let r={[v.a.RlvBackgroundPattern]:"checker"};if("imageId"===t&&(r=Object(n.a)(Object(n.a)({},r),{},{id:e.id})),this.props.noImageMaximum)if(this.props.constrainToBounds){const e=this.getConstrainedComponentSize();r[v.a.RlvMaxDim]=Math.round(Math.max(e.width,e.height))+""}else r[v.a.RlvMaxDim]="1080";else{const n="imageId"===t?e.width:a.width,i="imageId"===t?e.height:a.height;r[v.a.RlvMaxDim]=Math.round(Math.min(Math.max(n,i),500))+""}const o=this.getPadRect();if(o){const e=[0-o[E.left],0-o[E.top],1+o[E.right],1+o[E.bottom]];r[v.a.RlvViewCrop]=JSON.stringify(e)}return"imageId"===t?i("SRlvPag","svc/getimage",r):Object(b.c)(a.url,r)}getSizeWithPadding(){const{image:e,imageType:t,imageUrl:a}=this.props;let n="imageId"===t?e.width:a.width,i="imageId"===t?e.height:a.height;const r=this.getPadRect();if(r){n*=r[E.left]+r[E.right]+1;i*=r[E.top]+r[E.bottom]+1}return{width:n,height:i}}setCrop(e,t=[0,0,0,0]){let a=P(e);const n=this.getConstraints(),{width:i,height:r}=this.getSizeWithPadding();let o=(n.minWidthPx||0)/i,s=(n.minHeightPx||0)/r;o=Math.max(o,this.props.minWidthFrac||0),s=Math.max(s,this.props.minHeightFrac||0),a=function(e,t,a,n,i,r){let o;i&&(o=i/r),N((e=z(e,t,a,n,o))[C.left],0)&&(e[C.left]=0),N(e[C.top],0)&&(e[C.top]=0),N(e[C.right],1)&&(e[C.right]=1),N(e[C.bottom],1)&&(e[C.bottom]=1);const s=w(e,C.left)/w(e,C.top);return k(s),o&&N(o,s),e.forEach((function(e){k(e)})),e}(a,t,o,s,n.aspectRatioPx,i/r),e=F(a),this.state.crop=e,this.setState({crop:e})}render(){const{image:e,imageType:t}=this.props;if("imageId"===t&&!e){const{imageId:e}=this.props,{requestedImageInfos:t}=this.state;return e in t||(t[e]={},this.props.onRequestImageInfo(()=>{this.setCrop(F(this.props.imagePlacementInfo.crop||[0,0,1,1])),this.props.exposeGetCrop(()=>P(this.state.crop))})),null}const{crop:a}=this.state,i=this.getConstrainedComponentSize(),r=i?{width:i.width,height:i.height}:{};let o=!0,s="0%",l="0%",c="100%",d="100%",h="100%",p="100%";null!=a&&(s=100*a.left+"%",l=100*a.top+"%",c=100*a.right+"%",d=100*a.bottom+"%",h=100*(a.right-a.left)+"%",p=100*(a.bottom-a.top)+"%",o=0===a.left&&0===a.top&&1===a.right&&1===a.bottom);const g=[];this.state.dragPositions.forEach(e=>{let t=e.sides;this.selectArea&&(t=[],t.push(e.x>e.lastX?E.left:E.right),t.push(e.y>e.lastY?E.top:E.bottom)),t.forEach(e=>g.push(e))});const b=u()("CropImage",this.props.className,{"CropImage--allSelected":o,"CropImage--constrainToBounds":!!this.props.constrainToBounds},g.map(e=>"CropImage-"+E[e]+"--dragging").join(" "));return m.a.createElement(f.b,{allowTouchMove:!0},m.a.createElement("div",{className:b,style:Object(n.a)(Object(n.a)({},r),this.props.style)},m.a.createElement("div",{className:"CropImage-resizePad",ref:e=>this.handleHolder=e,tabIndex:1,onFocus:()=>this.focused=!0,onBlur:()=>this.focused=!1,onWheel:this.scroll,onKeyDown:this.handleKeyDown,onMouseUp:this.handleMouseUp},m.a.createElement("img",{className:"CropImage-image",src:this.getImageUrl()}),this.renderDragHandle("topHandle",[E.top],s,l,h),this.renderDragHandle("bottomHandle",[E.bottom],s,d,h),this.renderDragHandle("leftHandle",[E.left],s,l,null,p),this.renderDragHandle("rightHandle",[E.right],c,l,null,p),this.renderDragHandle("topLeftHandle",[E.left,E.top],s,l),this.renderDragHandle("topRightHandle",[E.right,E.top],c,l),this.renderDragHandle("bottomLeftHandle",[E.left,E.bottom],s,d),this.renderDragHandle("bottomRightHandle",[E.right,E.bottom],c,d),this.renderDragHandle("selectedArea",[E.left,E.top,E.right,E.bottom],s,l,h,p,!0),m.a.createElement("div",{className:"CropImage-culledAreaHolder"},m.a.createElement("div",{className:"CropImage-culledArea",style:{top:l,left:s,width:h,height:p}})),m.a.createElement("div",{className:"CropImage-handle CropImage-selectableArea",onMouseDown:this.handleMouseDown,onTouchStart:this.touchClosestStart}))))}}Object(i.a)(M,"defaultProps",{exposeGetCrop:()=>{},imagePlacementInfo:{},imageType:"imageId"});const A=Object(g.b)((e,t)=>({image:t.imageId?e.entities.images[t.imageId]:null,zUrl:Object(v.d)(e)}),(e,t)=>({onRequestImageInfo:a=>{t.imageId&&e(y.b.getImageInfo({id:t.imageId,callback:a}))}}))(M)},262:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(2),i=a(15),r=a(206),o=a.n(r),s=a(0),l=a.n(s),c=a(10),u=(a(501),a(3)),d=a(9),h=a.n(d);a(502);class p extends l.a.PureComponent{constructor(...e){super(...e),Object(u.a)(this,"handleClick",()=>{this.props.onClick&&!this.props.selected&&this.props.onClick(this.props.index)})}render(){return l.a.createElement("div",{className:h()("CarouselDot",{"CarouselDot--clickable":this.props.onClick&&!this.props.selected,"CarouselDot--selected":this.props.selected}),onClick:this.handleClick})}}var m=a(231);const g=Object(c.a)("Carousel"),f=e=>{let{children:t,compressDots:a,index:r,numItems:c,onIndexChange:u,overlayDots:d,paginatorClassName:h,showDots:f}=e,b=Object(i.a)(e,["children","compressDots","index","numItems","onIndexChange","overlayDots","paginatorClassName","showDots"]);const v=Object(s.useCallback)(()=>{u(r-1)},[r,u]),y=Object(s.useCallback)(()=>{u(r+1)},[r,u]),_=void 0!==b.enableSwiping&&b.enableSwiping,S=c||l.a.Children.count(t),D=S<=1||(b.arrowVisibility,0)?"hide":b.arrowVisibility,C=g("&","&--"+b.orientation,{"&-overlayDots":d});let E,O="0";return r>=0&&(O=100*r+"%"),f&&S>1&&(E=l.a.createElement("div",{className:g("&-dots")},a&&S>3?[l.a.createElement(p,{key:0,index:0,selected:0===r,onClick:u}),l.a.createElement(p,{key:1,index:1,selected:0<r&&r<S-1}),l.a.createElement(p,{key:S-1,index:S-1,selected:r===S-1,onClick:u})]:o()(S,e=>l.a.createElement(p,{key:e,index:e,selected:e===r,onClick:u})))),l.a.createElement("div",{className:C},"vertical"===b.orientation?E:null,l.a.createElement(m.a,Object(n.a)(Object(n.a)({},b),{},{arrowVisibility:D,className:h,disableNext:b.disableNext||S<=1,disablePrev:b.disablePrev||S<=1,enableSwiping:_&&S>1,onScrollNext:y,onScrollPrev:v,scrollPxOrPercent:O}),l.a.createElement("ul",{className:g("&-content")},l.a.Children.map(t,e=>l.a.createElement("li",{className:g("&-listItem")},e)))),"horizontal"===b.orientation?E:null)},b=Object(n.a)(Object(n.a)({},m.b),{},{index:0,onIndexChange:e=>{},overlayDots:!1,showDots:!1});f.defaultProps=b;t.b=f},2635:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(0),i=a.n(n),r=a(5),o=a(275),s=a(16),l=a(29),c=a(137),u=a(10),d=a(59),h=a(7),p=a(8),m=a(14),g=a(13),f=a(37),b=a(25);a(2636);const v=Object(u.a)("StitchPricing"),y=Object(r.b)((e,t)=>{const a=Object(b.b)(e,t.designStateKey),n=Object(f.d)(e,a.productStateKey);return{digitizingPricing:Object(o.b)(n.pricing.digitizingPrices,a.design),zString:Object(p.a)(e),zUrl:Object(m.b)(e)}})(e=>{const{digitizingPricing:t,zString:a,zUrl:r}=e,[o,u]=Object(n.useState)(!1);return t.totalPrice?i.a.createElement("div",{className:v("&",e.className)},Object(d.a)(t.totalPrice)," ",i.a.createElement(l.a,{className:v("&-feeLink",e.linkClassName),onClick:()=>u(!o)},a("zi_create_Z4_DesignSpace_StitchConversionFee")),o&&i.a.createElement(c.a,{className:v("&-palette"),onRequestClose:()=>u(!1)},t.digitizations.map(e=>{const t=Object(g.c)(Object(h.a)().staticRealviewGetImageBase,{action:"getImage",id:e.designObject.imageid,max_dim:50,square_it:"fill"});return i.a.createElement("div",{key:`${e.designObject.area}_${e.designObject.name}`,className:v("&-conversionRow")},i.a.createElement("img",{alt:e.designObject.title,className:v("&-image"),src:t}),i.a.createElement("div",{className:v("&-copy")},i.a.createElement("strong",null,a("zi_publish_OnetimeConversionFee")),": ",Object(d.a)(e.price),i.a.createElement("br",null),i.a.createElement("strong",null,a("zi_create_Z3_DesignTool_Size")),": ",e.designObject.physwidth.toFixed(2),'" x ',e.designObject.physheight.toFixed(2),'"',i.a.createElement("br",null),i.a.createElement("strong",null,a("zi_create_design_colors")),": ",a("zi_create_DesignInspector_ConversionInfoColorsValue")))}),i.a.createElement(s.a,{className:v("&-moreInfoLink"),href:r("GetFAQAnsUrl","images_conversion_fee"),target:"_blank"},a("zi_product_ProductOptions_DefaultHelpLabel"),"â€¦"))):null})},2636:function(e,t,a){},2637:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(99),i=a.n(n),r=a(9),o=a.n(r),s=a(0),l=a.n(s),c=a(92),u=a(138),d=a(8),h=a(93),p=a(29),m=a(165),g=a(6),f=a(2638),b=a.n(f);const v=e=>{const{autoFocus:t,className:a,isSubmitting:n}=e,r=Object(d.e)(),[f,v]=Object(s.useState)([""]),[y,_]=Object(s.useState)([!1]),S=Object(s.useRef)();Object(s.useEffect)(()=>{t&&S.current&&S.current.focus()},[]);const D=Object(s.useCallback)((e,t)=>{const a=[...f];a[e]=t,0===a.filter(e=>!e).length&&(a.push(""),_([...y,!1])),v(a)},[f,y]),C=Object(s.useCallback)(e=>{let t=[...f],a=[...y];t.splice(e,1),a.splice(e,1),v(t),_(a)},[f,y]),E=Object(s.useCallback)(()=>{let e=!1,t=!1;const a=[];return f.forEach(n=>{n?(e=!0,u.b.test(n)?a.push(!1):(t=!0,a.push(!0))):a.push(!1)}),_(a),e&&!t},[f]),O=Object(s.useCallback)(t=>{if(t.preventDefault(),E()){const t=i()(f.filter(e=>!!e));e.onSubmit(t),v([""]),_([!1])}},[f,e.onSubmit]),w=0===f.filter(e=>!!e).length;return l.a.createElement("div",{className:a},l.a.createElement("form",{onSubmit:O},f.map((e,t)=>{const a=y[t];return l.a.createElement("div",{key:t,className:b.a.inputContainer},l.a.createElement(c.a,{className:b.a.emailInput,type:"email",value:e,onChange:e=>{D(t,e)},placeholder:r("zi_create_Collab_InvitePalette_EmailPlaceholder"),showError:a,validationErrors:a?r("zi_myzazzle_Messaging_Create_EmailValidation"):void 0,inputRef:0===t?S:void 0}),l.a.createElement("div",{className:b.a.deleteButtonContainer},l.a.createElement(p.a,{className:o()(b.a.deleteButton,t===f.length-1&&b.a.deleteButton__hidden),onClick:()=>C(t)},l.a.createElement(g.a,{iconName:g.a.Icon.MobileClose}))))}),l.a.createElement(h.a,{color:"green",disabled:n||w,size:"medium",type:"submit"},r("zi_create_Collab_InvitePalette_Confirm"),n&&l.a.createElement(m.a,{className:b.a.loadingIcon,ringColor:"#c9c9c9",size:24}))))}},2638:function(e,t,a){e.exports={inputContainer:"InviteFriendsForm_inputContainer",emailInput:"InviteFriendsForm_emailInput",deleteButtonContainer:"InviteFriendsForm_deleteButtonContainer",deleteButton:"InviteFriendsForm_deleteButton",deleteButton__hidden:"InviteFriendsForm_deleteButton__hidden",loadingIcon:"InviteFriendsForm_loadingIcon"}},2639:function(e,t,a){},2640:function(e,t,a){var n=a(359);e.exports=function(e){return n(e).toUpperCase()}},2641:function(e,t,a){},2642:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(2),i=a(0),r=a(5),o=a(4),s=a(25),l=a(12);const c={departmentGroups:null,isLoading:!1,lastPageNum:1,pg:0,results:[]};function u(e,t){switch(t.type){case"Loading":return Object(n.a)(Object(n.a)({},e),{},{isLoading:t.isLoading});case"NewSearch":return Object(n.a)(Object(n.a)({},e),{},{bestGuessTerm:null,dp:t.dp,lastPageNum:1,noResultsType:null,pg:0,qs:t.qs,results:[]});case"Receive":const a=Object(n.a)(Object(n.a)({},e),{},{isLoading:!1,pg:t.pg}),{departmentGroups:i,searchResultsData:r}=t;return i&&(a.departmentGroups=i),r&&(a.bestGuessTerm=r.bestGuessTerm,a.lastPageNum=r.lastPageNum,a.noResultsType=r.noResultsType,a.results=[...e.results,...r.products]),a}}function d(e,t,a){var d;const h=Object(r.d)(),p=Object(r.e)(t=>Object(s.b)(t,e).settings.initialContentQuery),m=Object(n.a)(Object(n.a)({},c),{},{qs:p||""}),[g,f]=Object(i.useReducer)(u,m),[b,v]=Object(i.useState)(m.qs),y=Object(i.useRef)(!0);Object(i.useEffect)(()=>()=>{y.current=!1},[]),Object(i.useEffect)(()=>{p&&h(Object(l.Kc)(e,{initialContentQuery:void 0}))},[]);const _=Object(i.useCallback)(e=>{f({type:"NewSearch",dp:e,qs:""})},[]),S=Object(i.useCallback)(()=>{v(g.qs),f({type:"NewSearch",dp:void 0,qs:g.qs})},[g.qs]),D=Object(i.useCallback)(e=>{f({type:"NewSearch",dp:g.dp,qs:e})},[g.dp]),C=!g.dp&&!g.qs;return{addDepartmentFilter:_,departmentName:g.dp&&(null===(d=g.departmentGroups)||void 0===d?void 0:d.find(e=>e.departmentId===g.dp).name),isRootSearch:C,nextPage:async function(){const e=Object(n.a)(Object(n.a)({type:t,ps:30},a),{},{dp:g.dp,pg:g.pg+1,qs:g.qs});let i;f({type:"Loading",isLoading:!0});try{i=await Object(o.c)("/svc/z3/designcontent/search",e,{enableCsrf:!1})}catch(r){y.current&&f({type:"Receive",pg:e.pg,searchResultsData:{lastPageNum:e.pg,products:[]}})}y.current&&i&&i.success&&f({type:"Receive",departmentGroups:i.data.departmentGroups,pg:e.pg,searchResultsData:i.data.searchResultsData})},onSearch:D,removeDepartmentFilter:S,searchState:g,setTentativeQuery:v,tentativeQuery:b}}},2643:function(e,t,a){},2644:function(e,t,a){},2645:function(e,t,a){},2646:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(2),i=a(2507),r=a.n(i),o=a(0),s=a.n(o),l=a(180),c=a(242),u=a(6),d=a(10),h=a(28),p=a(4),m=a(8),g=a(19),f=a(2557);a(2647);const b={background:"Element",element:"Element",image:"Image",marketplace:"Marketplace",product:"CYOPO",template:"Digital",text:"Element"},v=Object(d.a)("Z4DSSearchInput"),y=s.a.memo(e=>{const t=Object(h.c)(),a=Object(m.e)(),[i,d]=Object(o.useState)([]),[y,_]=Object(o.useState)(!0),S=Object(o.useRef)(null),D=Object(l.a)(Object(n.a)(Object(n.a)({},e.inputProps),{},{onChange:e.onChange,placeholder:e.placeholder,value:e.value})),C=Object(o.useCallback)((t,a)=>{e.doSearch(a.suggestion.term),S.current.blur()},[e.doSearch]),E=Object(o.useCallback)(()=>{e.doSearch(e.value),S.current.blur()},[e.doSearch,e.value]),O=Object(o.useCallback)((t,a)=>{let{departmentId:n}=e;n||("background"===e.type?n="252240232999638110":"text"===e.type&&(n="252172150995905847"));const i={dp:n,ps:5,skey:t,type:b[e.type]};Object(p.c)("/svc/z3/search/getSuggestedSearch",i,{enableCsrf:!1}).then(e=>{if(null!=e.error){a([{section:null,sectionDisplayName:null,suggestions:[]}])}else a(e.data.sections)})},[e.type]),w=Object(c.a)(e=>{O(e,e=>{if(e){const t=e&&(e.length>1||1===e.length&&"quicklinks"===e[0].section);_(t),d(t?e:e[0].suggestions)}})},t("Int32","www","Search.VisualSearchSuggestions.GetSuggestionWaitMS",300)),j=Object(o.useCallback)(t=>{const a=r()(e.value),n=/\s/.test(t.term),i=new RegExp(a,"i"),o=t.term.search(i),l=new RegExp("(\\s)+"+a,"i"),c=t.term.search(l)+1;let u;return u=!n&&o>=0||n&&0===o?[t.term.substr(0,o),s.a.createElement("span",{key:"0",className:v("&-normal")},t.term.substr(o,e.value.length)),t.term.substr(o+e.value.length,t.term.length)]:n&&c>0?[t.term.substr(0,c),s.a.createElement("span",{key:"0",className:v("&-normal")},t.term.substr(c,e.value.length)),t.term.substr(c+e.value.length,t.term.length)]:t.term,s.a.createElement("span",null,u," ",t.postSuffix)},[e.value]),I=Object(o.useCallback)(e=>e.term,[]),N=Object(o.useCallback)(()=>!1,[]);return s.a.createElement("form",{className:v("&",e.className),action:"",onSubmit:g.f},s.a.createElement(f.a,{focusInputOnSuggestionClick:!1,getSuggestionValue:I,inputProps:D,inputRef:S,multiSection:y,onNoSuggestionSelected:E,onSuggestionSelected:C,onSuggestionsUpdateRequested:w,renderItem:j,shouldRenderNoSuggestions:N,suggestions:i}),s.a.createElement("button",{className:v("&-searchButton"),onClick:e.value?E:void 0,type:"button"},s.a.createElement(u.a,{iconName:u.a.Icon.Search,title:a("zi_common_Application_Search")})),e.value&&s.a.createElement("button",{className:v("&-cancelButton"),onClick:()=>{e.doSearch(""),e.onChange(""),S.current.focus()},type:"button"},s.a.createElement(u.a,{iconName:u.a.Icon.MultiplyLight})))})},2647:function(e,t,a){},2648:function(e,t,a){var n=a(447),i=a(164),r=a(205),o=i((function(e,t){return r(e)?n(e,t):[]}));e.exports=o},2649:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2518),i=a(2654),r=a(2655),o=a(2656),s=a(2657),l=a(2658),c=a(2659),u=a(2522),d=a(2523),h=a(2524),p=a(2660),m=a(2661),g=a(2662),f=a(2663),b=a(2525),v=a(2664),y=a(2665),_=a(2666),S=a(2667),D=a(2668),C=a(2669),E=a(2670),O=a(2671),w=a(2672),j=a(2673),I=a(2674),N=a(2675),k=a(2676),T=a(2677),x=a(2678),z=a(2679),P=a(2680),F=a(2681),M=a(2682),A=a(2683),R=a(2684),B=a(2685);t.Konva=n.Konva.Util._assign(n.Konva,{Arc:i.Arc,Arrow:r.Arrow,Circle:o.Circle,Ellipse:s.Ellipse,Image:l.Image,Label:c.Label,Tag:c.Tag,Line:u.Line,Path:d.Path,Rect:h.Rect,RegularPolygon:p.RegularPolygon,Ring:m.Ring,Sprite:g.Sprite,Star:f.Star,Text:b.Text,TextPath:v.TextPath,Transformer:y.Transformer,Wedge:_.Wedge,Filters:{Blur:S.Blur,Brighten:D.Brighten,Contrast:C.Contrast,Emboss:E.Emboss,Enhance:O.Enhance,Grayscale:w.Grayscale,HSL:j.HSL,HSV:I.HSV,Invert:N.Invert,Kaleidoscope:k.Kaleidoscope,Mask:T.Mask,Noise:x.Noise,Pixelate:z.Pixelate,Posterize:P.Posterize,RGB:F.RGB,RGBA:M.RGBA,Sepia:A.Sepia,Solarize:R.Solarize,Threshold:B.Threshold}})},2650:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2405),l=a(2344),c=a(2415),u=a(2430),d=a(2344),h=a(2520),p=["mouseenter","mousedown","mousemove","mouseup","mouseout","touchstart","touchmove","touchend","mouseover","wheel","contextmenu","pointerdown","pointermove","pointerup","pointercancel","lostpointercapture"],m=p.length;function g(e,t){e.content.addEventListener(t,(function(a){e["_"+t](a)}),!1)}function f(e){return void 0===e&&(e={}),(e.clipFunc||e.clipWidth||e.clipHeight)&&r.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}t.stages=[];var b=function(e){function a(a){var n=e.call(this,f(a))||this;return n._buildDOM(),n._bindContentEvents(),t.stages.push(n),n.on("widthChange.konva heightChange.konva",n._resizeDOM),n.on("visibleChange.konva",n._checkVisibility),n.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",(function(){f(n.attrs)})),n._checkVisibility(),n}return i(a,e),a.prototype._validateAdd=function(e){var t="Layer"===e.getType(),a="FastLayer"===e.getType();t||a||r.Util.throw("You may only add layers to the stage.")},a.prototype._checkVisibility=function(){var e=this.visible()?"":"none";this.content.style.display=e},a.prototype.setContainer=function(e){if("string"==typeof e){if("."===e.charAt(0)){var t=e.slice(1);e=document.getElementsByClassName(t)[0]}else{var a;a="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(a)}if(!e)throw"Can not find container in document with id "+a}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this},a.prototype.shouldDrawHit=function(){return!0},a.prototype.clear=function(){var e,t=this.children,a=t.length;for(e=0;e<a;e++)t[e].clear();return this},a.prototype.clone=function(e){return e||(e={}),e.container=document.createElement("div"),s.Container.prototype.clone.call(this,e)},a.prototype.destroy=function(){e.prototype.destroy.call(this);var a=this.content;a&&r.Util._isInDocument(a)&&this.container().removeChild(a);var n=t.stages.indexOf(this);return n>-1&&t.stages.splice(n,1),this},a.prototype.getPointerPosition=function(){return this.pointerPos||r.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),this.pointerPos},a.prototype.getStage=function(){return this},a.prototype.getContent=function(){return this.content},a.prototype._toKonvaCanvas=function(e){var t=(e=e||{}).x||0,a=e.y||0,n=new c.SceneCanvas({width:e.width||this.width(),height:e.height||this.height(),pixelRatio:e.pixelRatio||1}),i=n.getContext()._context,r=this.children;return(t||a)&&i.translate(-1*t,-1*a),r.each((function(n){if(n.isVisible()){var r=n._toKonvaCanvas(e);i.drawImage(r._canvas,t,a,r.getWidth()/r.getPixelRatio(),r.getHeight()/r.getPixelRatio())}})),n},a.prototype.getIntersection=function(e,t){var a,n,i=this.children;for(a=i.length-1;a>=0;a--)if(n=i[a].getIntersection(e,t))return n;return null},a.prototype._resizeDOM=function(){if(this.content){var e,t,a=this.width(),n=this.height(),i=this.getChildren(),r=i.length;for(this.content.style.width=a+"px",this.content.style.height=n+"px",this.bufferCanvas.setSize(a,n),this.bufferHitCanvas.setSize(a,n),e=0;e<r;e++)(t=i[e]).setSize({width:a,height:n}),t.draw()}},a.prototype.add=function(t){if(arguments.length>1){for(var a=0;a<arguments.length;a++)this.add(arguments[a]);return this}e.prototype.add.call(this,t);var n=this.children.length;return n>5&&r.Util.warn("The stage has "+n+" layers. Recommended maximin number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t._setCanvasSize(this.width(),this.height()),t.draw(),l.Konva.isBrowser&&this.content.appendChild(t.canvas._canvas),this},a.prototype.getParent=function(){return null},a.prototype.getLayer=function(){return null},a.prototype.hasPointerCapture=function(e){return h.hasPointerCapture(e,this)},a.prototype.setPointerCapture=function(e){h.setPointerCapture(e,this)},a.prototype.releaseCapture=function(e){h.releaseCapture(e,this)},a.prototype.getLayers=function(){return this.getChildren()},a.prototype._bindContentEvents=function(){if(l.Konva.isBrowser)for(var e=0;e<m;e++)g(this,p[e])},a.prototype._mouseenter=function(e){this.setPointersPositions(e),this._fire("mouseenter",{evt:e,target:this,currentTarget:this})},a.prototype._mouseover=function(e){this.setPointersPositions(e),this._fire("contentMouseover",{evt:e}),this._fire("mouseover",{evt:e,target:this,currentTarget:this})},a.prototype._mouseout=function(e){this.setPointersPositions(e);var t=this.targetShape;t&&!u.DD.isDragging?(t._fireAndBubble("mouseout",{evt:e}),t._fireAndBubble("mouseleave",{evt:e}),this.targetShape=null):u.DD.isDragging||(this._fire("mouseleave",{evt:e,target:this,currentTarget:this}),this._fire("mouseout",{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._fire("contentMouseout",{evt:e})},a.prototype._mousemove=function(e){if(l.Konva.UA.ieMobile)return this._touchmove(e);var t;if(this.setPointersPositions(e),!u.DD.isDragging){if((t=this.getIntersection(this.getPointerPosition()))&&t.isListening()){var a=!this.targetShape||this.targetShape!==t;!u.DD.isDragging&&a?(this.targetShape&&(this.targetShape._fireAndBubble("mouseout",{evt:e},t),this.targetShape._fireAndBubble("mouseleave",{evt:e},t)),t._fireAndBubble("mouseover",{evt:e},this.targetShape),t._fireAndBubble("mouseenter",{evt:e},this.targetShape),this.targetShape=t):t._fireAndBubble("mousemove",{evt:e})}else this.targetShape&&!u.DD.isDragging&&(this.targetShape._fireAndBubble("mouseout",{evt:e}),this.targetShape._fireAndBubble("mouseleave",{evt:e}),this._fire("mouseover",{evt:e,target:this,currentTarget:this}),this.targetShape=null),this._fire("mousemove",{evt:e,target:this,currentTarget:this});this._fire("contentMousemove",{evt:e})}e.cancelable&&e.preventDefault()},a.prototype._mousedown=function(e){if(l.Konva.UA.ieMobile)return this._touchstart(e);this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());l.Konva.listenClickTap=!0,t&&t.isListening()?(this.clickStartShape=t,t._fireAndBubble("mousedown",{evt:e})):this._fire("mousedown",{evt:e,target:this,currentTarget:this}),this._fire("contentMousedown",{evt:e})},a.prototype._mouseup=function(e){if(l.Konva.UA.ieMobile)return this._touchend(e);this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition()),a=this.clickStartShape,n=this.clickEndShape,i=!1;l.Konva.inDblClickWindow?(i=!0,clearTimeout(this.dblTimeout)):u.DD.justDragged?u.DD&&(u.DD.justDragged=!1):(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow),t&&t.isListening()?(this.clickEndShape=t,t._fireAndBubble("mouseup",{evt:e}),l.Konva.listenClickTap&&a&&a._id===t._id&&(t._fireAndBubble("click",{evt:e}),i&&n&&n===t&&t._fireAndBubble("dblclick",{evt:e}))):(this._fire("mouseup",{evt:e,target:this,currentTarget:this}),l.Konva.listenClickTap&&this._fire("click",{evt:e,target:this,currentTarget:this}),i&&this._fire("dblclick",{evt:e,target:this,currentTarget:this})),this._fire("contentMouseup",{evt:e}),l.Konva.listenClickTap&&(this._fire("contentClick",{evt:e}),i&&this._fire("contentDblclick",{evt:e})),l.Konva.listenClickTap=!1,e.cancelable&&e.preventDefault()},a.prototype._contextmenu=function(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble("contextmenu",{evt:e}):this._fire("contextmenu",{evt:e,target:this,currentTarget:this}),this._fire("contentContextmenu",{evt:e})},a.prototype._touchstart=function(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());l.Konva.listenClickTap=!0,t&&t.isListening()?(this.tapStartShape=t,t._fireAndBubble("touchstart",{evt:e}),t.isListening()&&t.preventDefault()&&e.cancelable&&e.preventDefault()):this._fire("touchstart",{evt:e,target:this,currentTarget:this}),this._fire("contentTouchstart",{evt:e})},a.prototype._touchend=function(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition()),a=this.clickEndShape,n=!1;l.Konva.inDblClickWindow?(n=!0,clearTimeout(this.dblTimeout)):(l.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout((function(){l.Konva.inDblClickWindow=!1}),l.Konva.dblClickWindow),t&&t.isListening()?(this.clickEndShape=t,t._fireAndBubble("touchend",{evt:e}),l.Konva.listenClickTap&&this.tapStartShape&&t._id===this.tapStartShape._id&&(t._fireAndBubble("tap",{evt:e}),n&&a&&a===t&&t._fireAndBubble("dbltap",{evt:e})),t.isListening()&&t.preventDefault()&&e.cancelable&&e.preventDefault()):(this._fire("touchend",{evt:e,target:this,currentTarget:this}),l.Konva.listenClickTap&&this._fire("tap",{evt:e,target:this,currentTarget:this}),n&&this._fire("dbltap",{evt:e,target:this,currentTarget:this})),this._fire("contentTouchend",{evt:e}),l.Konva.listenClickTap&&(this._fire("contentTap",{evt:e}),n&&this._fire("contentDbltap",{evt:e})),l.Konva.listenClickTap=!1},a.prototype._touchmove=function(e){var t;this.setPointersPositions(e),u.DD.isDragging||((t=this.getIntersection(this.getPointerPosition()))&&t.isListening()?(t._fireAndBubble("touchmove",{evt:e}),t.isListening()&&t.preventDefault()&&e.cancelable&&e.preventDefault()):this._fire("touchmove",{evt:e,target:this,currentTarget:this}),this._fire("contentTouchmove",{evt:e})),u.DD.isDragging&&u.DD.node.preventDefault()&&e.cancelable&&e.preventDefault()},a.prototype._wheel=function(e){this.setPointersPositions(e);var t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble("wheel",{evt:e}):this._fire("wheel",{evt:e,target:this,currentTarget:this}),this._fire("contentWheel",{evt:e})},a.prototype._pointerdown=function(e){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(e);var t=h.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble("pointerdown",h.createEvent(e))}},a.prototype._pointermove=function(e){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(e);var t=h.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble("pointermove",h.createEvent(e))}},a.prototype._pointerup=function(e){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(e);var t=h.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble("pointerup",h.createEvent(e)),h.releaseCapture(e.pointerId)}},a.prototype._pointercancel=function(e){if(l.Konva._pointerEventsEnabled){this.setPointersPositions(e);var t=h.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble("pointerup",h.createEvent(e)),h.releaseCapture(e.pointerId)}},a.prototype._lostpointercapture=function(e){h.releaseCapture(e.pointerId)},a.prototype.setPointersPositions=function(e){var t=this._getContentPosition(),a=null,n=null;if(void 0!==(e=e||window.event).touches){if(e.touches.length>0){var i=e.touches[0];a=i.clientX-t.left,n=i.clientY-t.top}}else a=e.clientX-t.left,n=e.clientY-t.top;null!==a&&null!==n&&(this.pointerPos={x:a,y:n})},a.prototype._setPointerPosition=function(e){r.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)},a.prototype._getContentPosition=function(){var e=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:e.top,left:e.left}},a.prototype._buildDOM=function(){if(this.bufferCanvas=new c.SceneCanvas,this.bufferHitCanvas=new c.HitCanvas({pixelRatio:1}),l.Konva.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}},a.prototype.cache=function(){return r.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},a.prototype.clearCache=function(){return this},a.prototype.batchDraw=function(){return this.children.each((function(e){e.batchDraw()})),this},a}(s.Container);t.Stage=b,b.prototype.nodeType="Stage",d._registerNode(b),o.Factory.addGetterSetter(b,"container")},2651:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2405),s=a(2342),l=a(2521),c=a(2415),u=a(2363),d=a(2345),h=a(2344),p=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],m=p.length,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hitCanvas=new c.HitCanvas({pixelRatio:1}),t}return i(t,e),t.prototype._setCanvasSize=function(e,t){this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._checkSmooth()},t.prototype._validateAdd=function(e){var t=e.getType();"Group"!==t&&"Shape"!==t&&r.Util.throw("You may only add groups and shapes to a layer.")},t.prototype.getIntersection=function(e,t){var a,n,i,r;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(var o=1,s=!1;;){for(n=0;n<m;n++){if(i=p[n],(r=(a=this._getIntersection({x:e.x+i.x*o,y:e.y+i.y*o})).shape)&&t)return r.findAncestor(t,!0);if(r)return r;if(s=!!a.antialiased,!a.antialiased)break}if(!s)return null;o+=1}},t.prototype._getIntersection=function(e){var t,a,n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,o=i[3];return 255===o?(t=r.Util._rgbToHex(i[0],i[1],i[2]),(a=u.shapes["#"+t])?{shape:a}:{antialiased:!0}):o>0?{antialiased:!0}:{}},t.prototype.drawScene=function(e,t){var a=this.getLayer(),n=e||a&&a.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&n.getContext().clear(),o.Container.prototype.drawScene.call(this,n,t),this._fire("draw",{node:this}),this},t.prototype.drawHit=function(e,t){var a=this.getLayer(),n=e||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),o.Container.prototype.drawHit.call(this,n,t),this},t.prototype.clear=function(e){return l.BaseLayer.prototype.clear.call(this,e),this.getHitCanvas().getContext().clear(e),this},t.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},t.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},t.prototype.toggleHitCanvas=function(){if(this.parent){var e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}},t.prototype.setSize=function(t){var a=t.width,n=t.height;return e.prototype.setSize.call(this,{width:a,height:n}),this.hitCanvas.setSize(a,n),this},t}(l.BaseLayer);t.Layer=g,g.prototype.nodeType="Layer",h._registerNode(g),s.Factory.addGetterSetter(g,"hitGraphEnabled",!0,d.getBooleanValidator()),r.Collection.mapMethods(g)},2652:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2405),s=a(2521),l=a(2344),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._validateAdd=function(e){"Shape"!==e.getType()&&r.Util.throw("You may only add shapes to a fast layer.")},t.prototype._setCanvasSize=function(e,t){this.canvas.setSize(e,t),this._checkSmooth()},t.prototype.hitGraphEnabled=function(){return!1},t.prototype.drawScene=function(e){var t=this.getLayer(),a=e||t&&t.getCanvas();return this.clearBeforeDraw()&&a.getContext().clear(),o.Container.prototype.drawScene.call(this,a),this},t.prototype.draw=function(){return this.drawScene(),this},t}(s.BaseLayer);t.FastLayer=c,c.prototype.nodeType="FastLayer",l._registerNode(c),r.Collection.mapMethods(c)},2653:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2347),i=a(2431),r=a(2358),o=a(2344),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},l=0,c=["fill","stroke","shadowColor"],u=function(){function e(e,t,a,n,i,r,o){this.prop=e,this.propFunc=t,this.begin=n,this._pos=n,this.duration=r,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=a,this._change=i-this.begin,this.pause()}return e.prototype.fire=function(e){var t=this[e];t&&t()},e.prototype.setTime=function(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())},e.prototype.getTime=function(){return this._time},e.prototype.setPosition=function(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e},e.prototype.getPosition=function(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)},e.prototype.play=function(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},e.prototype.reverse=function(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},e.prototype.seek=function(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")},e.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},e.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},e.prototype.update=function(){this.setPosition(this.getPosition(this._time))},e.prototype.onEnterFrame=function(){var e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)},e.prototype.pause=function(){this.state=1,this.fire("onPause")},e.prototype.getTimer=function(){return(new Date).getTime()},e}(),d=function(){function e(a){var r,c,d=this,h=a.node,p=h._id,m=a.easing||t.Easings.Linear,g=!!a.yoyo;r=void 0===a.duration?.3:0===a.duration?.001:a.duration,this.node=h,this._id=l++;var f=h.getLayer()||(h instanceof o.Konva.Stage?h.getLayers():null);for(c in f||n.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation((function(){d.tween.onEnterFrame()}),f),this.tween=new u(c,(function(e){d._tweenFunc(e)}),m,0,1,1e3*r,g),this._addListeners(),e.attrs[p]||(e.attrs[p]={}),e.attrs[p][this._id]||(e.attrs[p][this._id]={}),e.tweens[p]||(e.tweens[p]={}),a)void 0===s[c]&&this._addAttr(c,a[c]);this.reset(),this.onFinish=a.onFinish,this.onReset=a.onReset}return e.prototype._addAttr=function(t,a){var i,r,o,s,l,u,d,h,p=this.node,m=p._id;if((o=e.tweens[m][t])&&delete e.attrs[m][o][t],i=p.getAttr(t),n.Util._isArray(a))if(r=[],l=Math.max(a.length,i.length),"points"===t&&a.length!==i.length&&(a.length>i.length?(d=i,i=n.Util._prepareArrayForTween(i,a,p.closed())):(u=a,a=n.Util._prepareArrayForTween(a,i,p.closed()))),0===t.indexOf("fill"))for(s=0;s<l;s++)if(s%2==0)r.push(a[s]-i[s]);else{var g=n.Util.colorToRGBA(i[s]);h=n.Util.colorToRGBA(a[s]),i[s]=g,r.push({r:h.r-g.r,g:h.g-g.g,b:h.b-g.b,a:h.a-g.a})}else for(s=0;s<l;s++)r.push(a[s]-i[s]);else-1!==c.indexOf(t)?(i=n.Util.colorToRGBA(i),r={r:(h=n.Util.colorToRGBA(a)).r-i.r,g:h.g-i.g,b:h.b-i.b,a:h.a-i.a}):r=a-i;e.attrs[m][this._id][t]={start:i,diff:r,end:a,trueEnd:u,trueStart:d},e.tweens[m][t]=this._id},e.prototype._tweenFunc=function(t){var a,i,r,o,s,l,u,d,h=this.node,p=e.attrs[h._id][this._id];for(a in p){if(r=(i=p[a]).start,o=i.diff,d=i.end,n.Util._isArray(r))if(s=[],u=Math.max(r.length,d.length),0===a.indexOf("fill"))for(l=0;l<u;l++)l%2==0?s.push((r[l]||0)+o[l]*t):s.push("rgba("+Math.round(r[l].r+o[l].r*t)+","+Math.round(r[l].g+o[l].g*t)+","+Math.round(r[l].b+o[l].b*t)+","+(r[l].a+o[l].a*t)+")");else for(l=0;l<u;l++)s.push((r[l]||0)+o[l]*t);else s=-1!==c.indexOf(a)?"rgba("+Math.round(r.r+o.r*t)+","+Math.round(r.g+o.g*t)+","+Math.round(r.b+o.b*t)+","+(r.a+o.a*t)+")":r+o*t;h.setAttr(a,s)}},e.prototype._addListeners=function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){var a=t.node,n=e.attrs[a._id][t._id];n.points&&n.points.trueEnd&&a.setAttr("points",n.points.trueEnd),t.onFinish&&t.onFinish.call(t)},this.tween.onReset=function(){var a=t.node,n=e.attrs[a._id][t._id];n.points&&n.points.trueStart&&a.points(n.points.trueStart),t.onReset&&t.onReset()}},e.prototype.play=function(){return this.tween.play(),this},e.prototype.reverse=function(){return this.tween.reverse(),this},e.prototype.reset=function(){return this.tween.reset(),this},e.prototype.seek=function(e){return this.tween.seek(1e3*e),this},e.prototype.pause=function(){return this.tween.pause(),this},e.prototype.finish=function(){return this.tween.finish(),this},e.prototype.destroy=function(){var t,a=this.node._id,n=this._id,i=e.tweens[a];for(t in this.pause(),i)delete e.tweens[a][t];delete e.attrs[a][n]},e.attrs={},e.tweens={},e}();t.Tween=d,r.Node.prototype.to=function(e){var t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new d(e).play()},t.Easings={BackEaseIn:function(e,t,a,n){var i=1.70158;return a*(e/=n)*e*((i+1)*e-i)+t},BackEaseOut:function(e,t,a,n){var i=1.70158;return a*((e=e/n-1)*e*((i+1)*e+i)+1)+t},BackEaseInOut:function(e,t,a,n){var i=1.70158;return(e/=n/2)<1?a/2*(e*e*((1+(i*=1.525))*e-i))+t:a/2*((e-=2)*e*((1+(i*=1.525))*e+i)+2)+t},ElasticEaseIn:function(e,t,a,n,i,r){var o=0;return 0===e?t:1==(e/=n)?t+a:(r||(r=.3*n),!i||i<Math.abs(a)?(i=a,o=r/4):o=r/(2*Math.PI)*Math.asin(a/i),-i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/r)+t)},ElasticEaseOut:function(e,t,a,n,i,r){var o=0;return 0===e?t:1==(e/=n)?t+a:(r||(r=.3*n),!i||i<Math.abs(a)?(i=a,o=r/4):o=r/(2*Math.PI)*Math.asin(a/i),i*Math.pow(2,-10*e)*Math.sin((e*n-o)*(2*Math.PI)/r)+a+t)},ElasticEaseInOut:function(e,t,a,n,i,r){var o=0;return 0===e?t:2==(e/=n/2)?t+a:(r||(r=n*(.3*1.5)),!i||i<Math.abs(a)?(i=a,o=r/4):o=r/(2*Math.PI)*Math.asin(a/i),e<1?i*Math.pow(2,10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/r)*-.5+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*n-o)*(2*Math.PI)/r)*.5+a+t)},BounceEaseOut:function(e,t,a,n){return(e/=n)<1/2.75?a*(7.5625*e*e)+t:e<2/2.75?a*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?a*(7.5625*(e-=2.25/2.75)*e+.9375)+t:a*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn:function(e,a,n,i){return n-t.Easings.BounceEaseOut(i-e,0,n,i)+a},BounceEaseInOut:function(e,a,n,i){return e<i/2?.5*t.Easings.BounceEaseIn(2*e,0,n,i)+a:.5*t.Easings.BounceEaseOut(2*e-i,0,n,i)+.5*n+a},EaseIn:function(e,t,a,n){return a*(e/=n)*e+t},EaseOut:function(e,t,a,n){return-a*(e/=n)*(e-2)+t},EaseInOut:function(e,t,a,n){return(e/=n/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t},StrongEaseIn:function(e,t,a,n){return a*(e/=n)*e*e*e*e+t},StrongEaseOut:function(e,t,a,n){return a*((e=e/n-1)*e*e*e*e+1)+t},StrongEaseInOut:function(e,t,a,n){return(e/=n/2)<1?a/2*e*e*e*e*e+t:a/2*((e-=2)*e*e*e*e+2)+t},Linear:function(e,t,a,n){return a*e/n+t}}},2654:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2344),c=a(2345),u=a(2344),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){var t=l.Konva.getAngle(this.angle()),a=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,a),e.arc(0,0,this.innerRadius(),t,0,!a),e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){return 2*this.outerRadius()},t.prototype.getHeight=function(){return 2*this.outerRadius()},t.prototype.setWidth=function(e){this.outerRadius(e/2)},t.prototype.setHeight=function(e){this.outerRadius(e/2)},t}(s.Shape);t.Arc=d,d.prototype._centroid=!0,d.prototype.className="Arc",d.prototype._attrsAffectingSize=["innerRadius","outerRadius"],u._registerNode(d),o.Factory.addGetterSetter(d,"innerRadius",0,c.getNumberValidator()),o.Factory.addGetterSetter(d,"outerRadius",0,c.getNumberValidator()),o.Factory.addGetterSetter(d,"angle",0,c.getNumberValidator()),o.Factory.addGetterSetter(d,"clockwise",!1,c.getBooleanValidator()),r.Collection.mapMethods(d)},2655:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2522),l=a(2345),c=a(2344),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(t){e.prototype._sceneFunc.call(this,t);var a=2*Math.PI,n=this.points(),i=n,r=0!==this.tension()&&n.length>4;r&&(i=this.getTensionPoints());var o,s,l=n.length;r?(o=n[l-2]-i[l-2],s=n[l-1]-i[l-1]):(o=n[l-2]-n[l-4],s=n[l-1]-n[l-3]);var c=(Math.atan2(s,o)+a)%a,u=this.pointerLength(),d=this.pointerWidth();t.save(),t.beginPath(),t.translate(n[l-2],n[l-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-u,d/2),t.lineTo(-u,-d/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(n[0],n[1]),r?(o=i[0]-n[0],s=i[1]-n[1]):(o=n[2]-n[0],s=n[3]-n[1]),t.rotate((Math.atan2(-s,-o)+a)%a),t.moveTo(0,0),t.lineTo(-u,d/2),t.lineTo(-u,-d/2),t.closePath(),t.restore());var h=this.dashEnabled();h&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),h&&(this.attrs.dashEnabled=!0)},t}(s.Line);t.Arrow=u,u.prototype.className="Arrow",c._registerNode(u),o.Factory.addGetterSetter(u,"pointerLength",10,l.getNumberValidator()),o.Factory.addGetterSetter(u,"pointerWidth",10,l.getNumberValidator()),o.Factory.addGetterSetter(u,"pointerAtBeginning",!1),r.Collection.mapMethods(u)},2656:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2345),c=a(2344),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){e.beginPath(),e.arc(0,0,this.radius(),0,2*Math.PI,!1),e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){return 2*this.radius()},t.prototype.getHeight=function(){return 2*this.radius()},t.prototype.setWidth=function(e){this.radius()!==e/2&&this.radius(e/2)},t.prototype.setHeight=function(e){this.radius()!==e/2&&this.radius(e/2)},t}(s.Shape);t.Circle=u,u.prototype._centroid=!0,u.prototype.className="Circle",u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),o.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),r.Collection.mapMethods(u)},2657:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2345),c=a(2344),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){var t=this.radiusX(),a=this.radiusY();e.beginPath(),e.save(),t!==a&&e.scale(1,a/t),e.arc(0,0,t,0,2*Math.PI,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){return 2*this.radiusX()},t.prototype.getHeight=function(){return 2*this.radiusY()},t.prototype.setWidth=function(e){this.radiusX(e/2)},t.prototype.setHeight=function(e){this.radiusY(e/2)},t}(s.Shape);t.Ellipse=u,u.prototype.className="Ellipse",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radiusX","radiusY"],c._registerNode(u),o.Factory.addComponentsGetterSetter(u,"radius",["x","y"]),o.Factory.addGetterSetter(u,"radiusX",0,l.getNumberValidator()),o.Factory.addGetterSetter(u,"radiusY",0,l.getNumberValidator()),r.Collection.mapMethods(u)},2658:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2345),c=a(2344),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._useBufferCanvas=function(){return!(!this.hasShadow()&&1===this.getAbsoluteOpacity()||!this.hasStroke()||!this.getStage())},t.prototype._sceneFunc=function(e){var t,a,n,i=this.width(),r=this.height(),o=this.image();o&&(t=this.cropWidth(),a=this.cropHeight(),n=t&&a?[o,this.cropX(),this.cropY(),t,a,0,0,i,r]:[o,0,0,i,r]),(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,i,r),e.closePath(),e.fillStrokeShape(this)),o&&e.drawImage.apply(e,n)},t.prototype._hitFunc=function(e){var t=this.width(),a=this.height();e.beginPath(),e.rect(0,0,t,a),e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){var e=this.image();return this.attrs.width||(e?e.width:0)},t.prototype.getHeight=function(){var e=this.image();return this.attrs.height||(e?e.height:0)},t.fromURL=function(e,a){var n=r.Util.createImageElement();n.onload=function(){var e=new t({image:n});a(e)},n.crossOrigin="Anonymous",n.src=e},t}(s.Shape);t.Image=u,u.prototype.className="Image",c._registerNode(u),o.Factory.addGetterSetter(u,"image"),o.Factory.addComponentsGetterSetter(u,"crop",["x","y","width","height"]),o.Factory.addGetterSetter(u,"cropX",0,l.getNumberValidator()),o.Factory.addGetterSetter(u,"cropY",0,l.getNumberValidator()),o.Factory.addGetterSetter(u,"cropWidth",0,l.getNumberValidator()),o.Factory.addGetterSetter(u,"cropHeight",0,l.getNumberValidator()),r.Collection.mapMethods(u)},2659:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2461),c=a(2345),u=a(2344),d=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width"],h=d.length,p=function(e){function t(t){var a=e.call(this,t)||this;return a.on("add.konva",(function(e){this._addListeners(e.child),this._sync()})),a}return i(t,e),t.prototype.getText=function(){return this.find("Text")[0]},t.prototype.getTag=function(){return this.find("Tag")[0]},t.prototype._addListeners=function(e){var t,a=this,n=function(){a._sync()};for(t=0;t<h;t++)e.on(d[t]+"Change.konva",n)},t.prototype.getWidth=function(){return this.getText().width()},t.prototype.getHeight=function(){return this.getText().height()},t.prototype._sync=function(){var e,t,a,n,i,r,o,s=this.getText(),l=this.getTag();if(s&&l){switch(e=s.width(),t=s.height(),a=l.pointerDirection(),n=l.pointerWidth(),o=l.pointerHeight(),i=0,r=0,a){case"up":i=e/2,r=-1*o;break;case"right":i=e+n,r=t/2;break;case"down":i=e/2,r=t+o;break;case"left":i=-1*n,r=t/2}l.setAttrs({x:-1*i,y:-1*r,width:e,height:t}),s.setAttrs({x:-1*i,y:-1*r})}},t}(l.Group);t.Label=p,p.prototype.className="Label",u._registerNode(p),r.Collection.mapMethods(p);var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){var t=this.width(),a=this.height(),n=this.pointerDirection(),i=this.pointerWidth(),r=this.pointerHeight(),o=Math.min(this.cornerRadius(),t/2,a/2);e.beginPath(),o?e.moveTo(o,0):e.moveTo(0,0),"up"===n&&(e.lineTo((t-i)/2,0),e.lineTo(t/2,-1*r),e.lineTo((t+i)/2,0)),o?(e.lineTo(t-o,0),e.arc(t-o,o,o,3*Math.PI/2,0,!1)):e.lineTo(t,0),"right"===n&&(e.lineTo(t,(a-r)/2),e.lineTo(t+i,a/2),e.lineTo(t,(a+r)/2)),o?(e.lineTo(t,a-o),e.arc(t-o,a-o,o,0,Math.PI/2,!1)):e.lineTo(t,a),"down"===n&&(e.lineTo((t+i)/2,a),e.lineTo(t/2,a+r),e.lineTo((t-i)/2,a)),o?(e.lineTo(o,a),e.arc(o,a-o,o,Math.PI/2,Math.PI,!1)):e.lineTo(0,a),"left"===n&&(e.lineTo(0,(a+r)/2),e.lineTo(-1*i,a/2),e.lineTo(0,(a-r)/2)),o&&(e.lineTo(0,o),e.arc(o,o,o,Math.PI,3*Math.PI/2,!1)),e.closePath(),e.fillStrokeShape(this)},t.prototype.getSelfRect=function(){var e=0,t=0,a=this.pointerWidth(),n=this.pointerHeight(),i=this.pointerDirection(),r=this.width(),o=this.height();return"up"===i?(t-=n,o+=n):"down"===i?o+=n:"left"===i?(e-=1.5*a,r+=a):"right"===i&&(r+=1.5*a),{x:e,y:t,width:r,height:o}},t}(s.Shape);t.Tag=m,m.prototype.className="Tag",u._registerNode(m),o.Factory.addGetterSetter(m,"pointerDirection","none"),o.Factory.addGetterSetter(m,"pointerWidth",0,c.getNumberValidator()),o.Factory.addGetterSetter(m,"pointerHeight",0,c.getNumberValidator()),o.Factory.addGetterSetter(m,"cornerRadius",0,c.getNumberValidator()),r.Collection.mapMethods(m)},2660:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2345),c=a(2344),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){var t,a,n,i=this.sides(),r=this.radius();for(e.beginPath(),e.moveTo(0,0-r),t=1;t<i;t++)a=r*Math.sin(2*t*Math.PI/i),n=-1*r*Math.cos(2*t*Math.PI/i),e.lineTo(a,n);e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){return 2*this.radius()},t.prototype.getHeight=function(){return 2*this.radius()},t.prototype.setWidth=function(e){this.radius(e/2)},t.prototype.setHeight=function(e){this.radius(e/2)},t}(s.Shape);t.RegularPolygon=u,u.prototype.className="RegularPolygon",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["radius"],c._registerNode(u),o.Factory.addGetterSetter(u,"radius",0,l.getNumberValidator()),o.Factory.addGetterSetter(u,"sides",0,l.getNumberValidator()),r.Collection.mapMethods(u)},2661:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2345),c=a(2344),u=2*Math.PI,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,u,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),u,0,!0),e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){return 2*this.outerRadius()},t.prototype.getHeight=function(){return 2*this.outerRadius()},t.prototype.setWidth=function(e){this.outerRadius(e/2)},t.prototype.setHeight=function(e){this.outerRadius(e/2)},t}(s.Shape);t.Ring=d,d.prototype.className="Ring",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(d),o.Factory.addGetterSetter(d,"innerRadius",0,l.getNumberValidator()),o.Factory.addGetterSetter(d,"outerRadius",0,l.getNumberValidator()),r.Collection.mapMethods(d)},2662:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2431),c=a(2345),u=a(2344),d=function(e){function t(t){var a=e.call(this,t)||this;return a._updated=!0,a.anim=new l.Animation((function(){var e=a._updated;return a._updated=!1,e})),a.on("animationChange.konva",(function(){this.frameIndex(0)})),a.on("frameIndexChange.konva",(function(){this._updated=!0})),a.on("frameRateChange.konva",(function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})),a}return i(t,e),t.prototype._sceneFunc=function(e){var t=this.animation(),a=this.frameIndex(),n=4*a,i=this.animations()[t],r=this.frameOffsets(),o=i[n+0],s=i[n+1],l=i[n+2],c=i[n+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,l,c),e.closePath(),e.fillStrokeShape(this)),u)if(r){var d=r[t],h=2*a;e.drawImage(u,o,s,l,c,d[h+0],d[h+1],l,c)}else e.drawImage(u,o,s,l,c,0,0,l,c)},t.prototype._hitFunc=function(e){var t=this.animation(),a=this.frameIndex(),n=4*a,i=this.animations()[t],r=this.frameOffsets(),o=i[n+2],s=i[n+3];if(e.beginPath(),r){var l=r[t],c=2*a;e.rect(l[c+0],l[c+1],o,s)}else e.rect(0,0,o,s);e.closePath(),e.fillShape(this)},t.prototype._useBufferCanvas=function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},t.prototype._setInterval=function(){var e=this;this.interval=setInterval((function(){e._updateIndex()}),1e3/this.frameRate())},t.prototype.start=function(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}},t.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},t.prototype.isRunning=function(){return this.anim.isRunning()},t.prototype._updateIndex=function(){var e=this.frameIndex(),t=this.animation();e<this.animations()[t].length/4-1?this.frameIndex(e+1):this.frameIndex(0)},t}(s.Shape);t.Sprite=d,d.prototype.className="Sprite",u._registerNode(d),o.Factory.addGetterSetter(d,"animation"),o.Factory.addGetterSetter(d,"animations"),o.Factory.addGetterSetter(d,"frameOffsets"),o.Factory.addGetterSetter(d,"image"),o.Factory.addGetterSetter(d,"frameIndex",0,c.getNumberValidator()),o.Factory.addGetterSetter(d,"frameRate",17,c.getNumberValidator()),o.Factory.backCompat(d,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),r.Collection.mapMethods(d)},2663:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2345),c=a(2344),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){var t=this.innerRadius(),a=this.outerRadius(),n=this.numPoints();e.beginPath(),e.moveTo(0,0-a);for(var i=1;i<2*n;i++){var r=i%2==0?a:t,o=r*Math.sin(i*Math.PI/n),s=-1*r*Math.cos(i*Math.PI/n);e.lineTo(o,s)}e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){return 2*this.outerRadius()},t.prototype.getHeight=function(){return 2*this.outerRadius()},t.prototype.setWidth=function(e){this.outerRadius(e/2)},t.prototype.setHeight=function(e){this.outerRadius(e/2)},t}(s.Shape);t.Star=u,u.prototype.className="Star",u.prototype._centroid=!0,u.prototype._attrsAffectingSize=["innerRadius","outerRadius"],c._registerNode(u),o.Factory.addGetterSetter(u,"numPoints",5,l.getNumberValidator()),o.Factory.addGetterSetter(u,"innerRadius",0,l.getNumberValidator()),o.Factory.addGetterSetter(u,"outerRadius",0,l.getNumberValidator()),r.Collection.mapMethods(u)},2664:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2523),c=a(2525),u=a(2345),d=a(2344);function h(e){e.fillText(this.partialText,0,0)}function p(e){e.strokeText(this.partialText,0,0)}var m=function(e){function t(t){var a=e.call(this,t)||this;return a.dummyCanvas=r.Util.createCanvasElement(),a.dataArray=[],a.dataArray=l.Path.parsePathData(a.attrs.data),a.on("dataChange.konva",(function(){this.dataArray=l.Path.parsePathData(this.attrs.data),this._setTextData()})),a.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",a._setTextData),t&&t.getKerning&&(r.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),a.kerningFunc(t.getKerning)),a._setTextData(),a}return i(t,e),t.prototype._sceneFunc=function(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var t=this.textDecoration(),a=this.fill(),n=this.fontSize(),i=this.glyphInfo;"underline"===t&&e.beginPath();for(var r=0;r<i.length;r++){e.save();var o=i[r].p0;e.translate(o.x,o.y),e.rotate(i[r].rotation),this.partialText=i[r].text,e.fillStrokeShape(this),"underline"===t&&(0===r&&e.moveTo(0,n/2+1),e.lineTo(n,n/2+1)),e.restore()}"underline"===t&&(e.strokeStyle=a,e.lineWidth=n/20,e.stroke()),e.restore()},t.prototype._hitFunc=function(e){e.beginPath();var t=this.glyphInfo;if(t.length>=1){var a=t[0].p0;e.moveTo(a.x,a.y)}for(var n=0;n<t.length;n++){var i=t[n].p1;e.lineTo(i.x,i.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()},t.prototype.getTextWidth=function(){return this.textWidth},t.prototype.getTextHeight=function(){return r.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},t.prototype.setText=function(e){return c.Text.prototype.setText.call(this,e)},t.prototype._getContextFont=function(){return c.Text.prototype._getContextFont.call(this)},t.prototype._getTextSize=function(e){var t=this.dummyCanvas.getContext("2d");t.save(),t.font=this._getContextFont();var a=t.measureText(e);return t.restore(),{width:a.width,height:parseInt(this.attrs.fontSize,10)}},t.prototype._setTextData=function(){var e=this,t=this._getTextSize(this.attrs.text),a=this.letterSpacing(),n=this.align(),i=this.kerningFunc();this.textWidth=t.width,this.textHeight=t.height;var r=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);this.glyphInfo=[];for(var o=0,s=0;s<e.dataArray.length;s++)e.dataArray[s].pathLength>0&&(o+=e.dataArray[s].pathLength);var c=0;"center"===n&&(c=Math.max(0,o/2-r/2)),"right"===n&&(c=Math.max(0,o-r));for(var u,d,h,p=this.text().split(""),m=this.text().split(" ").length-1,g=-1,f=0,b=function(){f=0;for(var t=e.dataArray,a=g+1;a<t.length;a++){if(t[a].pathLength>0)return g=a,t[a];"M"===t[a].command&&(u={x:t[a].points[0],y:t[a].points[1]})}return{}},v=function(t){var i=e._getTextSize(t).width+a;" "===t&&"justify"===n&&(i+=(o-r)/m);var s=0,c=0;for(d=void 0;Math.abs(i-s)/i>.01&&c<25;){c++;for(var p=s;void 0===h;)(h=b())&&p+h.pathLength<i&&(p+=h.pathLength,h=void 0);if(h==={}||void 0===u)return;var g=!1;switch(h.command){case"L":l.Path.getLineLength(u.x,u.y,h.points[0],h.points[1])>i?d=l.Path.getPointOnLine(i,u.x,u.y,h.points[0],h.points[1],u.x,u.y):h=void 0;break;case"A":var v=h.points[4],y=h.points[5],_=h.points[4]+y;0===f?f=v+1e-8:i>s?f+=Math.PI/180*y/Math.abs(y):f-=Math.PI/360*y/Math.abs(y),(y<0&&f<_||y>=0&&f>_)&&(f=_,g=!0),d=l.Path.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],f,h.points[6]);break;case"C":0===f?f=i>h.pathLength?1e-8:i/h.pathLength:i>s?f+=(i-s)/h.pathLength:f-=(s-i)/h.pathLength,f>1&&(f=1,g=!0),d=l.Path.getPointOnCubicBezier(f,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);break;case"Q":0===f?f=i/h.pathLength:i>s?f+=(i-s)/h.pathLength:f-=(s-i)/h.pathLength,f>1&&(f=1,g=!0),d=l.Path.getPointOnQuadraticBezier(f,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3])}void 0!==d&&(s=l.Path.getLineLength(u.x,u.y,d.x,d.y)),g&&(g=!1,h=void 0)}},y=e._getTextSize("C").width+a,_=0;_<c/y&&(v("C"),void 0!==u&&void 0!==d);_++)u=d;for(var S=0;S<p.length&&(v(p[S]),void 0!==u&&void 0!==d);S++){var D=l.Path.getLineLength(u.x,u.y,d.x,d.y),C=0;if(i)try{C=i(p[S-1],p[S])*this.fontSize()}catch(w){C=0}u.x+=C,d.x+=C,this.textWidth+=C;var E=l.Path.getPointOnLine(C+D/2,u.x,u.y,d.x,d.y),O=Math.atan2(d.y-u.y,d.x-u.x);this.glyphInfo.push({transposeX:E.x,transposeY:E.y,text:p[S],rotation:O,p0:u,p1:d}),u=d}},t.prototype.getSelfRect=function(){var e=[];this.glyphInfo.forEach((function(t){e.push(t.p0.x),e.push(t.p0.y),e.push(t.p1.x),e.push(t.p1.y)}));for(var t,a,n=e[0],i=e[0],r=e[0],o=e[0],s=0;s<e.length/2;s++)t=e[2*s],a=e[2*s+1],n=Math.min(n,t),i=Math.max(i,t),r=Math.min(r,a),o=Math.max(o,a);var l=this.fontSize();return{x:Math.round(n)-l/2,y:Math.round(r)-l/2,width:Math.round(i-n)+l,height:Math.round(o-r)+l}},t}(s.Shape);t.TextPath=m,m.prototype._fillFunc=h,m.prototype._strokeFunc=p,m.prototype._fillFuncHit=h,m.prototype._strokeFuncHit=p,m.prototype.className="TextPath",m.prototype._attrsAffectingSize=["text","fontSize","data"],d._registerNode(m),o.Factory.addGetterSetter(m,"data"),o.Factory.addGetterSetter(m,"fontFamily","Arial"),o.Factory.addGetterSetter(m,"fontSize",12,u.getNumberValidator()),o.Factory.addGetterSetter(m,"fontStyle","normal"),o.Factory.addGetterSetter(m,"align","left"),o.Factory.addGetterSetter(m,"letterSpacing",0,u.getNumberValidator()),o.Factory.addGetterSetter(m,"textBaseline","middle"),o.Factory.addGetterSetter(m,"fontVariant","normal"),o.Factory.addGetterSetter(m,"text",""),o.Factory.addGetterSetter(m,"textDecoration",null),o.Factory.addGetterSetter(m,"kerningFunc",null),r.Collection.mapMethods(m)},2665:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2358),l=a(2363),c=a(2524),u=a(2461),d=a(2344),h=a(2345),p=a(2344),m=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].join(" "),g=["widthChange.tr","heightChange.tr","scaleXChange.tr","scaleYChange.tr","skewXChange.tr","skewYChange.tr","rotationChange.tr","offsetXChange.tr","offsetYChange.tr","transformsEnabledChange.tr","strokeWidthChange.tr"].join(" "),f={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};var b=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],v=function(e){function t(t){var a=e.call(this,t)||this;return a._transforming=!1,a._createElements(),a._handleMouseMove=a._handleMouseMove.bind(a),a._handleMouseUp=a._handleMouseUp.bind(a),a.update=a.update.bind(a),a.on(m,a.update),a.getNode()&&a.update(),a}return i(t,e),t.prototype.attachTo=function(e){return this.setNode(e),this},t.prototype.setNode=function(e){var t=this;this._node&&this.detach(),this._node=e,this._resetTransformCache();var a=e._attrsAffectingSize.map((function(e){return e+"Change.tr"})).join(" "),n=function(){t._resetTransformCache(),t._transforming||t.update()};return e.on(a,n),e.on(g,n),e.on("xChange.tr yChange.tr",(function(){return t._resetTransformCache()})),!!this.findOne(".top-left")&&this.update(),this},t.prototype.getNode=function(){return this._node},t.prototype.detach=function(){this.getNode()&&(this.getNode().off(".tr"),this._node=void 0),this._resetTransformCache()},t.prototype._resetTransformCache=function(){this._clearCache("nodeRect"),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},t.prototype._getNodeRect=function(){return this._getCache("nodeRect",this.__getNodeRect)},t.prototype.__getNodeRect=function(){var e=this.getNode();if(!e)return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};e.parent&&this.parent&&e.parent!==this.parent&&r.Util.warn("Transformer and attached node have different parents. Konva does not support such case right now. Please move Transformer to the parent of attaching node.");var t=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),a=d.Konva.getAngle(e.rotation()),n=t.x*e.scaleX()-e.offsetX()*e.scaleX(),i=t.y*e.scaleY()-e.offsetY()*e.scaleY();return{x:e.x()+n*Math.cos(a)+i*Math.sin(-a),y:e.y()+i*Math.cos(a)+n*Math.sin(a),width:t.width*e.scaleX(),height:t.height*e.scaleY(),rotation:e.rotation()}},t.prototype.getX=function(){return this._getNodeRect().x},t.prototype.getY=function(){return this._getNodeRect().y},t.prototype.getRotation=function(){return this._getNodeRect().rotation},t.prototype.getWidth=function(){return this._getNodeRect().width},t.prototype.getHeight=function(){return this._getNodeRect().height},t.prototype._createElements=function(){this._createBack(),b.forEach(function(e){this._createAnchor(e)}.bind(this)),this._createAnchor("rotater")},t.prototype._createAnchor=function(e){var t=this,a=new c.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0}),n=this;a.on("mousedown touchstart",(function(e){n._handleMouseDown(e)})),a.on("dragstart",(function(e){e.cancelBubble=!0})),a.on("dragmove",(function(e){e.cancelBubble=!0})),a.on("dragend",(function(e){e.cancelBubble=!0})),a.on("mouseenter",(function(){var n=d.Konva.getAngle(t.rotation()),i=t.getNode().getAbsoluteScale(),o=i.y*i.x<0,s=function(e,t,a){if("rotater"===e)return"crosshair";t+=r.Util._degToRad(f[e]||0),a&&(t*=-1);var n=(r.Util._radToDeg(t)%360+360)%360;return r.Util._inRange(n,337.5,360)||r.Util._inRange(n,0,22.5)?"ns-resize":r.Util._inRange(n,22.5,67.5)?"nesw-resize":r.Util._inRange(n,67.5,112.5)?"ew-resize":r.Util._inRange(n,112.5,157.5)?"nwse-resize":r.Util._inRange(n,157.5,202.5)?"ns-resize":r.Util._inRange(n,202.5,247.5)?"nesw-resize":r.Util._inRange(n,247.5,292.5)?"ew-resize":r.Util._inRange(n,292.5,337.5)?"nwse-resize":(r.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(e,n,o);a.getStage().content.style.cursor=s,t._cursorChange=!0})),a.on("mouseout",(function(){a.getStage()&&a.getParent()&&(a.getStage().content.style.cursor="",t._cursorChange=!1)})),this.add(a)},t.prototype._createBack=function(){var e=new l.Shape({name:"back",width:0,height:0,listening:!1,sceneFunc:function(e){var t=this.getParent(),a=t.padding();e.beginPath(),e.rect(-a,-a,this.width()+2*a,this.height()+2*a),e.moveTo(this.width()/2,-a),t.rotateEnabled()&&e.lineTo(this.width()/2,-t.rotateAnchorOffset()*r.Util._sign(this.height())),e.fillStrokeShape(this)}});this.add(e)},t.prototype._handleMouseDown=function(e){this.movingResizer=e.target.name().split(" ")[0];var t=this._getNodeRect(),a=t.width,n=t.height,i=Math.sqrt(Math.pow(a,2)+Math.pow(n,2));this.sin=Math.abs(n/i),this.cos=Math.abs(a/i),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0,this._fire("transformstart",{evt:e}),this.getNode()._fire("transformstart",{evt:e})},t.prototype._handleMouseMove=function(e){var t,a,n,i=this.findOne("."+this.movingResizer),o=i.getStage().getContent().getBoundingClientRect(),s=o.left,l=o.top,c={x:(void 0!==e.clientX?e.clientX:e.touches[0].clientX)-s,y:(void 0!==e.clientX?e.clientY:e.touches[0].clientY)-l};i.setAbsolutePosition(c);var u=this.keepRatio()||e.shiftKey;if("top-left"===this.movingResizer){if(u){n=Math.sqrt(Math.pow(this.findOne(".bottom-right").x()-i.x(),2)+Math.pow(this.findOne(".bottom-right").y()-i.y(),2));var h=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1;t=n*this.cos*h,a=n*this.sin*h,this.findOne(".top-left").x(this.findOne(".bottom-right").x()-t),this.findOne(".top-left").y(this.findOne(".bottom-right").y()-a)}}else if("top-center"===this.movingResizer)this.findOne(".top-left").y(i.y());else if("top-right"===this.movingResizer){if(u){n=Math.sqrt(Math.pow(this.findOne(".bottom-left").x()-i.x(),2)+Math.pow(this.findOne(".bottom-left").y()-i.y(),2));h=this.findOne(".top-right").x()<this.findOne(".top-left").x()?-1:1;t=n*this.cos*h,a=n*this.sin*h,this.findOne(".top-right").x(t),this.findOne(".top-right").y(this.findOne(".bottom-left").y()-a)}var p=i.position();this.findOne(".top-left").y(p.y),this.findOne(".bottom-right").x(p.x)}else if("middle-left"===this.movingResizer)this.findOne(".top-left").x(i.x());else if("middle-right"===this.movingResizer)this.findOne(".bottom-right").x(i.x());else if("bottom-left"===this.movingResizer){if(u){n=Math.sqrt(Math.pow(this.findOne(".top-right").x()-i.x(),2)+Math.pow(this.findOne(".top-right").y()-i.y(),2));h=this.findOne(".top-right").x()<this.findOne(".bottom-left").x()?-1:1;t=n*this.cos*h,a=n*this.sin*h,this.findOne(".bottom-left").x(this.findOne(".top-right").x()-t),this.findOne(".bottom-left").y(a)}p=i.position(),this.findOne(".top-left").x(p.x),this.findOne(".bottom-right").y(p.y)}else if("bottom-center"===this.movingResizer)this.findOne(".bottom-right").y(i.y());else if("bottom-right"===this.movingResizer){if(u){n=Math.sqrt(Math.pow(this.findOne(".bottom-right").x(),2)+Math.pow(this.findOne(".bottom-right").y(),2));h=this.findOne(".top-left").x()>this.findOne(".bottom-right").x()?-1:1;t=n*this.cos*h,a=n*this.sin*h,this.findOne(".bottom-right").x(t),this.findOne(".bottom-right").y(a)}}else if("rotater"===this.movingResizer){var m=this.padding(),g=this._getNodeRect();t=i.x()-g.width/2,a=-i.y()+g.height/2;var f=Math.atan2(-a,t)+Math.PI/2;g.height<0&&(f-=Math.PI);for(var b=d.Konva.getAngle(this.rotation()),v=r.Util._radToDeg(b)+r.Util._radToDeg(f),y=d.Konva.getAngle(this.getNode().rotation()),_=r.Util._degToRad(v),S=this.rotationSnaps(),D=0;D<S.length;D++){var C=d.Konva.getAngle(S[D]);Math.abs(C-r.Util._degToRad(v))%(2*Math.PI)<.1&&(v=r.Util._radToDeg(C),_=r.Util._degToRad(v))}var E=m,O=m;this._fitNodeInto({rotation:d.Konva.angleDeg?v:r.Util._degToRad(v),x:g.x+(g.width/2+m)*(Math.cos(y)-Math.cos(_))+(g.height/2+m)*(Math.sin(-y)-Math.sin(-_))-(E*Math.cos(b)+O*Math.sin(-b)),y:g.y+(g.height/2+m)*(Math.cos(y)-Math.cos(_))+(g.width/2+m)*(Math.sin(y)-Math.sin(_))-(O*Math.cos(b)+E*Math.sin(b)),width:g.width+2*m,height:g.height+2*m},e)}else console.error(new Error("Wrong position argument of selection resizer: "+this.movingResizer));if("rotater"!==this.movingResizer){var w=this.findOne(".top-left").getAbsolutePosition(this.getParent());if(this.centeredScaling()||e.altKey){var j=this.findOne(".top-left"),I=this.findOne(".bottom-right"),N=j.x(),k=j.y(),T=this.getWidth()-I.x(),x=this.getHeight()-I.y();I.move({x:-N,y:-k}),j.move({x:T,y:x}),w=j.getAbsolutePosition(this.getParent())}t=w.x,a=w.y;var z=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),P=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodeInto({x:t+this.offsetX(),y:a+this.offsetY(),width:z,height:P},e)}},t.prototype._handleMouseUp=function(e){this._removeEvents(e)},t.prototype._removeEvents=function(e){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0),this._fire("transformend",{evt:e});var t=this.getNode();t&&t.fire("transformend",{evt:e})}},t.prototype._fitNodeInto=function(e,t){var a=this.boundBoxFunc();if(a){var n=this._getNodeRect();e=a.call(this,n,e)}var i=this.getNode();void 0!==e.rotation&&this.getNode().rotation(e.rotation);var r=i.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=this.padding(),s=(e.width-2*o)/r.width,l=(e.height-2*o)/r.height,c=d.Konva.getAngle(i.rotation()),u=r.x*s-o-i.offsetX()*s,h=r.y*l-o-i.offsetY()*l;this.getNode().setAttrs({scaleX:s,scaleY:l,x:e.x-(u*Math.cos(c)+h*Math.sin(-c)),y:e.y-(h*Math.cos(c)+u*Math.sin(c))}),this._fire("transform",{evt:t}),this.getNode()._fire("transform",{evt:t}),this.update(),this.getLayer().batchDraw()},t.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},t.prototype.update=function(){var e=this,t=this._getNodeRect(),a=this.getNode(),n={x:1,y:1};a&&a.getParent()&&(n=a.getParent().getAbsoluteScale());var i={x:1/n.x,y:1/n.y},o=t.width,s=t.height,l=this.enabledAnchors(),c=this.resizeEnabled(),u=this.padding(),d=this.anchorSize();this.find("._anchor").each((function(t){return t.setAttrs({width:d,height:d,offsetX:d/2,offsetY:d/2,stroke:e.anchorStroke(),strokeWidth:e.anchorStrokeWidth(),fill:e.anchorFill(),cornerRadius:e.anchorCornerRadius()})})),this.findOne(".top-left").setAttrs({x:-u,y:-u,scale:i,visible:c&&l.indexOf("top-left")>=0}),this.findOne(".top-center").setAttrs({x:o/2,y:-u,scale:i,visible:c&&l.indexOf("top-center")>=0}),this.findOne(".top-right").setAttrs({x:o+u,y:-u,scale:i,visible:c&&l.indexOf("top-right")>=0}),this.findOne(".middle-left").setAttrs({x:-u,y:s/2,scale:i,visible:c&&l.indexOf("middle-left")>=0}),this.findOne(".middle-right").setAttrs({x:o+u,y:s/2,scale:i,visible:c&&l.indexOf("middle-right")>=0}),this.findOne(".bottom-left").setAttrs({x:-u,y:s+u,scale:i,visible:c&&l.indexOf("bottom-left")>=0}),this.findOne(".bottom-center").setAttrs({x:o/2,y:s+u,scale:i,visible:c&&l.indexOf("bottom-center")>=0}),this.findOne(".bottom-right").setAttrs({x:o+u,y:s+u,scale:i,visible:c&&l.indexOf("bottom-right")>=0});var h=-this.rotateAnchorOffset()*Math.abs(i.y);this.findOne(".rotater").setAttrs({x:o/2,y:h*r.Util._sign(s),scale:i,visible:this.rotateEnabled()}),this.findOne(".back").setAttrs({width:o*n.x,height:s*n.y,scale:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash()})},t.prototype.isTransforming=function(){return this._transforming},t.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this.movingResizer);e&&e.stopDrag()}},t.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),u.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},t.prototype.toObject=function(){return s.Node.prototype.toObject.call(this)},t}(u.Group);t.Transformer=v,v.prototype.className="Transformer",p._registerNode(v),o.Factory.addGetterSetter(v,"enabledAnchors",b,(function(e){return e instanceof Array||r.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach((function(e){-1===b.indexOf(e)&&r.Util.warn("Unknown anchor name: "+e+". Available names are: "+b.join(", "))})),e||[]})),o.Factory.addGetterSetter(v,"resizeEnabled",!0),o.Factory.addGetterSetter(v,"anchorSize",10,h.getNumberValidator()),o.Factory.addGetterSetter(v,"rotateEnabled",!0),o.Factory.addGetterSetter(v,"rotationSnaps",[]),o.Factory.addGetterSetter(v,"rotateAnchorOffset",50,h.getNumberValidator()),o.Factory.addGetterSetter(v,"borderEnabled",!0),o.Factory.addGetterSetter(v,"anchorStroke","rgb(0, 161, 255)"),o.Factory.addGetterSetter(v,"anchorStrokeWidth",1,h.getNumberValidator()),o.Factory.addGetterSetter(v,"anchorFill","white"),o.Factory.addGetterSetter(v,"anchorCornerRadius",0,h.getNumberValidator()),o.Factory.addGetterSetter(v,"borderStroke","rgb(0, 161, 255)"),o.Factory.addGetterSetter(v,"borderStrokeWidth",1,h.getNumberValidator()),o.Factory.addGetterSetter(v,"borderDash"),o.Factory.addGetterSetter(v,"keepRatio",!0),o.Factory.addGetterSetter(v,"centeredScaling",!1),o.Factory.addGetterSetter(v,"ignoreStroke",!1),o.Factory.addGetterSetter(v,"padding",0,h.getNumberValidator()),o.Factory.addGetterSetter(v,"node"),o.Factory.addGetterSetter(v,"boundBoxFunc"),o.Factory.backCompat(v,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),r.Collection.mapMethods(v)},2666:function(e,t,a){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(t,"__esModule",{value:!0});var r=a(2347),o=a(2342),s=a(2363),l=a(2344),c=a(2345),u=a(2344),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._sceneFunc=function(e){e.beginPath(),e.arc(0,0,this.radius(),0,l.Konva.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)},t.prototype.getWidth=function(){return 2*this.radius()},t.prototype.getHeight=function(){return 2*this.radius()},t.prototype.setWidth=function(e){this.radius(e/2)},t.prototype.setHeight=function(e){this.radius(e/2)},t}(s.Shape);t.Wedge=d,d.prototype.className="Wedge",d.prototype._centroid=!0,d.prototype._attrsAffectingSize=["radius"],u._registerNode(d),o.Factory.addGetterSetter(d,"radius",0,c.getNumberValidator()),o.Factory.addGetterSetter(d,"angle",0,c.getNumberValidator()),o.Factory.addGetterSetter(d,"clockwise",!1),o.Factory.backCompat(d,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),r.Collection.mapMethods(d)},2667:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var s=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],l=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];t.Blur=function(e){var t=Math.round(this.blurRadius());t>0&&function(e,t){var a,n,i,r,c,u,d,h,p,m,g,f,b,v,y,_,S,D,C,E,O,w,j,I,N=e.data,k=e.width,T=e.height,x=t+t+1,z=k-1,P=T-1,F=t+1,M=F*(F+1)/2,A=new o,R=null,B=A,L=null,U=null,K=s[t],G=l[t];for(i=1;i<x;i++)B=B.next=new o,i===F&&(R=B);for(B.next=A,d=u=0,n=0;n<T;n++){for(_=S=D=C=h=p=m=g=0,f=F*(E=N[u]),b=F*(O=N[u+1]),v=F*(w=N[u+2]),y=F*(j=N[u+3]),h+=M*E,p+=M*O,m+=M*w,g+=M*j,B=A,i=0;i<F;i++)B.r=E,B.g=O,B.b=w,B.a=j,B=B.next;for(i=1;i<F;i++)r=u+((z<i?z:i)<<2),h+=(B.r=E=N[r])*(I=F-i),p+=(B.g=O=N[r+1])*I,m+=(B.b=w=N[r+2])*I,g+=(B.a=j=N[r+3])*I,_+=E,S+=O,D+=w,C+=j,B=B.next;for(L=A,U=R,a=0;a<k;a++)N[u+3]=j=g*K>>G,0!==j?(j=255/j,N[u]=(h*K>>G)*j,N[u+1]=(p*K>>G)*j,N[u+2]=(m*K>>G)*j):N[u]=N[u+1]=N[u+2]=0,h-=f,p-=b,m-=v,g-=y,f-=L.r,b-=L.g,v-=L.b,y-=L.a,r=d+((r=a+t+1)<z?r:z)<<2,h+=_+=L.r=N[r],p+=S+=L.g=N[r+1],m+=D+=L.b=N[r+2],g+=C+=L.a=N[r+3],L=L.next,f+=E=U.r,b+=O=U.g,v+=w=U.b,y+=j=U.a,_-=E,S-=O,D-=w,C-=j,U=U.next,u+=4;d+=k}for(a=0;a<k;a++){for(S=D=C=_=p=m=g=h=0,f=F*(E=N[u=a<<2]),b=F*(O=N[u+1]),v=F*(w=N[u+2]),y=F*(j=N[u+3]),h+=M*E,p+=M*O,m+=M*w,g+=M*j,B=A,i=0;i<F;i++)B.r=E,B.g=O,B.b=w,B.a=j,B=B.next;for(c=k,i=1;i<=t;i++)u=c+a<<2,h+=(B.r=E=N[u])*(I=F-i),p+=(B.g=O=N[u+1])*I,m+=(B.b=w=N[u+2])*I,g+=(B.a=j=N[u+3])*I,_+=E,S+=O,D+=w,C+=j,B=B.next,i<P&&(c+=k);for(u=a,L=A,U=R,n=0;n<T;n++)N[(r=u<<2)+3]=j=g*K>>G,j>0?(j=255/j,N[r]=(h*K>>G)*j,N[r+1]=(p*K>>G)*j,N[r+2]=(m*K>>G)*j):N[r]=N[r+1]=N[r+2]=0,h-=f,p-=b,m-=v,g-=y,f-=L.r,b-=L.g,v-=L.b,y-=L.a,r=a+((r=n+F)<P?r:P)*k<<2,h+=_+=L.r=N[r],p+=S+=L.g=N[r+1],m+=D+=L.b=N[r+2],g+=C+=L.a=N[r+3],L=L.next,f+=E=U.r,b+=O=U.g,v+=w=U.b,y+=j=U.a,_-=E,S-=O,D-=w,C-=j,U=U.next,u+=k}}(e,t)},n.Factory.addGetterSetter(i.Node,"blurRadius",0,r.getNumberValidator(),n.Factory.afterSetFilter)},2668:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.Brighten=function(e){var t,a=255*this.brightness(),n=e.data,i=n.length;for(t=0;t<i;t+=4)n[t]+=a,n[t+1]+=a,n[t+2]+=a},n.Factory.addGetterSetter(i.Node,"brightness",0,r.getNumberValidator(),n.Factory.afterSetFilter)},2669:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.Contrast=function(e){var t,a=Math.pow((this.contrast()+100)/100,2),n=e.data,i=n.length,r=150,o=150,s=150;for(t=0;t<i;t+=4)r=n[t],o=n[t+1],s=n[t+2],r/=255,r-=.5,r*=a,r+=.5,o/=255,o-=.5,o*=a,o+=.5,s/=255,s-=.5,s*=a,s+=.5,r=(r*=255)<0?0:r>255?255:r,o=(o*=255)<0?0:o>255?255:o,s=(s*=255)<0?0:s>255?255:s,n[t]=r,n[t+1]=o,n[t+2]=s},n.Factory.addGetterSetter(i.Node,"contrast",0,r.getNumberValidator(),n.Factory.afterSetFilter)},267:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0);const i=n.useLayoutEffect},2670:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2347),o=a(2345);t.Emboss=function(e){var t=10*this.embossStrength(),a=255*this.embossWhiteLevel(),n=this.embossDirection(),i=this.embossBlend(),o=0,s=0,l=e.data,c=e.width,u=e.height,d=4*c,h=u;switch(n){case"top-left":o=-1,s=-1;break;case"top":o=-1,s=0;break;case"top-right":o=-1,s=1;break;case"right":o=0,s=1;break;case"bottom-right":o=1,s=1;break;case"bottom":o=1,s=0;break;case"bottom-left":o=1,s=-1;break;case"left":o=0,s=-1;break;default:r.Util.error("Unknown emboss direction: "+n)}do{var p=(h-1)*d,m=o;h+m<1&&(m=0),h+m>u&&(m=0);var g=(h-1+m)*c*4,f=c;do{var b=p+4*(f-1),v=s;f+v<1&&(v=0),f+v>c&&(v=0);var y=g+4*(f-1+v),_=l[b]-l[y],S=l[b+1]-l[y+1],D=l[b+2]-l[y+2],C=_,E=C>0?C:-C;if((S>0?S:-S)>E&&(C=S),(D>0?D:-D)>E&&(C=D),C*=t,i){var O=l[b]+C,w=l[b+1]+C,j=l[b+2]+C;l[b]=O>255?255:O<0?0:O,l[b+1]=w>255?255:w<0?0:w,l[b+2]=j>255?255:j<0?0:j}else{var I=a-C;I<0?I=0:I>255&&(I=255),l[b]=l[b+1]=l[b+2]=I}}while(--f)}while(--h)},n.Factory.addGetterSetter(i.Node,"embossStrength",.5,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossWhiteLevel",.5,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossDirection","top-left",null,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"embossBlend",!1,null,n.Factory.afterSetFilter)},2671:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);function o(e,t,a,n,i){var r=a-t,o=i-n;return 0===r?n+o/2:0===o?n:o*((e-t)/r)+n}t.Enhance=function(e){var t,a,n,i,r=e.data,s=r.length,l=r[0],c=l,u=r[1],d=u,h=r[2],p=h,m=this.enhance();if(0!==m){for(i=0;i<s;i+=4)(t=r[i+0])<l?l=t:t>c&&(c=t),(a=r[i+1])<u?u=a:a>d&&(d=a),(n=r[i+2])<h?h=n:n>p&&(p=n);var g,f,b,v,y,_,S,D,C;for(c===l&&(c=255,l=0),d===u&&(d=255,u=0),p===h&&(p=255,h=0),m>0?(f=c+m*(255-c),b=l-m*(l-0),y=d+m*(255-d),_=u-m*(u-0),D=p+m*(255-p),C=h-m*(h-0)):(f=c+m*(c-(g=.5*(c+l))),b=l+m*(l-g),y=d+m*(d-(v=.5*(d+u))),_=u+m*(u-v),D=p+m*(p-(S=.5*(p+h))),C=h+m*(h-S)),i=0;i<s;i+=4)r[i+0]=o(r[i+0],l,c,b,f),r[i+1]=o(r[i+1],u,d,_,y),r[i+2]=o(r[i+2],h,p,C,D)}},n.Factory.addGetterSetter(i.Node,"enhance",0,r.getNumberValidator(),n.Factory.afterSetFilter)},2672:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Grayscale=function(e){var t,a,n=e.data,i=n.length;for(t=0;t<i;t+=4)a=.34*n[t]+.5*n[t+1]+.16*n[t+2],n[t]=a,n[t+1]=a,n[t+2]=a}},2673:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);n.Factory.addGetterSetter(i.Node,"hue",0,r.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,r.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"luminance",0,r.getNumberValidator(),n.Factory.afterSetFilter),t.HSL=function(e){var t,a,n,i,r,o=e.data,s=o.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,u=127*this.luminance(),d=1*l*Math.cos(c*Math.PI/180),h=1*l*Math.sin(c*Math.PI/180),p=.299+.701*d+.167*h,m=.587-.587*d+.33*h,g=.114-.114*d-.497*h,f=.299-.299*d-.328*h,b=.587+.413*d+.035*h,v=.114-.114*d+.293*h,y=.299-.3*d+1.25*h,_=.587-.586*d-1.05*h,S=.114+.886*d-.2*h;for(t=0;t<s;t+=4)a=o[t+0],n=o[t+1],i=o[t+2],r=o[t+3],o[t+0]=p*a+m*n+g*i+u,o[t+1]=f*a+b*n+v*i+u,o[t+2]=y*a+_*n+S*i+u,o[t+3]=r}},2674:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.HSV=function(e){var t,a,n,i,r,o=e.data,s=o.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),u=Math.abs(this.hue()+360)%360,d=l*c*Math.cos(u*Math.PI/180),h=l*c*Math.sin(u*Math.PI/180),p=.299*l+.701*d+.167*h,m=.587*l-.587*d+.33*h,g=.114*l-.114*d-.497*h,f=.299*l-.299*d-.328*h,b=.587*l+.413*d+.035*h,v=.114*l-.114*d+.293*h,y=.299*l-.3*d+1.25*h,_=.587*l-.586*d-1.05*h,S=.114*l+.886*d-.2*h;for(t=0;t<s;t+=4)a=o[t+0],n=o[t+1],i=o[t+2],r=o[t+3],o[t+0]=p*a+m*n+g*i,o[t+1]=f*a+b*n+v*i,o[t+2]=y*a+_*n+S*i,o[t+3]=r},n.Factory.addGetterSetter(i.Node,"hue",0,r.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"saturation",0,r.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"value",0,r.getNumberValidator(),n.Factory.afterSetFilter)},2675:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Invert=function(e){var t,a=e.data,n=a.length;for(t=0;t<n;t+=4)a[t]=255-a[t],a[t+1]=255-a[t+1],a[t+2]=255-a[t+2]}},2676:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2347),o=a(2345);t.Kaleidoscope=function(e){var t,a,n,i,o,s,l,c,u,d=e.width,h=e.height,p=Math.round(this.kaleidoscopePower()),m=Math.round(this.kaleidoscopeAngle()),g=Math.floor(d*(m%360)/360);if(!(p<1)){var f=r.Util.createCanvasElement();f.width=d,f.height=h;var b=f.getContext("2d").getImageData(0,0,d,h);!function(e,t,a){var n,i,r,o,s=e.data,l=t.data,c=e.width,u=e.height,d=a.polarCenterX||c/2,h=a.polarCenterY||u/2,p=0,m=0,g=0,f=0,b=Math.sqrt(d*d+h*h);i=c-d,r=u-h,b=(o=Math.sqrt(i*i+r*r))>b?o:b;var v,y,_,S,D=u,C=c,E=360/C*Math.PI/180;for(y=0;y<C;y+=1)for(_=Math.sin(y*E),S=Math.cos(y*E),v=0;v<D;v+=1)i=Math.floor(d+b*v/D*S),p=s[(n=4*((r=Math.floor(h+b*v/D*_))*c+i))+0],m=s[n+1],g=s[n+2],f=s[n+3],l[(n=4*(y+v*c))+0]=p,l[n+1]=m,l[n+2]=g,l[n+3]=f}(e,b,{polarCenterX:d/2,polarCenterY:h/2});for(var v=d/Math.pow(2,p);v<=8;)v*=2,p-=1;var y=v=Math.ceil(v),_=0,S=y,D=1;for(g+v>d&&(_=y,S=0,D=-1),a=0;a<h;a+=1)for(t=_;t!==S;t+=D)c=4*(d*a+Math.round(t+g)%d),i=b.data[c+0],o=b.data[c+1],s=b.data[c+2],l=b.data[c+3],u=4*(d*a+t),b.data[u+0]=i,b.data[u+1]=o,b.data[u+2]=s,b.data[u+3]=l;for(a=0;a<h;a+=1)for(y=Math.floor(v),n=0;n<p;n+=1){for(t=0;t<y+1;t+=1)c=4*(d*a+t),i=b.data[c+0],o=b.data[c+1],s=b.data[c+2],l=b.data[c+3],u=4*(d*a+2*y-t-1),b.data[u+0]=i,b.data[u+1]=o,b.data[u+2]=s,b.data[u+3]=l;y*=2}!function(e,t,a){var n,i,r,o,s,l,c=e.data,u=t.data,d=e.width,h=e.height,p=a.polarCenterX||d/2,m=a.polarCenterY||h/2,g=0,f=0,b=0,v=0,y=Math.sqrt(p*p+m*m);i=d-p,r=h-m,y=(l=Math.sqrt(i*i+r*r))>y?l:y;var _,S,D,C=h,E=d,O=a.polarRotation||0;for(i=0;i<d;i+=1)for(r=0;r<h;r+=1)o=i-p,s=r-m,_=Math.sqrt(o*o+s*s)*C/y,S=(S=(180*Math.atan2(s,o)/Math.PI+360+O)%360)*E/360,D=Math.floor(S),g=c[(n=4*(Math.floor(_)*d+D))+0],f=c[n+1],b=c[n+2],v=c[n+3],u[(n=4*(r*d+i))+0]=g,u[n+1]=f,u[n+2]=b,u[n+3]=v}(b,e,{polarRotation:0})}},n.Factory.addGetterSetter(i.Node,"kaleidoscopePower",2,o.getNumberValidator(),n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"kaleidoscopeAngle",0,o.getNumberValidator(),n.Factory.afterSetFilter)},2677:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);function o(e,t,a){var n=4*(a*e.width+t),i=[];return i.push(e.data[n++],e.data[n++],e.data[n++],e.data[n++]),i}function s(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}t.Mask=function(e){var t=function(e,t){var a=o(e,0,0),n=o(e,e.width-1,0),i=o(e,0,e.height-1),r=o(e,e.width-1,e.height-1),l=t||10;if(s(a,n)<l&&s(n,r)<l&&s(r,i)<l&&s(i,a)<l){for(var c=function(e){for(var t=[0,0,0],a=0;a<e.length;a++)t[0]+=e[a][0],t[1]+=e[a][1],t[2]+=e[a][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}([n,a,r,i]),u=[],d=0;d<e.width*e.height;d++){var h=s(c,[e.data[4*d],e.data[4*d+1],e.data[4*d+2]]);u[d]=h<l?0:255}return u}}(e,this.threshold());return t&&function(e,t){for(var a=0;a<e.width*e.height;a++)e.data[4*a+3]=t[a]}(e,t=function(e,t,a){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],i=Math.round(Math.sqrt(n.length)),r=Math.floor(i/2),o=[],s=0;s<a;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,d=0;d<i;d++)for(var h=0;h<i;h++){var p=s+d-r,m=l+h-r;if(p>=0&&p<a&&m>=0&&m<t){var g=n[d*i+h];u+=e[p*t+m]*g}}o[c]=u}return o}(t=function(e,t,a){for(var n=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(n.length)),r=Math.floor(i/2),o=[],s=0;s<a;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,d=0;d<i;d++)for(var h=0;h<i;h++){var p=s+d-r,m=l+h-r;if(p>=0&&p<a&&m>=0&&m<t){var g=n[d*i+h];u+=e[p*t+m]*g}}o[c]=u>=1020?255:0}return o}(t=function(e,t,a){for(var n=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(n.length)),r=Math.floor(i/2),o=[],s=0;s<a;s++)for(var l=0;l<t;l++){for(var c=s*t+l,u=0,d=0;d<i;d++)for(var h=0;h<i;h++){var p=s+d-r,m=l+h-r;if(p>=0&&p<a&&m>=0&&m<t){var g=n[d*i+h];u+=e[p*t+m]*g}}o[c]=2040===u?255:0}return o}(t,e.width,e.height),e.width,e.height),e.width,e.height)),e},n.Factory.addGetterSetter(i.Node,"threshold",0,r.getNumberValidator(),n.Factory.afterSetFilter)},2678:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.Noise=function(e){var t,a=255*this.noise(),n=e.data,i=n.length,r=a/2;for(t=0;t<i;t+=4)n[t+0]+=r-2*r*Math.random(),n[t+1]+=r-2*r*Math.random(),n[t+2]+=r-2*r*Math.random()},n.Factory.addGetterSetter(i.Node,"noise",.2,r.getNumberValidator(),n.Factory.afterSetFilter)},2679:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2347),r=a(2358),o=a(2345);t.Pixelate=function(e){var t,a,n,r,o,s,l,c,u,d,h,p,m,g,f=Math.ceil(this.pixelSize()),b=e.width,v=e.height,y=Math.ceil(b/f),_=Math.ceil(v/f),S=e.data;if(f<=0)i.Util.error("pixelSize value can not be <= 0");else for(p=0;p<y;p+=1)for(m=0;m<_;m+=1){for(r=0,o=0,s=0,l=0,u=(c=p*f)+f,h=(d=m*f)+f,g=0,t=c;t<u;t+=1)if(!(t>=b))for(a=d;a<h;a+=1)a>=v||(r+=S[(n=4*(b*a+t))+0],o+=S[n+1],s+=S[n+2],l+=S[n+3],g+=1);for(r/=g,o/=g,s/=g,l/=g,t=c;t<u;t+=1)if(!(t>=b))for(a=d;a<h;a+=1)a>=v||(S[(n=4*(b*a+t))+0]=r,S[n+1]=o,S[n+2]=s,S[n+3]=l)}},n.Factory.addGetterSetter(r.Node,"pixelSize",8,o.getNumberValidator(),n.Factory.afterSetFilter)},2680:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.Posterize=function(e){var t,a=Math.round(254*this.levels())+1,n=e.data,i=n.length,r=255/a;for(t=0;t<i;t+=1)n[t]=Math.floor(n[t]/r)*r},n.Factory.addGetterSetter(i.Node,"levels",.5,r.getNumberValidator(),n.Factory.afterSetFilter)},2681:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.RGB=function(e){var t,a,n=e.data,i=n.length,r=this.red(),o=this.green(),s=this.blue();for(t=0;t<i;t+=4)a=(.34*n[t]+.5*n[t+1]+.16*n[t+2])/255,n[t]=a*r,n[t+1]=a*o,n[t+2]=a*s,n[t+3]=n[t+3]},n.Factory.addGetterSetter(i.Node,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),n.Factory.addGetterSetter(i.Node,"blue",0,r.RGBComponent,n.Factory.afterSetFilter)},2682:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.RGBA=function(e){var t,a,n=e.data,i=n.length,r=this.red(),o=this.green(),s=this.blue(),l=this.alpha();for(t=0;t<i;t+=4)a=1-l,n[t]=r*l+n[t]*a,n[t+1]=o*l+n[t+1]*a,n[t+2]=s*l+n[t+2]*a},n.Factory.addGetterSetter(i.Node,"red",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),n.Factory.addGetterSetter(i.Node,"green",0,(function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)})),n.Factory.addGetterSetter(i.Node,"blue",0,r.RGBComponent,n.Factory.afterSetFilter),n.Factory.addGetterSetter(i.Node,"alpha",1,(function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e}))},2683:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sepia=function(e){var t,a,n,i,r=e.data,o=r.length;for(t=0;t<o;t+=4)a=r[t+0],n=r[t+1],i=r[t+2],r[t+0]=Math.min(255,.393*a+.769*n+.189*i),r[t+1]=Math.min(255,.349*a+.686*n+.168*i),r[t+2]=Math.min(255,.272*a+.534*n+.131*i)}},2684:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Solarize=function(e){var t=e.data,a=e.width,n=4*a,i=e.height;do{var r=(i-1)*n,o=a;do{var s=r+4*(o-1),l=t[s],c=t[s+1],u=t[s+2];l>127&&(l=255-l),c>127&&(c=255-c),u>127&&(u=255-u),t[s]=l,t[s+1]=c,t[s+2]=u}while(--o)}while(--i)}},2685:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(2342),i=a(2358),r=a(2345);t.Threshold=function(e){var t,a=255*this.threshold(),n=e.data,i=n.length;for(t=0;t<i;t+=1)n[t]=n[t]<a?0:255},n.Factory.addGetterSetter(i.Node,"threshold",.5,r.getNumberValidator(),n.Factory.afterSetFilter)},2686:function(e,t,a){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=a(0),s=a(2526),l=a(2687),c=a(2689),u=a(2690),d=a(2527),h=d.applyNodeProps,p=d.toggleStrictMode,m=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){s.isBrowser&&(this._stage=new s.Stage({width:this.props.width,height:this.props.height,container:this._tagRef}),this._setRef(this._stage),h(this._stage,this.props),this._mountNode=f.createContainer(this._stage),f.updateContainer(this.props.children,this._mountNode,this))},t.prototype._setRef=function(e){var t=this.props.forwardedRef;t&&("function"==typeof t?t(e):t.current=e)},t.prototype.componentDidUpdate=function(e){s.isBrowser&&(this._setRef(this._stage),h(this._stage,this.props,e),f.updateContainer(this.props.children,this._mountNode,this))},t.prototype.componentWillUnmount=function(){s.isBrowser&&(this._setRef(null),f.updateContainer(null,this._mountNode,this),this._stage.destroy())},t.prototype.getStage=function(){return this._stage},t.prototype.render=function(){var e=this,t=this.props;return o.createElement("div",{ref:function(t){return e._tagRef=t},accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},t}(o.Component),g={};["Layer","FastLayer","Group","Label","Rect","Circle","Ellipse","Wedge","Line","Sprite","Image","Text","TextPath","Star","Ring","Arc","Tag","Path","RegularPolygon","Arrow","Shape","Transformer"].forEach((function(e){g[e]=e}));var f=l(u);f.injectIntoDevTools({findFiberByHostInstance:c.getClosestInstanceFromNode,bundleType:0,version:o.version,rendererPackageName:"react-konva",getInspectorDataForViewTag:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log(t)}});var b=o.forwardRef((function(e,t){return o.createElement(m,n({},e,{forwardedRef:t}))}));e.exports=n({},g,{__matchRectVersion:!0,Stage:b,useStrictMode:p})},2687:function(e,t,a){"use strict";e.exports=a(2688)},2688:function(e,t,a){(function(e){
/** @license React v0.25.1
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
e.exports=function t(n){"use strict";var i=a(711),r=a(0),o=a(279);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;l.hasOwnProperty("ReactCurrentDispatcher")||(l.ReactCurrentDispatcher={current:null}),l.hasOwnProperty("ReactCurrentBatchConfig")||(l.ReactCurrentBatchConfig={suspense:null});var c="function"==typeof Symbol&&Symbol.for,u=c?Symbol.for("react.element"):60103,d=c?Symbol.for("react.portal"):60106,h=c?Symbol.for("react.fragment"):60107,p=c?Symbol.for("react.strict_mode"):60108,m=c?Symbol.for("react.profiler"):60114,g=c?Symbol.for("react.provider"):60109,f=c?Symbol.for("react.context"):60110,b=c?Symbol.for("react.concurrent_mode"):60111,v=c?Symbol.for("react.forward_ref"):60112,y=c?Symbol.for("react.suspense"):60113,_=c?Symbol.for("react.suspense_list"):60120,S=c?Symbol.for("react.memo"):60115,D=c?Symbol.for("react.lazy"):60116,C=c?Symbol.for("react.block"):60121,E="function"==typeof Symbol&&Symbol.iterator;function O(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=E&&e[E]||e["@@iterator"])?e:null}function w(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case h:return"Fragment";case d:return"Portal";case m:return"Profiler";case p:return"StrictMode";case y:return"Suspense";case _:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return"Context.Consumer";case g:return"Context.Provider";case v:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case S:return w(e.type);case C:return w(e.render);case D:if(e=1===e._status?e._result:null)return w(e)}return null}function j(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function I(e){if(j(e)!==e)throw Error(s(188))}function N(e){var t=e.alternate;if(!t){if(null===(t=j(e)))throw Error(s(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(null===i)break;var r=i.alternate;if(null===r){if(null!==(n=i.return)){a=n;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===a)return I(i),e;if(r===n)return I(i),t;r=r.sibling}throw Error(s(188))}if(a.return!==n.return)a=i,n=r;else{for(var o=!1,l=i.child;l;){if(l===a){o=!0,a=i,n=r;break}if(l===n){o=!0,n=i,a=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===a){o=!0,a=r,n=i;break}if(l===n){o=!0,n=r,a=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(a.alternate!==n)throw Error(s(190))}if(3!==a.tag)throw Error(s(188));return a.stateNode.current===a?e:t}function k(e){if(!(e=N(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var T=n.getPublicInstance,x=n.getRootHostContext,z=n.getChildHostContext,P=n.prepareForCommit,F=n.resetAfterCommit,M=n.createInstance,A=n.appendInitialChild,R=n.finalizeInitialChildren,B=n.prepareUpdate,L=n.shouldSetTextContent,U=n.shouldDeprioritizeSubtree,K=n.createTextInstance,G=n.setTimeout,H=n.clearTimeout,Z=n.noTimeout,W=n.isPrimaryRenderer,V=n.supportsMutation,q=n.supportsPersistence,$=n.supportsHydration,X=n.appendChild,Y=n.appendChildToContainer,Q=n.commitTextUpdate,J=n.commitMount,ee=n.commitUpdate,te=n.insertBefore,ae=n.insertInContainerBefore,ne=n.removeChild,ie=n.removeChildFromContainer,re=n.resetTextContent,oe=n.hideInstance,se=n.hideTextInstance,le=n.unhideInstance,ce=n.unhideTextInstance,ue=n.cloneInstance,de=n.createContainerChildSet,he=n.appendChildToContainerChildSet,pe=n.finalizeContainerChildren,me=n.replaceContainerChildren,ge=n.cloneHiddenInstance,fe=n.cloneHiddenTextInstance,be=n.canHydrateInstance,ve=n.canHydrateTextInstance,ye=n.isSuspenseInstancePending,_e=n.isSuspenseInstanceFallback,Se=n.getNextHydratableSibling,De=n.getFirstHydratableChild,Ce=n.hydrateInstance,Ee=n.hydrateTextInstance,Oe=n.getNextHydratableInstanceAfterSuspenseInstance,we=n.commitHydratedContainer,je=n.commitHydratedSuspenseInstance,Ie=/^(.*)[\\\/]/;function Ne(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var a="";break e;default:var n=e._debugOwner,i=e._debugSource,r=w(e.type);a=null,n&&(a=w(n.type)),n=r,r="",i?r=" (at "+i.fileName.replace(Ie,"")+":"+i.lineNumber+")":a&&(r=" (created by "+a+")"),a="\n    in "+(n||"Unknown")+r}t+=a,e=e.return}while(e);return t}var ke=[],Te=-1;function xe(e){0>Te||(e.current=ke[Te],ke[Te]=null,Te--)}function ze(e,t){Te++,ke[Te]=e.current,e.current=t}var Pe={},Fe={current:Pe},Me={current:!1},Ae=Pe;function Re(e,t){var a=e.type.contextTypes;if(!a)return Pe;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,r={};for(i in a)r[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Be(e){return null!=(e=e.childContextTypes)}function Le(){xe(Me),xe(Fe)}function Ue(e,t,a){if(Fe.current!==Pe)throw Error(s(168));ze(Fe,t),ze(Me,a)}function Ke(e,t,a){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return a;for(var r in n=n.getChildContext())if(!(r in e))throw Error(s(108,w(t)||"Unknown",r));return i({},a,{},n)}function Ge(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pe,Ae=Fe.current,ze(Fe,e),ze(Me,Me.current),!0}function He(e,t,a){var n=e.stateNode;if(!n)throw Error(s(169));a?(e=Ke(e,t,Ae),n.__reactInternalMemoizedMergedChildContext=e,xe(Me),xe(Fe),ze(Fe,e)):xe(Me),ze(Me,a)}var Ze=o.unstable_runWithPriority,We=o.unstable_scheduleCallback,Ve=o.unstable_cancelCallback,qe=o.unstable_requestPaint,$e=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ye=o.unstable_ImmediatePriority,Qe=o.unstable_UserBlockingPriority,Je=o.unstable_NormalPriority,et=o.unstable_LowPriority,tt=o.unstable_IdlePriority,at={},nt=o.unstable_shouldYield,it=void 0!==qe?qe:function(){},rt=null,ot=null,st=!1,lt=$e(),ct=1e4>lt?$e:function(){return $e()-lt};function ut(){switch(Xe()){case Ye:return 99;case Qe:return 98;case Je:return 97;case et:return 96;case tt:return 95;default:throw Error(s(332))}}function dt(e){switch(e){case 99:return Ye;case 98:return Qe;case 97:return Je;case 96:return et;case 95:return tt;default:throw Error(s(332))}}function ht(e,t){return e=dt(e),Ze(e,t)}function pt(e,t,a){return e=dt(e),We(e,t,a)}function mt(e){return null===rt?(rt=[e],ot=We(Ye,ft)):rt.push(e),at}function gt(){if(null!==ot){var e=ot;ot=null,Ve(e)}ft()}function ft(){if(!st&&null!==rt){st=!0;var e=0;try{var t=rt;ht(99,(function(){for(;e<t.length;e++){var a=t[e];do{a=a(!0)}while(null!==a)}})),rt=null}catch(a){throw null!==rt&&(rt=rt.slice(e+1)),We(Ye,gt),a}finally{st=!1}}}function bt(e,t,a){return 1073741821-(1+((1073741821-e+t/10)/(a/=10)|0))*a}var vt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},yt=Object.prototype.hasOwnProperty;function _t(e,t){if(vt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++)if(!yt.call(t,a[n])||!vt(e[a[n]],t[a[n]]))return!1;return!0}function St(e,t){if(e&&e.defaultProps)for(var a in t=i({},t),e=e.defaultProps)void 0===t[a]&&(t[a]=e[a]);return t}var Dt={current:null},Ct=null,Et=null,Ot=null;function wt(){Ot=Et=Ct=null}function jt(e,t){e=e.type._context,W?(ze(Dt,e._currentValue),e._currentValue=t):(ze(Dt,e._currentValue2),e._currentValue2=t)}function It(e){var t=Dt.current;xe(Dt),e=e.type._context,W?e._currentValue=t:e._currentValue2=t}function Nt(e,t){for(;null!==e;){var a=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==a&&a.childExpirationTime<t&&(a.childExpirationTime=t);else{if(!(null!==a&&a.childExpirationTime<t))break;a.childExpirationTime=t}e=e.return}}function kt(e,t){Ct=e,Ot=Et=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(nn=!0),e.firstContext=null)}function Tt(e,t){if(Ot!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Ot=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Et){if(null===Ct)throw Error(s(308));Et=t,Ct.dependencies={expirationTime:0,firstContext:t,responders:null}}else Et=Et.next=t;return W?e._currentValue:e._currentValue2}var xt=!1;function zt(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Pt(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function Ft(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function Mt(e,t){if(null!==(e=e.updateQueue)){var a=(e=e.shared).pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}}function At(e,t){var a=e.alternate;null!==a&&Pt(a,e),null===(a=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=a.next,a.next=t)}function Rt(e,t,a,n){var r=e.updateQueue;xt=!1;var o=r.baseQueue,s=r.shared.pending;if(null!==s){if(null!==o){var l=o.next;o.next=s.next,s.next=l}o=s,r.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=s))}if(null!==o){l=o.next;var c=r.baseState,u=0,d=null,h=null,p=null;if(null!==l)for(var m=l;;){if((s=m.expirationTime)<n){var g={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,tag:m.tag,payload:m.payload,callback:m.callback,next:null};null===p?(h=p=g,d=c):p=p.next=g,s>u&&(u=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,tag:m.tag,payload:m.payload,callback:m.callback,next:null}),Ri(s,m.suspenseConfig);e:{var f=e,b=m;switch(s=t,g=a,b.tag){case 1:if("function"==typeof(f=b.payload)){c=f.call(g,c,s);break e}c=f;break e;case 3:f.effectTag=-4097&f.effectTag|64;case 0:if(null==(s="function"==typeof(f=b.payload)?f.call(g,c,s):f))break e;c=i({},c,s);break e;case 2:xt=!0}}null!==m.callback&&(e.effectTag|=32,null===(s=r.effects)?r.effects=[m]:s.push(m))}if(null===(m=m.next)||m===l){if(null===(s=r.shared.pending))break;m=o.next=s.next,s.next=l,r.baseQueue=o=s,r.shared.pending=null}}null===p?d=c:p.next=h,r.baseState=d,r.baseQueue=p,Bi(u),e.expirationTime=u,e.memoizedState=c}}function Bt(e,t,a){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=i,i=a,"function"!=typeof n)throw Error(s(191,n));n.call(i)}}}var Lt=l.ReactCurrentBatchConfig,Ut=(new r.Component).refs;function Kt(e,t,a,n){a=null==(a=a(n,t=e.memoizedState))?t:i({},t,a),e.memoizedState=a,0===e.expirationTime&&(e.updateQueue.baseState=a)}var Gt={isMounted:function(e){return!!(e=e._reactInternalFiber)&&j(e)===e},enqueueSetState:function(e,t,a){e=e._reactInternalFiber;var n=Oi(),i=Lt.suspense;(i=Ft(n=wi(n,e,i),i)).payload=t,null!=a&&(i.callback=a),Mt(e,i),ji(e,n)},enqueueReplaceState:function(e,t,a){e=e._reactInternalFiber;var n=Oi(),i=Lt.suspense;(i=Ft(n=wi(n,e,i),i)).tag=1,i.payload=t,null!=a&&(i.callback=a),Mt(e,i),ji(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var a=Oi(),n=Lt.suspense;(n=Ft(a=wi(a,e,n),n)).tag=2,null!=t&&(n.callback=t),Mt(e,n),ji(e,a)}};function Ht(e,t,a,n,i,r,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!_t(a,n)||!_t(i,r))}function Zt(e,t,a){var n=!1,i=Pe,r=t.contextType;return"object"==typeof r&&null!==r?r=Tt(r):(i=Be(t)?Ae:Fe.current,r=(n=null!=(n=t.contextTypes))?Re(e,i):Pe),t=new t(a,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Gt,e.stateNode=t,t._reactInternalFiber=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),t}function Wt(e,t,a,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Gt.enqueueReplaceState(t,t.state,null)}function Vt(e,t,a,n){var i=e.stateNode;i.props=a,i.state=e.memoizedState,i.refs=Ut,zt(e);var r=t.contextType;"object"==typeof r&&null!==r?i.context=Tt(r):(r=Be(t)?Ae:Fe.current,i.context=Re(e,r)),Rt(e,a,i,n),i.state=e.memoizedState,"function"==typeof(r=t.getDerivedStateFromProps)&&(Kt(e,t,r,a),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Gt.enqueueReplaceState(i,i.state,null),Rt(e,a,i,n),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var qt=Array.isArray;function $t(e,t,a){if(null!==(e=a.ref)&&"function"!=typeof e&&"object"!=typeof e){if(a._owner){if(a=a._owner){if(1!==a.tag)throw Error(s(309));var n=a.stateNode}if(!n)throw Error(s(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=n.refs;t===Ut&&(t=n.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function Xt(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Yt(e){function t(t,a){if(e){var n=t.lastEffect;null!==n?(n.nextEffect=a,t.lastEffect=a):t.firstEffect=t.lastEffect=a,a.nextEffect=null,a.effectTag=8}}function a(a,n){if(!e)return null;for(;null!==n;)t(a,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=or(e,t)).index=0,e.sibling=null,e}function r(t,a,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<a?(t.effectTag=2,a):n:(t.effectTag=2,a):a}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,a,n){return null===t||6!==t.tag?((t=cr(a,e.mode,n)).return=e,t):((t=i(t,a)).return=e,t)}function c(e,t,a,n){return null!==t&&t.elementType===a.type?((n=i(t,a.props)).ref=$t(e,t,a),n.return=e,n):((n=sr(a.type,a.key,a.props,null,e.mode,n)).ref=$t(e,t,a),n.return=e,n)}function p(e,t,a,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=ur(a,e.mode,n)).return=e,t):((t=i(t,a.children||[])).return=e,t)}function m(e,t,a,n,r){return null===t||7!==t.tag?((t=lr(a,e.mode,n,r)).return=e,t):((t=i(t,a)).return=e,t)}function g(e,t,a){if("string"==typeof t||"number"==typeof t)return(t=cr(""+t,e.mode,a)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case u:return(a=sr(t.type,t.key,t.props,null,e.mode,a)).ref=$t(e,null,t),a.return=e,a;case d:return(t=ur(t,e.mode,a)).return=e,t}if(qt(t)||O(t))return(t=lr(t,e.mode,a,null)).return=e,t;Xt(e,t)}return null}function f(e,t,a,n){var i=null!==t?t.key:null;if("string"==typeof a||"number"==typeof a)return null!==i?null:l(e,t,""+a,n);if("object"==typeof a&&null!==a){switch(a.$$typeof){case u:return a.key===i?a.type===h?m(e,t,a.props.children,n,i):c(e,t,a,n):null;case d:return a.key===i?p(e,t,a,n):null}if(qt(a)||O(a))return null!==i?null:m(e,t,a,n,null);Xt(e,a)}return null}function b(e,t,a,n,i){if("string"==typeof n||"number"==typeof n)return l(t,e=e.get(a)||null,""+n,i);if("object"==typeof n&&null!==n){switch(n.$$typeof){case u:return e=e.get(null===n.key?a:n.key)||null,n.type===h?m(t,e,n.props.children,i,n.key):c(t,e,n,i);case d:return p(t,e=e.get(null===n.key?a:n.key)||null,n,i)}if(qt(n)||O(n))return m(t,e=e.get(a)||null,n,i,null);Xt(t,n)}return null}function v(i,o,s,l){for(var c=null,u=null,d=o,h=o=0,p=null;null!==d&&h<s.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var m=f(i,d,s[h],l);if(null===m){null===d&&(d=p);break}e&&d&&null===m.alternate&&t(i,d),o=r(m,o,h),null===u?c=m:u.sibling=m,u=m,d=p}if(h===s.length)return a(i,d),c;if(null===d){for(;h<s.length;h++)null!==(d=g(i,s[h],l))&&(o=r(d,o,h),null===u?c=d:u.sibling=d,u=d);return c}for(d=n(i,d);h<s.length;h++)null!==(p=b(d,i,h,s[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),o=r(p,o,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach((function(e){return t(i,e)})),c}function y(i,o,l,c){var u=O(l);if("function"!=typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,h=o,p=o=0,m=null,v=l.next();null!==h&&!v.done;p++,v=l.next()){h.index>p?(m=h,h=null):m=h.sibling;var y=f(i,h,v.value,c);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),o=r(y,o,p),null===d?u=y:d.sibling=y,d=y,h=m}if(v.done)return a(i,h),u;if(null===h){for(;!v.done;p++,v=l.next())null!==(v=g(i,v.value,c))&&(o=r(v,o,p),null===d?u=v:d.sibling=v,d=v);return u}for(h=n(i,h);!v.done;p++,v=l.next())null!==(v=b(h,i,p,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?p:v.key),o=r(v,o,p),null===d?u=v:d.sibling=v,d=v);return e&&h.forEach((function(e){return t(i,e)})),u}return function(e,n,r,l){var c="object"==typeof r&&null!==r&&r.type===h&&null===r.key;c&&(r=r.props.children);var p="object"==typeof r&&null!==r;if(p)switch(r.$$typeof){case u:e:{for(p=r.key,c=n;null!==c;){if(c.key===p){switch(c.tag){case 7:if(r.type===h){a(e,c.sibling),(n=i(c,r.props.children)).return=e,e=n;break e}break;default:if(c.elementType===r.type){a(e,c.sibling),(n=i(c,r.props)).ref=$t(e,c,r),n.return=e,e=n;break e}}a(e,c);break}t(e,c),c=c.sibling}r.type===h?((n=lr(r.props.children,e.mode,l,r.key)).return=e,e=n):((l=sr(r.type,r.key,r.props,null,e.mode,l)).ref=$t(e,n,r),l.return=e,e=l)}return o(e);case d:e:{for(c=r.key;null!==n;){if(n.key===c){if(4===n.tag&&n.stateNode.containerInfo===r.containerInfo&&n.stateNode.implementation===r.implementation){a(e,n.sibling),(n=i(n,r.children||[])).return=e,e=n;break e}a(e,n);break}t(e,n),n=n.sibling}(n=ur(r,e.mode,l)).return=e,e=n}return o(e)}if("string"==typeof r||"number"==typeof r)return r=""+r,null!==n&&6===n.tag?(a(e,n.sibling),(n=i(n,r)).return=e,e=n):(a(e,n),(n=cr(r,e.mode,l)).return=e,e=n),o(e);if(qt(r))return v(e,n,r,l);if(O(r))return y(e,n,r,l);if(p&&Xt(e,r),void 0===r&&!c)switch(e.tag){case 1:case 0:throw e=e.type,Error(s(152,e.displayName||e.name||"Component"))}return a(e,n)}}var Qt=Yt(!0),Jt=Yt(!1),ea={},ta={current:ea},aa={current:ea},na={current:ea};function ia(e){if(e===ea)throw Error(s(174));return e}function ra(e,t){ze(na,t),ze(aa,e),ze(ta,ea),e=x(t),xe(ta),ze(ta,e)}function oa(){xe(ta),xe(aa),xe(na)}function sa(e){var t=ia(na.current),a=ia(ta.current);a!==(t=z(a,e.type,t))&&(ze(aa,e),ze(ta,t))}function la(e){aa.current===e&&(xe(ta),xe(aa))}var ca={current:0};function ua(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||ye(a)||_e(a)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t){return{responder:e,props:t}}var ha=l.ReactCurrentDispatcher,pa=l.ReactCurrentBatchConfig,ma=0,ga=null,fa=null,ba=null,va=!1;function ya(){throw Error(s(321))}function _a(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!vt(e[a],t[a]))return!1;return!0}function Sa(e,t,a,n,i,r){if(ma=r,ga=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,ha.current=null===e||null===e.memoizedState?Ha:Za,e=a(n,i),t.expirationTime===ma){r=0;do{if(t.expirationTime=0,!(25>r))throw Error(s(301));r+=1,ba=fa=null,t.updateQueue=null,ha.current=Wa,e=a(n,i)}while(t.expirationTime===ma)}if(ha.current=Ga,t=null!==fa&&null!==fa.next,ma=0,ba=fa=ga=null,va=!1,t)throw Error(s(300));return e}function Da(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ba?ga.memoizedState=ba=e:ba=ba.next=e,ba}function Ca(){if(null===fa){var e=ga.alternate;e=null!==e?e.memoizedState:null}else e=fa.next;var t=null===ba?ga.memoizedState:ba.next;if(null!==t)ba=t,fa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(fa=e).memoizedState,baseState:fa.baseState,baseQueue:fa.baseQueue,queue:fa.queue,next:null},null===ba?ga.memoizedState=ba=e:ba=ba.next=e}return ba}function Ea(e,t){return"function"==typeof t?t(e):t}function Oa(e){var t=Ca(),a=t.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=e;var n=fa,i=n.baseQueue,r=a.pending;if(null!==r){if(null!==i){var o=i.next;i.next=r.next,r.next=o}n.baseQueue=i=r,a.pending=null}if(null!==i){i=i.next,n=n.baseState;var l=o=r=null,c=i;do{var u=c.expirationTime;if(u<ma){var d={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(o=l=d,r=n):l=l.next=d,u>ga.expirationTime&&(ga.expirationTime=u,Bi(u))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),Ri(u,c.suspenseConfig),n=c.eagerReducer===e?c.eagerState:e(n,c.action);c=c.next}while(null!==c&&c!==i);null===l?r=n:l.next=o,vt(n,t.memoizedState)||(nn=!0),t.memoizedState=n,t.baseState=r,t.baseQueue=l,a.lastRenderedState=n}return[t.memoizedState,a.dispatch]}function wa(e){var t=Ca(),a=t.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,r=t.memoizedState;if(null!==i){a.pending=null;var o=i=i.next;do{r=e(r,o.action),o=o.next}while(o!==i);vt(r,t.memoizedState)||(nn=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),a.lastRenderedState=r}return[r,n]}function ja(e){var t=Da();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:e}).dispatch=Ka.bind(null,ga,e),[t.memoizedState,e]}function Ia(e,t,a,n){return e={tag:e,create:t,destroy:a,deps:n,next:null},null===(t=ga.updateQueue)?(t={lastEffect:null},ga.updateQueue=t,t.lastEffect=e.next=e):null===(a=t.lastEffect)?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Na(){return Ca().memoizedState}function ka(e,t,a,n){var i=Da();ga.effectTag|=e,i.memoizedState=Ia(1|t,a,void 0,void 0===n?null:n)}function Ta(e,t,a,n){var i=Ca();n=void 0===n?null:n;var r=void 0;if(null!==fa){var o=fa.memoizedState;if(r=o.destroy,null!==n&&_a(n,o.deps))return void Ia(t,a,r,n)}ga.effectTag|=e,i.memoizedState=Ia(1|t,a,r,n)}function xa(e,t){return ka(516,4,e,t)}function za(e,t){return Ta(516,4,e,t)}function Pa(e,t){return Ta(4,2,e,t)}function Fa(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ma(e,t,a){return a=null!=a?a.concat([e]):null,Ta(4,2,Fa.bind(null,t,e),a)}function Aa(){}function Ra(e,t){return Da().memoizedState=[e,void 0===t?null:t],e}function Ba(e,t){var a=Ca();t=void 0===t?null:t;var n=a.memoizedState;return null!==n&&null!==t&&_a(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function La(e,t){var a=Ca();t=void 0===t?null:t;var n=a.memoizedState;return null!==n&&null!==t&&_a(t,n[1])?n[0]:(e=e(),a.memoizedState=[e,t],e)}function Ua(e,t,a){var n=ut();ht(98>n?98:n,(function(){e(!0)})),ht(97<n?97:n,(function(){var n=pa.suspense;pa.suspense=void 0===t?null:t;try{e(!1),a()}finally{pa.suspense=n}}))}function Ka(e,t,a){var n=Oi(),i=Lt.suspense;i={expirationTime:n=wi(n,e,i),suspenseConfig:i,action:a,eagerReducer:null,eagerState:null,next:null};var r=t.pending;if(null===r?i.next=i:(i.next=r.next,r.next=i),t.pending=i,r=e.alternate,e===ga||null!==r&&r===ga)va=!0,i.expirationTime=ma,ga.expirationTime=ma;else{if(0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=r(o,a);if(i.eagerReducer=r,i.eagerState=s,vt(s,o))return}catch(l){}ji(e,n)}}var Ga={readContext:Tt,useCallback:ya,useContext:ya,useEffect:ya,useImperativeHandle:ya,useLayoutEffect:ya,useMemo:ya,useReducer:ya,useRef:ya,useState:ya,useDebugValue:ya,useResponder:ya,useDeferredValue:ya,useTransition:ya},Ha={readContext:Tt,useCallback:Ra,useContext:Tt,useEffect:xa,useImperativeHandle:function(e,t,a){return a=null!=a?a.concat([e]):null,ka(4,2,Fa.bind(null,t,e),a)},useLayoutEffect:function(e,t){return ka(4,2,e,t)},useMemo:function(e,t){var a=Da();return t=void 0===t?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var n=Da();return t=void 0!==a?a(t):t,n.memoizedState=n.baseState=t,e=(e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ka.bind(null,ga,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Da().memoizedState=e},useState:ja,useDebugValue:Aa,useResponder:da,useDeferredValue:function(e,t){var a=ja(e),n=a[0],i=a[1];return xa((function(){var a=pa.suspense;pa.suspense=void 0===t?null:t;try{i(e)}finally{pa.suspense=a}}),[e,t]),n},useTransition:function(e){var t=ja(!1),a=t[0];return t=t[1],[Ra(Ua.bind(null,t,e),[t,e]),a]}},Za={readContext:Tt,useCallback:Ba,useContext:Tt,useEffect:za,useImperativeHandle:Ma,useLayoutEffect:Pa,useMemo:La,useReducer:Oa,useRef:Na,useState:function(){return Oa(Ea)},useDebugValue:Aa,useResponder:da,useDeferredValue:function(e,t){var a=Oa(Ea),n=a[0],i=a[1];return za((function(){var a=pa.suspense;pa.suspense=void 0===t?null:t;try{i(e)}finally{pa.suspense=a}}),[e,t]),n},useTransition:function(e){var t=Oa(Ea),a=t[0];return t=t[1],[Ba(Ua.bind(null,t,e),[t,e]),a]}},Wa={readContext:Tt,useCallback:Ba,useContext:Tt,useEffect:za,useImperativeHandle:Ma,useLayoutEffect:Pa,useMemo:La,useReducer:wa,useRef:Na,useState:function(){return wa(Ea)},useDebugValue:Aa,useResponder:da,useDeferredValue:function(e,t){var a=wa(Ea),n=a[0],i=a[1];return za((function(){var a=pa.suspense;pa.suspense=void 0===t?null:t;try{i(e)}finally{pa.suspense=a}}),[e,t]),n},useTransition:function(e){var t=wa(Ea),a=t[0];return t=t[1],[Ba(Ua.bind(null,t,e),[t,e]),a]}},Va=null,qa=null,$a=!1;function Xa(e,t){var a=ir(5,null,null,0);a.elementType="DELETED",a.type="DELETED",a.stateNode=t,a.return=e,a.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=a,e.lastEffect=a):e.firstEffect=e.lastEffect=a}function Ya(e,t){switch(e.tag){case 5:return null!==(t=be(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=ve(t,e.pendingProps))&&(e.stateNode=t,!0);case 13:default:return!1}}function Qa(e){if($a){var t=qa;if(t){var a=t;if(!Ya(e,t)){if(!(t=Se(a))||!Ya(e,t))return e.effectTag=-1025&e.effectTag|2,$a=!1,void(Va=e);Xa(Va,a)}Va=e,qa=De(t)}else e.effectTag=-1025&e.effectTag|2,$a=!1,Va=e}}function Ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function en(e){if(!$||e!==Va)return!1;if(!$a)return Ja(e),$a=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!L(t,e.memoizedProps))for(t=qa;t;)Xa(e,t),t=Se(t);if(Ja(e),13===e.tag){if(!$)throw Error(s(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));qa=Oe(e)}else qa=Va?Se(e.stateNode):null;return!0}function tn(){$&&(qa=Va=null,$a=!1)}var an=l.ReactCurrentOwner,nn=!1;function rn(e,t,a,n){t.child=null===e?Jt(t,null,a,n):Qt(t,e.child,a,n)}function on(e,t,a,n,i){a=a.render;var r=t.ref;return kt(t,i),n=Sa(e,t,a,n,r,i),null===e||nn?(t.effectTag|=1,rn(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Cn(e,t,i))}function sn(e,t,a,n,i,r){if(null===e){var o=a.type;return"function"!=typeof o||rr(o)||void 0!==o.defaultProps||null!==a.compare||void 0!==a.defaultProps?((e=sr(a.type,null,n,null,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ln(e,t,o,n,i,r))}return o=e.child,i<r&&(i=o.memoizedProps,(a=null!==(a=a.compare)?a:_t)(i,n)&&e.ref===t.ref)?Cn(e,t,r):(t.effectTag|=1,(e=or(o,n)).ref=t.ref,e.return=t,t.child=e)}function ln(e,t,a,n,i,r){return null!==e&&_t(e.memoizedProps,n)&&e.ref===t.ref&&(nn=!1,i<r)?(t.expirationTime=e.expirationTime,Cn(e,t,r)):un(e,t,a,n,r)}function cn(e,t){var a=t.ref;(null===e&&null!==a||null!==e&&e.ref!==a)&&(t.effectTag|=128)}function un(e,t,a,n,i){var r=Be(a)?Ae:Fe.current;return r=Re(t,r),kt(t,i),a=Sa(e,t,a,n,r,i),null===e||nn?(t.effectTag|=1,rn(e,t,a,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Cn(e,t,i))}function dn(e,t,a,n,i){if(Be(a)){var r=!0;Ge(t)}else r=!1;if(kt(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Zt(t,a,n),Vt(t,a,n,i),n=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,c=a.contextType;"object"==typeof c&&null!==c?c=Tt(c):c=Re(t,c=Be(a)?Ae:Fe.current);var u=a.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==n||l!==c)&&Wt(t,o,n,c),xt=!1;var h=t.memoizedState;o.state=h,Rt(t,n,o,i),l=t.memoizedState,s!==n||h!==l||Me.current||xt?("function"==typeof u&&(Kt(t,a,u,n),l=t.memoizedState),(s=xt||Ht(t,a,s,n,h,l,c))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.effectTag|=4)):("function"==typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=s):("function"==typeof o.componentDidMount&&(t.effectTag|=4),n=!1)}else o=t.stateNode,Pt(e,t),s=t.memoizedProps,o.props=t.type===t.elementType?s:St(t.type,s),l=o.context,"object"==typeof(c=a.contextType)&&null!==c?c=Tt(c):c=Re(t,c=Be(a)?Ae:Fe.current),(d="function"==typeof(u=a.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==n||l!==c)&&Wt(t,o,n,c),xt=!1,l=t.memoizedState,o.state=l,Rt(t,n,o,i),h=t.memoizedState,s!==n||l!==h||Me.current||xt?("function"==typeof u&&(Kt(t,a,u,n),h=t.memoizedState),(u=xt||Ht(t,a,s,n,l,h,c))?(d||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(n,h,c),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(n,h,c)),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=h),o.props=n,o.state=h,o.context=c,n=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),n=!1);return hn(e,t,a,n,r,i)}function hn(e,t,a,n,i,r){cn(e,t);var o=0!=(64&t.effectTag);if(!n&&!o)return i&&He(t,a,!1),Cn(e,t,r);n=t.stateNode,an.current=t;var s=o&&"function"!=typeof a.getDerivedStateFromError?null:n.render();return t.effectTag|=1,null!==e&&o?(t.child=Qt(t,e.child,null,r),t.child=Qt(t,null,s,r)):rn(e,t,s,r),t.memoizedState=n.state,i&&He(t,a,!0),t.child}function pn(e){var t=e.stateNode;t.pendingContext?Ue(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ue(0,t.context,!1),ra(e,t.containerInfo)}var mn,gn,fn,bn,vn={dehydrated:null,retryTime:0};function yn(e,t,a){var n,i=t.mode,r=t.pendingProps,o=ca.current,s=!1;if((n=0!=(64&t.effectTag))||(n=0!=(2&o)&&(null===e||null!==e.memoizedState)),n?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),ze(ca,1&o),null===e){if(void 0!==r.fallback&&Qa(t),s){if(s=r.fallback,(r=lr(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,r.child=e;null!==e;)e.return=r,e=e.sibling;return(a=lr(s,i,a,null)).return=t,r.sibling=a,t.memoizedState=vn,t.child=r,a}return i=r.children,t.memoizedState=null,t.child=Jt(t,null,i,a)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(r=r.fallback,(a=or(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(a.child=s;null!==s;)s.return=a,s=s.sibling;return(i=or(i,r)).return=t,a.sibling=i,a.childExpirationTime=0,t.memoizedState=vn,t.child=a,i}return a=Qt(t,e.child,r.children,a),t.memoizedState=null,t.child=a}if(e=e.child,s){if(s=r.fallback,(r=lr(null,i,0,null)).return=t,r.child=e,null!==e&&(e.return=r),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,r.child=e;null!==e;)e.return=r,e=e.sibling;return(a=lr(s,i,a,null)).return=t,r.sibling=a,a.effectTag|=2,r.childExpirationTime=0,t.memoizedState=vn,t.child=r,a}return t.memoizedState=null,t.child=Qt(t,e,r.children,a)}function _n(e,t){e.expirationTime<t&&(e.expirationTime=t);var a=e.alternate;null!==a&&a.expirationTime<t&&(a.expirationTime=t),Nt(e.return,t)}function Sn(e,t,a,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailExpiration:0,tailMode:i,lastEffect:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=a,o.tailExpiration=0,o.tailMode=i,o.lastEffect=r)}function Dn(e,t,a){var n=t.pendingProps,i=n.revealOrder,r=n.tail;if(rn(e,t,n.children,a),0!=(2&(n=ca.current)))n=1&n|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&_n(e,a);else if(19===e.tag)_n(e,a);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(ze(ca,n),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(a=t.child,i=null;null!==a;)null!==(e=a.alternate)&&null===ua(e)&&(i=a),a=a.sibling;null===(a=i)?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),Sn(t,!1,i,a,r,t.lastEffect);break;case"backwards":for(a=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ua(e)){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Sn(t,!0,a,null,r,t.lastEffect);break;case"together":Sn(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Cn(e,t,a){null!==e&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(0!==n&&Bi(n),t.childExpirationTime<a)return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(a=or(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=or(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function En(e){e.effectTag|=4}if(V)mn=function(e,t){for(var a=t.child;null!==a;){if(5===a.tag||6===a.tag)A(e,a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},gn=function(){},fn=function(e,t,a,n,i){if((e=e.memoizedProps)!==n){var r=t.stateNode,o=ia(ta.current);a=B(r,a,e,n,i,o),(t.updateQueue=a)&&En(t)}},bn=function(e,t,a,n){a!==n&&En(t)};else if(q){mn=function(e,t,a,n){for(var i=t.child;null!==i;){if(5===i.tag){var r=i.stateNode;a&&n&&(r=ge(r,i.type,i.memoizedProps,i)),A(e,r)}else if(6===i.tag)r=i.stateNode,a&&n&&(r=fe(r,i.memoizedProps,i)),A(e,r);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.effectTag)&&(r=null!==i.memoizedState)){var o=i.child;if(null!==o&&(null!==o.child&&(o.child.return=o,mn(e,o,!0,r)),null!==(r=o.sibling))){r.return=i,i=r;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var On=function(e,t,a,n){for(var i=t.child;null!==i;){if(5===i.tag){var r=i.stateNode;a&&n&&(r=ge(r,i.type,i.memoizedProps,i)),he(e,r)}else if(6===i.tag)r=i.stateNode,a&&n&&(r=fe(r,i.memoizedProps,i)),he(e,r);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.effectTag)&&(r=null!==i.memoizedState)){var o=i.child;if(null!==o&&(null!==o.child&&(o.child.return=o,On(e,o,!0,r)),null!==(r=o.sibling))){r.return=i,i=r;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};gn=function(e){var t=e.stateNode;if(null!==e.firstEffect){var a=t.containerInfo,n=de(a);On(n,e,!1,!1),t.pendingChildren=n,En(e),pe(a,n)}},fn=function(e,t,a,n,i){var r=e.stateNode,o=e.memoizedProps;if((e=null===t.firstEffect)&&o===n)t.stateNode=r;else{var s=t.stateNode,l=ia(ta.current),c=null;o!==n&&(c=B(s,a,o,n,i,l)),e&&null===c?t.stateNode=r:(r=ue(r,c,a,o,n,t,e,s),R(r,a,n,i,l)&&En(t),t.stateNode=r,e?En(t):mn(r,t,!1,!1))}},bn=function(e,t,a,n){a!==n?(e=ia(na.current),a=ia(ta.current),t.stateNode=K(n,e,a,t),En(t)):t.stateNode=e.stateNode}}else gn=function(){},fn=function(){},bn=function(){};function wn(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;null!==a;)null!==a.alternate&&(n=a),a=a.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function jn(e,t,a){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Be(t.type)&&Le(),null;case 3:return oa(),xe(Me),xe(Fe),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(null===e||null===e.child)&&en(t)&&En(t),gn(t),null;case 5:la(t);var i=ia(na.current);if(a=t.type,null!==e&&null!=t.stateNode)fn(e,t,a,n,i),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(null===t.stateNode)throw Error(s(166));return null}if(e=ia(ta.current),en(t)){if(!$)throw Error(s(175));e=Ce(t.stateNode,t.type,t.memoizedProps,i,e,t),t.updateQueue=e,null!==e&&En(t)}else{var r=M(a,n,i,e,t);mn(r,t,!1,!1),t.stateNode=r,R(r,a,n,i,e)&&En(t)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)bn(e,t,e.memoizedProps,n);else{if("string"!=typeof n&&null===t.stateNode)throw Error(s(166));if(e=ia(na.current),i=ia(ta.current),en(t)){if(!$)throw Error(s(176));Ee(t.stateNode,t.memoizedProps,t)&&En(t)}else t.stateNode=K(n,e,i,t)}return null;case 13:return xe(ca),n=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=a,t):(n=null!==n,i=!1,null===e?void 0!==t.memoizedProps.fallback&&en(t):(i=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(r=t.firstEffect)?(t.firstEffect=a,a.nextEffect=r):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&ca.current)?oi===Jn&&(oi=ei):(oi!==Jn&&oi!==ei||(oi=ti),0!==di&&null!==ni&&(pr(ni,ri),mr(ni,di)))),q&&n&&(t.effectTag|=4),V&&(n||i)&&(t.effectTag|=4),null);case 4:return oa(),gn(t),null;case 10:return It(t),null;case 17:return Be(t.type)&&Le(),null;case 19:if(xe(ca),null===(n=t.memoizedState))return null;if(i=0!=(64&t.effectTag),null===(r=n.rendering)){if(i)wn(n,!1);else if(oi!==Jn||null!==e&&0!=(64&e.effectTag))for(e=t.child;null!==e;){if(null!==(r=ua(e))){for(t.effectTag|=64,wn(n,!1),null!==(e=r.updateQueue)&&(t.updateQueue=e,t.effectTag|=4),null===n.lastEffect&&(t.firstEffect=null),t.lastEffect=n.lastEffect,e=a,n=t.child;null!==n;)a=e,(i=n).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(r=i.alternate)?(i.childExpirationTime=0,i.expirationTime=a,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=r.childExpirationTime,i.expirationTime=r.expirationTime,i.child=r.child,i.memoizedProps=r.memoizedProps,i.memoizedState=r.memoizedState,i.updateQueue=r.updateQueue,a=r.dependencies,i.dependencies=null===a?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),n=n.sibling;return ze(ca,1&ca.current|2),t.child}e=e.sibling}}else{if(!i)if(null!==(e=ua(r))){if(t.effectTag|=64,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.effectTag|=4),wn(n,!0),null===n.tail&&"hidden"===n.tailMode&&!r.alternate)return null!==(t=t.lastEffect=n.lastEffect)&&(t.nextEffect=null),null}else 2*ct()-n.renderingStartTime>n.tailExpiration&&1<a&&(t.effectTag|=64,i=!0,wn(n,!1),t.expirationTime=t.childExpirationTime=a-1);n.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=n.last)?e.sibling=r:t.child=r,n.last=r)}return null!==n.tail?(0===n.tailExpiration&&(n.tailExpiration=ct()+500),e=n.tail,n.rendering=e,n.tail=e.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=ct(),e.sibling=null,t=ca.current,ze(ca,i?1&t|2:1&t),e):null}throw Error(s(156,t.tag))}function In(e){switch(e.tag){case 1:Be(e.type)&&Le();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(oa(),xe(Me),xe(Fe),0!=(64&(t=e.effectTag)))throw Error(s(285));return e.effectTag=-4097&t|64,e;case 5:return la(e),null;case 13:return xe(ca),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return xe(ca),null;case 4:return oa(),null;case 10:return It(e),null;default:return null}}function Nn(e,t){return{value:e,source:t,stack:Ne(t)}}var kn="function"==typeof WeakSet?WeakSet:Set;function Tn(e,t){var a=t.source,n=t.stack;null===n&&null!==a&&(n=Ne(a)),null!==a&&w(a.type),t=t.value,null!==e&&1===e.tag&&w(e.type);try{console.error(t)}catch(i){setTimeout((function(){throw i}))}}function xn(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(a){Yi(e,a)}else t.current=null}function zn(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var a=e.memoizedProps,n=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?a:St(t.type,a),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function Pn(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a=t=t.next;do{if((a.tag&e)===e){var n=a.destroy;a.destroy=void 0,void 0!==n&&n()}a=a.next}while(a!==t)}}function Fn(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a=t=t.next;do{if((a.tag&e)===e){var n=a.create;a.destroy=n()}a=a.next}while(a!==t)}}function Mn(e,t,a){switch(a.tag){case 0:case 11:case 15:case 22:return void Fn(3,a);case 1:if(e=a.stateNode,4&a.effectTag)if(null===t)e.componentDidMount();else{var n=a.elementType===a.type?t.memoizedProps:St(a.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=a.updateQueue)&&Bt(a,t,e));case 3:if(null!==(t=a.updateQueue)){if(e=null,null!==a.child)switch(a.child.tag){case 5:e=T(a.child.stateNode);break;case 1:e=a.child.stateNode}Bt(a,t,e)}return;case 5:return e=a.stateNode,void(null===t&&4&a.effectTag&&J(e,a.type,a.memoizedProps,a));case 6:case 4:case 12:return;case 13:return void($&&null===a.memoizedState&&(a=a.alternate,null!==a&&(a=a.memoizedState,null!==a&&(a=a.dehydrated,null!==a&&je(a)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function An(e,t,a){switch("function"==typeof ar&&ar(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e.next;ht(97<a?97:a,(function(){var e=n;do{var a=e.destroy;if(void 0!==a){var i=t;try{a()}catch(r){Yi(i,r)}}e=e.next}while(e!==n)}))}break;case 1:xn(t),"function"==typeof(a=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(a){Yi(e,a)}}(t,a);break;case 5:xn(t);break;case 4:V?Kn(e,t,a):q&&function(e){if(q){e=e.stateNode.containerInfo;var t=de(e);me(e,t)}}(t)}}function Rn(e,t,a){for(var n=t;;)if(An(e,n,a),null===n.child||V&&4===n.tag){if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else n.child.return=n,n=n.child}function Bn(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&Bn(t)}function Ln(e){return 5===e.tag||3===e.tag||4===e.tag}function Un(e){if(V){e:{for(var t=e.return;null!==t;){if(Ln(t)){var a=t;break e}t=t.return}throw Error(s(160))}switch(t=a.stateNode,a.tag){case 5:var n=!1;break;case 3:case 4:t=t.containerInfo,n=!0;break;default:throw Error(s(161))}16&a.effectTag&&(re(t),a.effectTag&=-17);e:t:for(a=e;;){for(;null===a.sibling;){if(null===a.return||Ln(a.return)){a=null;break e}a=a.return}for(a.sibling.return=a.return,a=a.sibling;5!==a.tag&&6!==a.tag&&18!==a.tag;){if(2&a.effectTag)continue t;if(null===a.child||4===a.tag)continue t;a.child.return=a,a=a.child}if(!(2&a.effectTag)){a=a.stateNode;break e}}n?function e(t,a,n){var i=t.tag,r=5===i||6===i;if(r)t=r?t.stateNode:t.stateNode.instance,a?ae(n,t,a):Y(n,t);else if(4!==i&&null!==(t=t.child))for(e(t,a,n),t=t.sibling;null!==t;)e(t,a,n),t=t.sibling}(e,a,t):function e(t,a,n){var i=t.tag,r=5===i||6===i;if(r)t=r?t.stateNode:t.stateNode.instance,a?te(n,t,a):X(n,t);else if(4!==i&&null!==(t=t.child))for(e(t,a,n),t=t.sibling;null!==t;)e(t,a,n),t=t.sibling}(e,a,t)}}function Kn(e,t,a){for(var n,i,r=t,o=!1;;){if(!o){o=r.return;e:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:i=!1;break e;case 3:case 4:n=n.containerInfo,i=!0;break e}o=o.return}o=!0}if(5===r.tag||6===r.tag)Rn(e,r,a),i?ie(n,r.stateNode):ne(n,r.stateNode);else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(An(e,r,a),null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function Gn(e,t){if(V){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Pn(3,t);case 1:return;case 5:var a=t.stateNode;if(null!=a){var n=t.memoizedProps;e=null!==e?e.memoizedProps:n;var i=t.type,r=t.updateQueue;t.updateQueue=null,null!==r&&ee(a,r,i,e,n,t)}return;case 6:if(null===t.stateNode)throw Error(s(162));return a=t.memoizedProps,void Q(t.stateNode,null!==e?e.memoizedProps:a,a);case 3:return void($&&(t=t.stateNode,t.hydrate&&(t.hydrate=!1,we(t.containerInfo))));case 12:return;case 13:return Hn(t),void Zn(t);case 19:return void Zn(t);case 17:return}throw Error(s(163))}switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Pn(3,t);case 12:return;case 13:return Hn(t),void Zn(t);case 19:return void Zn(t);case 3:$&&((a=t.stateNode).hydrate&&(a.hydrate=!1,we(a.containerInfo)))}e:if(q){switch(t.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:t=t.stateNode,me(t.containerInfo,t.pendingChildren);break e}throw Error(s(163))}}function Hn(e){var t=e;if(null===e.memoizedState)var a=!1;else a=!0,t=e.child,pi=ct();if(V&&null!==t)e:if(e=t,V)for(t=e;;){if(5===t.tag){var n=t.stateNode;a?oe(n):le(t.stateNode,t.memoizedProps)}else if(6===t.tag)n=t.stateNode,a?se(n):ce(n,t.memoizedProps);else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(n=t.child.sibling).return=t,t=n;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}}function Zn(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var a=e.stateNode;null===a&&(a=e.stateNode=new kn),t.forEach((function(t){var n=Ji.bind(null,e,t);a.has(t)||(a.add(t),t.then(n,n))}))}}var Wn="function"==typeof WeakMap?WeakMap:Map;function Vn(e,t,a){(a=Ft(a,null)).tag=3,a.payload={element:null};var n=t.value;return a.callback=function(){gi||(gi=!0,fi=n),Tn(e,t)},a}function qn(e,t,a){(a=Ft(a,null)).tag=3;var n=e.type.getDerivedStateFromError;if("function"==typeof n){var i=t.value;a.payload=function(){return Tn(e,t),n(i)}}var r=e.stateNode;return null!==r&&"function"==typeof r.componentDidCatch&&(a.callback=function(){"function"!=typeof n&&(null===bi?bi=new Set([this]):bi.add(this),Tn(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:null!==a?a:""})}),a}var $n,Xn=Math.ceil,Yn=l.ReactCurrentDispatcher,Qn=l.ReactCurrentOwner,Jn=0,ei=3,ti=4,ai=0,ni=null,ii=null,ri=0,oi=Jn,si=null,li=1073741823,ci=1073741823,ui=null,di=0,hi=!1,pi=0,mi=null,gi=!1,fi=null,bi=null,vi=!1,yi=null,_i=90,Si=null,Di=0,Ci=null,Ei=0;function Oi(){return 0!=(48&ai)?1073741821-(ct()/10|0):0!==Ei?Ei:Ei=1073741821-(ct()/10|0)}function wi(e,t,a){if(0==(2&(t=t.mode)))return 1073741823;var n=ut();if(0==(4&t))return 99===n?1073741823:1073741822;if(0!=(16&ai))return ri;if(null!==a)e=bt(e,0|a.timeoutMs||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=bt(e,150,100);break;case 97:case 96:e=bt(e,5e3,250);break;case 95:e=2;break;default:throw Error(s(326))}return null!==ni&&e===ri&&--e,e}function ji(e,t){if(50<Di)throw Di=0,Ci=null,Error(s(185));if(null!==(e=Ii(e,t))){var a=ut();1073741823===t?0!=(8&ai)&&0==(48&ai)?xi(e):(ki(e),0===ai&&gt()):ki(e),0==(4&ai)||98!==a&&99!==a||(null===Si?Si=new Map([[e,t]]):(void 0===(a=Si.get(e))||a>t)&&Si.set(e,t))}}function Ii(e,t){e.expirationTime<t&&(e.expirationTime=t);var a=e.alternate;null!==a&&a.expirationTime<t&&(a.expirationTime=t);var n=e.return,i=null;if(null===n&&3===e.tag)i=e.stateNode;else for(;null!==n;){if(a=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),null!==a&&a.childExpirationTime<t&&(a.childExpirationTime=t),null===n.return&&3===n.tag){i=n.stateNode;break}n=n.return}return null!==i&&(ni===i&&(Bi(t),oi===ti&&pr(i,ri)),mr(i,t)),i}function Ni(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!hr(e,t=e.firstPendingTime))return t;var a=e.lastPingedTime;return 2>=(e=a>(e=e.nextKnownPendingLevel)?a:e)&&t!==e?0:e}function ki(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=mt(xi.bind(null,e));else{var t=Ni(e),a=e.callbackNode;if(0===t)null!==a&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=Oi();if(1073741823===t?n=99:1===t||2===t?n=95:n=0>=(n=10*(1073741821-t)-10*(1073741821-n))?99:250>=n?98:5250>=n?97:95,null!==a){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=n)return;a!==at&&Ve(a)}e.callbackExpirationTime=t,e.callbackPriority=n,t=1073741823===t?mt(xi.bind(null,e)):pt(n,Ti.bind(null,e),{timeout:10*(1073741821-t)-ct()}),e.callbackNode=t}}}function Ti(e,t){if(Ei=0,t)return gr(e,t=Oi()),ki(e),null;var a=Ni(e);if(0!==a){if(t=e.callbackNode,0!=(48&ai))throw Error(s(327));if(qi(),e===ni&&a===ri||Fi(e,a),null!==ii){var n=ai;ai|=16;for(var i=Ai();;)try{Ui();break}catch(l){Mi(e,l)}if(wt(),ai=n,Yn.current=i,1===oi)throw t=si,Fi(e,a),pr(e,a),ki(e),t;if(null===ii)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=a,n=oi,ni=null,n){case Jn:case 1:throw Error(s(345));case 2:gr(e,2<a?2:a);break;case ei:if(pr(e,a),a===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Hi(i)),1073741823===li&&10<(i=pi+500-ct())){if(hi){var r=e.lastPingedTime;if(0===r||r>=a){e.lastPingedTime=a,Fi(e,a);break}}if(0!==(r=Ni(e))&&r!==a)break;if(0!==n&&n!==a){e.lastPingedTime=n;break}e.timeoutHandle=G(Zi.bind(null,e),i);break}Zi(e);break;case ti:if(pr(e,a),a===(n=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Hi(i)),hi&&(0===(i=e.lastPingedTime)||i>=a)){e.lastPingedTime=a,Fi(e,a);break}if(0!==(i=Ni(e))&&i!==a)break;if(0!==n&&n!==a){e.lastPingedTime=n;break}if(1073741823!==ci?n=10*(1073741821-ci)-ct():1073741823===li?n=0:(n=10*(1073741821-li)-5e3,0>(n=(i=ct())-n)&&(n=0),(a=10*(1073741821-a)-i)<(n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Xn(n/1960))-n)&&(n=a)),10<n){e.timeoutHandle=G(Zi.bind(null,e),n);break}Zi(e);break;case 5:if(1073741823!==li&&null!==ui){r=li;var o=ui;if(0>=(n=0|o.busyMinDurationMs)?n=0:(i=0|o.busyDelayMs,n=(r=ct()-(10*(1073741821-r)-(0|o.timeoutMs||5e3)))<=i?0:i+n-r),10<n){pr(e,a),e.timeoutHandle=G(Zi.bind(null,e),n);break}}Zi(e);break;default:throw Error(s(329))}if(ki(e),e.callbackNode===t)return Ti.bind(null,e)}}return null}function xi(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&ai))throw Error(s(327));if(qi(),e===ni&&t===ri||Fi(e,t),null!==ii){var a=ai;ai|=16;for(var n=Ai();;)try{Li();break}catch(i){Mi(e,i)}if(wt(),ai=a,Yn.current=n,1===oi)throw a=si,Fi(e,t),pr(e,t),ki(e),a;if(null!==ii)throw Error(s(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,ni=null,Zi(e),ki(e)}return null}function zi(e,t){var a=ai;ai|=1;try{return e(t)}finally{0===(ai=a)&&gt()}}function Pi(e,t){if(0!=(48&ai))throw Error(s(187));var a=ai;ai|=1;try{return ht(99,e.bind(null,t))}finally{ai=a,gt()}}function Fi(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var a=e.timeoutHandle;if(a!==Z&&(e.timeoutHandle=Z,H(a)),null!==ii)for(a=ii.return;null!==a;){var n=a;switch(n.tag){case 1:null!=(n=n.type.childContextTypes)&&Le();break;case 3:oa(),xe(Me),xe(Fe);break;case 5:la(n);break;case 4:oa();break;case 13:case 19:xe(ca);break;case 10:It(n)}a=a.return}ni=e,ii=or(e.current,null),ri=t,oi=Jn,si=null,ci=li=1073741823,ui=null,di=0,hi=!1}function Mi(e,t){for(;;){try{if(wt(),ha.current=Ga,va)for(var a=ga.memoizedState;null!==a;){var n=a.queue;null!==n&&(n.pending=null),a=a.next}if(ma=0,ba=fa=ga=null,va=!1,null===ii||null===ii.return)return oi=1,si=t,ii=null;e:{var i=e,r=ii.return,o=ii,s=t;if(t=ri,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(0==(2&o.mode)){var c=o.alternate;c?(o.updateQueue=c.updateQueue,o.memoizedState=c.memoizedState,o.expirationTime=c.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var u=0!=(1&ca.current),d=r;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!u)}}if(h){var g=d.updateQueue;if(null===g){var f=new Set;f.add(l),d.updateQueue=f}else g.add(l);if(0==(2&d.mode)){if(d.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var b=Ft(1073741823,null);b.tag=2,Mt(o,b)}o.expirationTime=1073741823;break e}s=void 0,o=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new Wn,s=new Set,v.set(l,s)):void 0===(s=v.get(l))&&(s=new Set,v.set(l,s)),!s.has(o)){s.add(o);var y=Qi.bind(null,i,l,o);l.then(y,y)}d.effectTag|=4096,d.expirationTime=t;break e}d=d.return}while(null!==d);s=Error((w(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Ne(o))}5!==oi&&(oi=2),s=Nn(s,o),d=r;do{switch(d.tag){case 3:l=s,d.effectTag|=4096,d.expirationTime=t,At(d,Vn(d,l,t));break e;case 1:l=s;var _=d.type,S=d.stateNode;if(0==(64&d.effectTag)&&("function"==typeof _.getDerivedStateFromError||null!==S&&"function"==typeof S.componentDidCatch&&(null===bi||!bi.has(S)))){d.effectTag|=4096,d.expirationTime=t,At(d,qn(d,l,t));break e}}d=d.return}while(null!==d)}ii=Gi(ii)}catch(D){t=D;continue}break}}function Ai(){var e=Yn.current;return Yn.current=Ga,null===e?Ga:e}function Ri(e,t){e<li&&2<e&&(li=e),null!==t&&e<ci&&2<e&&(ci=e,ui=t)}function Bi(e){e>di&&(di=e)}function Li(){for(;null!==ii;)ii=Ki(ii)}function Ui(){for(;null!==ii&&!nt();)ii=Ki(ii)}function Ki(e){var t=$n(e.alternate,e,ri);return e.memoizedProps=e.pendingProps,null===t&&(t=Gi(e)),Qn.current=null,t}function Gi(e){ii=e;do{var t=ii.alternate;if(e=ii.return,0==(2048&ii.effectTag)){if(t=jn(t,ii,ri),1===ri||1!==ii.childExpirationTime){for(var a=0,n=ii.child;null!==n;){var i=n.expirationTime,r=n.childExpirationTime;i>a&&(a=i),r>a&&(a=r),n=n.sibling}ii.childExpirationTime=a}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=ii.firstEffect),null!==ii.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=ii.firstEffect),e.lastEffect=ii.lastEffect),1<ii.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=ii:e.firstEffect=ii,e.lastEffect=ii))}else{if(null!==(t=In(ii)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=ii.sibling))return t;ii=e}while(null!==ii);return oi===Jn&&(oi=5),null}function Hi(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Zi(e){var t=ut();return ht(99,Wi.bind(null,e,t)),null}function Wi(e,t){do{qi()}while(null!==yi);if(0!=(48&ai))throw Error(s(327));var a=e.finishedWork,n=e.finishedExpirationTime;if(null===a)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Hi(a);if(e.firstPendingTime=i,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===ni&&(ii=ni=null,ri=0),1<a.effectTag?null!==a.lastEffect?(a.lastEffect.nextEffect=a,i=a.firstEffect):i=a:i=a.firstEffect,null!==i){var r=ai;ai|=32,Qn.current=null,P(e.containerInfo),mi=i;do{try{Vi()}catch(v){if(null===mi)throw Error(s(330));Yi(mi,v),mi=mi.nextEffect}}while(null!==mi);mi=i;do{try{for(var o=e,l=t;null!==mi;){var c=mi.effectTag;if(16&c&&V&&re(mi.stateNode),128&c){var u=mi.alternate;if(null!==u){var d=u.ref;null!==d&&("function"==typeof d?d(null):d.current=null)}}switch(1038&c){case 2:Un(mi),mi.effectTag&=-3;break;case 6:Un(mi),mi.effectTag&=-3,Gn(mi.alternate,mi);break;case 1024:mi.effectTag&=-1025;break;case 1028:mi.effectTag&=-1025,Gn(mi.alternate,mi);break;case 4:Gn(mi.alternate,mi);break;case 8:var h=o,p=mi,m=l;V?Kn(h,p,m):Rn(h,p,m),Bn(p)}mi=mi.nextEffect}}catch(v){if(null===mi)throw Error(s(330));Yi(mi,v),mi=mi.nextEffect}}while(null!==mi);F(e.containerInfo),e.current=a,mi=i;do{try{for(c=e;null!==mi;){var g=mi.effectTag;if(36&g&&Mn(c,mi.alternate,mi),128&g){u=void 0;var f=mi.ref;if(null!==f){var b=mi.stateNode;switch(mi.tag){case 5:u=T(b);break;default:u=b}"function"==typeof f?f(u):f.current=u}}mi=mi.nextEffect}}catch(v){if(null===mi)throw Error(s(330));Yi(mi,v),mi=mi.nextEffect}}while(null!==mi);mi=null,it(),ai=r}else e.current=a;if(vi)vi=!1,yi=e,_i=t;else for(mi=i;null!==mi;)t=mi.nextEffect,mi.nextEffect=null,mi=t;if(0===(t=e.firstPendingTime)&&(bi=null),1073741823===t?e===Ci?Di++:(Di=0,Ci=e):Di=0,"function"==typeof tr&&tr(a.stateNode,n),ki(e),gi)throw gi=!1,e=fi,fi=null,e;return 0!=(8&ai)||gt(),null}function Vi(){for(;null!==mi;){var e=mi.effectTag;0!=(256&e)&&zn(mi.alternate,mi),0==(512&e)||vi||(vi=!0,pt(97,(function(){return qi(),null}))),mi=mi.nextEffect}}function qi(){if(90!==_i){var e=97<_i?97:_i;return _i=90,ht(e,$i)}}function $i(){if(null===yi)return!1;var e=yi;if(yi=null,0!=(48&ai))throw Error(s(331));var t=ai;for(ai|=32,e=e.current.firstEffect;null!==e;){try{var a=e;if(0!=(512&a.effectTag))switch(a.tag){case 0:case 11:case 15:case 22:Pn(5,a),Fn(5,a)}}catch(n){if(null===e)throw Error(s(330));Yi(e,n)}a=e.nextEffect,e.nextEffect=null,e=a}return ai=t,gt(),!0}function Xi(e,t,a){Mt(e,t=Vn(e,t=Nn(a,t),1073741823)),null!==(e=Ii(e,1073741823))&&ki(e)}function Yi(e,t){if(3===e.tag)Xi(e,e,t);else for(var a=e.return;null!==a;){if(3===a.tag){Xi(a,e,t);break}if(1===a.tag){var n=a.stateNode;if("function"==typeof a.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===bi||!bi.has(n))){Mt(a,e=qn(a,e=Nn(t,e),1073741823)),null!==(a=Ii(a,1073741823))&&ki(a);break}}a=a.return}}function Qi(e,t,a){var n=e.pingCache;null!==n&&n.delete(t),ni===e&&ri===a?oi===ti||oi===ei&&1073741823===li&&ct()-pi<500?Fi(e,ri):hi=!0:hr(e,a)&&(0!==(t=e.lastPingedTime)&&t<a||(e.lastPingedTime=a,ki(e)))}function Ji(e,t){var a=e.stateNode;null!==a&&a.delete(t),0===(t=0)&&(t=wi(t=Oi(),e,null)),null!==(e=Ii(e,t))&&ki(e)}$n=function(e,t,a){var n=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||Me.current)nn=!0;else{if(n<a){switch(nn=!1,t.tag){case 3:pn(t),tn();break;case 5:if(sa(t),4&t.mode&&1!==a&&U(t.type,i))return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Be(t.type)&&Ge(t);break;case 4:ra(t,t.stateNode.containerInfo);break;case 10:jt(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(n=t.child.childExpirationTime)&&n>=a?yn(e,t,a):(ze(ca,1&ca.current),null!==(t=Cn(e,t,a))?t.sibling:null);ze(ca,1&ca.current);break;case 19:if(n=t.childExpirationTime>=a,0!=(64&e.effectTag)){if(n)return Dn(e,t,a);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ze(ca,ca.current),!n)return null}return Cn(e,t,a)}nn=!1}}else nn=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=Re(t,Fe.current),kt(t,a),i=Sa(null,t,n,e,i,a),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Be(n)){var r=!0;Ge(t)}else r=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,zt(t);var o=n.getDerivedStateFromProps;"function"==typeof o&&Kt(t,n,o,e),i.updater=Gt,t.stateNode=i,i._reactInternalFiber=t,Vt(t,n,e,a),t=hn(null,t,n,!0,r,a)}else t.tag=0,rn(null,t,i,a),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,r=t.tag=function(e){if("function"==typeof e)return rr(e)?1:0;if(null!=e){if((e=e.$$typeof)===v)return 11;if(e===S)return 14}return 2}(i),e=St(i,e),r){case 0:t=un(null,t,i,e,a);break e;case 1:t=dn(null,t,i,e,a);break e;case 11:t=on(null,t,i,e,a);break e;case 14:t=sn(null,t,i,St(i.type,e),n,a);break e}throw Error(s(306,i,""))}return t;case 0:return n=t.type,i=t.pendingProps,un(e,t,n,i=t.elementType===n?i:St(n,i),a);case 1:return n=t.type,i=t.pendingProps,dn(e,t,n,i=t.elementType===n?i:St(n,i),a);case 3:if(pn(t),n=t.updateQueue,null===e||null===n)throw Error(s(282));if(n=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,Pt(e,t),Rt(t,n,null,a),(n=t.memoizedState.element)===i)tn(),t=Cn(e,t,a);else{if((i=t.stateNode.hydrate)&&($?(qa=De(t.stateNode.containerInfo),Va=t,i=$a=!0):i=!1),i)for(a=Jt(t,null,n,a),t.child=a;a;)a.effectTag=-3&a.effectTag|1024,a=a.sibling;else rn(e,t,n,a),tn();t=t.child}return t;case 5:return sa(t),null===e&&Qa(t),n=t.type,i=t.pendingProps,r=null!==e?e.memoizedProps:null,o=i.children,L(n,i)?o=null:null!==r&&L(n,r)&&(t.effectTag|=16),cn(e,t),4&t.mode&&1!==a&&U(n,i)?(t.expirationTime=t.childExpirationTime=1,t=null):(rn(e,t,o,a),t=t.child),t;case 6:return null===e&&Qa(t),null;case 13:return yn(e,t,a);case 4:return ra(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Qt(t,null,n,a):rn(e,t,n,a),t.child;case 11:return n=t.type,i=t.pendingProps,on(e,t,n,i=t.elementType===n?i:St(n,i),a);case 7:return rn(e,t,t.pendingProps,a),t.child;case 8:case 12:return rn(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,o=t.memoizedProps,jt(t,r=i.value),null!==o){var l=o.value;if(0===(r=vt(l,r)?0:0|("function"==typeof n._calculateChangedBits?n._calculateChangedBits(l,r):1073741823))){if(o.children===i.children&&!Me.current){t=Cn(e,t,a);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){o=l.child;for(var u=c.firstContext;null!==u;){if(u.context===n&&0!=(u.observedBits&r)){1===l.tag&&((u=Ft(a,null)).tag=2,Mt(l,u)),l.expirationTime<a&&(l.expirationTime=a),null!==(u=l.alternate)&&u.expirationTime<a&&(u.expirationTime=a),Nt(l.return,a),c.expirationTime<a&&(c.expirationTime=a);break}u=u.next}}else o=10===l.tag&&l.type===t.type?null:l.child;if(null!==o)o.return=l;else for(o=l;null!==o;){if(o===t){o=null;break}if(null!==(l=o.sibling)){l.return=o.return,o=l;break}o=o.return}l=o}}rn(e,t,i.children,a),t=t.child}return t;case 9:return i=t.type,n=(r=t.pendingProps).children,kt(t,a),n=n(i=Tt(i,r.unstable_observedBits)),t.effectTag|=1,rn(e,t,n,a),t.child;case 14:return r=St(i=t.type,t.pendingProps),sn(e,t,i,r=St(i.type,r),n,a);case 15:return ln(e,t,t.type,t.pendingProps,n,a);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:St(n,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Be(n)?(e=!0,Ge(t)):e=!1,kt(t,a),Zt(t,n,i),Vt(t,n,i,a),hn(null,t,n,!0,e,a);case 19:return Dn(e,t,a)}throw Error(s(156,t.tag))};var er={current:!1},tr=null,ar=null;function nr(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ir(e,t,a,n){return new nr(e,t,a,n)}function rr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function or(e,t){var a=e.alternate;return null===a?((a=ir(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.effectTag=0,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null),a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function sr(e,t,a,n,i,r){var o=2;if(n=e,"function"==typeof e)rr(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case h:return lr(a.children,i,r,t);case b:o=8,i|=7;break;case p:o=8,i|=1;break;case m:return(e=ir(12,a,t,8|i)).elementType=m,e.type=m,e.expirationTime=r,e;case y:return(e=ir(13,a,t,i)).type=y,e.elementType=y,e.expirationTime=r,e;case _:return(e=ir(19,a,t,i)).elementType=_,e.expirationTime=r,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case g:o=10;break e;case f:o=9;break e;case v:o=11;break e;case S:o=14;break e;case D:o=16,n=null;break e;case C:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=ir(o,a,t,i)).elementType=e,t.type=n,t.expirationTime=r,t}function lr(e,t,a,n){return(e=ir(7,e,n,t)).expirationTime=a,e}function cr(e,t,a){return(e=ir(6,e,null,t)).expirationTime=a,e}function ur(e,t,a){return(t=ir(4,null!==e.children?e.children:[],e.key,t)).expirationTime=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dr(e,t,a){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=Z,this.pendingContext=this.context=null,this.hydrate=a,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function hr(e,t){var a=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==a&&a>=t&&e<=t}function pr(e,t){var a=e.firstSuspendedTime,n=e.lastSuspendedTime;a<t&&(e.firstSuspendedTime=t),(n>t||0===a)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function mr(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var a=e.firstSuspendedTime;0!==a&&(t>=a?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function gr(e,t){var a=e.lastExpiredTime;(0===a||a>t)&&(e.lastExpiredTime=t)}var fr=null;function br(e){var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return null===(e=k(t))?null:e.stateNode}function vr(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function yr(e,t){vr(e,t),(e=e.alternate)&&vr(e,t)}var _r=l.IsSomeRendererActing,Sr="function"==typeof o.unstable_flushAllWithoutAsserting,Dr=o.unstable_flushAllWithoutAsserting||function(){for(var e=!1;qi();)e=!0;return e};function Cr(t){try{Dr(),function(t){if(null===fr)try{var a=("require"+Math.random()).slice(0,7);fr=(e&&e[a])("timers").setImmediate}catch(n){fr=function(e){var t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(void 0)}}fr(t)}((function(){Dr()?Cr(t):t()}))}catch(a){t(a)}}var Er=0,Or=!1,wr={__proto__:null,createContainer:function(e,t,a){return e=new dr(e,t,a),t=ir(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e,zt(t),e},updateContainer:function(e,t,a,n){var i=t.current,r=Oi(),o=Lt.suspense;r=wi(r,i,o);e:if(a){t:{if(j(a=a._reactInternalFiber)!==a||1!==a.tag)throw Error(s(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(Be(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(s(171))}if(1===a.tag){var c=a.type;if(Be(c)){a=Ke(a,c,l);break e}}a=l}else a=Pe;return null===t.context?t.context=a:t.pendingContext=a,(t=Ft(r,o)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),Mt(i,t),ji(i,r),r},batchedEventUpdates:function(e,t){var a=ai;ai|=2;try{return e(t)}finally{0===(ai=a)&&gt()}},batchedUpdates:zi,unbatchedUpdates:function(e,t){var a=ai;ai&=-2,ai|=8;try{return e(t)}finally{0===(ai=a)&&gt()}},deferredUpdates:function(e){return ht(97,e)},syncUpdates:function(e,t,a,n){return ht(99,e.bind(null,t,a,n))},discreteUpdates:function(e,t,a,n,i){var r=ai;ai|=4;try{return ht(98,e.bind(null,t,a,n,i))}finally{0===(ai=r)&&gt()}},flushDiscreteUpdates:function(){0==(49&ai)&&(function(){if(null!==Si){var e=Si;Si=null,e.forEach((function(e,t){gr(t,e),ki(t)})),gt()}}(),qi())},flushControlled:function(e){var t=ai;ai|=1;try{ht(99,e)}finally{0===(ai=t)&&gt()}},flushSync:Pi,flushPassiveEffects:qi,IsThisRendererActing:er,getPublicRootInstance:function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return T(e.child.stateNode);default:return e.child.stateNode}},attemptSynchronousHydration:function(e){switch(e.tag){case 3:var t=e.stateNode;t.hydrate&&function(e,t){gr(e,t),ki(e),0==(48&ai)&&gt()}(t,t.firstPendingTime);break;case 13:Pi((function(){return ji(e,1073741823)})),t=bt(Oi(),150,100),yr(e,t)}},attemptUserBlockingHydration:function(e){if(13===e.tag){var t=bt(Oi(),150,100);ji(e,t),yr(e,t)}},attemptContinuousHydration:function(e){13===e.tag&&(ji(e,3),yr(e,3))},attemptHydrationAtCurrentPriority:function(e){if(13===e.tag){var t=Oi();ji(e,t=wi(t,e,null)),yr(e,t)}},findHostInstance:br,findHostInstanceWithWarning:function(e){return br(e)},findHostInstanceWithNoPortals:function(e){return null===(e=function(e){if(!(e=N(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:20===e.tag?e.stateNode.instance:e.stateNode},shouldSuspend:function(){return!1},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var a=t.inject(e);tr=function(e){try{t.onCommitFiberRoot(a,e,void 0,64==(64&e.current.effectTag))}catch(n){}},ar=function(e){try{t.onCommitFiberUnmount(a,e)}catch(n){}}}catch(n){}return!0}(i({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=k(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))},act:function(e){function t(){Er--,_r.current=a,er.current=n}!1===Or&&(Or=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Er++;var a=_r.current,n=er.current;_r.current=!0,er.current=!0;try{var i=zi(e)}catch(r){throw t(),r}if(null!==i&&"object"==typeof i&&"function"==typeof i.then)return{then:function(e,n){i.then((function(){1<Er||!0===Sr&&!0===a?(t(),e()):Cr((function(a){t(),a?n(a):e()}))}),(function(e){t(),n(e)}))}};try{1!==Er||!1!==Sr&&!1!==a||Dr(),t()}catch(r){throw t(),r}return{then:function(e){e()}}}},jr=wr&&wr.default||wr;e.exports=jr.default||jr;var Ir=e.exports;return e.exports=t,Ir}}).call(this,a(562)(e))},2689:function(e,t,a){"use strict";t.__esModule=!0,t.getClosestInstanceFromNode=function(e){if(e[n])return e[n];for(;!e[n];){if(!e.parentNode)return null;e=e.parentNode}var t=e[n];if(5===t.tag||6===t.tag)return t;return null};var n="__reactInternalInstance$"+Math.random().toString(36).slice(2)},2690:function(e,t,a){"use strict";t.__esModule=!0,t.supportsMutation=t.isPrimaryRenderer=t.cancelPassiveEffects=t.schedulePassiveEffects=t.noTimeout=t.cancelTimeout=t.scheduleTimeout=t.cancelDeferredCallback=t.shouldYield=t.scheduleDeferredCallback=t.now=void 0;var n=a(2691);Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})}));var i=a(2692);Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}));var r=a(279);Object.defineProperty(t,"now",{enumerable:!0,get:function(){return r.unstable_now}}),Object.defineProperty(t,"scheduleDeferredCallback",{enumerable:!0,get:function(){return r.unstable_scheduleCallback}}),Object.defineProperty(t,"shouldYield",{enumerable:!0,get:function(){return r.unstable_shouldYield}}),Object.defineProperty(t,"cancelDeferredCallback",{enumerable:!0,get:function(){return r.unstable_cancelCallback}}),t.appendInitialChild=function(e,t){if("string"==typeof t)return void(0,l.default)(!1,'Don not use plain text as child of Konva.Node. You are using text: "%s"',t);e.add(t),(0,s.updatePicture)(e)},t.createInstance=function(e,t,a){var n=o.default[e];if(!n)return void(0,l.default)(u,'Konva has no node with the type "%s". If you use minimal version of react-konva, just import required nodes into Konva: `import "konva/lib/shapes/%s"`  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html',e,e);var i={},r={};for(var c in t){"on"===c.slice(0,2)?r[c]=t[c]:i[c]=t[c]}var u=new n(i);return(0,s.applyNodeProps)(u,r),u},t.createTextInstance=function(e,t,a){(0,l.default)(!1,'Text components are not supported for now in ReactKonva. You text is: "'+e+'"')},t.finalizeInitialChildren=function(e,t,a){return!1},t.getPublicInstance=function(e){return e},t.prepareForCommit=function(){},t.prepareUpdate=function(e,t,a,n){return d},t.resetAfterCommit=function(){},t.resetTextContent=function(e){},t.shouldDeprioritizeSubtree=function(e,t){return!1},t.getRootHostContext=function(){return u},t.getChildHostContext=function(){return u},t.shouldSetTextContent=function(e,t){return!1},t.appendChild=function(e,t){t.parent===e?t.moveToTop():e.add(t);(0,s.updatePicture)(e)},t.appendChildToContainer=function(e,t){t.parent===e?t.moveToTop():e.add(t);(0,s.updatePicture)(e)},t.insertBefore=h,t.insertInContainerBefore=function(e,t,a){h(e,t,a)},t.removeChild=function(e,t){t.destroy(),t.off(s.EVENTS_NAMESPACE),(0,s.updatePicture)(e)},t.removeChildFromContainer=function(e,t){t.destroy(),t.off(s.EVENTS_NAMESPACE),(0,s.updatePicture)(e)},t.commitTextUpdate=function(e,t,a){(0,l.default)(!1,'Text components are not yet supported in ReactKonva. You text is: "'+a+'"')},t.commitMount=function(e,t,a){},t.commitUpdate=function(e,t,a,n,i){(0,s.applyNodeProps)(e,i,n)},t.hideInstance=function(e){e.hide(),(0,s.updatePicture)(e)},t.hideTextInstance=function(e){},t.unhideInstance=function(e,t){(null==t.visible||t.visible)&&e.show()},t.unhideTextInstance=function(e,t){};var o=c(a(2526)),s=a(2527),l=c(a(2462));function c(e){return e&&e.__esModule?e:{default:e}}var u={},d={};o.default.Node.prototype._applyProps=s.applyNodeProps;t.scheduleTimeout=setTimeout,t.cancelTimeout=clearTimeout,t.noTimeout=-1,t.schedulePassiveEffects=r.unstable_scheduleCallback,t.cancelPassiveEffects=r.unstable_cancelCallback;t.isPrimaryRenderer=!1,t.supportsMutation=!0;function h(e,t,a){(0,l.default)(t!==a,"ReactKonva: Can not insert node before itself"),t._remove(),e.add(t),t.setZIndex(a.getZIndex()),(0,s.updatePicture)(e)}},2691:function(e,t,a){"use strict";t.__esModule=!0,t.createHiddenTextInstance=t.cloneUnhiddenInstance=t.cloneHiddenInstance=t.replaceContainerChildren=t.finalizeContainerChildren=t.appendChildToContainerChildSet=t.createContainerChildSet=t.cloneInstance=t.supportsPersistence=void 0;var n,i=a(2462),r=(n=i)&&n.__esModule?n:{default:n};function o(){(0,r.default)(!1,"The current renderer does not support persistence. This error is likely caused by a bug in React. Please file an issue.")}t.supportsPersistence=!1,t.cloneInstance=o,t.createContainerChildSet=o,t.appendChildToContainerChildSet=o,t.finalizeContainerChildren=o,t.replaceContainerChildren=o,t.cloneHiddenInstance=o,t.cloneUnhiddenInstance=o,t.createHiddenTextInstance=o},2692:function(e,t,a){"use strict";t.__esModule=!0,t.didNotFindHydratableTextInstance=t.didNotFindHydratableInstance=t.didNotFindHydratableContainerTextInstance=t.didNotFindHydratableContainerInstance=t.didNotHydrateInstance=t.didNotHydrateContainerInstance=t.didNotMatchHydratedTextInstance=t.didNotMatchHydratedContainerTextInstance=t.hydrateTextInstance=t.hydrateInstance=t.getFirstHydratableChild=t.getNextHydratableSibling=t.canHydrateTextInstance=t.canHydrateInstance=t.supportsHydration=void 0;var n,i=a(2462),r=(n=i)&&n.__esModule?n:{default:n};function o(){(0,r.default)(!1,"The current renderer does not support hyration. This error is likely caused by a bug in React. Please file an issue.")}t.supportsHydration=!1,t.canHydrateInstance=o,t.canHydrateTextInstance=o,t.getNextHydratableSibling=o,t.getFirstHydratableChild=o,t.hydrateInstance=o,t.hydrateTextInstance=o,t.didNotMatchHydratedContainerTextInstance=o,t.didNotMatchHydratedTextInstance=o,t.didNotHydrateContainerInstance=o,t.didNotHydrateInstance=o,t.didNotFindHydratableContainerInstance=o,t.didNotFindHydratableContainerTextInstance=o,t.didNotFindHydratableInstance=o,t.didNotFindHydratableTextInstance=o},2693:function(e,t,a){},2694:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(0),i=a.n(n),r=a(8),o=(a(2695),a(5));const s=Object(o.b)((e,t)=>{const{fileUploadsProgress:a}=e.fileInput;return{progresses:Object.values(a).filter(e=>e.uploaderID===t.uploaderId&&!e.done).map(e=>e.progress),zString:Object(r.a)(e)}})((function({progresses:e,zString:t}){return 0===e.length?null:i.a.createElement("div",{className:"UploadingOverlay"},i.a.createElement("div",{className:"UploadingOverlay-display"},i.a.createElement("div",{className:"UploadingOverlay-text"},t("zi_myzazzle_MediaBrowser_Loading")),e.map((e,t)=>i.a.createElement("div",{className:"UploadingOverlay-barHolder",key:t},i.a.createElement("div",{className:"UploadingOverlay-barProgress",style:{width:100*e+"%"}})))))}))},2695:function(e,t,a){},2696:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return d}));var n=a(221),i=a.n(n),r=a(27),o=a(85),s=a(7),l=a(13);function c(e,t,a,n){const i=Object(l.c)(Object(s.a)().staticRealviewUrlBase,{areacolor:!1,content_padding:[.03,.03,.03,.03],csa:!0,image_type:"png",pdt:"stitch"===e.uiProcess?"zazzle_embroideredhat":"zazzle_print",rvtype:"content",t__smart:1,t_text0:t.previewText,t_text0_fface:t.name,vheight:a,view_objects:"covertext",vwidth:n}),r=[1,2].map(e=>Object(l.c)(i,{vheight:a*e,vwidth:n*e})+` ${e}x`).join(", ");return{thumbnail:i,srcSet:r}}const u=[],d=Object(r.a)((e,t,a)=>Object(o.e)(e,t).pickerData.fontsMap[a],(e,t)=>Object(o.e)(e,t).pickerData.recentFonts,(e,t)=>{var a;return null!==(a=Object(o.e)(e,t).settings.favoriteFonts)&&void 0!==a?a:u},(e,t,a)=>{if(!e)return{defaultCategory:"",favoriteFonts:[],fontCategories:[],fontSubcategories:{},fonts:[],mostRecentlyUsed:[]};const{defaultCategory:n,fontCategories:r}=e,o=r.filter(e=>e.name.includes(".")),s=new Set(e.fonts.map(e=>e.name));return{defaultCategory:n,favoriteFonts:a.filter(e=>s.has(e)),fontCategories:r,fontSubcategories:i()(o,e=>e.name.split(".")[0]),fonts:e.fonts,mostRecentlyUsed:t}})},2697:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(2),i=a(3),r=a(303),o=a.n(r),s=a(196),l=a.n(s),c=a(61),u=a.n(c),d=a(0),h=a.n(d),p=a(38),m=a(1389),g=a.n(m),f=a(143),b=a(10);a(2698);const v=Object(b.a)("InfiniteScroll");class y extends h.a.Component{constructor(...e){super(...e),Object(i.a)(this,"state",{containerHeight:0,firstVisibleItemIndex:0,itemHeight:20,lastVisibleItemIndex:1}),Object(i.a)(this,"rootNode",void 0),Object(i.a)(this,"firstItemComponent",void 0),Object(i.a)(this,"getItemHeight",()=>{const e=Object(p.findDOMNode)(this.firstItemComponent);if(!e)return this.state.itemHeight;const t=getComputedStyle(e);return parseFloat(t.height)+parseFloat(t.marginTop)+parseFloat(t.marginBottom)}),Object(i.a)(this,"handleScroll",()=>{this.state.isScrolling||this.setState({isScrolling:!0}),this.throttledUpdateIndices().then(this.scrollRestTracker)}),Object(i.a)(this,"scrollRestTracker",l()(()=>{if(this.props.onScrollRest){const e=this.rootNode.scrollTop/this.state.itemHeight,t=e+this.state.containerHeight/this.state.itemHeight;this.props.onScrollRest(e,t)}this.state.isScrolling&&this.setState({isScrolling:!1})},200)),Object(i.a)(this,"scrollToIndex",e=>{this.state.isScrolling||this.updateSizes().then(()=>{const t=e*this.state.itemHeight+this.state.itemHeight/2-this.state.containerHeight/2;g.a.top(this.rootNode,t,{duration:this.props.instantScroll?0:200})})}),Object(i.a)(this,"updateIndices",()=>new Promise(e=>{const{containerHeight:t,itemHeight:a}=this.state,n=this.rootNode.scrollTop,i=Math.floor(n/a),r=Math.floor((n+t)/a);this.setState({firstVisibleItemIndex:i,lastVisibleItemIndex:r},e)})),Object(i.a)(this,"throttledUpdateIndices",o()(this.updateIndices,100)),Object(i.a)(this,"updateSizes",()=>new Promise(e=>{this.setState({containerHeight:this.rootNode.getBoundingClientRect().height,itemHeight:this.getItemHeight()},e)}))}componentDidMount(){window.addEventListener("resize",this.updateSizes),this.updateSizes().then(this.updateIndices).then(()=>{u()(this.props.activeIndex)&&this.scrollToIndex(this.props.activeIndex)})}componentWillUnmount(){window.removeEventListener("resize",this.updateSizes),this.throttledUpdateIndices.cancel(),this.scrollRestTracker.cancel()}componentDidUpdate(e){const t=u()(this.props.activeIndex)&&e.activeIndex!==this.props.activeIndex,a=e.items&&e.items.length!==this.props.items.length;t?this.props.preventAutoScrollOnIndexChange||this.scrollToIndex(this.props.activeIndex):a&&this.scrollToIndex(this.props.activeIndex||0)}render(){const{Component:e,bufferSize:t,className:a,items:i}=this.props,{firstVisibleItemIndex:r,itemHeight:o,lastVisibleItemIndex:s}=this.state,l=Math.max(0,r-t)*o,c=Math.max(0,(i.length-s-t)*o),u=Math.max(0,r-t),d=s+t+1,p=i.slice(u,d);return h.a.createElement(f.b,null,h.a.createElement("ul",{className:v("&",{"&--scrolling":this.state.isScrolling},a),onScroll:this.handleScroll,ref:e=>{this.rootNode=e}},h.a.createElement("li",{className:v("&-buffer"),style:{height:l}}),p.map((t,a)=>h.a.createElement("li",{key:a+u},h.a.createElement(e,Object(n.a)({ref:e=>{0===a&&(this.firstItemComponent=e)}},t)))),h.a.createElement("li",{className:v("&-buffer"),style:{height:c}})))}}Object(i.a)(y,"defaultProps",{bufferSize:5,items:[]})},2698:function(e,t,a){},2699:function(e,t,a){},2700:function(e,t,a){"use strict";a.d(t,"a",(function(){return f}));var n=a(0),i=a.n(n),r=a(5),o=a(143),s=a(10),l=a(7),c=a(8),u=a(13),d=a(609),h=a(25),p=a(12),m=(a(2701),a(2371));const g=Object(s.a)("StitchImageColorizer"),f=Object(r.b)((e,t)=>({availableColors:Object(h.b)(e,t.designStateKey).pickerData.fontColorsMap.stitch.swatches,zString:Object(c.a)(e)}),(e,t)=>({setColors:a=>{e(Object(p.hc)(t.designStateKey,a.map(e=>e.toUpperCase())))}}))(e=>{const{availableColors:t,designObject:a,zString:r}=e,[s,c]=Object(n.useState)(a.colors),[h,p]=Object(n.useState)(null),f=Object(u.c)(Object(l.a)().dynamicRealviewGetImageBase,{action:"getImage",bg_pattern:"checker",colors:s.join(","),id:a.imageid,max_dim:512,square_it:"fit"}),b=i.a.createElement("p",{className:g("&-description")},1===s.length?r("zi_create_RecolorStitchDialog_Count_Single",{0:s.length}):r("zi_create_RecolorStitchDialog_Count_Multiple",{0:s.length})," ",r("zi_create_Z4_DesignSpace_StitchRecolorDescription"));let v=i.a.createElement("ol",{className:g("&-tentativeColors")},s.map((e,a)=>{const n=a===h,r=t.find(t=>t.hexCode.toLowerCase()===e.toLowerCase());return i.a.createElement("li",{key:a},i.a.createElement(d.a,{colors:[e],id:e,isSelected:n,onClickSwatch:()=>p(h===a?null:a),size:"large",title:r.displayName}))})),y=i.a.createElement("ul",{className:g("&-availableColors")},t.map(e=>{const t=e.hexCode===s[h];return i.a.createElement("li",{key:e.hexCode},i.a.createElement(d.a,{colors:[e.hexCode],id:e.hexCode,isSelected:t,onClickSwatch:()=>((e,t)=>{const a=s.slice();a[t]=e,c(a)})(e.hexCode,h),size:"large",title:e.displayName}))}));return y=i.a.createElement(o.b,null,y),i.a.createElement(m.a,{className:g("&",{"&--isMobile":!1}),includeHeader:!1,okText:r("zi_common_Application_SaveChanges"),onCancel:e.onCancel,onOk:()=>{e.setColors(s),e.onOk()},onRequestClose:e.onCancel},i.a.createElement("div",{className:g("&-content")},i.a.createElement("div",{className:g("&-preview")},i.a.createElement("img",{alt:a.title,className:g("&-previewImage"),src:f}),b),i.a.createElement("div",{className:g("&-picker")},v,!1,null!==h&&i.a.createElement("div",{className:g("&-availableColorsOuter")},i.a.createElement("div",{className:g("&-selectAColor")},r("zi_create_Z4_DesignSpace_SelectANewColor")),y))))})},2701:function(e,t,a){},2702:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(224),i=a.n(n);function r(e){if(!e.crop&&e.imageaspectratio&&e.bounds&&"fill"===e.fillmode&&.5==e.aligni&&i()(e.xformi,[1,0,0,0])){const t=(e.bounds[2]-e.bounds[0])/(e.bounds[3]-e.bounds[1]);if(e.imageaspectratio<=t){const a=.5*(1-e.imageaspectratio/t);return[0,a,1,1-a]}{const a=.5*(1-t/e.imageaspectratio);return[a,0,1-a,1]}}return e.crop}},2703:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(0),i=a.n(n),r=a(5),o=a(10),s=a(7),l=a(8),c=a(13),u=a(12),d=a(2371);a(2704);const h=Object(o.a)("Z4DSDigitizationConfirmationDialog"),p=Object(r.b)(e=>({zString:Object(l.a)(e)}),(e,t)=>({onClose:()=>{e(u.yb.stitchConversionDeny(t.designStateKey))},onOk:()=>{e(u.yb.stitchConversionConfirm(t.designStateKey))}}))(e=>{const{image:t,onOk:a,onClose:n,zString:r}=e,{staticRealviewGetImageBase:o}=Object(s.a)(),l=Object(c.c)(o,{bg_pattern:"checker",id:t.id,max_dim:150,square_it:"fit"}),u=d.a;return i.a.createElement(u,{className:h("&",{"&--isMobile":!1}),okText:r("zi_create_ConfirmConversion_okButtonLabel"),onCancel:n,onOk:a,onRequestClose:n,title:r("zi_create_ConfirmConversion_dialogTitle")},i.a.createElement("div",{className:h("&-row")},i.a.createElement("div",{className:h("&-rowCopy")},i.a.createElement("h2",null,r("zi_create_ConfirmConversion_Question1")),i.a.createElement("p",null,r("zi_create_ConfirmConversion_Answer1")),i.a.createElement("h2",null,r("zi_create_ConfirmConversion_Question2")),i.a.createElement("p",{dangerouslySetInnerHTML:{__html:r("zi_create_ConfirmConversion_Answer2")}})),i.a.createElement("div",{className:h("&-imageWrapper")},i.a.createElement("img",{alt:t.title,className:h("&-image"),src:l}),i.a.createElement("div",{className:h("&-imageTitle")},t.title))),i.a.createElement("h2",null,r("zi_create_ConfirmConversion_Question3")),i.a.createElement("ul",null,i.a.createElement("li",null,r("zi_create_ConfirmConversion_Answer3A")),i.a.createElement("li",null,r("zi_create_ConfirmConversion_Answer3B")),i.a.createElement("li",null,r("zi_create_ConfirmConversion_Answer3C"))))})},2704:function(e,t,a){},2705:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(0),i=a.n(n),r=a(5),o=a(7),s=a(10),l=a(8),c=a(13),u=a(490),d=a(25),h=a(12),p=a(2371),m=a(2706),g=a.n(m);const f=Object(s.a)("Z4DSAutoSizeImageDialog"),b=e=>{const t=Object(r.d)(),a=Object(l.e)(),s=Object(r.e)(t=>Object(d.b)(t,e.productStateKey)),[m,b]=Object(n.useState)("maintain"),v=s.productTypeSingularName.toLowerCase(),y="us"===Object(o.a)().regionTwoLetter?c.b.toStringIn:c.b.toStringCm,_=Object(n.useCallback)(()=>{t("maintain"===m?h.yb.sizeAreaToImageDeny(s.designStateKey):h.yb.sizeAreaToImageConfirm(s.designStateKey,{mode:m}))},[m,s.designStateKey]),S=Object(n.useCallback)(e=>{b(e)},[]),D=Object(n.useMemo)(()=>{const e=s.attributes.size;if(e){return e.values.find(t=>t.name===e.value).title}return""},[s.attributes.size]),C=Object(n.useMemo)(()=>{const t=a("zi_create_Z4_DesignSpace_AutoResizeImageDialog_OptionResizeStandard",{productTypeSingular:v}),n=`(${y(e.standardSize[0])} x ${y(e.standardSize[1])})`;return i.a.createElement("div",null,i.a.createElement("span",null,t),i.a.createElement("span",{className:g.a.sizeLabel},n))},[e.standardSize,v]),E=Object(n.useMemo)(()=>{const t=a("zi_create_Z4_DesignSpace_AutoResizeImageDialog_OptionResizeCustom",{productTypeSingular:v}),n=`(${y(e.customSize[0])} x ${y(e.customSize[1])})`;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("span",null,t),i.a.createElement("span",{className:g.a.sizeLabel},n)),i.a.createElement("div",{className:g.a.note},a("zi_create_Z4_DesignSpace_AutoResizeImageDialog_OptionResizeCustom_Note")))},[e.customSize,v]),O=f(g.a.radioButton,!1);return i.a.createElement(p.a,{className:f("&",e.className),footerContent:null,includeHeader:!1,okText:a("zi_common_Continue"),onOk:_,showCancel:!1},i.a.createElement("p",{className:f(!1)},a("zi_create_Z4_DesignSpace_AutoResizeImageDialog_Description",{productTypeSingular:v})),i.a.createElement(u.b,{onChange:S,options:[{className:O,labelClassName:g.a.radioLabel,display:a("zi_create_Z4_DesignSpace_AutoResizeImageDialog_OptionExisting",{productTypeSingular:v,size:D}),value:"maintain"},{className:O,labelClassName:g.a.radioLabel,display:C,value:"standard"},{className:O,labelClassName:g.a.radioLabel,display:E,value:"custom"}],value:m}))}},2706:function(e,t,a){e.exports={mobileTitle:"Z4DSAutoSizeImageDialog_mobileTitle",radioButton:"Z4DSAutoSizeImageDialog_radioButton",mobileButton:"Z4DSAutoSizeImageDialog_mobileButton",radioLabel:"Z4DSAutoSizeImageDialog_radioLabel",note:"Z4DSAutoSizeImageDialog_note",sizeLabel:"Z4DSAutoSizeImageDialog_sizeLabel"}},2707:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(0),i=a.n(n),r=a(5),o=a(16),s=a(8),l=a(14),c=a(129),u=a(37),d=a(25),h=a(12),p=a(2371);const m=e=>{const t=Object(s.e)(),a=Object(l.f)(),m=Object(r.d)(),g=Object(r.e)(t=>{const a=Object(d.b)(t,e.designStateKey),n=Object(u.d)(t,a.productStateKey),i=Object(c.d)(t,Object(c.g)(e.designStateKey));return{isCollabOwner:i&&i.ownerId===i.myId,isDigital:n.isDigital,isInCollab:!!i}},r.c),f=Object(n.useCallback)(()=>{m(h.vb.selectDesignTemplateDeny(e.designStateKey))},[]),b=Object(n.useCallback)(()=>{m(h.vb.selectDesignTemplateConfirm(e.designStateKey))},[]);let v;if(!g.isInCollab||g.isCollabOwner){const e=g.isDigital?a("WwwPag","create/designs"):a("WwwPag","lgn/signin",{mlru:"inprogress"});v=i.a.createElement("div",null,t("zi_create_Z4_DesignSpace_DesignTemplateConfirmation_SavedDesigns",{link:i.a.createElement(o.a,{key:"0",href:e,target:"_blank"},t("zi_create_Z4_DesignSpace_DesignTemplateConfirmation_SavedDesignsLink"))}))}return i.a.createElement(p.a,{onCancel:f,onOk:b,onRequestClose:f,title:t("zi_create_Z4_DesignSpace_DesignTemplateConfirmation_Title")},i.a.createElement("div",null,t("zi_create_Z4_DesignSpace_DesignTemplateConfirmation_Main")),v)}},2771:function(e,t,a){"use strict";var n=a(2),i=a(224),r=a.n(i),o=a(2648),s=a.n(o),l=a(310),c=a.n(l),u=a(153),d=a.n(u),h=a(5),p=a(27),m=a(3),g=a(395);class f{constructor(e,t){Object(m.a)(this,"maxDim",void 0),Object(m.a)(this,"enabled",!1),Object(m.a)(this,"matchByType",!1),Object(m.a)(this,"color","#33FF33"),Object(m.a)(this,"data",[[],[]]),Object(m.a)(this,"drawTolerance",void 0),Object(m.a)(this,"outerOffset",void 0),Object(m.a)(this,"pointColor","#EE0000"),Object(m.a)(this,"pointTolerance",void 0),Object(m.a)(this,"tolerance",void 0),this.maxDim=e,this.pointTolerance=Math.max(1,.004*e),this.tolerance=Math.max(1,.5*this.pointTolerance),this.drawTolerance=this.tolerance,this.outerOffset=[.5*(t[0]-e),.5*(t[1]-e)]}addPoint(e){for(let t=0;t<2;t++)this.addSnapSegment(t,0,1,{color:this.pointColor,drawTolerance:this.drawTolerance,loc:e[t],range:[this.outerOffset[1-t],this.outerOffset[1-t]+this.maxDim],tolerance:this.pointTolerance})}addObject(e){const t=Object(g.i)([e]);for(let a=0;a<2;a++){const e=[t[a+0],.5*(t[a+0]+t[a+2]),t[a+2]];for(let n=0;n<3;n++)this.addSnapSegment(a,1,n,{color:this.color,drawTolerance:this.drawTolerance,loc:e[n],range:[t[1-a],t[3-a]],tolerance:this.tolerance})}}beginSnapping(){}getSnapData(e){const t=[];let a;for(let n=0;n<2;n++){const i=[e[n+0],.5*(e[n+0]+e[n+2]),e[n+2]],r=this.matchByType?[0]:[...i],o=this.data[n];for(const s of o.filter(e=>e))for(let o=0;o<3;o++)if(s[o]){this.matchByType&&(r[0]=i[o]);for(const i of s[o])for(const o of r)a=Math.abs(i.loc-o),a<i.drawTolerance&&t.push(this.getSnapDataFromSegment(n,i,e[1-n],e[3-n]))}}return t}snap(e,t,a){return 0!==a&&this.snapAxis(0,e,t),1!==a&&this.snapAxis(1,e,t),this.getSnapData([e[0]+t[0],e[1]+t[1],e[2]+t[0],e[3]+t[1]])}addSnapSegment(e,t,a,n){const i=this.data[e];let r=i[t];r||(r=i[t]=[]);let o=r[a];o||(o=r[a]=[]),o.push(n)}getSnapDataFromSegment(e,t,a,n){return a=Math.min(t.range[0],a),n=Math.max(t.range[1],n),0===e?{color:t.color,points:[t.loc,a,t.loc,n]}:{color:t.color,points:[a,t.loc,n,t.loc]}}snapAxis(e,t,a){let n,i,r=this.maxDim,o=0;const s=[a[e]+t[e+0],a[e]+.5*(t[e+0]+t[e+2]),a[e]+t[e+2]],l=this.matchByType?[0]:[...s],c=this.data[e];for(const u of c.filter(e=>e)){for(let e=0;e<3;e++)if(u[e]){this.matchByType&&(l[0]=s[e]);for(const t of u[e])for(const e of l)i=t.loc-e,n=Math.abs(i),n<r&&n<t.tolerance&&(o=i,r=n)}if(r<this.maxDim)break}r<this.maxDim&&(a[e]+=o)}}var b=a(209),v=a(159),y=a(696);function _(e,t,a,n){const i=[.5*(a[0]-t),.5*(a[1]-t)];return Object(g.b)(function(e,t,a){const n=new Array(a.length);for(let i=0;i<a.length;i+=2){const r=a[i],o=a[i+1];let s=0,l=0,c=Number.MAX_VALUE,u=-1;if(e&&e.grid){const a=e.grid;for(let e=0;e<a.length;e+=12){const t=r-a[e+2],n=o-a[e+3],i=t*t+n*n;i<c&&(c=i,u=e)}if(u>=0){const e=r-a[u+2],t=o-a[u+3];s+=a[u],l+=a[u+1],s+=a[u+8]*e,l+=a[u+9]*e,s+=a[u+10]*t,l+=a[u+11]*t}s*=t,l*=t}n[i]=s,n[i+1]=l}return n}(e,t,n),i)}var S=a(1728),D=a(7),C=a(13),E=a(129),O=a(811),w=a(30),j=a(151),I=a(730),N=a(12),k=a(85),T=a(158),x=a.n(T),z=a(9),P=a.n(z),F=a(2517),M=a.n(F),A=a(0),R=a.n(A),B=a(309),L=a(2416),U=a(143),K=a(48),G=a.n(K),H=a(303),Z=a.n(H),W=a(44),V=a(132);class q extends R.a.Component{constructor(...e){super(...e),Object(m.a)(this,"setHandleId",e=>{e&&e.setAttr("handleId",this.props.handleId)})}render(){const{anchorStyle:e}=this.props;return this.props.icon?R.a.createElement(L.Group,{draggable:this.props.draggable,name:this.props.name,ref:this.setHandleId,rotation:this.props.rotation,x:this.props.pos[0],y:this.props.pos[1]},this.props.hitRadius>0&&R.a.createElement(L.Circle,{opacity:0,radius:this.props.hitRadius}),this.props.anchorOffset>0&&R.a.createElement(R.a.Fragment,null,R.a.createElement(L.Path,{data:`M 0 0 L ${this.props.anchorOffset} 0`,opacity:e.opacity,stroke:e.color[0],strokeWidth:e.width}),R.a.createElement(L.Path,{dash:e.dash,dashEnabled:!!e.dash,data:`M 0 0 L ${this.props.anchorOffset} 0`,opacity:e.opacity,stroke:e.color[1],strokeWidth:e.width})),R.a.createElement(L.Circle,{fill:this.props.fill,radius:this.props.size/2,stroke:this.props.strokeColor,strokeWidth:this.props.stroke}),R.a.createElement(L.Text,{fill:this.props.iconColor,fontFamily:"Zazzicons",fontSize:this.props.iconFontSize,offsetX:this.props.iconOffset[0],offsetY:this.props.iconOffset[1],rotation:-this.props.rotation,text:this.props.icon})):R.a.createElement(L.Group,{draggable:this.props.draggable,name:this.props.name,ref:this.setHandleId,rotation:this.props.rotation,x:this.props.pos[0],y:this.props.pos[1]},this.props.hitRadius>0&&R.a.createElement(L.Circle,{opacity:0,radius:this.props.hitRadius}),R.a.createElement(L.Rect,{fill:this.props.fill,height:this.props.size,offsetX:this.props.size/2,offsetY:this.props.size/2,stroke:this.props.strokeColor,strokeWidth:this.props.stroke,width:this.props.size}))}}Object(m.a)(q,"defaultProps",{draggable:!0,fill:"#ffffff",hitRadius:0,pos:[0,0],rotation:0,size:9,stroke:1,strokeColor:"#404040"});class $ extends R.a.PureComponent{render(){const{color:e,dash:t,opacity:a,points:n,width:i}=this.props;return R.a.createElement(L.Group,null,R.a.createElement(L.Line,{opacity:a,points:n,stroke:e[0],strokeWidth:i}),t&&R.a.createElement(L.Line,{dash:t,dashEnabled:!!t,opacity:a,points:n,stroke:e[1],strokeWidth:i}))}}Object(m.a)($,"defaultProps",{color:["#EE0000","#404040"],dash:null,opacity:1,width:1});class X extends R.a.PureComponent{render(){const{pos:e,posThreshold:t,text:a}=this.props;return R.a.createElement(L.Label,{x:e[0]+(e[0]<t[0]?10:-10),y:e[1]+(e[1]<t[1]?20:-20)},R.a.createElement(L.Tag,{fill:"#fffffa",pointerDirection:e[0]<t[0]?"left":"right",stroke:"#a9a",strokeWidth:1}),R.a.createElement(L.Text,{fill:"#676767",fontFamily:"ProximaNova",fontSize:12,padding:3,text:a}))}}Object(m.a)(X,"defaultProps",{posThreshold:[9999,9999]});class Y extends R.a.Component{constructor(...e){super(...e),Object(m.a)(this,"cornerHandleId",0),Object(m.a)(this,"deleteHandleId",8),Object(m.a)(this,"errorHandleId",1),Object(m.a)(this,"handleBoxLower",void 0),Object(m.a)(this,"handleBoxUpper",void 0),Object(m.a)(this,"handleCount",10),Object(m.a)(this,"middleHandleId",4),Object(m.a)(this,"orientation",void 0),Object(m.a)(this,"rotateCursor",Object(D.b)()?"pointer":"grab"),Object(m.a)(this,"rotateHandleId",9),Object(m.a)(this,"xform",void 0),Object(m.a)(this,"scaleHandleCount",8),Object(m.a)(this,"startTouch1",null),Object(m.a)(this,"startTouch2",null),Object(m.a)(this,"visibleHandles",[0,1,2,3,4,5,6,7]),Object(m.a)(this,"visibleIconHandles",[this.deleteHandleId,this.rotateHandleId]),Object(m.a)(this,"handleClick",e=>{if(!this.props.disabled){const t=this.getHandleId(e);this.props.canDelete&&(t===this.deleteHandleId||this.props.listenDebugEvents&&2&e.evt.button)&&this.props.onDelete(this.props.names)}}),Object(m.a)(this,"handleDoubleClick",e=>{2===e.evt.button||this.props.onDoubleClick&&this.props.onDoubleClick(this.props.names)}),Object(m.a)(this,"handleDoubleTap",()=>{this.props.onDoubleClick&&this.props.onDoubleClick(this.props.names)}),Object(m.a)(this,"handleMouseDown",e=>{var t,a;if(this.props.showSelectionInfo&&this.props.showSelectionInfo(this.props.disabled?"lockedObj":"none"),this.state.active){if(this.getHandleId(e)===this.rotateHandleId){const e=this.normalizeRotation(this.props.rotation||0).toFixed(1);this.setState({dragState:Object(n.a)(Object(n.a)({},this.state.dragState),{},{rotateLabel:e})})}}else if(this.props.disabled)this.props.onSelect([]);else{const t=-1!==window.navigator.appVersion.indexOf("Mac"),a=!!(!t&&e.evt.ctrlKey||t&&e.evt.metaKey),n=!!e.evt.shiftKey;this.props.onCursorChange(a?"pointer":"move"),this.props.onSelect(this.props.names,a||n)}null===(t=(a=this.props).onMouseDown)||void 0===t||t.call(a)}),Object(m.a)(this,"handleMouseOver",e=>{let t;if(this.setState(e=>{if(!e.visible)return{visible:!0}}),this.props.disabled)t="not-allowed";else{t=this.state.active?"move":"pointer";const a=this.getHandleId(e);null!=a&&(t=this.state.handles[a].cursor,this.setState({activeHandleId:a}))}this.props.onCursorChange(t)}),Object(m.a)(this,"handleMouseOut",()=>{this.setState(e=>{if(e.visible)return{visible:!1,activeHandleId:null}})}),Object(m.a)(this,"handleMouseUp",()=>{null!=this.state.dragState.rotateLabel&&this.setState({dragState:Object(n.a)(Object(n.a)({},this.state.dragState),{},{rotateLabel:null})})}),Object(m.a)(this,"handleDragStart",(e,t)=>{if(this.props.onToggleSelection&&this.props.onToggleSelection(!1),this.props.onToggleSelectionObjHide&&this.props.onToggleSelectionObjHide(!0),this.props.onAnimateCancel&&this.props.onAnimateCancel(),t&&2===t.length)this.startTouch1=this.getTouchPos(t[0]),this.startTouch2=this.getTouchPos(t[1]);else if(null!=this.startTouch1)return;this.resetXForm()}),Object(m.a)(this,"handleDragMove",(e,t)=>{let{scaleRange:a}=this.props;const{handles:i}=this.state,r=Object(n.a)({},this.state.dragState);let o,s=[];if(this.visibleIconHandles=[],t&&2===t.length){const e=this.getTouchPos(t[0]),n=this.getTouchPos(t[1]),i=g.r(n,e),o=g.r(this.startTouch2,this.startTouch1);let s=g.n(i)/g.n(o);a&&(s=b.e.saturate(s,a)),r.scale=[s,s],r.rotate=g.c(i)-g.c(o)}else if(null==this.startTouch1){const t=e.target,n=[t.getAbsolutePosition().x,t.getAbsolutePosition().y],l=this.getHandleId(e);if(null==l||l===this.rotateHandleId)if(r.rotateLabel=null,this.props.listenDebugEvents&&e.evt.altKey)r.rotate=n[0]-r.center[0];else if(this.props.listenDebugEvents&&e.evt.shiftKey)r.scale[0]=1+(n[0]-r.center[0])/(r.bounds[2]-r.bounds[0]),r.scale[1]=e.evt.ctrlKey||e.evt.metaKey?1+(n[1]-r.center[1])/(r.bounds[3]-r.bounds[1]):r.scale[0],a&&(r.scale[0]=b.e.saturate(r.scale[0],a),r.scale[1]=b.e.saturate(r.scale[1],a)),r.scale[0]=b.e.saturate(r.scale[0],[.01,1/0]),r.scale[1]=b.e.saturate(r.scale[1],[.01,1/0]);else if(l===this.rotateHandleId){this.visibleIconHandles.push(this.rotateHandleId);const e=i[l],t=g.c(g.r(this.getVirtualDragPos(n,e),r.center)),a=g.c(g.r(e.origPos,r.center));r.rotate=t-a,r.rotateLabel="0"}else{let t=-1;const a=g.r(n,r.center);if(e.evt.shiftKey){const e=g.a(a);t=e[0]<e[1]?0:1,a[t]=0}this.props.snapper&&this.props.snapper.enabled&&(s=this.props.snapper.snap(r.bounds,a,t)),r.offset=a}else if(!a||1!=a[0]||1!=a[1]){const t=l<this.cornerHandleId+4,r=e.evt.altKey,c=this.props.handleSize;if(r&&a&&(a=g.q(g.b(a,[1,1]),.5)),t){const t=i[l];let o=this.getVirtualDragPos(n,t);const s=(l+2)%4,u=i[s];let d=u.origPos,h=g.k(o,t.nextV,u.origPos,u.prevV)||g.b(u.origPos,u.prevV);const p=g.s(u.prevV),m=g.n(u.prevV),f=g.r(h,u.origPos);let v=g.f(f,p);v/=m;const y=2*c/m;v=Math.max(v,r?.5*(y+1):y);let _=g.k(o,t.prevV,u.origPos,u.nextV)||g.b(u.origPos,u.nextV);const S=g.s(u.nextV),D=g.n(u.nextV),C=g.r(_,u.origPos);let E=g.f(C,S);E/=D;const O=2*c/D;E=Math.max(E,r?.5*(O+1):O),("uniform"===this.props.scaleMode||e.evt.shiftKey)&&(v=Math.max(v,E),E=v),a&&(v=b.e.saturate(v,a),E=b.e.saturate(E,a)),h=g.b(u.origPos,g.q(u.prevV,v)),_=g.b(u.origPos,g.q(u.nextV,E)),o=g.k(h,t.nextV,_,t.prevV)||o,r?(h=g.b(t.origPos,g.q(t.prevV,v)),_=g.b(t.origPos,g.q(t.nextV,E)),d=g.k(h,u.nextV,_,u.prevV)||d,h=g.k(d,u.prevV,o,t.nextV)||h,_=g.k(d,u.nextV,o,t.prevV)||_,v=2*v-1,E=2*E-1,this.xform.offset=[0,0]):this.xform.offset=g.r(g.q(g.b(h,_),.5),this.state.dragState.center),this.xform.scale=s%2==0?[E,v]:[v,E]}else{const t=i[l];let o=this.getVirtualDragPos(n,t);const s=this.middleHandleId+(l+2)%4;let u=i[s].origPos;const d=g.r(t.origPos,u);let h=g.f(g.r(o,u),d);const p=g.n(d);h/=p*p;const m=2*c/p;h=Math.max(h,r?.5*(m+1):m);let f=1;("uniform"===this.props.scaleModeMiddle||e.evt.shiftKey)&&(f=h),a&&(h=b.e.saturate(h,a),f=b.e.saturate(f,a)),o=g.b(u,g.q(d,h)),r?(u=g.r(t.origPos,g.q(d,h)),h=2*h-1,f=2*f-1,this.xform.offset=[0,0]):this.xform.offset=g.q(d,.5*(h-1)),this.xform.scale=s%2==0?[f,h]:[h,f]}if("text"===this.props.type){const e=this.getXFrom();e&&this.throttledXForm(this.props.names,e,!1,!0)}return o=this.computeCurrentOutlineWhileDragging(),this.props.snapper&&this.props.snapper.enabled&&(s=this.props.snapper.getSnapData(g.i([this.currentOutline]))),void this.setState({active:!0,handles:o,snapData:s,visible:!1})}}let l=this.normalizeRotation((this.props.rotation||0)-r.rotate);if(0!==r.rotate){const e=this.snapRotation(l,45,5);l+=e,r.rotate-=e}null!=r.rotateLabel&&(r.rotateLabel=l.toFixed(1)),this.xform.offset=r.offset,this.xform.rotate=-r.rotate,this.xform.scale=r.scale,o=this.computeCurrentOutlineWhileDragging(),this.setState({active:!0,dragState:r,handles:o,snapData:s,visible:!1})}),Object(m.a)(this,"handleDragEnd",e=>{this.throttledXForm.cancel();const t=this.getXFrom();this.resetXForm(),this.startTouch1=null,this.startTouch2=null,t&&(this.props.onXForm(this.props.names,t,t.offset&&e&&e.evt.altKey),this.props.onAnimateSetFrom&&this.props.onAnimateSetFrom(this.currentOutline)),this.setState(e=>e.snapData.length>0?{snapData:[]}:null),this.visibleIconHandles=[this.deleteHandleId,this.rotateHandleId],this.props.onToggleSelection&&this.props.onToggleSelection(!0),this.props.onToggleSelectionObjHide&&this.props.onToggleSelectionObjHide(!1)}),Object(m.a)(this,"getPathDataAsClipFunc",e=>{const t=this.getCurrentOutline();e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.lineTo(t[6],t[7]),e.closePath()}),Object(m.a)(this,"throttledXForm",Z()((e,t,a,n)=>this.props.onXForm(e,t,a,n),200)),Object(m.a)(this,"currentOutline",void 0)}UNSAFE_componentWillMount(){this.UNSAFE_componentWillReceiveProps(this.props)}UNSAFE_componentWillReceiveProps(e){this.currentOutline=null;const t=[];switch(e.handleVisCorner){case"none":break;default:t.push(0,1,2,3)}switch(e.handleVisMiddle){case"none":break;case"x":t.push(5,7);break;case"y":t.push(4,6);break;default:t.push(4,5,6,7)}this.visibleHandles=t,this.handleBoxLower=[.5*e.handleSize,.5*e.handleSize],this.handleBoxUpper=g.r([e.outerSize[0],e.outerSize[1]],this.handleBoxLower);const a={bounds:[1e4,1e4,-1e4,-1e4],center:[0,0],offset:[0,0],rotate:0,scale:[1,1]},n=e.outline;for(let i=0;i<n.length;i+=2)a.bounds[0]=Math.min(a.bounds[0],n[i]),a.bounds[1]=Math.min(a.bounds[1],n[i+1]),a.bounds[2]=Math.max(a.bounds[2],n[i]),a.bounds[3]=Math.max(a.bounds[3],n[i+1]),a.center[0]+=n[i],a.center[1]+=n[i+1];a.center[0]/=n.length/2,a.center[1]/=n.length/2,this.orientation=g.d(n.slice(0,6))>0?1:-1,this.setState(t=>({active:e.active,dragState:a,handles:this.getHandleData(n),snapData:[],visible:!e.active&&(t&&t.visible)}))}getErrorHandle(e){const{border:t,hitRadius:a,iconHandleSize:n}=this.props,i=this.state.handles[this.errorHandleId];let r=null;switch(Math.max(V.b.none,...e.map(e=>e.type))){case V.b.info:r="#46c3e0";break;case V.b.warn:r="#fddc39";break;case V.b.error:r="#c00000"}return R.a.createElement(q,{anchorOffset:0,anchorStyle:t,draggable:this.visibleHandles.includes(i.id),fill:"#ffffff",handleId:i.id,hitRadius:a,icon:W.a.Warning,iconColor:r,iconFontSize:23,iconOffset:[11.5,11.5],key:i.id,name:"handle",pos:i.pos,rotation:i.rotation,size:n-2,stroke:1,strokeColor:"#ffffff"})}render(){const{active:e,dragState:t,snapData:a}=this.state,{border:n,canDelete:i,errors:o,fillOpacity:s,handleSize:l,hitRadius:c,iconHandleSize:u,iconHandleOffset:d,listening:h,visible:p}=this.props,m=this.getPathData(),f=this.state.handles[this.state.activeHandleId],b=this.state.handles[this.deleteHandleId],v=this.state.handles[this.rotateHandleId],y=[],_=[],S=o&&o.length>0;if(e){this.visibleIconHandles.find(e=>e===this.rotateHandleId)&&y.push(R.a.createElement(q,{anchorOffset:d,anchorStyle:n,draggable:!0,fill:"#ffffff",handleId:v.id,hitRadius:c,icon:W.a.RotateZ4,iconColor:"#676767",iconFontSize:11,iconOffset:[5.5,5.5],key:v.id,name:"handle",pos:v.pos,rotation:v.rotation,size:u,stroke:1,strokeColor:"#979797"})),i&&this.visibleIconHandles.find(e=>e===this.deleteHandleId)&&y.push(R.a.createElement(q,{anchorOffset:d,anchorStyle:n,draggable:!1,fill:"#ffffff",handleId:b.id,hitRadius:c,icon:W.a.DeleteTrashcan,iconColor:"#ca0017",iconFontSize:11,iconOffset:[5.5,5.5],key:b.id,name:"handle",pos:b.pos,rotation:b.rotation,size:u,stroke:1,strokeColor:"#ca0017"}));for(const e of this.visibleHandles)if(S&&e===this.errorHandleId)y.push(this.getErrorHandle(o));else{const t=this.state.handles[e];y.push(R.a.createElement(q,{draggable:!0,fill:"#ffffff",handleId:t.id,hitRadius:c,key:t.id,name:"handle",pos:t.pos,rotation:t.rotation,size:l,stroke:1,strokeColor:"#404040"}))}null!=this.state.activeHandleId&&null!=this.props.dragHandleTooltipText&&this.state.activeHandleId<this.scaleHandleCount&&r()(f.pos,f.origPosProj)&&y.push(R.a.createElement(X,{key:"dragTooltip",pos:f.pos,posThreshold:g.q(this.props.outerSize,.85),text:this.props.dragHandleTooltipText})),null!=this.state.dragState.rotateLabel?y.push(R.a.createElement(X,{key:"rotateAngleTooltip",pos:v.pos,posThreshold:g.q(this.props.outerSize,.85),text:this.state.dragState.rotateLabel})):this.state.activeHandleId===this.rotateHandleId&&null!=this.props.rotateHandleTooltipText&&r()(f.pos,f.origPosProj)&&y.push(R.a.createElement(X,{key:"rotateTooltip",pos:v.pos,posThreshold:g.q(this.props.outerSize,.85),text:this.props.rotateHandleTooltipText})),this.state.activeHandleId===this.deleteHandleId&&null!=this.props.deleteHandleTooltipText&&y.push(R.a.createElement(X,{key:"deleteTooltip",pos:b.pos,posThreshold:g.q(this.props.outerSize,.85),text:this.props.deleteHandleTooltipText}))}else S&&y.push(this.getErrorHandle(o));return _.push(...a.map((e,t)=>R.a.createElement($,{color:[e.color,""],key:t,points:e.points}))),R.a.createElement(L.Group,{listening:h,onClick:this.handleClick,onDblClick:this.handleDoubleClick,onDblTap:this.handleDoubleTap,onDragEnd:this.handleDragEnd,onDragMove:this.handleDragMove,onDragStart:this.handleDragStart,onMouseDown:this.handleMouseDown,onMouseOut:this.handleMouseOut,onMouseOver:this.handleMouseOver,onMouseUp:this.handleMouseUp,onTap:this.handleClick,onTouchStart:this.handleMouseDown},R.a.createElement(L.Group,{draggable:!this.props.disabled,offsetX:t.center[0],offsetY:t.center[1],opacity:(null!=p?p:this.state.visible||e||S)?1:0,x:t.center[0],y:t.center[1]},e?R.a.createElement(R.a.Fragment,null,R.a.createElement(L.Path,{data:m,opacity:n.opacity,stroke:n.color[0],strokeWidth:n.width}),R.a.createElement(L.Path,{dash:n.dash,dashEnabled:!!n.dash,data:m,opacity:n.opacity,stroke:n.color[1],strokeWidth:n.width})):R.a.createElement(R.a.Fragment,null,s>0&&R.a.createElement(L.Path,{data:m,opacity:s,fill:n.color[1]}),R.a.createElement(L.Group,{clipFunc:this.getPathDataAsClipFunc},R.a.createElement(L.Path,{data:m,stroke:n.color[0],strokeWidth:3*n.width})),R.a.createElement(L.Path,{data:m,opacity:n.opacity,stroke:n.color[1],strokeWidth:n.width}))),y,_)}getCurrentOutline(){return this.currentOutline||this.props.outline}getPathData(){const e=this.getCurrentOutline();let t=`M ${e[0]} ${e[1]} L`;for(let a=2;a<8;a+=2)t+=` ${e[a]} ${e[a+1]}`;return t+=" Z",t}getCursorFromAngle(e){return["ew-resize","nwse-resize","ns-resize","nesw-resize"][Math.floor((e+202.5)%180/45)]}getHandleData(e){const t=[];for(let a=0;a<8;a+=2){const n=a/2,i=(a+6)%8,r=(a+2)%8;let o=e.slice(a,a+2);const s=g.r(e.slice(i,i+2),o),l=g.r(e.slice(r,r+2),o),c=g.c(g.b(g.s(s),g.s(l)));let u=g.p(o,this.handleBoxLower,this.handleBoxUpper);t[this.cornerHandleId+n]={cursor:this.getCursorFromAngle(c),id:this.cornerHandleId+n,nextV:l,origPos:o,origPosProj:u,pos:u,prevV:s,rotation:g.c(s)},o=g.b(o,g.q(l,.5)),u=g.p(o,this.handleBoxLower,this.handleBoxUpper),t[this.middleHandleId+n]={cursor:this.getCursorFromAngle(c+45),id:this.middleHandleId+n,nextV:l,origPos:o,origPosProj:u,pos:u,prevV:s,rotation:g.c(l)}}return t[this.rotateHandleId]=this.getRotateHandleData(e),t[this.deleteHandleId]=this.getDeleteHandleData(e),t}getRotateHandleData(e){return this.getIconHandleData(this.rotateHandleId,e.slice(2,4),e.slice(4,6),this.rotateCursor)}getDeleteHandleData(e){return this.getIconHandleData(this.deleteHandleId,e.slice(6,8),e.slice(0,2),"pointer")}getIconHandleData(e,t,a,n){const i=g.q(g.b(t,a),.5),r=g.q(g.s(g.o(g.r(a,t),-90*this.orientation)),this.props.iconHandleOffset),o=g.b(i,r);let s=0,l=null,c=[0,0];return o[0]<0?(i[0]=0,c=g.b(c,[1,0])):o[0]>this.props.outerSize[0]&&(i[0]=this.props.outerSize[0],c=g.b(c,[-1,0])),o[1]<0?(i[1]=0,c=g.b(c,[0,1])):o[1]>this.props.outerSize[1]&&(i[1]=this.props.outerSize[1],c=g.b(c,[0,-1])),g.l(c)?(s=g.c(r)+180,l=o):(s=g.c(c)+180,l=g.b(i,g.q(c,this.props.iconHandleOffset))),{cursor:n,id:e,origPos:o,origPosProj:l,pos:l,rotation:s}}getHandleId(e){let t=e.target;for(;t&&t.name&&t.getAttr;){if("handle"===t.name())return t.getAttr("handleId");t=t.getParent()}}getTouchPos(e){return[e.clientX,e.clientY]}getVirtualDragPos(e,t){return g.b(t.origPos,g.r(e,t.origPosProj))}getXFrom(){let e=!1;const t={},a=this.xform;return 1===a.scale[0]&&1===a.scale[1]||(t.scale=a.scale,t.scale[0]=Math.max(t.scale[0],.01),t.scale[1]=Math.max(t.scale[1],.01),e=!0,"text"===this.props.type&&(t.renderInvalidate=!0)),0!==a.rotate&&(t.rotate=a.rotate,e=!0),g.l(a.offset)||(t.position=a.position,t.offset=a.offset,e=!0),e?t:null}normalizeRotation(e){let t=Math.round(10*e)/10;return t<-180&&(t+=360),t>180&&(t-=360),t}resetXForm(){this.xform={offset:[0,0],position:this.state.dragState.center,rotate:0,scale:[1,1]}}snapRotation(e,t,a){const n=Math.round(e/t)*t;return Math.abs(n-e)<a?n-e:0}computeCurrentOutlineWhileDragging(){const e=this.props.rotation*Math.PI/180,t=S.a();S.m(t,[-this.xform.position[0],-this.xform.position[1]]),S.j(t,-e),S.k(t,this.xform.scale),S.j(t,e+this.xform.rotate*Math.PI/180),S.m(t,this.xform.offset),S.m(t,this.xform.position);const a=this.props.outline.slice();S.n(t,a),this.currentOutline=a;const n=this.getHandleData(this.currentOutline);for(let i=0;i<this.handleCount;i++)Object.assign(n[i],G()(this.state.handles[i],"origPos","origPosProj","prevV","nextV"));return this.props.onSetDragMatrix&&this.props.onSetDragMatrix(t),n}}Object(m.a)(Y,"defaultProps",{active:!1,border:{color:["#ffffff","#404040"],dash:[3,3],opacity:1,width:1},fillOpacity:0,handleSize:9,hitRadius:0,iconHandleOffset:27,iconHandleSize:18,listenDebugEvents:!1,onCursorChange:e=>{document.body.style.cursor=e},onDelete:()=>{},onSelect:()=>{},onXForm:()=>{},outline:[0,0,256,0,256,256,0,256]});class Q extends R.a.PureComponent{constructor(...e){super(...e),Object(m.a)(this,"darkColors",["#4e4e4e","#565656"]),Object(m.a)(this,"lightColors",["#ffffff","#e6e6e6"]),Object(m.a)(this,"checkerSize",12)}render(){const{checkerMode:e,fill:t,maxDim:a,outerSize:n}=this.props,{checkerSize:i}=this;let r;const o=[.5*(n[0]-a),.5*(n[1]-a)];let s;if(e){r="dark"===e?this.darkColors:this.lightColors,s=[];for(let e=0;e<a;e+=i){for(let t=i;t<a;t+=2*i)s.push(R.a.createElement("use",{xlinkHref:"#small",transform:`translate(${e}, ${t})`,key:`c${e},${t}`}));e+=i;for(let t=0;t<a;t+=2*i)s.push(R.a.createElement("use",{xlinkHref:"#small",transform:`translate(${e}, ${t})`,key:`c${e},${t}`}))}}return R.a.createElement("svg",{viewBox:`${-o[0]} ${-o[1]} ${n[0]} ${n[1]}`,style:{position:"absolute"}},s&&R.a.createElement(R.a.Fragment,null,R.a.createElement("defs",null,R.a.createElement("rect",{id:"small",x:"0",y:"0",width:i,height:i,fill:r[1]})),R.a.createElement("rect",{id:"big",x:"0",y:"0",width:a,height:a,fill:r[0]}),s),t&&R.a.createElement("rect",{x:"0",y:"0",width:a,height:a,fill:t.fillcolor&&b.a.getRGB(t.fillcolor),fillOpacity:t.fillcolor&&b.a.getAlpha(t.fillcolor),stroke:t.strokecolor&&b.a.getRGB(t.strokecolor),strokeOpacity:t.strokecolor&&b.a.getAlpha(t.strokecolor),strokeWidth:t.strokewidth}))}}Object(m.a)(Q,"defaultProps",{checker:!0});var J=a(519),ee=a.n(J);class te extends R.a.PureComponent{constructor(...e){super(...e),Object(m.a)(this,"image",null),Object(m.a)(this,"imageCrop",null),Object(m.a)(this,"imageCropped",null),Object(m.a)(this,"origScale",void 0),Object(m.a)(this,"physicalScale",void 0),Object(m.a)(this,"imageData",{imageMaxDim:0,requiredMaxDim:0}),Object(m.a)(this,"imageCropData",{imageMaxDim:0,requiredMaxDim:0}),Object(m.a)(this,"version","")}UNSAFE_componentWillMount(){this.updateStateFromProps(this.props)}UNSAFE_componentWillReceiveProps(e){const t=this.props.outline?S.g(S.d(this.props.outline)):[1,1],a=e.outline?S.g(S.d(e.outline)):[1,1];if(this.image&&Math.abs(t[0]/t[1]-a[0]/a[1])>.001&&(this.image=this.imageCropped=null),this.image&&"image"===this.props.renderType&&"text"===this.props.type&&!g.l(g.r(t,a))&&(this.image=this.imageCropped=null),this.image){this.props.renderSpace!==e.renderSpace&&(this.image=this.imageCropped=null)}this.updateStateFromProps(e)}getRequiredMaxdim(){var e;return null!==(e=this.imageData.requiredMaxDim)&&void 0!==e?e:0}getCropToVisible(e,t){const{maxDim:a,outerSize:n}=this.props,i=g.s(g.r(e.slice(2,4),e.slice(0,2))),r=[.5*(n[0]-a),.5*(n[1]-a)],o=g.b([0,0,a,a],r);let s=g.j([g.e(o)],i);const l=g.j([e],i);this.inflateBounds(l,t),s[0]=Math.max(s[0],l[0]),s[1]=Math.max(s[1],l[1]),s[2]=Math.min(s[2],l[2]),s[3]=Math.min(s[3],l[3]);const c=S.d(g.e(s));S.i(c,[i[0],i[1],-i[1],i[0],0,0]);return{xForm:c,crop:[(s[0]-l[0])/(l[2]-l[0]),(s[1]-l[1])/(l[3]-l[1]),(s[2]-l[0])/(l[2]-l[0]),(s[3]-l[1])/(l[3]-l[1])]}}updateMatrix(e,t){const{glyphs:a,maxDim:n,objectoutline:i,outerSize:r,renderSpace:o,renderType:s,transient:l,type:c}=t||this.props;let{outline:u}=t||this.props;if(i&&"path"===c&&(u=i),this.physicalScale=1,this.imageData.offset=[.5*n,.5*n],this.imageData.rotation=0,this.imageData.scale=[n,n],"design"===o){const e=[.5*(r[0]-n),.5*(r[1]-n)];this.imageData.offset=g.b(this.imageData.offset,e)}if("object"===o&&u){let t=0;"image"!==c&&"qrcode"!==c&&"image"===s&&(t=.25);let i=S.d(u);this.origScale=S.g(i);const r=ee()(this.origScale);if(e&&!l){const t=S.g(e);("text"!==c||"image"!==s||g.g(t,[1,1]))&&(S.i(i,e),this.physicalScale=t[1]),this.imageCrop=null,this.imageCropped=null}else if("path"===c&&"image"===s&&r>2*n){const e=this.getCropToVisible(u,t);this.imageCrop=e.crop,this.imageCropData.offset=S.e(e.xForm),this.imageCropData.rotation=S.f(e.xForm),this.imageCropData.scale=S.g(e.xForm)}this.imageData.offset=S.e(i),this.imageData.rotation=S.f(i),this.imageData.scale=S.g(i),this.inflate(this.imageData.scale,t),a&&(this.imageData.scale[0]=this.imageData.scale[1]=this.physicalScale*r)}this.forceUpdate()}updateStateFromProps(e){const{imageUrl:t,renderType:a}=e;if(this.updateMatrix(void 0,e),"image"===a&&t){var n;const a=this.getImageData();a.requiredMaxDim=Math.min(2048,Math.floor(Math.max(600,...a.scale))),a===this.imageData&&(a.requiredMaxDim<=a.imageMaxDim&&(a.requiredMaxDim=a.imageMaxDim),a.imageMaxDim=a.requiredMaxDim),this.version=null!==(n=e.version)&&void 0!==n?n:"";const i=Object(C.c)(t,{max_dim:a.requiredMaxDim,version:this.version});if(!this.image||this.image.src!==i){const e=new Image;e.src=i,this.props.onImageRequested(),e.onload=()=>{this.image=e,this.forceUpdate(),this.props.onImageCompleted()}}if(this.imageCrop){const e=Object(C.c)(i,{view_crop:`[${this.imageCrop[0]},${this.imageCrop[1]},${this.imageCrop[2]},${this.imageCrop[3]}]`});if(!this.imageCropped||this.imageCropped.src!==e){this.imageCropped=null;const t=new Image;t.src=e,this.props.onImageRequested(),t.onload=()=>{this.imageCropped=t,this.forceUpdate(),this.props.onImageCompleted()}}}}else this.image=null,this.imageCrop=null}render(){const{fillColor:e,fontFamily:t,fontSize:a,glyphMap:n,glyphs:i,lineCap:r,lineJoin:o,outerSize:s,renderType:l,shape:c,strokeColor:u,strokeWidth:d,text:h,type:p}=this.props,{physicalScale:m}=this;let{offset:g,rotation:f,scale:v}=this.imageData,y=this.image;if(this.imageCrop&&this.imageCropped&&(y=this.imageCropped,g=this.imageCropData.offset,f=this.imageCropData.rotation,v=this.imageCropData.scale),"text"===p&&"vector"===l){if(i&&n){const t={},a=[];for(const e of i)!t[e.n]&&n[e.n]&&(t[e.n]=R.a.createElement("path",{d:n[e.n].p,id:e.n,key:e.n})),a.push(R.a.createElement("use",{key:a.length,xlinkHref:"#"+e.n,transform:`matrix(${S.l(e.m,8)})`}));return R.a.createElement("svg",{style:{height:s[1],left:0,position:"absolute",top:0,width:s[0]},viewBox:`0 0 ${s[0]} ${s[1]}`},R.a.createElement("defs",null,Object.values(t)),R.a.createElement("g",{fillOpacity:b.a.getAlpha(e),fill:b.a.getRGB(e),transform:`matrix(${S.l(S.c(v,f,g),8)})`},a))}return R.a.createElement("div",{style:{color:b.a.getRGB(e),fontFamily:t,fontSize:a*m,left:-.5*v[0],opacity:b.a.getAlpha(e),position:"absolute",textAlign:this.getAlign(),top:-.5*v[1],transform:`translate(${g[0].toFixed(8)}px, ${g[1].toFixed(8)}px) rotate(${-f.toFixed(8)}deg)`,width:v[0],wordWrap:"break-word"}},h)}return"path"===p&&c&&"vector"===l?("lineH"!==c&&(v[0]-=d),v[1]-=d,R.a.createElement("svg",{style:{height:s[1],position:"absolute",width:s[0]},viewBox:`0 0 ${s[0]} ${s[1]}`},R.a.createElement("path",{d:this.getPathData(S.c(v,f,g)),fill:b.a.getRGB(e),fillOpacity:b.a.getAlpha(e),stroke:b.a.getRGB(u),strokeLinecap:r,strokeLinejoin:o,strokeOpacity:b.a.getAlpha(u),strokeWidth:d}))):y&&R.a.createElement("img",{style:{height:Math.round(v[1]),left:-.5*v[0],maxWidth:"none",top:-.5*v[1],transform:`translate(${g[0].toFixed(8)}px, ${g[1].toFixed(8)}px) rotate(${-f.toFixed(8)}deg)`,transition:"none",width:Math.round(v[0])},src:y.src})}getImageData(){return this.imageCrop&&this.imageCropped?this.imageCropData:this.imageData}inflate(e,t){t&&(t*=ee()(e),t*=2,e[0]+=t,e[1]+=t)}inflateBounds(e,t){t&&(t*=Math.max(e[2]-e[0],e[3]-e[1]),e[0]-=t,e[1]-=t,e[2]+=t,e[3]+=t)}getPathData(e){let t=null;switch(this.props.shape){case"circle":t=[{command:"M",data:[0,-.5]},{command:"C",data:[.275892,-.5,.5,-.275892,.5,0]},{command:"C",data:[.5,.275892,.275892,.5,0,.5]},{command:"C",data:[-.275892,.5,-.5,.275892,-.5,0]},{command:"C",data:[-.5,-.275892,-.275892,-.5,0,-.5]},{command:"Z",data:[]}];break;case"line":t=[{command:"M",data:[-.5,-.5]},{command:"L",data:[.5,.5]},{command:"Z",data:[]}];break;case"lineH":t=[{command:"M",data:[-.5,0]},{command:"L",data:[.5,0]},{command:"Z",data:[]}];break;case"square":t=[{command:"M",data:[-.5,-.5]},{command:"L",data:[.5,-.5]},{command:"L",data:[.5,.5]},{command:"L",data:[-.5,.5]},{command:"Z",data:[]}];break;case"squareRC":t=this.getPathSquareRC(e);break;case"tri":t=[{command:"M",data:[-.5,.5]},{command:"L",data:[0,-.5]},{command:"L",data:[.5,.5]},{command:"Z",data:[]}];break;default:t=[{command:"M",data:[0,0]},{command:"Z",data:[]}]}return S.o(e,t),b.b.getSvgPath(t)}getPathSquareRC(e){let{cornerRadius:t}=this.props;if(void 0===t)return[];const a=[],[n,i]=S.g(e),r=S.a();S.k(r,[n,i]),S.h(r),[t]=g.p([t],[0],[.5*Math.min(n,i)]);let o=[0,0,0,0,0,0];const s=[.275892,-.5,.5,-.275892,.5,0];return o[0]=-.5*n+t,o[1]=-.5*i,S.n(r,o),a.push({command:"M",data:o.slice(0,2)}),o[0]=.5*n-t,o[1]=-.5*i,S.n(r,o),a.push({command:"L",data:o.slice(0,2)}),g.l([t],1e-4)||(o=s.slice(),o=g.q(o,t/.5),o=g.b(o,[.5*n-t,-.5*i+t]),S.n(r,o),a.push({command:"C",data:o.slice(0,6)})),o[0]=.5*n,o[1]=.5*i-t,S.n(r,o),a.push({command:"L",data:o.slice(0,2)}),g.l([t],1e-4)||(o=s.slice(),S.n(S.b(-.5*Math.PI),o),o=g.q(o,t/.5),o=g.b(o,[.5*n-t,.5*i-t]),S.n(r,o),a.push({command:"C",data:o.slice(0,6)})),o[0]=-.5*n+t,o[1]=.5*i,S.n(r,o),a.push({command:"L",data:o.slice(0,2)}),g.l([t],1e-4)||(o=s.slice(),S.n(S.b(-Math.PI),o),o=g.q(o,t/.5),o=g.b(o,[-.5*n+t,.5*i-t]),S.n(r,o),a.push({command:"C",data:o.slice(0,6)})),o[0]=-.5*n,o[1]=-.5*i+t,S.n(r,o),a.push({command:"L",data:o.slice(0,2)}),g.l([t],1e-4)||(o=s.slice(),S.n(S.b(-1.5*Math.PI),o),o=g.q(o,t/.5),o=g.b(o,[-.5*n+t,-.5*i+t]),S.n(r,o),a.push({command:"C",data:o.slice(0,6)})),a.push({command:"Z",data:[]}),a}getAlign(){switch(this.props.align){case"leading":return"left";case"trailing":return"right"}return"center"}}Object(m.a)(te,"defaultProps",{renderSpace:"object",renderType:"vector"});const ae=Object(p.a)(k.l,k.a,k.f,(e,t,a)=>a.maxDim,(e,t,a)=>a.outerSize,(e,t,a)=>a.name,(e,t,a,n,i,r)=>{if(r&&e&&t&&a){const o=e.areas&&e.areas[t.name],s=Object(v.d)(o,r);if(s&&s.glyphs){return{glyphMap:o&&o.glyphs,glyphs:s.glyphs,outline:_(a,n,i,s.outline),transient:!0}}}return{glyphMap:t&&t.glyphs,transient:!1}}),ne=Object(h.b)((e,t)=>ae(e,t.designStateKey,t),(e,t)=>({onImageCompleted:()=>{e(N.yb.renderObjectImageCompleted(t.designStateKey))},onImageRequested:()=>{e(N.yb.renderObjectImageRequested(t.designStateKey))}}),null,{forwardRef:!0})(te);a(2693);Object(L.useStrictMode)(!0);class ie extends R.a.Component{constructor(...e){super(...e),Object(m.a)(this,"animateCurve",e=>e*(2-e)),Object(m.a)(this,"animateDuration",200),Object(m.a)(this,"animateFrom",null),Object(m.a)(this,"cursor","crosshair"),Object(m.a)(this,"ensureIEFocus",null),Object(m.a)(this,"hitRadius",0),Object(m.a)(this,"isPinching",!1),Object(m.a)(this,"pointerOrder",{}),Object(m.a)(this,"renderObjs",{}),Object(m.a)(this,"selectedObj",null),Object(m.a)(this,"selectedRenderObjs",{}),Object(m.a)(this,"state",{animateInProgress:!1,guidelineTooltip:void 0,guidelineTooltipText:"",itemizedSelection:!1,selectionHide:!1,selectionObjNames:[],selectionObjHide:!1}),Object(m.a)(this,"animationLayer",void 0),Object(m.a)(this,"animateCancel",()=>this.state.animateInProgress&&this.setState({animateInProgress:!1})),Object(m.a)(this,"animateSelection",(e,t,a=null)=>{const{maxDim:n}=this.props;if((e=(e=(e=e||this.animateFrom)||this.props.objects.selection&&this.props.objects.selection.outline)||[0,0,n,0,n,n,0,n])&&t){const n=g.r(t,e);if(!this.state.animateInProgress&&!g.l(n)){const t=new M.a.Animation(i=>{const{animateInProgress:r}=this.state,o=i.time/this.animateDuration;if(o<=1&&r){const t=g.b(e,g.q(n,this.animateCurve(o)));this.setState({animateOutline:t})}else t.stop(),this.setState({animateInProgress:!1}),a&&a()},this.animationLayer);this.setState({animateInProgress:!0,animateOutline:e},()=>t.start())}}}),Object(m.a)(this,"animateSetFrom",e=>{this.animateFrom=e}),Object(m.a)(this,"handleBackgroundClick",()=>{this.props.showSelectionInfo&&this.props.showSelectionInfo("none"),this.props.onSelect([])}),Object(m.a)(this,"handleBackgroundContextMenu",()=>{const{objects:e}=this.props;e.selection&&this.props.onSelect([])}),Object(m.a)(this,"handleDesignObjectMouseDown",()=>{this.props.onUpdateSettings({contextMenuState:null})}),Object(m.a)(this,"handleContentMouseDown",()=>{const e=document.activeElement;e&&e.blur()}),Object(m.a)(this,"handleCursorChange",e=>{this.state.cursor!==e&&this.setState({cursor:e})}),Object(m.a)(this,"handleDeleteClick",e=>{this.props.onDelete(e),this.props.isZ4?Object(w.h)(I.a.DeletedViaCanvas()):Object(w.h)(j.a.CanvasDeleteClick())}),Object(m.a)(this,"handleDoubleClick",e=>{const{isZ4:t,objects:a,uiProcess:n}=this.props;if(a.selection&&a.selection.canDelete&&!a.selection.showalways){const n={};t?"image"===a.selection.type&&1===a.selection.names.length?n.isChangingImage=!0:"text"===a.selection.type&&1===a.selection.names.length?n.isEditingText=!0:"qrcode"===a.selection.type&&1===a.selection.names.length&&(n.isEditingQRCode=!0):n.shouldPromptToEditObjects=e,this.props.onUpdateSettings(n)}}),Object(m.a)(this,"handleDragEnd",()=>{if(!this.isPinching&&!this.props.disableInteraction){const e=this.state.dragState;if(e&&e.start&&e.end){const t=g.i([e.start,e.end]),a=this.props.objects.inactive.filter(e=>!e.locked&&g.m(e.outline,t)).map(e=>e.names[0]);this.props.onSelect(a),this.setState({dragState:null,selectionObjNames:[]})}}}),Object(m.a)(this,"handleDragMove",e=>{if(!this.isPinching&&!this.props.disableInteraction){const t=e.target.getStage().getPointerPosition(),a=[t.x,t.y],n=this.state.dragState.start,i=g.i([n,a]),r=this.props.objects.inactive.filter(e=>!e.locked&&g.m(e.outline,i)).map(e=>e.names[0]);this.setState({dragState:{end:a,start:n},selectionObjNames:r})}}),Object(m.a)(this,"handleDragStart",e=>{if(!this.isPinching&&!this.props.disableInteraction){const t=e.target.getStage().getPointerPosition();this.setState({dragState:{start:[t.x,t.y]}})}}),Object(m.a)(this,"handleMouseOverBg",()=>{this.handleCursorChange(this.cursor)}),Object(m.a)(this,"handleMouseOverGuidelines",e=>{const t=e.target.name();let a=this.props.zString("zi_create_design_tooltip_Guidelines");switch(t){case"bleed":a=this.props.zString("zi_create_design_tooltip_Guidelines_Bleed");break;case"safe":a=this.props.zString("zi_create_design_tooltip_Guidelines_Safe");break;case"visible":a=this.props.zString("zi_create_design_tooltip_Guidelines_Visible")}this.setState({guidelineTooltip:[e.evt.offsetX,e.evt.offsetY],guidelineTooltipText:a})}),Object(m.a)(this,"handleMouseOutGuidelines",()=>{this.setState({guidelineTooltip:void 0})}),Object(m.a)(this,"keyDownNodeList",["INPUT","TEXTAREA"]),Object(m.a)(this,"handleKeyDown",e=>{if(this.props.disableInteraction||this.props.disableKeyboard)return;const t=e=>{this.props.isZ4?Object(w.h)(I.a.CanvasShortcut(e)):Object(w.h)(j.a.CanvasKeyboardShortcut(e))};if(this.props.enableKeys&&this.keyDownNodeList.every(e=>e!==document.activeElement.nodeName)){const a=e.altKey,n=e.ctrlKey||e.metaKey,i=e.shiftKey,r=a&&!n&&!i,o=!a&&n&&!i,s=!a&&!n&&i,l=this.props.objects.selection,c=l&&l.names.length>0,u={offset:[0,0],rotate:0,space:"design"};let d=!1;const h=[],p=[];switch(e.keyCode){case 17:case 91:this.toggleItemizedSelection(!0);break;case 40:c&&(e.preventDefault(),u.offset[1]=.05,d=!0,t("moveDown"));break;case 37:c&&(e.preventDefault(),u.offset[0]=-.05,d=!0,t("moveLeft"));break;case 39:c&&(e.preventDefault(),u.offset[0]=.05,d=!0,t("moveRight"));break;case 38:c&&(e.preventDefault(),u.offset[1]=-.05,d=!0,t("moveUp"));break;case 8:case 46:c&&e.preventDefault();const s=this.props.objects.selectionDeletable;return void(s&&s.length>0&&(this.props.onDelete(s),t("delete")));case 65:if(o)return e.preventDefault(),this.props.onSelectAll(),void t("selectAll");r&&(e.preventDefault(),c&&(h.push("align"),p.push("align=left&alignto=design&group=true"),t("alignL")));break;case 67:if(o)return void(c&&(this.props.onCopy(this.props.objects.selection.names),t("copy")));r&&c&&(e.preventDefault(),h.push("align"),p.push("align=bottom&alignto=design&group=true"),h.push("align"),p.push("align=right&alignto=design&group=true"),t("alignBR"));break;case 68:r&&c&&(e.preventDefault(),h.push("align"),p.push("align=right&alignto=design&group=true"),t("alignR"));break;case 69:r&&c&&(e.preventDefault(),h.push("align"),p.push("align=top&alignto=design&group=true"),h.push("align"),p.push("align=right&alignto=design&group=true"),t("alignTR"));break;case 71:n&&(c&&e.preventDefault(),i?c&&"group"===l.type&&(this.props.onUngroup(),t("ungroup")):c&&l.names.length>1&&l.hasNoGroups&&(this.props.onGroup(),t("group")));break;case 81:r&&c&&(e.preventDefault(),h.push("align"),p.push("align=top&alignto=design&group=true"),h.push("align"),p.push("align=left&alignto=design&group=true"),t("alignTL"));break;case 82:o&&(e.preventDefault(),c&&(u.rotate=-45,d=!0,t("rotate")));break;case 83:r&&c&&(e.preventDefault(),h.push("align"),p.push("align=hcenter&alignto=design&group=true"),h.push("align"),p.push("align=vcenter&alignto=design&group=true"),t("alignC"));break;case 84:e.preventDefault(),this.props.onUpdateSettings({isAddingText:!0}),t("addText");break;case 86:return void(o&&this.props.paste&&(this.props.onSelect([]),this.props.onPaste(),t("paste")));case 87:r&&c&&(e.preventDefault(),h.push("align"),p.push("align=top&alignto=design&group=true"),t("alignT"));break;case 88:if(o)return void(c&&(this.props.onCut(this.props.objects.selection.names),t("cut")));r&&(e.preventDefault(),c&&(h.push("align"),p.push("align=bottom&alignto=design&group=true"),t("alignB")));break;case 89:return void(o&&(e.preventDefault(),this.props.onRedo(),t("redo")));case 90:if(!a&&n&&i)return e.preventDefault(),this.props.onRedo(),void t("redo");if(o)return e.preventDefault(),this.props.onUndo(),void t("undo");r&&(e.preventDefault(),c&&(h.push("align"),p.push("align=bottom&alignto=design&group=true"),h.push("align"),p.push("align=left&alignto=design&group=true")),t("alignBL"));break;case 189:if(c&&!a&&!n){const a=1-Object(b.f)(e,.1);u.scale=[a,a],d=!0,t("scale-")}break;case 187:case 107:if(c&&!a&&!n){const a=1+Object(b.f)(e,.1);u.scale=[a,a],d=!0,t("scale+")}break;case 219:c&&(o&&(e.preventDefault(),1===l.names.length&&this.props.onMoveBackward()),n&&a&&!i&&(e.preventDefault(),this.props.onMoveToBack()));break;case 221:c&&(o&&(e.preventDefault(),1===l.names.length&&this.props.onMoveForward()),n&&a&&!i&&(e.preventDefault(),this.props.onMoveToFront()))}d&&(s?(u.offset=g.q(u.offset,3),u.rotate*=-1):(o||r)&&(u.offset=g.q(u.offset,.05))),d&&this.props.onXForm(this.props.objects.selection.names,u),h.length>0&&this.props.onLayout(h,p,!1,l.names)}}),Object(m.a)(this,"handleKeyUp",e=>{switch(e.keyCode){case 17:case 91:this.toggleItemizedSelection(!1)}}),Object(m.a)(this,"handleSetDragMatrix",e=>{for(const t in this.selectedRenderObjs){const a=this.selectedRenderObjs[t];a&&a.updateMatrix(e)}}),Object(m.a)(this,"handleXForm",(e,t,a=!1,n=!1)=>{const{isZ4:i}=this.props;n&&"textGlyph"!==this.props.renderDesignMode||(this.props.onXForm(e,t,a,n),n||(t.scale?i?Object(w.h)(I.a.ScaledViaCanvas()):Object(w.h)(j.a.CanvasScale()):(t.rotate&&(i?Object(w.h)(I.a.RotatedViaCanvas()):Object(w.h)(j.a.CanvasRotate())),t.position&&(i?Object(w.h)(I.a.MovedViaCanvas()):Object(w.h)(j.a.CanvasMove())))))}),Object(m.a)(this,"isSelectionHidden",()=>this.state.selectionHide||this.state.animateInProgress),Object(m.a)(this,"toggleItemizedSelection",e=>{this.setState(t=>{if(t.itemizedSelection!==e)return{itemizedSelection:e}})}),Object(m.a)(this,"toggleSelection",e=>{this.setState(t=>{if(t.selectionHide!==!e)return{selectionHide:!e}})}),Object(m.a)(this,"toggleSelectionObjHide",e=>{this.setState(t=>{if(t.selectionObjHide!==e)return{selectionObjHide:e}})}),Object(m.a)(this,"handlePinchStart",e=>{if(this.selectedObj&&!this.state.dragState){this.pointerOrder={};for(let t=0;t<e.pointers.length;t++)this.pointerOrder[e.pointers[t].identifier]=t;this.isPinching=!0,this.selectedObj.handleDragStart(null,e.pointers)}}),Object(m.a)(this,"handlePinch",e=>{this.isPinching&&this.selectedObj.handleDragMove(null,this.reorderPointers(e.pointers))}),Object(m.a)(this,"handlePinchEnd",()=>{this.isPinching&&(this.selectedObj.handleDragEnd(null),this.isPinching=!1,this.pointerOrder={})})}onMountOrReceiveProps(e){this.hitRadius=e.isMobile?25:0}componentDidMount(){Object(D.b)()&&(this.ensureIEFocus=setInterval(()=>{null==document.activeElement&&document.body.focus()},500)),this.calcWatermark()}UNSAFE_componentWillMount(){this.onMountOrReceiveProps(this.props),document.body.addEventListener("keydown",this.handleKeyDown,!0),document.body.addEventListener("keyup",this.handleKeyUp,!0),this.setState({cursor:this.cursor})}UNSAFE_componentWillReceiveProps(e){this.onMountOrReceiveProps(e),this.shouldComponentUpdate(e)&&e.objects.selection&&this.props.maxDim===e.maxDim&&(this.animateSelection(null,e.objects.selection.outline),this.animateFrom=null)}componentWillUnmount(){document.body.removeEventListener("keydown",this.handleKeyDown,!0),document.body.removeEventListener("keyup",this.handleKeyUp,!0),null!=this.ensureIEFocus&&clearInterval(this.ensureIEFocus)}componentDidUpdate(){this.calcWatermark()}shouldComponentUpdate(e){return"waiting"!==e.serverState}render(){const{darkBg:e,fill:t,layers:a,objectUrl:n,renderDesignMode:i,maxDim:r,outerHeight:o,outerWidth:s,ppi:l,vobjtopUrl:c}=this.props,{inactive:u,selection:d,selectionZIndex:h}=this.props.objects,{itemizedSelection:p,selectionObjHide:m,selectionObjNames:f}=this.state,b=this.isSelectionHidden(),v=[null!=s?s:r,null!=o?o:r],_=[];i&&"none"!==i&&(_.push(R.a.createElement(Q,{checkerMode:e?"dark":"light",fill:t,key:"fill",maxDim:r,outerSize:v})),"serverrender"===i?_.push(R.a.createElement(ne,{designStateKey:this.props.designStateKey,imageUrl:n,key:"areaView",maxDim:r,outerSize:v,renderSpace:"design",renderType:"image"})):(a&&a.forEach(e=>_.push(R.a.createElement(ne,{designStateKey:this.props.designStateKey,imageUrl:e.imageUrl,key:"bgView",maxDim:r,outerSize:v,renderSpace:"design",renderType:"image",version:e.version}))),u.flatMap(e=>"group"!==e.type||e.object.clip||Object(y.i)(e.object)?[e]:e.children).forEach(e=>{const t=Object(y.i)(e.object);if("text"!==e.type||"textGlyph"!==i||t)if("path"===e.type&&e.object.shape&&!t){const t=e.cornerRadius,a=e.object,n=e.outline.slice();g.h(n,a.flipx,a.flipy),_.push(R.a.createElement(ne,{cornerRadius:t,designStateKey:this.props.designStateKey,fillColor:a.fill.fillcolor,key:e.names[0],lineCap:a.linecap,lineJoin:a.linejoin,maxDim:r,outerSize:v,outline:n,ref:t=>{this.renderObjs[e.names[0]]=t,d&&d.names.findIndex(t=>t===e.rootName)>=0&&(this.selectedRenderObjs[e.names[0]]=t)},shape:a.shape,strokeColor:a.fill.strokecolor,strokeScale:a.fill.strokescale,strokeWidth:a.fill.strokewidth*l/72,type:e.type}))}else _.push(R.a.createElement(ne,{designStateKey:this.props.designStateKey,imageUrl:e.imageUrl,key:e.imageUrl,maxDim:r,outerSize:v,objectoutline:e.objectoutline,outline:e.outline,ref:t=>{this.renderObjs[e.names[0]]=t,d&&d.names.findIndex(t=>t===e.rootName)>=0&&(this.selectedRenderObjs[e.names[0]]=t)},renderSpace:t?"design":"object",renderType:"image",type:e.type,version:e.version}));else{const t=e.object;_.push(R.a.createElement(ne,{align:t.align,designStateKey:this.props.designStateKey,fillColor:t.styles[0].color,fontFamily:t.styles[0].face,fontSize:t.styles[0].height*l/72,glyphs:t.glyphs,key:e.names[0],maxDim:r,outerSize:v,name:e.names[0],outline:e.outline,ref:t=>{this.renderObjs[e.names[0]]=t,d&&d.names.findIndex(t=>t===e.rootName)>=0&&(this.selectedRenderObjs[e.names[0]]=t)},text:t.value,type:e.type}))}}),c&&_.push(R.a.createElement(ne,{designStateKey:this.props.designStateKey,imageUrl:c,key:"vobjtop",maxDim:r,outerSize:v,renderSpace:"design",renderType:"image"}))));const S=this.props.objects.inactive.filter(e=>!e.object.locked).map(e=>{if(this.props.disableInteraction)return null;let t=e.errors;return d&&d.names.length>1&&d.names.includes(e.names[0])&&(t=null),d&&1===d.names.length&&d.names[0]===e.names[0]?R.a.createElement(Y,{active:!b,canDelete:d.canDelete,deleteHandleTooltipText:this.props.zString("zi_common_Application_Delete_Instruction"),dragHandleTooltipText:this.props.zString("zi_common_Application_Resize_Instruction"),errors:t,handleVisCorner:d.handleVisCorner,handleVisMiddle:d.handleVisMiddle,hitRadius:this.hitRadius,key:e.names.join(),names:d.names,onAnimateSetFrom:this.animateSetFrom,onCursorChange:this.handleCursorChange,onDelete:this.handleDeleteClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleDesignObjectMouseDown,onSelect:this.props.onSelect,onSetDragMatrix:this.handleSetDragMatrix,onXForm:this.handleXForm,outerSize:v,outline:d.outline,ref:e=>this.selectedObj=e,rotateHandleTooltipText:this.props.zString("zi_common_Application_Rotate_Instruction"),rotation:d.rotation,scaleMode:d.scaleMode,scaleModeMiddle:d.scaleModeMiddle,scaleRange:d.scaleRange,showSelectionInfo:this.props.showSelectionInfo,snapper:this.props.snapper,type:d.type,visible:!b&&null}):R.a.createElement(Y,{canDelete:e.canDelete,disabled:e.locked,errors:t,handleVisCorner:e.handleVisCorner,handleVisMiddle:e.handleVisMiddle,hitRadius:this.hitRadius,key:e.names.join(),names:e.names,onAnimateCancel:this.animateCancel,onAnimateSetFrom:this.animateSetFrom,onCursorChange:this.handleCursorChange,onDelete:this.handleDeleteClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleDesignObjectMouseDown,onSelect:this.props.onSelect,onToggleSelection:this.toggleSelection,onXForm:this.handleXForm,outerSize:v,outline:e.outline,scaleMode:e.scaleMode,scaleModeMiddle:e.scaleModeMiddle,scaleRange:e.scaleRange,showSelectionInfo:this.props.showSelectionInfo,snapper:this.props.snapper,type:e.type,visible:!(m||!(d&&d.names.includes(e.names[0])||f&&f.includes(e.names[0])))||null})});d&&d.names.length>1&&S.splice(p?0:h,0,R.a.createElement(Y,{active:!b,canDelete:d.canDelete,deleteHandleTooltipText:this.props.zString("zi_common_Application_Delete_Instruction"),dragHandleTooltipText:this.props.zString("zi_common_Application_Resize_Instruction"),handleVisCorner:d.handleVisCorner,handleVisMiddle:d.handleVisMiddle,hitRadius:this.hitRadius,key:"selected",names:d.names,onAnimateSetFrom:this.animateSetFrom,onCursorChange:this.handleCursorChange,onDelete:this.handleDeleteClick,onDoubleClick:this.handleDoubleClick,onMouseDown:this.handleDesignObjectMouseDown,onSelect:this.props.onSelect,onSetDragMatrix:this.handleSetDragMatrix,onToggleSelectionObjHide:this.toggleSelectionObjHide,onXForm:this.handleXForm,outerSize:v,outline:d.outline,ref:e=>this.selectedObj=e,rotateHandleTooltipText:this.props.zString("zi_common_Application_Rotate_Instruction"),rotation:d.rotation,scaleMode:d.scaleMode,scaleModeMiddle:d.scaleModeMiddle,scaleRange:d.scaleRange,showSelectionInfo:this.props.showSelectionInfo,snapper:this.props.snapper,type:d.type,visible:!b&&null}));const D=this.state.dragState;D&&D.start&&D.end&&S.push(R.a.createElement(Y,{visible:!0,fillOpacity:.25,key:"selection",outerSize:v,outline:g.e(g.i([D.start,D.end]))}));const C=[.5*(v[0]-r),.5*(v[1]-r)],E=P()("DesignCanvas",this.props.disableInteraction?"DesignCanvas--cursor-default":"DesignCanvas--cursor-"+this.state.cursor.toLowerCase());return R.a.createElement(R.a.Fragment,null,R.a.createElement("div",null,_),R.a.createElement(U.b,{allowTouchMove:!0},R.a.createElement(B.a,{onPinchStart:this.handlePinchStart,onPinch:this.handlePinch,onPinchEnd:this.handlePinchEnd,options:{recognizers:{pinch:{enable:!0}}},recognizeWith:{pan:"pinch"}},R.a.createElement(L.Stage,{className:E,height:v[1],onContentMouseDown:this.handleContentMouseDown,width:v[0]},R.a.createElement(L.Layer,null,R.a.createElement(L.Rect,{draggable:!0,height:v[1],key:"background",onClick:this.handleBackgroundClick,onContextMenu:this.handleBackgroundContextMenu,onDragEnd:this.handleDragEnd,onDragMove:this.handleDragMove,onDragStart:this.handleDragStart,onMouseOver:this.handleMouseOverBg,onTap:this.handleBackgroundClick,opacity:0,width:v[0],x:0,y:0})),R.a.createElement(L.Layer,null,this.props.isShowingBoundaries&&this.props.paths&&this.props.paths.visible_mask&&R.a.createElement(L.Path,{data:this.props.paths.visible_mask,fill:"black",listening:!1,opacity:.25}),this.props.isShowingBoundaries&&this.props.paths&&this.props.paths.bleed_mask&&R.a.createElement(L.Path,{data:this.props.paths.bleed_mask,fill:"black",listening:!1,opacity:.55}),!this.props.isShowingBoundaries&&this.props.paths&&this.props.paths.safe_mask&&R.a.createElement(L.Path,{data:this.props.paths.safe_mask,fill:"black",listening:!1,opacity:.55}),this.props.isShowingBoundaries&&this.props.paths&&this.props.paths.bleed&&R.a.createElement(L.Path,{name:"bleed",data:this.props.paths.bleed,fillEnabled:!1,stroke:"red",hitStrokeWidth:10,onMouseOver:this.handleMouseOverGuidelines,onMouseOut:this.handleMouseOutGuidelines}),this.props.paths&&this.props.paths.safe&&R.a.createElement(L.Path,{name:"safe",data:this.props.paths.safe,fillEnabled:!1,stroke:"green",hitStrokeWidth:10,dash:[15,5],onMouseOver:this.handleMouseOverGuidelines,onMouseOut:this.handleMouseOutGuidelines}),this.props.isShowingBoundaries&&this.props.paths&&this.props.paths.visible&&R.a.createElement(L.Path,{name:"visible",data:this.props.paths.visible,fillEnabled:!1,stroke:"blue",hitStrokeWidth:10,onMouseOver:this.handleMouseOverGuidelines,onMouseOut:this.handleMouseOutGuidelines}),this.props.isShowingBoundaries&&this.props.paths&&this.props.paths.fold&&R.a.createElement(L.Path,{name:"fold",data:this.props.paths.fold,fillEnabled:!1,stroke:"grey",hitStrokeWidth:10,dash:[2,2],onMouseOver:this.handleMouseOverGuidelines,onMouseOut:this.handleMouseOutGuidelines}),this.props.isShowingBoundaries&&this.props.paths&&this.props.paths.markup&&R.a.createElement(L.Path,{name:"markup",data:this.props.paths.markup,fillEnabled:!1,stroke:"cyan",hitStrokeWidth:10,onMouseOver:this.handleMouseOverGuidelines,onMouseOut:this.handleMouseOutGuidelines}),this.props.paths&&this.props.paths.grid_lines&&R.a.createElement(R.a.Fragment,null,R.a.createElement(L.Path,{data:this.props.paths.grid_lines,stroke:"#ffffff",strokeWidth:1,listening:!1}),R.a.createElement(L.Path,{data:this.props.paths.grid_lines,stroke:"#000000",strokeWidth:1,dash:[1,1],listening:!1})),R.a.createElement(L.Path,{data:`M 0 0 L ${v[0]} 0 ${v[0]} ${v[1]} 0 ${v[1]} Z\n\t\t\t\t\t\t\t\t\t\tM ${C[0]} ${C[1]} L ${C[0]} ${C[1]+r} ${C[0]+r} ${C[1]+r} ${C[0]+r} ${C[1]} Z}`,fill:"#f2f2f2",listening:!1})),R.a.createElement(L.Layer,null,S),this.state.guidelineTooltip&&R.a.createElement(L.Layer,null,R.a.createElement(X,{key:"guidelineTooltip",pos:this.state.guidelineTooltip,posThreshold:[.5*v[0],.5*v[1]],text:this.state.guidelineTooltipText})),R.a.createElement(L.Layer,{ref:e=>{this.animationLayer=e}},R.a.createElement(Y,{active:this.state.animateInProgress,handleVisCorner:d&&d.handleVisCorner,handleVisMiddle:d&&d.handleVisMiddle,listening:!1,outerSize:v,outline:this.state.animateOutline,scaleMode:d&&d.scaleMode,scaleModeMiddle:d&&d.scaleModeMiddle,scaleRange:d&&d.scaleRange}))))))}calcWatermark(){let e=0,t=0;for(const n in this.renderObjs)this.renderObjs[n]&&(e=this.renderObjs[n].getRequiredMaxdim(),t=Math.max(t,e));const a=t>this.props.wmmindim;a!==this.props.hasWatermarks&&(this.props.onUpdateSettings({hasWatermarks:a}),a&&Object(w.h)(I.a.SawWatermarks()))}reorderPointers(e){return x()(e,e=>e.identifier in this.pointerOrder?this.pointerOrder[e.identifier]:1e3)}}Object(m.a)(ie,"defaultProps",{enableKeys:!0,isShowingBoundaries:!0,maxDim:512,objects:[],zString:()=>{}});const re=(e,t,a,n,i,r,o,s,l)=>{const c=[];if("group"===e.type){Object(v.b)(a,e).forEach(e=>{c.push(re(e,t,a,n,i,r,o,s,l))})}return{canDelete:y.a(e,{isDisneyIframe:Object(D.a)().isDisneyIframe}),cornerRadius:"path"==e.type?i*e.cornerradius/72/Math.max(a.width,a.height):0,children:c,errors:l&&Object(O.c)({designObject:e},l),imageUrl:s&&Object(C.c)(s,{area_texture_layout:"square",areacolor:!1,content_outline:!1,content_padding:"image"!==e.type&&"qrcode"!==e.type?.25:0,layer:e.layer,rvtype:y.i(e)?"pre":"content",timestamp:Object(D.a)().serverStartTimestamp,view_objects:e.name}),locked:e.locked,names:[e.name],object:e,outline:_(n,i,r,e.outline),objectoutline:_(n,i,r,e.objectoutline),rootName:t.name,showalways:e.showalways,type:e.type,version:o&&o[e.name]&&o[e.name].version}},oe=Object(p.a)(k.a,k.k,k.f,(e,t,a)=>a.maxDim,(e,t,a)=>a.outerWidth,(e,t,a)=>a.outerHeight,k.j,(e,t,a)=>a.objectUrl,(e,t,a)=>a.errors,(e,t,a,n,i,r,o,s,l)=>{const c=Object(v.b)(e),u=[i,r],h=c.filter(e=>e.visible).map(t=>re(t,t,e,a,n,u,o,s,l));let p=null,m="multi",f="",b="",C="",E="",w=-1,j=0,I=null;const N=t.filter(e=>e.visible&&!e.locked);if(N){let e=null;if(N.length>=1)if(1===N.length){const t=N[0];if(e=t.outline,j=S.f(t.absmatrix),m=t.type,"path"!==t.type||t.imageid)if("text"===t.type)switch(f="uniform",t.path){case"horz":E="x";break;default:E="none"}else f="uniform",b="uniform";else"lineH"===t.shape&&(C="none",E="x");I=l&&Object(O.c)({designObject:t},l)}else e=g.e(g.i(N.map(e=>e.outline))),f="uniform",b="uniform";if(null!=e){if(N.forEach(e=>{w=Math.max(w,h.findIndex(t=>t.names[0]===e.name))}),"uniform"===f){const t=S.g(S.d(e));10*t[0]<t[1]&&(C="none","x"===E&&(E="none"),""===E&&(E="y")),10*t[1]<t[0]&&(C="none","y"===E&&(E="none"),""===E&&(E="x"))}p={canDelete:d()(N,e=>y.a(e,{isDisneyIframe:Object(D.a)().isDisneyIframe})),errors:I,handleVisCorner:C,handleVisMiddle:E,hasNoGroups:0===N.filter(e=>"group"===e.type).length,locked:N.some(e=>e.locked),names:N.map(e=>e.name).sort(),outline:_(a,n,u,e),rotation:j,scaleMode:f,scaleModeMiddle:b,scaleRange:y.f(N),showalways:N.some(e=>e.showalways),type:m}}}return{inactive:h,selection:p,selectionDeletable:t.filter(e=>!e.locked&&y.a(e,{isDisneyIframe:Object(D.a)().isDisneyIframe})).map(e=>e.name).sort(),selectionZIndex:w+1}}),se=Object(p.b)({contextMenuState:Object(p.a)(k.e,e=>e.settings.contextMenuState),disableInteraction:Object(p.a)((e,t)=>{const a=Object(E.g)(t),n=Object(E.d)(e,a);return Object(E.c)(n)},e=>e),disableKeyboard:Object(p.a)(k.e,e=>e.settings.keyboardCapture),hasWatermarks:Object(p.a)(k.e,e=>e&&e.settings&&e.settings.hasWatermarks),fill:Object(p.a)(k.a,e=>e.fill),layers:Object(p.a)(k.d,k.h,k.i,(e,t,a)=>a.objectUrl,(e,t,a,n)=>t.filter(t=>t.name!==e.activeLayer).map(e=>({imageUrl:n&&Object(C.c)(n,{area_texture_layout:"square",areacolor:!1,layer:e.name,rvtype:"pre",timestamp:Object(D.a)().serverStartTimestamp}),version:a&&a[e.name]&&a[e.name].version}))),objects:oe,paste:Object(p.a)(k.d,e=>!!e&&e.paste),paths:Object(p.a)(k.a,k.f,(e,t,a)=>a.maxDim,(e,t,a)=>a.outerWidth,(e,t,a)=>a.outerHeight,(e,t,a)=>a.renderDesignMode&&"none"!==a.renderDesignMode&&a.showGridlines,(e,t,a,n,i,r)=>{const o=t&&t.paths,s=[n,i];let l=null;return r&&(l=b.b.getSvgPath(Object(v.a)(e,a).map(e=>({command:e.command,data:_(t,a,s,e.data)})))),o&&{bleed:o.bleed&&b.b.getSvgPath(o.bleed.map(e=>({command:e.command,data:_(t,a,s,e.data)}))),bleed_mask:o.bleed_mask&&b.b.getSvgPath(o.bleed_mask.map(e=>({command:e.command,data:_(t,a,s,e.data)}))),fold:o.fold&&b.b.getSvgPath(o.fold.map(e=>({command:e.command,data:_(t,a,s,e.data)}))),grid_lines:l,markup:o.markup&&b.b.getSvgPath(o.markup.map(e=>({command:e.command,data:_(t,a,s,e.data)}))),safe:o.safe&&b.b.getSvgPath(o.safe.map(e=>({command:e.command,data:_(t,a,s,e.data)}))),safe_mask:o.safe_mask&&b.b.getSvgPath(o.safe_mask.map(e=>({command:e.command,data:_(t,a,s,e.data)}))),visible:o.visible&&b.b.getSvgPath(o.visible.map(e=>({command:e.command,data:_(t,a,s,e.data)}))),visible_mask:o.visible_mask&&b.b.getSvgPath(o.visible_mask.map(e=>({command:e.command,data:_(t,a,s,e.data)})))}}),ppi:Object(p.a)(k.a,(e,t,a)=>a.maxDim,(e,t)=>t/Math.max(e.width+e.bleed[0]+e.bleed[2],e.height+e.bleed[1]+e.bleed[3])),serverState:Object(p.a)(k.d,e=>e?e.serverState:"ready"),snapper:Object(p.a)(oe,k.f,(e,t,a)=>a.maxDim,(e,t,a)=>a.outerWidth,(e,t,a)=>a.outerHeight,(e,t,a)=>a.isSnapping,(e,t,a,n,i,r)=>{const o=new f(a,[n,i]);if(r){o.enabled=!0,o.addPoint(_(t,a,[n,i],[0,0]));for(const t of e.inactive.filter(t=>!e.selection||e.selection.names.every(e=>e!==t.names[0])))o.addObject(t.outline);o.beginSnapping()}return o}),vobjtopUrl:Object(p.a)(k.a,(e,t,a)=>a.objectUrl,(e,t)=>e.vobjtop&&t&&Object(C.c)(t,{area_texture_layout:"square",areacolor:!1,content_outline:!1,rvtype:"pre",timestamp:Object(D.a)().serverStartTimestamp,view_objects:"_"})),wmmindim:Object(p.a)(k.d,e=>e&&e.wmmindim)}),le=Object(h.b)(()=>(e,t)=>se(e,t.designStateKey,t),(e,t)=>({onCopy:a=>{e(N.Jb(t.designStateKey,a))},onCut:a=>{e(N.Kb(t.designStateKey,a))},onDelete:a=>{e(N.Lb(t.designStateKey,a))},onGroup:()=>{e(N.Ub(t.designStateKey))},onLayout:(a,n,i,r)=>{e(N.Wb(t.designStateKey,a,n,i,r))},onMoveBackward:()=>{e(N.cc(t.designStateKey,"down"))},onMoveForward:()=>{e(N.cc(t.designStateKey,"up"))},onMoveToBack:()=>{e(N.bc(t.designStateKey))},onMoveToFront:()=>{e(N.dc(t.designStateKey))},onPaste:()=>{e(N.Zb(t.designStateKey))},onRedo:()=>{e(N.ac(t.designStateKey))},onSelect:a=>{e(N.Kc(t.designStateKey,{metaSelection:void 0})),e(N.Fc(t.designStateKey,{selection:a}))},onSelectAll:()=>{e(N.Kc(t.designStateKey,{metaSelection:void 0})),e(N.gc(t.designStateKey))},onUndo:()=>{e(N.Cc(t.designStateKey))},onUngroup:()=>{e(N.Dc(t.designStateKey))},onUpdateSettings:a=>{e(N.Jc(t.designStateKey,a))},onXForm:(a,i,r=!1,o=!1)=>{e(N.Nc(t.designStateKey,Object(n.a)({space:"screen",target:"default",transientDesign:o},i),a,r))}}),(e,t,a)=>{let i=!1;return void 0===a.isMobile&&(i=Object(D.a)().isMobileDevice),Object(n.a)(Object(n.a)(Object(n.a)(Object(n.a)({},a),e),t),{},{isMobile:i,onSelect:(n,i)=>{let o=n;const{inactive:l,selection:u}=e.objects;if(i&&n.length>0&&u&&(o=!u.names.includes(n[0])||u.names.length<2?c()(u.names,o):s()(u.names,...o)),o.sort(),u&&r()(o,u.names)||t.onSelect(o),n.length>1)a.isZ4?Object(w.h)(I.a.SelectedViaCanvas("multi")):Object(w.h)(j.a.CanvasSelect("multi"));else{const e=l.find(e=>e.names[0]===n[0]);e&&(a.isZ4?Object(w.h)(I.a.SelectedViaCanvas(e.type)):Object(w.h)(j.a.CanvasSelect(e.type)))}}})})(ie);t.a=le},2782:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return y}));var n=a(3),i=a(182),r=a.n(i),o=a(9),s=a.n(o),l=a(0),c=a.n(l),u=a(29),d=a(1732),h=a(1734),p=(a(2639),a(2501)),m=a(5),g=a(8),f=a(14);var b,v=m.b((function(e){return{zString:Object(g.c)(e),zUrl:Object(f.d)(e)}}))(p.b);!function(e){e[e.BackgroundTab=0]="BackgroundTab",e[e.Default=1]="Default",e[e.AreaFill=2]="AreaFill",e[e.DefaultZ4=3]="DefaultZ4"}(b||(b={}));class y extends c.a.Component{constructor(...e){super(...e),Object(n.a)(this,"state",{advancedInputShown:this.props.defaultAdvancedInputShown}),Object(n.a)(this,"handleColorSwatchInputChange",(e,t)=>{this.props.onChange(e,!1,t)}),Object(n.a)(this,"handleAdvancedInputChange",e=>{this.props.onChange(e,!0);const t=8===e.length?e.substr(2,6):e;this.props.addRecentColor({hexCode:t},this.props.numColumns*this.props.numRecentSwatchRows)}),Object(n.a)(this,"toggleAdvancedInputShown",()=>{this.setState({advancedInputShown:!this.state.advancedInputShown})}),Object(n.a)(this,"renderDefaultMode",()=>{const e=s()("ColorPicker",this.props.className||{}),t=this.props.value,a=8===t.length?t.substr(2,6):t,n="00ffffff"===t?t:a;return c.a.createElement("div",{className:e},!this.state.advancedInputShown&&c.a.createElement(v,{allowTransparent:this.props.allowTransparent,addRecentColor:this.props.addRecentColor,leftAlignSwatches:this.props.leftAlignSwatches,numColumns:this.props.numColumns,numRecentSwatchRows:this.props.numRecentSwatchRows,numRows:this.props.numRows,onChange:this.handleColorSwatchInputChange,recentSwatches:this.props.recentSwatches,showAdvancedOption:this.props.showAdvancedOption,showColorLabel:this.props.showColorLabel,showMoreSwatchesOption:this.props.showMoreSwatchesOption,showResetLink:this.props.showResetLink,swatchMargin:this.props.swatchMargin,swatches:this.props.swatches,toggleAdvancedInputShown:this.toggleAdvancedInputShown,value:n,valueWithAlpha:t}),this.state.advancedInputShown&&c.a.createElement(h.a,{className:this.props.advancedInputClassName,debounceDuration:this.props.debounceDuration,onChange:this.handleAdvancedInputChange,value:t}))}),Object(n.a)(this,"renderAreaFillMode",()=>{const e=s()("ColorPicker",this.props.className||{}),t=this.props.zString;return c.a.createElement("div",{className:e},null!=this.props.swatches&&c.a.createElement(v,{addRecentColor:this.props.addRecentColor,showAdvancedOption:this.props.showAdvancedOption,isArea:!0,leftAlignSwatches:this.props.leftAlignSwatches,numColumns:this.props.numColumns,numRecentSwatchRows:this.props.numRecentSwatchRows,numRows:this.props.numRows,onChange:this.handleColorSwatchInputChange,recentSwatches:this.props.recentSwatches,showMoreSwatchesOption:this.state.advancedInputShown?p.a.ShowAll:p.a.HideOverflow,showResetLink:this.props.showResetLink,swatchMargin:this.props.swatchMargin,swatches:this.props.swatches,value:this.props.value}),this.props.showAdvancedOption&&this.state.advancedInputShown&&c.a.createElement("div",{className:"ColorPicker-hr"}),this.props.showAdvancedOption&&this.state.advancedInputShown&&c.a.createElement(h.a,{className:this.props.advancedInputClassName,debounceDuration:this.props.debounceDuration,onChange:this.handleAdvancedInputChange,value:this.props.value}),this.props.showColorLabel&&!this.state.advancedInputShown&&c.a.createElement("div",{className:"ColorPicker-bottomRow"},this.renderColorLabel()),this.props.showAdvancedOption&&c.a.createElement("div",{className:"ColorPicker-showMoreLink"},c.a.createElement(u.a,{onClick:this.toggleAdvancedInputShown},this.state.advancedInputShown?t("zi_common_Application_ShowLess"):t("zi_create_DesignUi_ShowColorPicker"))))}),Object(n.a)(this,"renderDefaultZ4Mode",()=>{const e=s()("ColorPicker",this.props.className||{});return c.a.createElement("div",{className:e},null!=this.props.swatches&&c.a.createElement(v,{addRecentColor:this.props.addRecentColor,showAdvancedOption:this.props.showAdvancedOption,isArea:!0,leftAlignSwatches:this.props.leftAlignSwatches,numColumns:this.props.numColumns,numRecentSwatchRows:this.props.numRecentSwatchRows,numRows:this.props.numRows,onChange:this.handleColorSwatchInputChange,recentSwatches:this.props.recentSwatches,showMoreSwatchesOption:p.a.ShowAll,showResetLink:this.props.showResetLink,swatchMargin:this.props.swatchMargin,swatches:this.props.swatches,value:this.props.value}),this.props.showColorLabel&&c.a.createElement("div",{className:"ColorPicker-bottomRow"},this.renderColorLabel()),this.props.showAdvancedOption&&c.a.createElement(h.a,{className:this.props.advancedInputClassName,debounceDuration:this.props.debounceDuration,eyeDropperClipEleRect:this.props.eyeDropperClipEleRect,eyeDropperDesignStateKey:this.props.eyeDropperDesignStateKey,eyeDropperOnActiveChange:this.props.eyeDropperOnActiveChange,eyeDropperImgSrc:this.props.eyeDropperImgSrc,eyeDropperPositionRect:this.props.eyeDropperPositionRect,mode:d.a.InputOnlyToggleSliders,onChange:this.handleAdvancedInputChange,value:this.props.value}))}),Object(n.a)(this,"renderBackgroundTabMode",()=>{const e=s()("ColorPicker",this.props.className||{}),t=this.props.showColorLabel&&c.a.createElement("div",{className:"ColorPicker-bottomRow"},this.renderColorLabel()),a=this.props.showAdvancedOption&&c.a.createElement(h.a,{className:this.props.advancedInputClassName,debounceDuration:this.props.debounceDuration,colorLabel:t,eyeDropperClipEleRect:this.props.eyeDropperClipEleRect,eyeDropperDesignStateKey:this.props.eyeDropperDesignStateKey,eyeDropperOnActiveChange:this.props.eyeDropperOnActiveChange,eyeDropperImgSrc:this.props.eyeDropperImgSrc,eyeDropperPositionRect:this.props.eyeDropperPositionRect,mode:d.a.BackgroundTab,onChange:this.handleAdvancedInputChange,value:this.props.value});return c.a.createElement("div",{className:e},null!=this.props.swatches&&c.a.createElement(v,{addRecentColor:this.props.addRecentColor,bgTabFlyoutContent:a,isArea:!0,isDarkMode:!0,leftAlignSwatches:this.props.leftAlignSwatches,numColumns:this.props.numColumns,numRecentSwatchRows:this.props.numRecentSwatchRows,numRows:this.props.numRows,onChange:this.handleColorSwatchInputChange,recentSwatches:this.props.recentSwatches,showAdvInSwatchRows:this.props.showAdvInSwatchRows,showAdvancedOption:this.props.showAdvancedOption,showMoreSwatchesOption:p.a.ShowAll,showResetLink:this.props.showResetLink,swatchMargin:this.props.swatchMargin,swatches:this.props.swatches,value:this.props.value}))}),Object(n.a)(this,"renderColorLabel",()=>{const{value:e,zString:t}=this.props;let a=t("zi_common_Application_none");if(e){const t=this.getColorName(e);a="#"+this.props.value.toUpperCase(),t&&(a+=" | "+t)}return c.a.createElement("div",{className:"ColorPicker-colorLabel"},c.a.createElement("span",{className:"ColorPicker-colorLabelTitle"},t("zi_create_DesignInspector_SelectedColor"))," ",a)})}getColorName(e){const t=r()(this.props.swatches,t=>t.hexCode===e);return t?t.displayName:""}render(){switch(this.props.mode){case b.AreaFill:return this.renderAreaFillMode();case b.DefaultZ4:return this.renderDefaultZ4Mode();case b.BackgroundTab:return this.renderBackgroundTabMode();default:return this.renderDefaultMode()}}}Object(n.a)(y,"defaultProps",{defaultAdvancedInputShown:!1,mode:b.Default,numColumns:16,numRecentSwatchRows:1,onChange:()=>{},showAdvancedOption:!0,showAdvInSwatchRows:!0,showRecentSwatchesAbove:!1,showColorLabel:!0,value:"ffffff"})},2783:function(e,t,a){"use strict";a.d(t,"a",(function(){return S}));var n=a(2),i=a(15),r=a(0),o=a.n(r),s=a(10),l=a(14),c=a(13),u=a(1333),d=a(2480),h=a(26),p=a.n(h),m=a(5),g=a(28),f=a(1411),b=a(323);a(2644);const v=Object(s.a)("Z4DSSearchItem"),y=o.a.memo(o.a.forwardRef((e,t)=>{const{preventRightClick:a=!0,product:n}=e,i=Object(g.c)(),s=Object(m.e)(e=>e.User.isSeller),u=Object(r.useCallback)(()=>{e.onClick(n)},[e.onClick,n]),d=Object(r.useCallback)(e.onShowDetails?()=>{e.onShowDetails(n)}:void 0,[e.onShowDetails,n]);let h=e.imageUrl;const y={};if("dark"===e.theme)if(y[l.a.RlvAreaDefaultFill]=b.n,n.productType.startsWith("digital_"))y[l.a.RlvBgColor]=b.n;else if("tool_element"===n.productType&&n.attributes){const e=c.a.fromString(n.attributes);"textpairing"!==e.style&&"objectshapeline"!==e.style||(y.l__monoinvfrom="3F3F3F"),"bgimage"!==e.style&&"bgpattern"!==e.style&&(y.l__bg=b.n)}p()(y)||(h=Object(c.c)(h,y));const _=Object(r.useMemo)(()=>i("String","ZUI","StoresAndMemberIdsToExcludeFromCredits","").split(",").map(e=>e.trim()).includes(n.storeId),[n.storeId]);return o.a.createElement(f.a,{className:v("&",e.className),height:e.height,imageAlt:e.product.titleSeo,imageSrc:h,infoText:e.showInfoText?n.titleSeo:void 0,onClick:u,onToggleDetails:d,preventImageRightClick:a,ref:t,showRoyaltyFree:s&&_,style:e.style,width:e.width})}));a(2643);const _=Object(s.a)("Z4DSSearchGrid"),S=o.a.memo(e=>{let{theme:t="dark"}=e,a=Object(i.a)(e,["theme"]);const r=[],s=[];let h;return a.products.forEach((e,i)=>{let d;const h="function"==typeof a.realviewParams?a.realviewParams(e):a.realviewParams,p=Object(n.a)({},h);let m,g=1;if("justified"===a.gridLayout){var f,b;if(e.attributes){const t=c.a.fromString(e.attributes).size;if(t){const e=Object(c.n)(t);if(2===e.length){g=parseFloat(e[0])/parseFloat(e[1])}}}const t=Object(u.b)({aspectRatio:g,realviewUrl:e.imageUrl,targetRowHeight:a.targetRowHeight});m=t.imageUrl,null!==(b=p[f=l.a.RlvViewType])&&void 0!==b||(p[f]="content"),r.push({aspectRatio:t.aspectRatio})}else{var v,S;m=e.imageUrl,null!==(S=p[v=l.a.RlvSquareIt])&&void 0!==S||(p[v]="fit");const t="2col"===a.gridLayout?2:3;p[l.a.RlvMaxDim]="2col"===a.gridLayout?150:97,d={className:_("&-squareGridItem"),width:(318-10*(t-1))/t}}if(a.padThumbnails){const e=.1,t=8;let a,n;g<1?(a=e.toString(),n=Object(c.s)(e*g,t)):(n=e.toString(),a=Object(c.s)(e/g,t)),p[l.a.RlvContentPadding]=`[${n},${a}]`}m=Object(c.c)(m,p),s.push(o.a.createElement(y,Object(n.a)({key:i,imageUrl:m,onClick:a.onItemClick,onShowDetails:a.onShowDetails,product:e,showInfoText:a.showInfoText,theme:t},d)))}),h="justified"===a.gridLayout?o.a.createElement(u.a,{className:_("&-justifiedGrid"),containerPadding:0,items:r,maxHeight:a.maxHeight,rowLimit:a.rowLimit,scrollable:!1,targetRowHeight:a.targetRowHeight,targetRowHeightTolerance:a.targetRowHeightTolerance},s):o.a.createElement("div",{className:_("&-squareGrid")},s),o.a.createElement("div",{className:_("&","&--"+a.gridLayout)},(a.headerTitle||a.onHeaderClick)&&o.a.createElement(d.a,{departmentId:a.departmentId,onClick:a.onHeaderClick,title:a.headerTitle}),h)})},2800:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return r}));var n=a(0);function i(){return!!navigator.mediaDevices}function r(){const[e,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{async function e(){if(await async function(){if((await navigator.mediaDevices.enumerateDevices()).every(e=>!(e.deviceId&&e.label)))try{(await navigator.mediaDevices.getUserMedia({audio:!0,video:!0})).getTracks().forEach(e=>e.stop())}catch(e){return!1}return!0}()){const e=await navigator.mediaDevices.enumerateDevices();t(e)}}return navigator.mediaDevices.addEventListener("devicechange",e),e(),()=>{navigator.mediaDevices.removeEventListener("devicechange",e)}},[]),e}},2801:function(e,t,a){"use strict";a.d(t,"a",(function(){return _}));var n=a(9),i=a.n(n),r=a(0),o=a.n(r),s=a(18),l=a(16),c=a(137),u=a(6),d=a(44),h=a(8),p=a(14),m=a(93),g=a(87),f=a(1243),b=a(709),v=a(3053),y=a.n(v);const _=e=>{const t=Object(p.f)(),a=Object(h.e)(),{badge:n,className:v,darkBadge:_,designerId:S,designerName:D,designerUrl:C,location:E,productId:O,profileImg:w}=e,j=Object(r.useRef)(),[I,N]=Object(r.useState)(!1),[k,T]=Object(r.useState)(0);Object(r.useLayoutEffect)(()=>{if(I&&j.current){const e=j.current.getBoundingClientRect();T(e.left+e.width/2)}},[I]);const x=Object(r.useCallback)(()=>{N(!0)},[]),z=Object(r.useCallback)(()=>{N(!1)},[]);return o.a.createElement("div",{className:i()(y.a.root,v)},o.a.createElement("div",{className:y.a.artistInfo},o.a.createElement(l.a,{href:C,className:y.a.noShrink,target:"_blank"},w?o.a.createElement("img",{className:y.a.designerImage,src:w,alt:D||a("zi_common_Designer")}):o.a.createElement(u.a,{iconName:d.a.Account,className:y.a.designerIcon})),o.a.createElement("div",null,o.a.createElement(b.a,{badge:n,badgeShadeType:_?b.b.DARK:b.b.LIGHT,className:y.a.badge,zUrl:t}),o.a.createElement("div",{className:y.a.name},D||a("zi_common_Designer")),E&&o.a.createElement("div",{className:y.a.location},o.a.createElement(u.a,{className:y.a.locationIcon,iconName:d.a.Location}),E))),o.a.createElement("div",{className:y.a.messageButton,ref:j},o.a.createElement(m.a,{color:"blue",onClick:x,size:"mini"},a("zi_myzazzle_chat_message"))),I&&o.a.createElement(c.a,{includeCaret:!0,caretPosition:"top",caretViewportHorzOffset:k,className:y.a.messagePalette,contentsClassName:y.a.messagePaletteContents,onRequestClose:z},o.a.createElement(s.a,null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(g.a,{isShown:!0,shieldColor:"transparent",hasOwnContainer:!0,size:"small"})},o.a.createElement(f.MessageUserContent,{name:D,memberOwnerId:S,productId:O,profileImageUrl:w,profileType:"Member"})))))}},2802:function(e,t,a){},285:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return d})),a.d(t,"a",(function(){return m}));var n,i=a(2),r=a(72),o=a.n(r),s=a(212),l=a(13);!function(e){e.Instant="instant",e.EaseOutSine="easeOutSine",e.EaseInOutSine="easeInOutSine",e.EaseInOutQuint="easeInOutQuint"}(n||(n={}));const c=Object(l.h)({speed:2e3,easing:"easeOutSine",scrollToTop:!0,offset:0});function u(e,t){const a=Object(i.a)(Object(i.a)({},c),t),n=function(e){const t=[];for(;null!=e&&"fixed"!==getComputedStyle(e).getPropertyValue("position");){const a=e.parentElement;if(null==a)break;a.scrollHeight>a.clientHeight&&t.push(a),e=a}return t}(e);if(n.length>0){const t=n.pop();let i=e;n.forEach(e=>{d(e,i,a),i=e}),d(t,e,a)}}function d(e,t,a){const n=Object(i.a)(Object(i.a)({},c),a),r=t.getBoundingClientRect(),o=void 0!==window.pageYOffset?window.pageYOffset:Object(s.a)().scrollTop;if(null==e.parentElement)h(o+n.offset+r.top,n.speed,n.easing);else{let a;const i=e.getBoundingClientRect(),o=e.clientTop,s=i.top+o,l=e.offsetHeight-e.clientHeight-o,c=i.bottom-l;if(n.scrollToTop||t.offsetHeight>e.clientHeight)a=r.top-s;else{const e=r.top<s,t=r.bottom>c;e?a=r.top-s:t&&(a=r.bottom-c)}null!=a&&h(e.scrollTop+a,n.speed,n.easing,e)}}function h(e=0,t=2e3,a="easeOutSine",n){const i=n?n.scrollTop:window.scrollY||window.pageYOffset;if("instant"===a)return void window.scrollTo(0,e);let r=0;const o=Math.max(.1,Math.min(Math.abs(i-e)/t,.8)),s=(Math.PI,{easeOutSine:e=>Math.sin(e*(Math.PI/2)),easeInOutSine:e=>-.5*(Math.cos(Math.PI*e)-1),easeInOutQuint:e=>(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)});!function t(){r+=1/60;const l=r/o,c=s[a](l);l<1?(window.requestAnimationFrame(t),n?n.scrollTop=i+(e-i)*c:window.scrollTo(0,i+(e-i)*c)):n?n.scrollTop=e:window.scrollTo(0,e)}()}const p={url:"",name:"popupWindow",width:850,height:600,scrollbars:!0,resizable:!0};function m(e={}){const t=Object(i.a)(Object(i.a)({},p),e),a=window.screen;o()(t.left)&&(t.left=Math.max(a.width-t.width-10>>1,0)),o()(t.top)&&(t.top=Math.max(a.height-t.height-40>>1,0));const n=e=>{const a=t[e];return`${e}=${"boolean"==typeof a?+a:a}`};var r=window.open(t.url,t.name,[n("width"),n("height"),n("top"),n("left"),n("toolbar"),n("location"),n("directories"),n("status"),n("menubar"),n("scrollbars"),n("resizable")].join(","));return r&&r.focus(),r}},303:function(e,t,a){var n=a(196),i=a(128);e.exports=function(e,t,a){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(a)&&(r="leading"in a?!!a.leading:r,o="trailing"in a?!!a.trailing:o),n(e,t,{leading:r,maxWait:t,trailing:o})}},3034:function(e,t,a){e.exports={root:"Z4DesignSpace_root",Zazzicon:"Z4DesignSpace_Zazzicon",main:"Z4DesignSpace_main",editor:"Z4DesignSpace_editor",stage:"Z4DesignSpace_stage",stageCenter:"Z4DesignSpace_stageCenter",watcherMode:"Z4DesignSpace_watcherMode",driverChatContainer:"Z4DesignSpace_driverChatContainer",driverChatContainer__maximized:"Z4DesignSpace_driverChatContainer__maximized",liveAd:"Z4DesignSpace_liveAd",root__isInFullscreenPreview:"Z4DesignSpace_root__isInFullscreenPreview",root__isTablet:"Z4DesignSpace_root__isTablet"}},3035:function(e,t,a){"use strict";a.r(t),a.d(t,"Z4DSSearchProductDeletedDialog",(function(){return s}));var n=a(0),i=a.n(n),r=a(1311),o=a(8);const s=e=>{const t=Object(o.e)();return i.a.createElement(r.default,{onOk:e.onOk,onRequestClose:e.onOk,showCancel:!1,title:t("zi_create_Z3_DesignTool_RLVErrorTitle")},t("zi_create_Z4_DesignSpace_SourceProduct_Error"))};t.default=s},3036:function(e,t,a){e.exports={root:"Z4DSMenuBar_root",root__isDisney:"Z4DSMenuBar_root__isDisney",titleMenuStatus:"Z4DSMenuBar_titleMenuStatus",menuStatus:"Z4DSMenuBar_menuStatus",designTipsBadge:"Z4DSMenuBar_designTipsBadge",designTipsOption:"Z4DSMenuBar_designTipsOption",status:"Z4DSMenuBar_status",disneyStatus:"Z4DSMenuBar_disneyStatus",saveStatus:"Z4DSMenuBar_saveStatus",logo:"Z4DSMenuBar_logo",logoLink:"Z4DSMenuBar_logoLink",loginLink:"Z4DSMenuBar_loginLink",loginText:"Z4DSMenuBar_loginText",priceDisplay:"Z4DSMenuBar_priceDisplay",price:"Z4DSMenuBar_price",perUnitLabel:"Z4DSMenuBar_perUnitLabel",buy:"Z4DSMenuBar_buy",rightGroup__share:"Z4DSMenuBar_rightGroup__share",shareLink:"Z4DSMenuBar_shareLink",sharePalette:"Z4DSMenuBar_sharePalette",invite:"Z4DSMenuBar_invite",download:"Z4DSMenuBar_download",rightGroup:"Z4DSMenuBar_rightGroup",cancel:"Z4DSMenuBar_cancel"}},3037:function(e,t,a){},3038:function(e,t,a){e.exports={root:"Z4DSVideoPalette_root",root__connected:"Z4DSVideoPalette_root__connected",connected:"Z4DSVideoPalette_connected",connected_heading:"Z4DSVideoPalette_connected_heading",connected_endCall:"Z4DSVideoPalette_connected_endCall",connected_settingsIcon:"Z4DSVideoPalette_connected_settingsIcon"}},3039:function(e,t,a){e.exports={root:"Z4DSInviteButton_root",palette:"Z4DSInviteButton_palette",inviteCta:"Z4DSInviteButton_inviteCta",textToClipboard:"Z4DSInviteButton_textToClipboard",or:"Z4DSInviteButton_or",shareOn:"Z4DSInviteButton_shareOn",socialLinks:"Z4DSInviteButton_socialLinks",socialIcon:"Z4DSInviteButton_socialIcon",startPublicLinkWrapper:"Z4DSInviteButton_startPublicLinkWrapper"}},3040:function(e,t,a){e.exports={root:"Z4DSDownloadButton_root",progress:"Z4DSDownloadButton_progress",loadingIcon:"Z4DSDownloadButton_loadingIcon",progressBar:"Z4DSDownloadButton_progressBar",copy:"Z4DSDownloadButton_copy"}},3041:function(e,t,a){e.exports={root:"Z4DSEndSessionButton_root",button:"Z4DSEndSessionButton_button",button_time:"Z4DSEndSessionButton_button_time",palette:"Z4DSEndSessionButton_palette",palette_buttons:"Z4DSEndSessionButton_palette_buttons"}},3042:function(e,t,a){},3043:function(e,t,a){},3044:function(e,t,a){},3045:function(e,t,a){e.exports={root:"Z4DSWatcherMode_root",statusBar:"Z4DSWatcherMode_statusBar",statusPill:"Z4DSWatcherMode_statusPill",statusPill__live:"Z4DSWatcherMode_statusPill__live",takeControl:"Z4DSWatcherMode_takeControl",stage:"Z4DSWatcherMode_stage",viewSelector:"Z4DSWatcherMode_viewSelector",productView:"Z4DSWatcherMode_productView",chatContainer:"Z4DSWatcherMode_chatContainer"}},3046:function(e,t,a){e.exports={root:"CollabChatRoom_root"}},3047:function(e,t,a){},3048:function(e,t,a){e.exports={root:"Z4DSContentPanelAttributes_root",title:"Z4DSContentPanelAttributes_title"}},3049:function(e,t,a){},3050:function(e,t,a){},3051:function(e,t,a){},3052:function(e,t,a){},3053:function(e,t,a){e.exports={root:"Z4DSDesignerCard_root",artistInfo:"Z4DSDesignerCard_artistInfo",noShrink:"Z4DSDesignerCard_noShrink",designerImage:"Z4DSDesignerCard_designerImage",designerIcon:"Z4DSDesignerCard_designerIcon",name:"Z4DSDesignerCard_name",location:"Z4DSDesignerCard_location",locationIcon:"Z4DSDesignerCard_locationIcon",badge:"Z4DSDesignerCard_badge",messageButton:"Z4DSDesignerCard_messageButton",messagePalette:"Z4DSDesignerCard_messagePalette",messagePaletteContents:"Z4DSDesignerCard_messagePaletteContents"}},3054:function(e,t,a){},3055:function(e,t,a){},3056:function(e,t,a){},3057:function(e,t,a){},3058:function(e,t,a){},3059:function(e,t,a){},3060:function(e,t,a){},3061:function(e,t,a){e.exports={guidelines:"Z4Guidelines_guidelines",entry:"Z4Guidelines_entry",entryTitle:"Z4Guidelines_entryTitle",linePreview:"Z4Guidelines_linePreview",guideFiles:"Z4Guidelines_guideFiles",examplesTitle:"Z4Guidelines_examplesTitle",example_title:"Z4Guidelines_example_title",example_images:"Z4Guidelines_example_images",example_cell:"Z4Guidelines_example_cell",helpLink:"Z4Guidelines_helpLink"}},3062:function(e,t,a){},3063:function(e,t,a){},3064:function(e,t,a){var n=a(436),i=a(459),r=a(394),o=a(199),s=a(532),l=a(3065),c=a(874),u=a(389),d=a(713),h=a(497),p=n?n.iterator:void 0;e.exports=function(e){if(!e)return[];if(o(e))return s(e)?d(e):i(e);if(p&&e[p])return l(e[p]());var t=r(e);return("[object Map]"==t?c:"[object Set]"==t?u:h)(e)}},3065:function(e,t){e.exports=function(e){for(var t,a=[];!(t=e.next()).done;)a.push(t.value);return a}},3066:function(e,t,a){},3067:function(e,t,a){},3068:function(e,t,a){},3069:function(e,t,a){},3070:function(e,t,a){},3071:function(e,t,a){},3072:function(e,t,a){},3073:function(e,t,a){},3074:function(e,t,a){},3075:function(e,t,a){e.exports={grid:"Z4DSContentPanelSharedAssets_grid",item:"Z4DSContentPanelSharedAssets_item",mbItem:"Z4DSContentPanelSharedAssets_mbItem",download:"Z4DSContentPanelSharedAssets_download"}},3076:function(e,t,a){e.exports={icon:"Z4DSContentPanelText_icon"}},3077:function(e,t,a){},3078:function(e,t,a){},3079:function(e,t,a){},3080:function(e,t,a){},3081:function(e,t,a){},3082:function(e,t,a){},3083:function(e,t,a){},3084:function(e,t,a){},3085:function(e,t,a){},3086:function(e,t,a){},3087:function(e,t,a){},3088:function(e,t,a){e.exports={root:"Z4DSContextMenu_root",palette:"Z4DSContextMenu_palette",listBody:"Z4DSContextMenu_listBody",option:"Z4DSContextMenu_option",icon:"Z4DSContextMenu_icon",option__mobile:"Z4DSContextMenu_option__mobile",label:"Z4DSContextMenu_label",shortcut:"Z4DSContextMenu_shortcut",separator:"Z4DSContextMenu_separator"}},3089:function(e,t,a){},309:function(e,t,a){"use strict";var n=a(58),i=a.n(n),r=a(0),o=a.n(r),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u="undefined"!=typeof window?a(152):void 0,d={children:!0,direction:!0,options:!0,recognizeWith:!0,vertical:!0},h={action:"tap press",onDoubleTap:"doubletap",onPan:"pan",onPanCancel:"pancancel",onPanEnd:"panend",onPanStart:"panstart",onPinch:"pinch",onPinchCancel:"pinchcancel",onPinchEnd:"pinchend",onPinchIn:"pinchin",onPinchOut:"pinchout",onPinchStart:"pinchstart",onPress:"press",onPressUp:"pressup",onRotate:"rotate",onRotateCancel:"rotatecancel",onRotateEnd:"rotateend",onRotateMove:"rotatemove",onRotateStart:"rotatestart",onSwipe:"swipe",onSwipeRight:"swiperight",onSwipeLeft:"swipeleft",onSwipeUp:"swipeup",onSwipeDown:"swipedown",onTap:"tap"};function p(e,t){t.hasOwnProperty("vertical")&&console.warn("vertical is deprecated, please use `direction` instead");var a=t.direction;if(a||t.hasOwnProperty("vertical")){var n=a||(t.vertical?"DIRECTION_ALL":"DIRECTION_HORIZONTAL");e.get("pan").set({direction:u[n]}),e.get("swipe").set({direction:u[n]})}t.options&&Object.keys(t.options).forEach((function(a){if("recognizers"===a)Object.keys(t.options.recognizers).forEach((function(a){var n=e.get(a);n.set(t.options.recognizers[a]),t.options.recognizers[a].requireFailure&&n.requireFailure(t.options.recognizers[a].requireFailure)}),this);else{var n={};n[a]=t.options[a],e.set(n)}}),this),t.recognizeWith&&Object.keys(t.recognizeWith).forEach((function(a){e.get(a).recognizeWith(t.recognizeWith[a])}),this),Object.keys(t).forEach((function(a){var n=h[a];n&&(e.off(n),e.on(n,t[a]))}))}Object.keys(h).forEach((function(e){d[e]=!0}));var m=function(e){function t(){return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){this.hammer=new u(this.domElement),p(this.hammer,this.props)}},{key:"componentDidUpdate",value:function(){this.hammer&&p(this.hammer,this.props)}},{key:"componentWillUnmount",value:function(){this.hammer&&(this.hammer.stop(),this.hammer.destroy()),this.hammer=null}},{key:"render",value:function(){var e={};Object.keys(this.props).forEach((function(t){d[t]||(e[t]=this.props[t])}),this);var t=this;return e.ref=function(e){t.props.ref&&t.props.ref(e),t.domElement=e},o.a.cloneElement(o.a.Children.only(this.props.children),e)}}]),t}(o.a.Component);m.displayName="Hammer",m.propTypes={className:i.a.string},t.a=m},3090:function(e,t,a){},3091:function(e,t,a){},3092:function(e,t,a){e.exports={root:"Z4DSFontThumbnail_root",root__selected:"Z4DSFontThumbnail_root__selected",favoriteButton:"Z4DSFontThumbnail_favoriteButton",fontButton:"Z4DSFontThumbnail_fontButton",root__favorite:"Z4DSFontThumbnail_root__favorite",star:"Z4DSFontThumbnail_star"}},3093:function(e,t,a){},3094:function(e,t,a){},3095:function(e,t,a){},3096:function(e,t,a){e.exports={root:"Z4SliderInput_root",root__disabled:"Z4SliderInput_root__disabled",numberInput:"Z4SliderInput_numberInput",range:"Z4SliderInput_range"}},3097:function(e,t,a){},3098:function(e,t){e.exports=function(e,t){return null==e||e!=e?t:e}},3099:function(e,t,a){},3100:function(e,t,a){},3101:function(e,t,a){},3102:function(e,t,a){},3103:function(e,t,a){},3104:function(e,t,a){},3105:function(e,t,a){},3106:function(e,t,a){},3107:function(e,t,a){},3108:function(e,t,a){},3109:function(e,t,a){e.exports={root:"Z4DSCollabManagementDialog_root",textToClipboard:"Z4DSCollabManagementDialog_textToClipboard",managePeople:"Z4DSCollabManagementDialog_managePeople",collaborators:"Z4DSCollabManagementDialog_collaborators",collaboratorsBox:"Z4DSCollabManagementDialog_collaboratorsBox",invite:"Z4DSCollabManagementDialog_invite",inviteForm:"Z4DSCollabManagementDialog_inviteForm",members:"Z4DSCollabManagementDialog_members",member:"Z4DSCollabManagementDialog_member",member_name:"Z4DSCollabManagementDialog_member_name",member_remove:"Z4DSCollabManagementDialog_member_remove",removeIcon:"Z4DSCollabManagementDialog_removeIcon",noMembers:"Z4DSCollabManagementDialog_noMembers",noMembers_line1:"Z4DSCollabManagementDialog_noMembers_line1",noMembers_line2:"Z4DSCollabManagementDialog_noMembers_line2",noMembers_email:"Z4DSCollabManagementDialog_noMembers_email",hr:"Z4DSCollabManagementDialog_hr",permissionOption:"Z4DSCollabManagementDialog_permissionOption",permissionOptionDisplay:"Z4DSCollabManagementDialog_permissionOptionDisplay"}},3110:function(e,t,a){},3111:function(e,t,a){},3112:function(e,t,a){e.exports={dialog_body:"Z4DSTextInput_dialog_body",title:"Z4DSTextInput_title",textarea:"Z4DSTextInput_textarea",textarea_textarea:"Z4DSTextInput_textarea_textarea",errorMessage:"Z4DSTextInput_errorMessage"}},3113:function(e,t,a){e.exports={card:"Z4DSLiveJobDialog_card"}},3114:function(e,t,a){e.exports={content:"Z4DSSessionSummaryDialog_content",title:"Z4DSSessionSummaryDialog_title",designerImage:"Z4DSSessionSummaryDialog_designerImage",designerName:"Z4DSSessionSummaryDialog_designerName",locationIcon:"Z4DSSessionSummaryDialog_locationIcon",copy:"Z4DSSessionSummaryDialog_copy",buttons:"Z4DSSessionSummaryDialog_buttons",button:"Z4DSSessionSummaryDialog_button",a2c:"Z4DSSessionSummaryDialog_a2c"}},322:function(e,t,a){var n=a(419),i=a(185),r=a(238),o=Math.ceil,s=Math.max;e.exports=function(e,t,a){t=(a?i(e,t,a):void 0===t)?1:s(r(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var c=0,u=0,d=Array(o(l/t));c<l;)d[u++]=n(e,c,c+=t);return d}},375:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(0);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var r=new Map,o=new Map,s=0;function l(e){return Object.keys(e).filter(Boolean).sort().map((function(t){return t+"_"+("root"===t?(a=e.root)?(o.has(a)||(s+=1,o.set(a,s.toString())),o.get(a)):"0":e[t]);var a})).toString()}function c(e,t,a){if(void 0===a&&(a={}),!e)return function(){};var n=function(e){var t=l(e),a=r.get(t);if(!a){var n=new Map,i=new IntersectionObserver((function(t){t.forEach((function(t){var a,r=t.isIntersecting&&i.thresholds.some((function(e){return t.intersectionRatio>=e}));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=r),null==(a=n.get(t.target))||a.forEach((function(e){e(r,t)}))}))}),e);a={id:t,observer:i,elements:n},r.set(t,a)}return a}(a),i=n.id,o=n.observer,s=n.elements,c=s.get(e)||[];return s.has(e)||s.set(e,c),c.push(t),o.observe(e),function(){c.splice(c.indexOf(t),1),0===c.length&&(s.delete(e),o.unobserve(e)),0===s.size&&(o.disconnect(),r.delete(i))}}function u(e){return"function"!=typeof e.children}var d=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).node=null,a._unobserveCb=null,a.handleNode=function(e){a.node&&(a.unobserve(),e||a.props.triggerOnce||a.props.skip||a.setState({inView:!!a.props.initialInView,entry:void 0})),a.node=e||null,a.observeNode()},a.handleChange=function(e,t){e&&a.props.triggerOnce&&a.unobserve(),u(a.props)||a.setState({inView:e,entry:t}),a.props.onChange&&a.props.onChange(e,t)},a.state={inView:!!t.initialInView,entry:void 0},a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var o=r.prototype;return o.componentDidUpdate=function(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())},o.componentWillUnmount=function(){this.unobserve(),this.node=null},o.observeNode=function(){if(this.node&&!this.props.skip){var e=this.props,t=e.threshold,a=e.root,n=e.rootMargin,i=e.trackVisibility,r=e.delay;this._unobserveCb=c(this.node,this.handleChange,{threshold:t,root:a,rootMargin:n,trackVisibility:i,delay:r})}},o.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},o.render=function(){if(!u(this.props)){var e=this.state,t=e.inView,a=e.entry;return this.props.children({inView:t,entry:a,ref:this.handleNode})}var r=this.props,o=r.children,s=r.as,l=r.tag,c=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(r,["children","as","tag","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView"]);return Object(n.createElement)(s||l||"div",i({ref:this.handleNode},c),o)},r}(n.Component);function h(e){var t=void 0===e?{}:e,a=t.threshold,i=t.delay,r=t.trackVisibility,o=t.rootMargin,s=t.root,l=t.triggerOnce,u=t.skip,d=t.initialInView,h=Object(n.useRef)(),p=Object(n.useState)({inView:!!d}),m=p[0],g=p[1],f=Object(n.useCallback)((function(e){void 0!==h.current&&(h.current(),h.current=void 0),u||e&&(h.current=c(e,(function(e,t){g({inView:e,entry:t}),t.isIntersecting&&l&&h.current&&(h.current(),h.current=void 0)}),{root:s,rootMargin:o,threshold:a,trackVisibility:r,delay:i}))}),[a,s,o,l,u,r,i]);Object(n.useEffect)((function(){h.current||!m.entry||l||u||g({inView:!!d})}));var b=[f,m.inView,m.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}d.displayName="InView",d.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1}},384:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return d}));var n=a(206),i=a.n(n),r=a(0),o=a.n(r),s=a(10),l=a(234);a(672);const c=Object(s.a)("LoadingIndicatorDots"),u=o.a.memo(e=>o.a.createElement("div",{className:c("&","&--"+e.size.toString(),e.className)},o.a.createElement("div",{className:c("&-dots")},i()(10,e=>o.a.createElement("div",{key:e,className:c("&-dot"),style:{left:100*Math.sin(30*e*(Math.PI/180))*.5+48+"%",opacity:1-.05*e,top:100*Math.cos(30*e*(Math.PI/180))*.5+48+"%"}})))));u.defaultProps={size:"normal"};const d=Object(l.a)(u)},386:function(e,t,a){e.exports={root:"Tooltip2_root",overlay:"Tooltip2_overlay",overlay__invisible:"Tooltip2_overlay__invisible",caret:"Tooltip2_caret",caretPadding:"Tooltip2_caretPadding",overlay__top:"Tooltip2_overlay__top",overlay__right:"Tooltip2_overlay__right",overlay__bottom:"Tooltip2_overlay__bottom",overlay__left:"Tooltip2_overlay__left"}},422:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0);const i=(e,t)=>{const a=Object(n.useRef)(!0);Object(n.useEffect)(()=>{a.current?a.current=!1:e()},t)}},423:function(e,t,a){var n=a(446),i=a(290);e.exports=function(e,t,a){return void 0===a&&(a=t,t=void 0),void 0!==a&&(a=(a=i(a))==a?a:0),void 0!==t&&(t=(t=i(t))==t?t:0),n(i(e),t,a)}},428:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return c}));var n,i,r,o,s=a(3);!function(e){e[e.VISA=0]="VISA",e[e.MasterCard=1]="MasterCard",e[e.AMEX=2]="AMEX",e[e.JCB=3]="JCB",e[e.PayPal=4]="PayPal",e[e.GlobalCollect=5]="GlobalCollect"}(n||(n={})),function(e){e[e.payment=0]="payment",e[e.earnings=1]="earnings",e[e.check=2]="check",e[e.credit_card=3]="credit_card",e[e.paypal=4]="paypal",e[e.gift_certificate=5]="gift_certificate",e[e.CreditLine=6]="CreditLine",e[e.direct_debit=7]="direct_debit",e[e.bank_transfer=8]="bank_transfer",e[e.giropay=9]="giropay",e[e.sofort=10]="sofort",e[e.ideal=11]="ideal",e[e.boleto=12]="boleto",e[e.invalid=13]="invalid"}(i||(i={})),function(e){e[e.ZazzleCom=0]="ZazzleCom",e[e.ZazzleCa=1]="ZazzleCa",e[e.ZazzleComAu=2]="ZazzleComAu",e[e.ZazzleCoUk=3]="ZazzleCoUk",e[e.ZazzleDe=4]="ZazzleDe",e[e.ZazzleCoNz=5]="ZazzleCoNz",e[e.ZazzleFr=6]="ZazzleFr",e[e.ZazzleEs=7]="ZazzleEs",e[e.ZazzleComBr=8]="ZazzleComBr",e[e.ZazzlePt=9]="ZazzlePt",e[e.ZazzleCoJp=10]="ZazzleCoJp",e[e.ZazzleSe=11]="ZazzleSe",e[e.ZazzleNl=12]="ZazzleNl",e[e.ZazzleBe=13]="ZazzleBe",e[e.ZazzleAt=14]="ZazzleAt",e[e.ZazzleCoKr=15]="ZazzleCoKr",e[e.ZazzleCh=16]="ZazzleCh"}(r||(r={})),function(e){e[e.Language="lang"]="Language"}(o||(o={}));r.ZazzleCom,r.ZazzleCa,r.ZazzleComAu,r.ZazzleCoUk,r.ZazzleDe,r.ZazzleCoNz,r.ZazzleFr,r.ZazzleEs,r.ZazzleComBr,r.ZazzlePt,r.ZazzleCoJp,r.ZazzleSe,r.ZazzleNl,r.ZazzleBe,r.ZazzleAt,r.ZazzleCoKr,r.ZazzleCh;class l{}Object(s.a)(l,"ABTest","abt"),Object(s.a)(l,"AffConversion","zafc"),Object(s.a)(l,"Bread","_bs"),Object(s.a)(l,"Maturity","general_maturity"),Object(s.a)(l,"MaturityEncoded","general%5Fmaturity"),Object(s.a)(l,"StoreHandle","glh"),Object(s.a)(l,"LastStoreIdUsed","lsr"),Object(s.a)(l,"HPLogin","hploggedin"),Object(s.a)(l,"PCTracking","pctrk"),Object(s.a)(l,"PromoSetHash","pmsh"),Object(s.a)(l,"QueryString","qsp"),Object(s.a)(l,"RefMember","rfm"),Object(s.a)(l,"PageIndex","pis"),Object(s.a)(l,"User","us"),Object(s.a)(l,"MemberSession","zm"),Object(s.a)(l,"ZBar","zbr"),Object(s.a)(l,"Partner","zpn"),Object(s.a)(l,"PartnerUrl","zpnu"),Object(s.a)(l,"PartnerDisplayName","zpnd"),Object(s.a)(l,"Session","zs"),Object(s.a)(l,"SessionShippingAddress","zshippingAddress"),Object(s.a)(l,"KeepShopping","zshopurl"),Object(s.a)(l,"Skin","zskin"),Object(s.a)(l,"SEMConversion","zsmc"),Object(s.a)(l,"OldSession","zss"),Object(s.a)(l,"SecurityToken","zssl"),Object(s.a)(l,"ZCurrency","zcur"),Object(s.a)(l,"ZLanguage","zlng"),Object(s.a)(l,"QPCContentPartner","qcp"),Object(s.a)(l,"RfDomainPrefix","rfd"),Object(s.a)(l,"ClientIPOverride","_clientip"),Object(s.a)(l,"RefererOverride","_referer"),Object(s.a)(l,"UserAgentOverride","_useragent"),Object(s.a)(l,"BulkOrder","bu"),Object(s.a)(l,"NoResults","nr"),Object(s.a)(l,"ZZCookieSeparator","|"),Object(s.a)(l,"ParamCookieGroupBasic","bs"),Object(s.a)(l,"ParamCookieGroupWithExpiration","bx"),Object(s.a)(l,"ParamCookieGroupPartner","bp"),Object(s.a)(l,"GoogleSmartPixelFunnelDepth","gspfd"),Object(s.a)(l,"GoogleSmartPixelProductsSeen","gspps"),Object(s.a)(l,"GoogleSmartPixelSeenSell","gspss"),Object(s.a)(l,"ZSvcPinning","svcpin"),Object(s.a)(l,"LastCartItemAdded","lcia"),Object(s.a)(l,"ProfileNotificationDismissed","ndiss"),Object(s.a)(l,"PinnedSearchServer","_searchserver"),Object(s.a)(l,"CheckoutCSHelp","cocs"),Object(s.a)(l,"UserDisplayName","udnm"),Object(s.a)(l,"SearchViewMode","vm"),Object(s.a)(l,"SearchIsPersonalized","prsnl"),Object(s.a)(l,"SearchTabbedQuery","tqs"),Object(s.a)(l,"SearchNewPalette","np"),Object(s.a)(l,"FanMerchTag","fm"),Object(s.a)(l,"SearchInfiniteScroll","inf"),Object(s.a)(l,"SearchPageSize","ps"),Object(s.a)(l,"GiftCenterWelcomeAnimation","gcwa"),Object(s.a)(l,"HeaderSatisfactionGuaranteed","hsg"),Object(s.a)(l,"MakerGroupId","mkrgp"),Object(s.a)(l,"MakerPreviewStatus","mkrpreview"),Object(s.a)(l,"DisablePageCache","dpc"),Object(s.a)(l,"NanigansReferred","nrf"),Object(s.a)(l,"SEMReferred","srf"),Object(s.a)(l,"ShopSocially","shs"),Object(s.a)(l,"DisableSearchTetris","dtetris"),Object(s.a)(l,"AstResTag","astrt"),Object(s.a)(l,"PromoAnimation","promoanim"),Object(s.a)(l,"MobileFullWidth","mfwc"),Object(s.a)(l,"MobileAppPreference","apppref"),Object(s.a)(l,"ZExperiments","zx"),Object(s.a)(l,"GeolocationRedirect","glr"),Object(s.a)(l,"CaptchaV2Bypass","cv2term");const c={inches:"in",centimeters:"cm"}},431:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return f}));var n,i,r=a(2),o=a(15),s=a(0),l=a.n(s),c=a(10),u=a(54),d=a(7),h=a(119),p=a(73),m=a.n(p);!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(n||(n={})),function(e){e[e.Normal=0]="Normal",e[e.Submit=1]="Submit",e[e.Alternate=2]="Alternate",e[e.Alternate3=3]="Alternate3",e[e.HighVisibility=4]="HighVisibility",e[e.HighVisibilityWhite=5]="HighVisibilityWhite",e[e.Danger=6]="Danger"}(i||(i={}));const g=Object(c.a)("ButtonWithHref"),f=Object(s.forwardRef)((e,t)=>{const{addBorders:a,ariaLabel:c,className:p,elementRef:f,href:b,isIcon:v,onClick:y,size:_,styleType:S,target:D}=e,C=Object(o.a)(e,["addBorders","ariaLabel","className","elementRef","href","isIcon","onClick","size","styleType","target"]),E=Object(s.useContext)(u.a),O=C,w=Object(h.a)(t,f);let j=_,I=S;return v&&(void 0===_&&(j=n.Small),void 0===S&&(I=i.Alternate)),void 0===j&&(j=n.Medium),void 0===I&&(I=i.Normal),l.a.createElement("a",Object(r.a)(Object(r.a)({"aria-label":c,className:g("Button",m.a.root,m.a["root__"+i[I]],m.a["root__"+n[j]],m.a[`root__${E&&E.theme}${E&&E.z4DarkMode?"Dark":""}Theme`],p,{"Button--addBorders":a,"Button--isDisney":Object(d.a)().isDisneyIframe,"Button--isIcon":v})},O),{},{href:b,onClick:y,ref:w,target:D}),e.children)})},445:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(9),i=a.n(n),r=a(0),o=a.n(r),s=a(38),l=a(242),c=a(19),u=a(386),d=a.n(u);const h={bottom:["bottom","top","right","left","bottom"],left:["left","right","top","bottom","left"],right:["right","left","bottom","top","right"],top:["top","bottom","left","right","top"]},p=({className:e,children:t,disableHoverShowDelay:a,hideOnScroll:n,onShowOverlay:u,overlay:p,overlayOnCenter:m,overlayClassName:g,overlayPlacement:f="top"})=>{const b=Object(c.j)("tooltip2"),v=Object(r.useRef)(),y=Object(r.useRef)(),[_,S]=Object(r.useState)(!1),[D,C]=Object(r.useState)(!0);Object(r.useEffect)(()=>{if(_&&D){const e=v.current.getBoundingClientRect();x(e),C(!1)}},[D,_]);const E=Object(l.a)(()=>{_&&I()},100);Object(r.useEffect)(()=>{if(n&&_)return window.addEventListener("scroll",E,!0),()=>{window.removeEventListener("scroll",E,!0)}},[n,_]);const O=Object(r.useRef)(!1),w=Object(r.useRef)(),j=Object(r.useRef)(),I=()=>{S(!1),C(!0),k(void 0),x(void 0),w.current&&(clearTimeout(w.current),w.current=void 0),j.current&&(clearTimeout(j.current),j.current=void 0)},[N,k]=Object(r.useState)(),[T,x]=Object(r.useState)(),z=Object(r.useMemo)(()=>{if(N&&T&&_){const e=h[f];for(let t=0;t<e.length;t++){const a=e[t];let n=0,i=0;const r=document.scrollingElement.scrollTop,o=N.left+N.width/2,s=N.top+r,l=s+N.height/2;switch(a){case"top":n=o-T.width/2,i=s-8-T.height;break;case"right":n=N.right+8,i=l-T.height/2;break;case"bottom":n=o-T.width/2,i=s+N.height+8;break;case"left":n=N.left-8-T.width,i=l-T.height/2}if(m)switch(a){case"top":i+=N.height/2;break;case"right":n-=N.width/2;break;case"bottom":i-=N.height/2;break;case"left":n+=N.width/2}if(t!==e.length-1)switch(a){case"right":case"left":if(n<0||n+T.width>window.innerWidth)continue;break;case"top":case"bottom":const e=i-r;if(e<0||e+T.height>window.innerHeight)continue}n<8?n=8:n+T.width+8>window.innerWidth&&(n=window.innerWidth-T.width-8);const c=o-n-8;return{placement:a,caretStyle:{left:"top"===a||"bottom"===a?c+"px":void 0},overlayStyle:{left:n+"px",top:i+"px"}}}}return{}},[N,f,T,_]);return o.a.createElement("div",{"aria-labelledby":_?b:void 0,className:i()(d.a.root,e),onClick:()=>{O.current&&(_?I():(()=>{if(!p)return;w.current&&clearTimeout(w.current);const e=y.current.getBoundingClientRect();k(e),C(!0),S(!0),w.current=setTimeout(I,3e3),null==u||u()})()),O.current=!1},onMouseEnter:()=>{O.current||(()=>{if(!p)return;if(j.current)return;const e=y.current.getBoundingClientRect();k(e),C(!0),j.current=setTimeout(()=>{S(!0)},a?0:500),null==u||u()})()},onMouseLeave:I,onTouchStart:()=>{O.current=!0},ref:y},t,_&&Object(s.createPortal)(o.a.createElement("div",{className:i()(d.a.overlay,D&&d.a.overlay__invisible,d.a["overlay__"+z.placement],g),id:b,ref:v,style:z.overlayStyle},p,o.a.createElement("div",{className:d.a.caretPadding}),o.a.createElement("div",{"aria-hidden":!0,className:d.a.caret,style:z.caretStyle})),document.body))}},446:function(e,t){e.exports=function(e,t,a){return e==e&&(void 0!==a&&(e=e<=a?e:a),void 0!==t&&(e=e>=t?e:t)),e}},456:function(e,t,a){},489:function(e,t,a){},490:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(2),i=a(3),r=a(9),o=a.n(r),s=a(0),l=a.n(s),c=a(19),u=a(79),d=a(54);a(396),a(169);class h extends l.a.Component{constructor(...e){super(...e),Object(i.a)(this,"input",void 0),Object(i.a)(this,"handleBlur",e=>{this.props.onBlur&&this.props.onBlur(e)}),Object(i.a)(this,"handleChange",e=>{this.props.onChange&&this.props.onChange(!this.props.checked)}),Object(i.a)(this,"handleFocus",e=>{this.props.onFocus&&this.props.onFocus(e)})}render(){const{checked:e,disabled:t,focused:a,name:i,useNativeControls:r,value:s}=this.props,c=o()("RadioButton",this.props.className,`RadioButton--${this.context&&this.context.theme}Theme`,{"RadioButton--checked":e,"RadioButton--disabled":t,"RadioButton--focused":a,"RadioButton--pretty":!r,"RadioButton--mobile":!1}),d=r?{}:{"aria-checked":e,role:"radio"};let h,p=[l.a.createElement("span",Object(n.a)({key:"inputWrapper",className:"RadioButton-inputWrapper"},d),l.a.createElement("input",{checked:e,className:"RadioButton-input",disabled:this.props.disabled,value:s,name:i,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange,ref:e=>this.input=e,type:"radio"}),!r&&l.a.createElement("span",{className:"RadioButton-prettyButton"})),this.props.children?l.a.createElement("span",{key:"display",className:"RadioButton-display"},this.props.children):null,this.props.label?l.a.createElement("span",{key:"label",className:o()("RadioButton-labelContent","Label-labelContent")},this.props.label):null];return this.props.showError&&(h=l.a.createElement(u.a,{bottomOfTarget:!0,message:this.props.validationErrors})),(this.props.label||this.props.children)&&(p=l.a.createElement("label",{className:o()("RadioButton-label",this.props.labelClassName)},p)),l.a.createElement("div",{className:c},p,h)}}Object(i.a)(h,"defaultProps",{checked:!1,onChange:()=>{}}),Object(i.a)(h,"contextType",d.a);var p;a(682);!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(p||(p={}));class m extends l.a.PureComponent{constructor(...e){super(...e),Object(i.a)(this,"defaultName",Object(c.i)("radioButtonGroup")),Object(i.a)(this,"handleChange",(e,t)=>{t&&this.props.onChange&&this.props.onChange(e)})}render(){const e=o()("RadioButtonList",this.props.className,{"RadioButtonList--disabled":this.props.disabled,"RadioButtonList--horizontal":this.props.optionsLayout===p.Horizontal,"RadioButtonList--vertical":this.props.optionsLayout===p.Vertical}),t=this.defaultName+"_label";return l.a.createElement("div",{className:e},l.a.createElement("fieldset",{role:"radiogroup","aria-labelledby":this.props.label?t:void 0},this.props.label&&l.a.createElement("legend",{className:"RadioButtonList-label"},l.a.createElement("span",{className:"Label-labelContent",id:t},this.props.label)),l.a.createElement("div",{className:"RadioButtonList-options"},this.props.options.map(e=>l.a.createElement(h,Object(n.a)({checked:this.props.value===e.value,className:e.className,disabled:this.props.disabled||e.disabled,key:e.value,label:e.display,labelClassName:e.labelClassName,name:this.props.name||this.defaultName,onChange:t=>{this.handleChange(e.value,t)},useNativeControls:this.props.useNativeControls,value:e.value},this.props.radioButtonProps)))),this.props.children),this.props.showError&&l.a.createElement(u.a,{message:this.props.validationErrors,bottomOfTarget:!0}))}}Object(i.a)(m,"defaultProps",{onChange:()=>{},options:[],optionsLayout:p.Vertical,useNativeControls:!1,value:""})},501:function(e,t,a){},502:function(e,t,a){},520:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"c",(function(){return h})),a.d(t,"j",(function(){return p})),a.d(t,"k",(function(){return m})),a.d(t,"g",(function(){return g})),a.d(t,"l",(function(){return f})),a.d(t,"i",(function(){return b})),a.d(t,"e",(function(){return v})),a.d(t,"d",(function(){return y})),a.d(t,"h",(function(){return _}));var n=a(1651),i=a.n(n),r=a(27),o=a(59),s=a(129),l=a(25);const c=20,u=20;function d(e){let t="";if(e){const a=Date.now(),n=new Date(a),i=e.getFullYear()==n.getFullYear()&&e.getMonth()==n.getMonth()&&e.getDate()==n.getDate(),r=a-6048e5,s=e.getTime()>r;t=i?Object(o.f)(e,{hour:"numeric",minute:"numeric"}):s?Object(o.c)(e,{weekday:"short",hour:"numeric",minute:"numeric"}):Object(o.b)(e,{month:"short",day:"numeric"})}return t}const h=(e,t,a=3)=>{if(!e||0===e.length)return"";let n=0;if(e.length<=a)n=0;else{const t=a-1;n=e.length-t}const i=[],r=e.length<=a?e.length:a-1;for(let o=0;o<r;o++){const a=e[o].displayName||t("zi_common_Anonymous");i.push(a)}1==n&&i.push(t("zi_myzazzle_chat_otherSingular")),n>=2&&i.push(t("zi_myzazzle_chat_othersPlural",{num:n}));return i.join(", ")},p=(e,t,a=3)=>{if(!e||0===e.length)return"";if(1===e.length)return e[0].displayName||t("zi_common_Anonymous");let n=0;if(e.length<=a)n=0;else{const t=a-1;n=e.length-t}const i=[],r=e.length<=a?e.length:a-1;for(let s=0;s<r;s++){const a=e[s],n=a.firstName||a.displayName||t("zi_common_Anonymous");i.push(n)}if(2===n){const e=t("zi_myzazzle_Chat_And")+" "+t("zi_myzazzle_Chat_NewOtherSingular");i.push(e)}if(n>=3){const e=t("zi_myzazzle_Chat_And")+" "+t("zi_myzazzle_Chat_NewOthersPlural",{num:n-1});i.push(e)}let o="";return o=e.length>3?i.join(", "):i.join(` ${t("zi_myzazzle_Chat_And")} `),o},m=Object(r.a)((e,t)=>e.entities.chatConversations,(e,t)=>Object(l.b)(e,t.chatStateKey),(e,t)=>{const a=Object(l.b)(e,t.chatStateKey);return g(a,a&&Object(s.j)(e,a.inboxStateKey))},(e,t,a)=>{const n=e[t&&t.roomId];if(!a||"0"===a)return null;const i=n&&n.participants&&n.participants.map(e=>e.participant);if(!i)return null;let r=null;const o=[];return i.forEach(e=>{e.memberId===a?r=e:o.push(e)}),{myself:r,otherParticipants:o}});function g(e,t){let a=e&&e.myself;return!a&&t&&(a=t.inboxOwnerId),a}const f=Object(r.a)((e,t)=>Object(l.b)(e,t),(e,t)=>e.entities.chatParticipants,(e,t)=>{var a;return t&&e?null===(a=t[e.inboxOwnerId])||void 0===a?void 0:a.headline:null});function b(e){return e?e.toLowerCase():e}function v(e,t,a,n){if(!a||!e||n!==t)return!1;return(e.sentDate.valueOf()-a.sentDate.valueOf())/1e3/60<=5}function y(e,t,a){if(null===t)return!0;return!v(t,t&&t.sentBy&&t.sentBy.memberId,e,a&&a.memberId)}function _(e){if(!e)return!1;const t=i()(),a=e.replace(t,"");return a!==e&&!a.trim()}},522:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n,i=a(2),r=a(15),o=a(3),s=a(9),l=a.n(s),c=a(0),u=a.n(c),d=a(6);a(407);!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(n||(n={}));class h extends u.a.PureComponent{render(){const e=this.props,{className:t,size:a}=e,o=Object(r.a)(e,["className","size"]),s=l()("PlayButton","PlayButton--"+n[a],t);return u.a.createElement(d.a,Object(i.a)({className:s,iconName:d.a.Icon.PlayCircle},o))}}Object(o.a)(h,"defaultProps",{size:n.Medium}),Object(o.a)(h,"Size",n)},552:function(e,t,a){"use strict";var n=a(15),i=a(0),r=a.n(i),o=a(119),s=a(422),l=a(10),c=a(267),u=a(258),d=a(79);a(169),a(398);const h=Object(l.a)("TextArea"),p=r.a.memo(r.a.forwardRef((e,t)=>{let{includeClearButton:a,value:l=""}=e,p=Object(n.a)(e,["includeClearButton","value"]);const[m,g]=Object(i.useState)(p.focused),f=Object(o.a)(t),b=p.autoSetRows?(l||"").split("\n").length:p.rows;Object(c.a)(()=>{p.autoSetRows&&(f.current.style.height="auto",f.current.style.height=f.current.scrollHeight+1+"px")},[l]),Object(i.useEffect)(()=>{p.focused&&document.activeElement!==f.current&&f.current.focus(),p.selectAllOnInitialFocus&&f.current.select()},[]),Object(s.a)(()=>{g(p.focused)},[p.focused]);const v=e=>{const{maxLength:t}=p;p.onChange&&(null!=t&&e.length>t&&(e=e.substr(0,t)),e!==l&&p.onChange(e))},y=a&&l&&m,_=h("&",{"&--autoSetRows":p.autoSetRows,"&--error":p.showError,"&--focused":m,"&--includeClearButton":a,"&--isMobile":!1},p.className);let S,D=r.a.createElement("div",{className:h("&-textareaWrapper")},r.a.createElement("textarea",{className:h("&-textarea",p.textAreaClassName),cols:p.cols,disabled:p.disabled,maxLength:p.maxLength,onBlur:e=>{if(g(!1),p.onBlur&&p.onBlur(e),p.onChangeComplete){const t=e.currentTarget.value;p.onChangeComplete(t)}},onChange:p.onChange&&(e=>{v(e.currentTarget.value)}),onClick:p.onClick,onFocus:e=>{g(!0),p.highlightOnFocus&&setTimeout(()=>{f.current.setSelectionRange(0,l.length)},0),p.selectEndOnFocus&&setTimeout(()=>{f.current.setSelectionRange(2*l.length,2*l.length)},0),p.onFocus&&p.onFocus(e)},onKeyDown:e=>{const{onSubmitShortcut:t}=p;t&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&t()},placeholder:p.placeholder,ref:f,readOnly:p.readOnly,rows:b,value:l}),y&&r.a.createElement(u.a,{className:h("&-clear"),onChange:v}));return p.label&&(D=r.a.createElement("label",{className:h("&-label")},r.a.createElement("span",{className:h("&-labelContent","Label-labelContent")},p.label),D)),p.showError&&(S=r.a.createElement(d.a,{message:p.validationErrors,bottomOfTarget:!0})),r.a.createElement("div",{className:_},D,p.children,S)}));t.a=p},601:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),i=a.n(n),r=a(38),o=a(10),s=a(19);a(421);const l=Object(o.a)("Tooltip"),c={bottom:["bottom","top","right","left"],left:["left","right","top","bottom"],right:["right","left","bottom","top"],top:["top","bottom","left","right"]},u=({children:e,className:t,disabled:a=!1,hoverDelay:o=600,overlay:u,overlayClassName:d,overlayContainerClassName:h,persistOverlayOnOverlayHover:p=!0,placement:m="bottom",placementFallback:g=c[m],renderInPortal:f=!1,toggleOnPress:b=!1,touchHideDelay:v=2e3,touchStopPropagation:y=!1,usePointerWhenOverlay:_=!0})=>{const[S,D]=Object(n.useState)(0),[C,E]=Object(n.useState)(0),O=Object(n.useMemo)(()=>({left:S,right:C}),[S,C]),[w,j]=Object(n.useState)(!1),I=Object(n.useRef)(m),N=Object(n.useRef)(!1),k=Object(n.useRef)(null),T=Object(n.useRef)(null),x=Object(n.useRef)(null),z=Object(n.useRef)(-1),P=Object(n.useRef)(!1),F=Object(s.j)("tooltip");Object(n.useEffect)(()=>{a&&w&&j(!1)},[a,w]);const M=(e,t,a)=>{const n={left:t.left,top:t.top};switch(e){case"bottom":case"top":n.left+=t.width/2-a.width/2;break;case"left":case"right":n.top+=t.height/2-a.height/2}switch(e){case"bottom":n.top+=t.height+8;break;case"top":n.top-=a.height+8;break;case"left":n.left-=a.width+8;break;case"right":n.left+=t.width+8}return n},A=(e=g)=>{if(0===e.length)return;const t=T.current.getBoundingClientRect(),a=x.current.getBoundingClientRect(),n=document.documentElement.clientWidth||window.innerWidth,i=document.documentElement.clientHeight||window.innerHeight;for(const o of e){const e=M(o,t,a);if(!(e.left<0||e.top<0||e.left+a.width>n||e.top+a.height>i))return I.current=o,D((f?window.scrollX:-t.left)+e.left),void E((f?window.scrollY:-t.top)+e.top)}for(const o of e){const e=M(o,t,a);if(!(window.scrollY+e.top<0||e.left<0||e.left+a.width>n))return I.current=o,D((f?window.scrollX:-t.left)+e.left),void E((f?window.scrollY:-t.top)+e.top)}const r=M(m,t,a);I.current=m,D(window.scrollX+r.left),E(window.scrollY+r.top)},R=Object(n.useRef)(g);Object(n.useLayoutEffect)(()=>{w&&(R.current=g,A())},[w,m]),Object(n.useEffect)(()=>{if(!f&&w&&x.current&&0!==R.current.length&&R.current.length>0&&s.b.isHidden(x.current)){const e=[...R.current];e.splice(R.current.indexOf(m),1),A(e)}},[O]),Object(n.useEffect)(()=>()=>clearTimeout(k.current),[]);const B=Object(n.useCallback)(!a&&u?()=>{P.current||N.current||(N.current=!0,k.current=setTimeout(()=>{N.current&&(z.current=-1,j(!0))},o))}:void 0,[a,o,u]),L=Object(n.useCallback)(!a&&u?()=>{N.current&&(N.current=!1,clearTimeout(k.current),j(!1))}:void 0,[a,u]),U=Object(n.useCallback)(e=>{P.current=!0,y&&e.stopPropagation()},[y]),K=Object(n.useCallback)(()=>{w&&b?b&&j(!1):P.current&&u&&!a&&(N.current=!0,z.current=-1,j(!0),clearTimeout(k.current),v>0&&(k.current=setTimeout(()=>j(!1),v))),P.current=!1},[w,b,u,a,v]),G=l("&",{"&--hasOverlay":!!u,"&--usePointerWhenOverlay":_},t),H=u&&w&&i.a.createElement("div",{className:l("&-overlayContainer","&-overlayContainer--"+I.current,h),id:F,role:"tooltip",style:O},i.a.createElement("div",{className:l("&-overlay",d),ref:x},u));return i.a.createElement("div",{className:G,onTouchStart:U,onClick:K,onMouseOver:p?B:void 0,onMouseLeave:p?L:void 0},i.a.createElement("div",{"aria-describedby":w?F:void 0,className:l("&-content"),ref:T,onMouseOver:p?void 0:B,onMouseLeave:p?void 0:L},e),u&&w&&(f?Object(r.createPortal)(H,document.body):H))};t.b=u},613:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return d}));var n=a(3),i=a(0),r=a.n(i),o=a(6),s=a(10),l=a(89);a(1154);const c=Object(s.a)("ProfileThumbnail");var u;!function(e){e[e.Smaller=26]="Smaller",e[e.Small=30]="Small",e[e.Regular=65]="Regular",e[e.Large=95]="Large",e[e.XLarge=110]="XLarge"}(u||(u={}));class d extends r.a.PureComponent{render(){const{alt:e,className:t,imageUrl:a,renderImage:n,size:i,style:s,type:d}=this.props,h=c("&",t,{"&--circle":"circle"===s,"&--Smaller":i===u.Smaller,"&--Small":i===u.Small,"&--Regular":i===u.Regular,"&--Large":i===u.Large,"&--XLarge":i===u.XLarge});let p;return p=n&&a?r.a.createElement(l.c,{alt:e,baseDim:i,baseSrc:a,className:c("&-image"),itemProp:"Maker"===d?"logo":null,maxDim:2*i,useSrcSet:!0}):r.a.createElement("div",{className:c("&-placeholderIcon")},r.a.createElement(o.a,{iconName:"Member"===d?o.a.Icon.Account:o.a.Icon.StoreOpen,title:d})),r.a.createElement("div",{className:h},p)}}Object(n.a)(d,"defaultProps",{size:u.Regular,style:"square"})},616:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return h})),a.d(t,"g",(function(){return p})),a.d(t,"b",(function(){return m})),a.d(t,"e",(function(){return g}));var n=a(568),i=a.n(n);class r{static HEX(e){return"string"==typeof e}static HSL(e){let t=e;return void 0!==t.h&&void 0!==t.s&&void 0!==t.l}static RGB(e){let t=e;return void 0!==t.r&&void 0!==t.g&&void 0!==t.b}static HSV(e){let t=e;return void 0!==t.h&&void 0!==t.s&&void 0!==t.v}static CIELAB(e){let t=e;return void 0!==t.l&&void 0!==t.a&&void 0!==t.b}}function o(e){if(8===e.length){let t=e.substring(0,2);return e.substring(2)+t}return e}function s(e){if(8===e.length){return e.substring(6)+e.substring(0,6)}return e}let l=[[.4124564,.3575761,.1804375],[.2126729,.7151522,.072175],[.0193339,.119192,.9503041]];const c=216/24389,u=24389/27;function d(e){const t=i()(e).toRgb(),a=Math.pow(t.r/255,2.2),n=Math.pow(t.g/255,2.2),r=Math.pow(t.b/255,2.2),o=(l[0][0]*a+l[0][1]*n+l[0][2]*r)/.95047,s=(l[1][0]*a+l[1][1]*n+l[1][2]*r)/1,d=(l[2][0]*a+l[2][1]*n+l[2][2]*r)/1.08883,h=o>c?Math.pow(o,.3333333333333333):(u*o+16)/116,p=s>c?Math.pow(s,.3333333333333333):(u*s+16)/116;return{l:116*p-16,a:500*(h-p),b:200*(p-(d>c?Math.pow(d,.3333333333333333):(u*d+16)/116))}}function h(e,t){let a=getComputedStyle(e).getPropertyValue(t);const n=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/);if(n){function i(e){return("0"+parseInt(e).toString(16)).slice(-2)}return"#"+i(n[1])+i(n[2])+i(n[3])}return a}function p(e){if(null==e)return"100";const t=8===e.length?e.substr(0,2):"ff";return Math.round(parseInt(t,16)/256*100).toString()}function m(e){let t=Math.round(255*e/100).toString(16);return"ff"===t?t="":1===t.length&&(t="0"+t),t}function g(e,t){const a=r.CIELAB(e)?e:d(e),n=r.CIELAB(t)?t:d(t),i=a.l-n.l,o=a.a-n.a,s=a.b-n.b;return Math.sqrt(i*i+o*o+s*s)}},617:function(e,t,a){"use strict";a.d(t,"a",(function(){return h})),a.d(t,"b",(function(){return m}));var n=a(3),i=a(0),r=a.n(i),o=a(5),s=a(6),l=a(10),c=a(14),u=a(13);a(1417);const d=Object(l.a)("ChatAvatar");var h;!function(e){e[e.Small=30]="Small",e[e.ThirtyFive=35]="ThirtyFive",e[e.Medium=40]="Medium",e[e.Large=50]="Large",e[e.XLarge=60]="XLarge",e[e.Eighty=80]="Eighty",e[e.OneHundred=100]="OneHundred"}(h||(h={}));class p extends r.a.Component{render(){const{size:e,user:t,zUrl:a}=this.props;let n;return n=t&&t.profileImageUrl?r.a.createElement("img",{src:a("WwwAst","s.gif"),alt:t.displayName,style:{backgroundImage:`url(${Object(u.c)(t.profileImageUrl,{max_dim:e})})`,height:e+"px",width:e+"px"},title:t.displayName}):r.a.createElement(s.a,{iconName:s.a.Icon.AccountWIZ,title:t&&t.displayName}),r.a.createElement("div",{className:d("&","&--size"+e,this.props.className)},r.a.createElement("div",{className:d("&-icon")},n))}}Object(n.a)(p,"Sizes",h);const m=Object(o.b)((e,t)=>({zUrl:Object(c.d)(e)}))(p)},659:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n,i=a(17);!function(e){e.SEARCH="ZazzleImages/SEARCH",e.RECEIVE_PAGE="ZazzleImages/RECEIVE_PAGE",e.NEXT_PAGE="ZazzleImages/NEXT_PAGE",e.SET_LOADING="ZazzleImages/SET_LOADING",e.UPLOAD="ZazzleImages/UPLOAD"}(n||(n={}));const r={search:e=>Object(i.a)(n.SEARCH,e),nextPage:()=>Object(i.a)(n.NEXT_PAGE),receivePage:e=>Object(i.a)(n.RECEIVE_PAGE,e),setLoading:e=>Object(i.a)(n.SET_LOADING,e),upload:e=>Object(i.a)(n.UPLOAD,e)}},671:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9),i=a.n(n),r=a(0),o=a.n(r),s=a(688),l=a.n(s);const c=({aspect:e,children:t,className:a,contentClassName:n})=>{const s=Object(r.useMemo)(()=>({paddingBottom:1/e*100+"%"}),[e]);return o.a.createElement("div",{className:i()(l.a.root,a),style:s},o.a.createElement("div",{className:i()(l.a.content,n)},t))}},672:function(e,t,a){},673:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,i=a(9),r=a.n(i),o=a(0),s=a.n(o),l=a(6);a(420);!function(e){e[e.Desktop=0]="Desktop",e[e.Mobile=1]="Mobile",e[e.MobilePdp=2]="MobilePdp"}(n||(n={}));const c=({children:e,className:t,defaultIsExpanded:a,enabled:i=!0,headerClassName:c,isExpanded:u,onRequestToggleExpanded:d,renderChildrenWhenCollapsed:h=!0,rootElementRef:p,style:m=n.Desktop,title:g})=>{const[f,b]=Object(o.useState)(a||u);Object(o.useEffect)(()=>{b(a)},[a]),Object(o.useEffect)(()=>{null!=u&&b(u)},[u]);const v=r()("Accordion","Accordion--"+n[m],{"Accordion--disabled":!i,"Accordion--expanded":f},t),y=r()("Accordion-header",c),_=m===n.Desktop?l.a.Icon.CaretDownZ4:m==n.MobilePdp?f?l.a.Icon.CaretUpZ4:l.a.Icon.CaretDownZ4:f?l.a.Icon.SizeDecrease:l.a.Icon.SizeIncrease;return s.a.createElement("div",{className:v,ref:p},s.a.createElement("button",{className:y,onClick:()=>{i&&(null!=u&&d?d&&d():b(!f))}},s.a.createElement("div",{className:"Accordion-title"},g),s.a.createElement("div",{className:"Accordion-caretWrapper"},s.a.createElement(l.a,{className:"Accordion-caret",iconName:_}))),s.a.createElement("div",{className:"Accordion-content"},(f||h)&&e))};t.b=s.a.memo(c)},675:function(e,t,a){"use strict";a.d(t,"b",(function(){return S})),a.d(t,"a",(function(){return D}));var n=a(15),i=a(26),r=a.n(i),o=a(9),s=a.n(o),l=a(0),c=a.n(l),u=a(5),d=a(29),h=a(6),p=a(23),m=a(30),g=a(151),f=a(7),b=a(8),v=a(53);a(1161);const y=c.a.lazy(()=>a.e(89).then(a.bind(null,1394))),_=c.a.lazy(()=>Promise.resolve().then(a.bind(null,248)));var S;!function(e){e.Inline="Inline",e.InlineButtons="InlineButtons",e.IconsOnly="IconsOnly",e.SplitButton="SplitButton",e.Stacked="Stacked"}(S||(S={}));const D=c.a.memo(e=>{let{displayUi:t=S.SplitButton,fetchDataOnLogin:a=!0,showAddToCollections:i=!0,showArrow:o=!1,showIcons:D=!0,showLike:E=!0,showText:O=!1,tabIndex:w=0}=e,j=Object(n.a)(e,["displayUi","fetchDataOnLogin","showAddToCollections","showArrow","showIcons","showLike","showText","tabIndex"]);const I=Object(b.e)(),N=Object(u.e)(e=>{const t=Object.values(e.entities.likesBoard);return{isLoggedIn:e.User.isLoggedIn,likesBoard:r()(t)?null:t[0],productLookup:e.addToIdeaBoard?e.addToIdeaBoard.productLookup:C}},u.c),k=function(){const e=Object(u.d)();return Object(l.useMemo)(()=>({addProductToLikes:(t,a)=>{e(Object(v.j)([a],t))},closeDialog:t=>{e(Object(p.c)(t))},getAddToIdeaBoardData:(t,a)=>{e(Object(v.m)([t],a))},openDialog:t=>{e(Object(p.d)(t))},removeProductsFromLikes:(t,a)=>{e(Object(v.o)([a],t))}}),[])}(),[T,x]=Object(l.useState)(!1),[z,P]=Object(l.useState)(!1),[F,M]=Object(l.useState)(!1);Object(l.useEffect)(()=>{N.isLoggedIn&&a&&k.getAddToIdeaBoardData(j.pid)},[N.isLoggedIn]),Object(l.useEffect)(()=>{F&&(H(),M(!1))},[F]);const A=e=>N.likesBoard&&N.likesBoard.boardId===e,R=()=>{if(!N.productLookup)return!1;const e=N.productLookup[j.pid];return e&&e.some(e=>A(e))},B=Object(l.useRef)(),L=Object(l.useRef)(),U=()=>{L.current&&k.closeDialog(L.current)},K=()=>{B.current&&k.closeDialog(B.current)},G=()=>{const{attributes:e,imageUrl:t,pid:a,title:n}=j;U(),L.current=c.a.createElement(y,{onActionCompleted:U,onRequestClose:U,products:{[a]:{attributes:e,imageUrl:t,pid:a,title:n}}}),k.openDialog(L.current),Object(m.h)(g.a.OpenCollectionsDialog())},H=()=>{if(N.likesBoard)if(R())Object(m.h)(g.a.ClickOnUnlike()),k.removeProductsFromLikes(N.likesBoard.boardId,j.pid);else{Object(m.h)(g.a.ClickOnLike());const{attributes:e,imageUrl:t,pid:a,title:n}=j;k.addProductToLikes(N.likesBoard.boardId,{attributes:e,imageUrl:t,pid:a,title:n}),P(!0)}},Z=R(),W=(()=>{if(!N.productLookup)return!1;const e=N.productLookup[j.pid];return!r()(e)&&(e.length>1||!A(e[0]))})(),V=s()("AddToIdeaBoardButtons",{"AddToIdeaBoardButtons--isCollectioned":W,"AddToIdeaBoardButtons--isLiked":Z,"AddToIdeaBoardButtons--isNewlyLiked":Z&&z,"AddToIdeaBoardButtons--mobile":!Object(f.a)().isDesktop,"AddToIdeaboardUi--showArrow":o},j.className);return c.a.createElement("div",{className:V},c.a.createElement("div",{className:"AddToIdeaBoardButtons-contentWrapper clearfix AddToIdeaBoardButtons--"+t.toString()},i&&c.a.createElement("div",{className:"AddToIdeaBoardButtons-collectionWrapper"},c.a.createElement(d.a,{className:"AddToIdeaBoardButtons-collection",onClick:e=>{N.isLoggedIn?G():(K(),B.current=c.a.createElement(_,{onLoginSuccess:()=>{k.getAddToIdeaBoardData(j.pid,G),K()},onRequestClose:K}),k.openDialog(B.current)),e.preventDefault()},tabIndex:w,title:I("zi_product_Collections_AddToList")},c.a.createElement("span",{className:"AddToIdeaBoardButtons-icon"},D&&c.a.createElement(h.a,{iconName:W?h.a.Icon.AddedToList:h.a.Icon.AddToList})),c.a.createElement("span",{className:"AddToIdeaBoardButtons-text"},O&&(W?j.isCollectionedText||I("zi_product_Collections_Added"):j.unCollectionedText||I("zi_product_Collections_AddTo"))))),E&&c.a.createElement("div",{className:"AddToIdeaBoardButtons-likesWrapper"},c.a.createElement(d.a,{className:"AddToIdeaBoardButtons-like",title:I("zi_product_Collections_Like"),onClick:e=>{N.isLoggedIn?H():(K(),B.current=c.a.createElement(_,{onLoginSuccess:()=>{k.getAddToIdeaBoardData(j.pid,()=>M(!0)),K()},onRequestClose:K}),k.openDialog(B.current)),e.preventDefault()},onMouseOver:j.useOpenHeartForLikeIcon?()=>{x(!0)}:void 0,onMouseOut:j.useOpenHeartForLikeIcon?()=>{x(!1)}:void 0,tabIndex:w},c.a.createElement("span",{className:"AddToIdeaBoardButtons-icon"},D&&c.a.createElement(h.a,{iconName:!j.useOpenHeartForLikeIcon||Z||T?h.a.Icon.Heart:h.a.Icon.HeartOpen})),c.a.createElement("span",{className:"AddToIdeaBoardButtons-text"},O?I(Z?"zi_controls_likes_Liked":"zi_product_Collections_Like"):null)))))}),C={}},682:function(e,t,a){},688:function(e,t,a){e.exports={root:"AspectRatio_root",content:"AspectRatio_content"}},704:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n),r=a(16),o=a(10),s=a(54);a(1157);const l=Object(o.a)("Z4Button"),c=e=>{const t=Object(n.useContext)(s.a),a=l("&",{"&--active":e.active,"&--bordered":e.bordered},e.link?"&--link":"&--button","&--theme-"+e.theme,`&--${t&&t.theme}${t&&t.z4DarkMode?"Dark":""}Theme`,e.className,e.active&&e.activeClassName);return e.link?i.a.createElement(r.a,{className:a,href:e.href,onClick:e.onClick,onMouseDown:e.onMouseDown,style:e.style,target:e.target},e.children):i.a.createElement("button",{className:a,disabled:e.disabled,onClick:e.onClick,onMouseDown:e.onMouseDown,style:e.style,title:e.title,type:"button"},e.children)};c.defaultProps={theme:"z4"}},709:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"a",(function(){return d}));var n,i=a(0),r=a.n(i),o=a(27),s=a(14),l=a(10);a(1214);!function(e){e[e.LIGHT=1]="LIGHT",e[e.DARK=2]="DARK"}(n||(n={}));const c=Object(o.a)((e,t)=>t,(e,t)=>e.entities.profiles,(e,t)=>t[e]?t[e].badge:""),u=Object(l.a)("Badge"),d=r.a.memo(({badge:e,badgeShadeType:t,className:a,renderImage:i=!0})=>{const o=Object(s.f)();if(!e)return null;const l=e.indexOf("Basic")>-1?"Pro":e.substring(9),c=(()=>{if(t&&t===n.LIGHT){switch(l){case"Pro":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Pro_Light.png");case"Bronze":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Bronze_Light.png");case"Silver":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Silver_Light.png");case"Gold":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Gold_Light.png");case"Platinum":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Platinum_Light.png");case"Diamond":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Diamond_Light.png")}return""}switch(l){case"Pro":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Pro_Dark.png");case"Bronze":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Bronze_Dark.png");case"Silver":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Silver_Dark.png");case"Gold":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Gold_Dark.png");case"Platinum":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Platinum_Dark.png");case"Diamond":return o("WwwAst","/z4/uniquePages/Z_Pro_Badges/Diamond_Dark.png")}})(),d=e=>c.replace(/.png$/,`_${e}.png`),h=u("&",a);return i?r.a.createElement("img",{alt:l,className:h,src:c,srcSet:`${c}, ${d("2x")} 2x, ${d("3x")} 3x, ${d("4x")} 4x`}):r.a.createElement("div",{className:h})})},734:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,i=a(3),r=a(9),o=a.n(r),s=a(0),l=a.n(s),c=a(6);a(1312);!function(e){e[e.Sharp=0]="Sharp",e[e.Rounded=1]="Rounded"}(n||(n={}));class u extends l.a.PureComponent{constructor(...e){super(...e),Object(i.a)(this,"onStarClick",e=>{this.props.onChange&&this.props.onChange(e)})}render(){const{value:e,style:t}=this.props,a=[];for(let i=1;i<=5;i++){const r={};if(i-1<e&&e<i){let a=e%1*100;a=t===n.Rounded?.8*a+10:.6*a+20,r.width=a.toFixed(0)+"%"}const s={"RatingStars-star--hide":i>=e+1};a.push(l.a.createElement("div",{key:i,className:"RatingStars-starContainer",onClick:this.props.readonly?void 0:this.onStarClick.bind(this,i)},l.a.createElement("span",{className:"RatingStars-starBg"},t===n.Sharp?"â˜†":l.a.createElement(c.a,{iconName:c.a.Icon.Star})),l.a.createElement("span",{className:o()("RatingStars-star",s),style:r},t===n.Sharp?"â˜…":l.a.createElement(c.a,{iconName:c.a.Icon.Star}))))}return l.a.createElement("div",{className:o()("RatingStars","RatingStars--"+n[t],{"RatingStars--readonly":this.props.readonly})},a)}}Object(i.a)(u,"defaultProps",{style:n.Rounded,value:0}),Object(i.a)(u,"Styles",n)},804:function(e,t,a){e.exports={root:"LiveAd_root",image:"LiveAd_image",text:"LiveAd_text",title:"LiveAd_title",dismiss:"LiveAd_dismiss",dismissIcon:"LiveAd_dismissIcon"}},810:function(e,t,a){"use strict";var n;a.d(t,"a",(function(){return n})),function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning"}(n||(n={}))},811:function(e,t,a){"use strict";a.d(t,"c",(function(){return O})),a.d(t,"a",(function(){return T})),a.d(t,"b",(function(){return w}));var n=a(3),i=a(497),r=a.n(i),o=a(196),s=a.n(o),l=a(288),c=a.n(l),u=a(9),d=a.n(u),h=a(0),p=a.n(h),m=a(5),g=a(27),f=a(137),b=a(6),v=a(8),y=a(14),_=a(19),S=a(85),D=a(25),C=a(97),E=a(132);a(1399);function O(e,t,a=!1){return c()([a?[]:t.attributeForceSelectErrors.filter(t=>e.attributeName&&e.attributeName===t.attribute.name),t.constraintErrors.filter(t=>e.template?!!Object(E.i)(t)&&t.constraint.urlkeys.indexOf(e.template.name)>=0:e.designObject?!!Object(E.i)(t)&&(t.constraint.area===e.designObject.area&&t.constraint.objects.indexOf(e.designObject.name)>=0):e.area?!!Object(E.i)(t)&&t.constraint.area===e.area.name:!e.attributeName)])}class w extends p.a.Component{constructor(...e){super(...e),Object(n.a)(this,"state",{paletteX:0}),Object(n.a)(this,"self",void 0),Object(n.a)(this,"arrange",s()(e=>{if(!this.self)return;const t=this.self.getBoundingClientRect(),a=t.left+t.width/2;(e||a!==this.state.paletteX)&&this.setState({paletteX:a})},50))}render(){let{errors:e}=this.props;if(0===e.length)return null;const t=Math.max(E.b.none,...e.map(e=>e.type)),a=function(e,t,a){return e===E.b.info?p.a.createElement(b.a,{className:"ErrorIndicator-ErrorZazzicon ErrorIndicator-ErrorZazziconInfo",iconName:b.a.Icon.InfoStamp,title:t("zi_store_Maker_Profile_Info")}):e===E.b.warn?p.a.createElement(b.a,{className:"ErrorIndicator-ErrorZazzicon ErrorIndicator-ErrorZazziconWarn",iconName:b.a.Icon.Warning,title:t("zi_error_Warning")}):e===E.b.error?p.a.createElement(b.a,{className:"ErrorIndicator-ErrorZazzicon ErrorIndicator-ErrorZazziconError",iconName:b.a.Icon.Warning,title:t("zi_error_Error")}):(Object(_.a)(!1,"Add Zazzicon case for ErrorType "+E.b[e]),null)}(t,this.props.zString,this.props.zUrl);return this.props.template&&(e=Object(E.d)(e)),p.a.createElement("div",{className:d()("ErrorIndicator","ErrorIndicator--error_"+E.b[t],"ErrorIndicator-PaletteArrow",{"ErrorIndicator--hideTooltip":this.props.hideTooltip,"ErrorIndicator--inline":this.props.inline}),onClick:this.props.onClick,ref:e=>{this.self=e,this.arrange()},onMouseEnter:()=>this.arrange(!0)},a,p.a.createElement("div",{className:"ErrorIndicator-PaletteHolder"},p.a.createElement(f.a,{className:"ErrorIndicator-Palette",includeCaret:!0,caretPosition:"top",caretViewportHorzOffset:this.state.paletteX},e.map((e,t)=>{const a=e.displayMessages[this.props.context]||r()(e.displayMessages)[0];return p.a.createElement("div",{key:t,className:"ErrorIndicator-item"},p.a.createElement("div",{className:"ErrorIndicator-title"},e.displayTitle),p.a.createElement("div",{className:"ErrorIndicator-separator"}),p.a.createElement("div",{className:"ErrorIndicator-message"},a))}))))}}const j=e=>e.state,I=e=>e.match,N=e=>Object(D.b)(e.state,e.productStateKey),k=e=>e.allowDelayedErrors,T=Object(m.b)(()=>{const e=Object(E.n)(),t=Object(g.a)(j,I,N,k,(t,a,n,i)=>{const r=Object(S.e)(t,n.designStateKey),o=Object(C.h)(n,r);let s=O(a,e(t,n,o),n.isInDesignSpace);return i&&(s=Object(E.e)(s,n)),s});return(e,a)=>({errors:t({state:e,match:a,productStateKey:a.productStateKey,allowDelayedErrors:a.allowDelayedErrors}),zString:Object(v.c)(e),zUrl:Object(y.b)(e)})})(w)},819:function(e,t,a){"use strict";var n,i=a(2),r=a(15),o=a(9),s=a.n(o),l=a(0),c=a.n(l),u=a(136),d=a(102),h=a(231);a(1112);!function(e){e[e.Front=0]="Front",e[e.Back=1]="Back"}(n||(n={}));const p=e=>{let{children:t,className:a,enableArrowKeysForA11y:o,focusableClass:p,index:m,marginBetweenItems:g,numItemsInView:f,onNavigate:b,scrollerTabIndex:v,singlePageCenter:y,style:_}=e,S=Object(r.a)(e,["children","className","enableArrowKeysForA11y","focusableClass","index","marginBetweenItems","numItemsInView","onNavigate","scrollerTabIndex","singlePageCenter","style"]);const[D,C]=Object(l.useState)(!0),[E,O]=Object(l.useState)(!0),[w,j]=Object(l.useState)(0),[I,N]=Object(l.useState)(m),k=Object(l.useRef)(null),T=Object(l.useRef)([]),x=Object(l.useRef)(null),z=()=>"horizontal"===S.orientation,P=()=>z()?k.current.offsetWidth:k.current.offsetHeight,F=()=>{let e=0;const t=T.current[T.current.length-1];return t&&(e=z()?t.offsetLeft+t.offsetWidth-P():t.offsetTop+t.offsetHeight-P(),e=Math.max(e,0)),e},M=()=>{const e=F(),t=S.useNativeControls||w<=0;t!==E&&O(t);const a=S.useNativeControls||w>=e;a!==D&&C(a),!S.useNativeControls&&w>e&&j(e)};Object(l.useEffect)(()=>{T.current=T.current.filter(e=>!!e)},[t]),Object(l.useEffect)(M,[S.useNativeControls,w,F()]),Object(d.a)(M,100,"throttle"),Object(l.useEffect)(()=>{if(b){const{first:e,last:t}=A();b({firstIndex:e,lastIndex:t,maxScroll:F(),parentLength:P(),scroll:w})}},[w]),Object(l.useEffect)(()=>{j(0)},[S.orientation,S.useNativeControls]),Object(l.useEffect)(()=>{m===I||o||N(m)},[o,m,I]),Object(l.useEffect)(()=>{if(I>=0&&I<T.current.length){const{first:e,last:t}=A();I<=e?L(I,n.Front):I>=t&&L(I,n.Back)}},[I]);const A=()=>{const e=P();let t=-1,a=-1;for(let n=0;n<T.current.length;n++){let i,r,o=T.current[n];z()?(i=o.offsetLeft,r=o.offsetWidth):(i=o.offsetTop,r=o.offsetHeight),t<0&&i+r>=w&&(t=n),i<=w+e&&(a=n)}return{first:t,last:a}},R=()=>{j(Math.max(w-P(),0))},B=()=>{j(Math.min(w+P(),F()))},L=(e,t)=>{const a=T.current[e];let i;t===n.Back?i=z()?a.offsetLeft:a.offsetTop:(i=z()?a.offsetLeft+a.offsetWidth-P():a.offsetTop+a.offsetHeight-P(),i=Math.max(i,0)),i!==w&&j(i)},U=e=>{const t=p?[...x.current.querySelectorAll("."+p)]:Object(u.b)(x.current),a=Math.max(0,Math.min(I+e,t.length-1));t[a].focus({preventScroll:!0}),N(a)},K=y&&E&&D,G=s()("Scrolly","Scrolly--"+S.orientation,a,{"Scrolly--native":S.useNativeControls,"Scrolly--singlePageCenter":K}),H=s()("Scrolly-content"),Z=void 0!==f?e=>{var a,n;return{width:Math.floor((null!==(a=null===(n=x.current)||void 0===n?void 0:n.clientWidth)&&void 0!==a?a:0)/f)-g,marginRight:c.a.Children.count(t)===e+1?0:g}}:void 0;return c.a.createElement("div",{className:G,style:_,ref:x,tabIndex:o?0:null,onKeyDown:o?e=>{switch(e.key){case"ArrowRight":U(1);break;case"ArrowLeft":U(-1)}}:null},c.a.createElement(h.a,Object(i.a)(Object(i.a)({},S),{},{disableNext:D,disablePrev:E,hideScrollBarWhenUsingNativeControls:!0,onScrollNext:()=>{const{first:e,last:a}=A();if(o){const n=Math.min(2*a-e+1,T.current.length-1);if(n<0)B();else{const i=a-e,r=Math.max(0,Math.min(n-Math.floor(i/2),c.a.Children.count(t)-1));N(r)}}else e<0||a<0||e>a?B():L(a,n.Back)},onScrollPrev:()=>{const{first:e,last:a}=A();if(o){const n=Math.max(2*e-a-1,0);if(n<0)R();else{const i=a-e,r=Math.max(0,Math.min(n-Math.floor(i/2),c.a.Children.count(t)-1));N(r)}}else e<0||a<0||e>a?R():L(e,n.Front)},scrollPxOrPercent:w,scrollerTabIndex:v}),c.a.createElement("ul",{className:H,ref:k},c.a.Children.map(t,(e,t)=>c.a.createElement("li",{className:"Scrolly-item",ref:e=>T.current[t]=e,style:"function"==typeof Z?Z(t):Z},e)))))},m=Object(i.a)(Object(i.a)({},h.b),{},{enableArrowKeysForA11y:!1,index:-1,marginBetweenItems:8,singlePageCenter:!0});p.defaultProps=m,t.a=p},830:function(e,t,a){e.exports={root:"MessageButton_root",paletteContents:"MessageButton_paletteContents"}},859:function(e,t,a){e.exports={container:"SeeMore_container",content:"SeeMore_content",fadeButton:"SeeMore_fadeButton",root:"SeeMore_root",root__expanded:"SeeMore_root__expanded",fade:"SeeMore_fade",moreLink:"SeeMore_moreLink"}},873:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var n=a(2),i=a(3),r=a(122),o=a.n(r),s=a(536),l=a.n(s),c=a(98),u=a.n(c),d=a(182),h=a.n(d),p=a(538),m=a.n(p),g=a(100),f=a.n(g),b=a(1156),v=a.n(b),y=a(0),_=a.n(y),S=a(5),D=a(40),C=a(27),E=a(10),O=a(8),w=a(14),j=a(13),I=a(23),N=a(170),k=a(154),T=a(358),x=a(114),z=a(232),P=a(107);a(1313);const F=_.a.lazy(()=>a.e(402).then(a.bind(null,1614))),M=Object(E.a)("FileInput"),A=Math.pow(10,9);function R(e){return!e.dataTransfer||Array.prototype.every.call(e.dataTransfer.types,e=>"Files"===e||"application/x-moz-file"===e)}class B extends _.a.Component{constructor(...e){super(...e),Object(i.a)(this,"state",{dragging:!1,uploading:!1,removeOverlay:!0,inputIDs:[],nextInputID:"replaceOnClient"}),Object(i.a)(this,"acceptString",()=>{const e=this.props.accept;return"number"==typeof e?Object(z.d)(e):e}),Object(i.a)(this,"handleUpload",(e,t=null)=>{const a=[...e],n=[],i=[];if(a.forEach(e=>{!function(e,t){return e.size<=A&&("application/x-moz-file"===e.type||v()(e,t))}(e,this.acceptString())?i.push(e):n.push(e)}),n.length>0&&0===i.length)this.queueUpload(n,t);else{this.setUploadState(!1),this.setRemoveOverlayState(!0);i.some(e=>e.size>A)?this.props.onUploadError(this.props.zString("zi_myzazzle_MediaBrowser_FileSize")):this.props.onUploadError(_.a.createElement(_.a.Fragment,null,this.props.zString("zi_myzazzle_MediaBrowser_ErrorStatus"),_.a.createElement("br",null),this.props.zString("zi_myzazzle_MediaBrowser_FileTypes")))}}),Object(i.a)(this,"nextInputOnChange",e=>{this.handleUpload(e.currentTarget.files,e.currentTarget)}),Object(i.a)(this,"handleInputDragOver",e=>{e.preventDefault(),e.stopPropagation()}),Object(i.a)(this,"handleDragEnter",e=>{e&&(e.preventDefault(),e.stopPropagation(),R(e)&&(this.setRemoveOverlayState(!1),this.setDragState(!0)))}),Object(i.a)(this,"handleInputDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.setDragState(!1),this.setRemoveOverlayState(!0)}),Object(i.a)(this,"handleInputDrop",e=>{if(e.preventDefault(),e.stopPropagation(),this.setDragState(!1),this.setUploadState(!0),R(e)){const t=function(e){let t=[];if(e.dataTransfer){const a=e.dataTransfer;a.files&&a.files.length?t=a.files:a.items&&a.items.length&&(t=a.items)}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}(e);this.handleUpload(t)}}),Object(i.a)(this,"queueUpload",(e,t)=>{if((!t||!t.value)&&e.length<=0)return;const a=this.props.zString,n=this.state.nextInputID;this.setState({nextInputID:Object(T.b)()});const i=this.props.maxFiles||Number.MAX_VALUE;let r=0;f()(this.props.fileUploadsProgress,e=>{e.error||e.cancelled||e.done||r++});const o=i-r;let s=e.length;if(s>o){s=o;const t={error:new Error,message:a("zi_error_NumFilesExceeded",{num:i})},n=_.a.createElement(F,{zString:a,files:m()(s,e.length).map(a=>({error:t,name:e[a].name,uploadID:Object(T.b)()})),onDismiss:()=>{this.props.onCloseDialog(n)}});this.props.onOpenDialog(n),this.setUploadState(!1),this.setRemoveOverlayState(!0)}if(s<=0)return;const l=[];for(let u=0;u<s;u++){const t=e[u],a=Object(T.b)();l.push(a),this.props.onSetStartedUploaded(this.props.uploaderID,a,t.name)}const c=this.state.inputIDs;c.push({inputID:n,uploadIDs:l,input:t,files:e}),this.setState({inputIDs:c}),l.forEach(this.startUpload)}),Object(i.a)(this,"startUpload",e=>{const t=h()(this.state.inputIDs,t=>t.uploadIDs.indexOf(e)>=0);if(!t)return void 0;const a=this.partialUploadSettingsFactory(),n=t.uploadIDs.indexOf(e),i=t.files[n],r=u()(a);r.uploadID=e,this.props.onSetStartedUploaded(this.props.uploaderID,e,i.name),this.props.onUpload({file:i,uploadSettings:r})}),Object(i.a)(this,"setDragState",e=>{this.setState({dragging:e}),this.props.onSetDragState&&this.props.onSetDragState(e)}),Object(i.a)(this,"setUploadState",e=>{this.setState({uploading:e}),this.props.onSetUploadState&&this.props.onSetUploadState(e)}),Object(i.a)(this,"setRemoveOverlayState",e=>{this.setState({removeOverlay:e}),this.props.onSetOverlayState&&this.props.onSetOverlayState(e)})}componentDidMount(){var e,t;this.setState({nextInputID:Object(T.b)()}),null===(e=(t=this.props).onSetDragEnterEventHandler)||void 0===e||e.call(t,this.handleDragEnter)}componentWillUnmount(){var e,t;null===(e=(t=this.props).onSetDragEnterEventHandler)||void 0===e||e.call(t,null)}partialUploadSettingsFactory(){return Object(j.h)({createPreview:this.props.createPreview,onUploadFinish:e=>{var t,a;this.setRemoveOverlayState(!0),null===(t=(a=this.props).onUploadFinish)||void 0===t||t.call(a,e)},onUploadFinishError:()=>{this.setRemoveOverlayState(!0)},onUploadStart:this.props.onUploadStart,onUploadedChanged:this.props.onUploadedChanged,uploadID:null,uploadUrl:this.props.uploadUrl,uploadUrlParams:this.props.uploadParams,uploaderID:this.props.uploaderID})}render(){const{inputAdditionalProps:e={},buttonContent:t,buttonClassName:a,maxFiles:i,onSetDragEnterEventHandler:r}=this.props,{nextInputID:o}=this.state,s=[o],l=this.state.removeOverlay;return _.a.createElement("div",{className:M("&",{"&--dragging":!l},this.props.className),onDragEnter:r?void 0:this.handleDragEnter,style:this.props.style},_.a.createElement("label",{className:a,htmlFor:o},t),_.a.createElement("div",{className:M("&-inputControl")},s.map(t=>_.a.createElement("input",Object(n.a)(Object(n.a)({},e),{},{accept:this.acceptString(),className:M("&-fill","&-input",{"&-activeInput":t===o}),disabled:this.props.disabled,id:t,key:t,multiple:1!==i,name:"image",onChange:this.nextInputOnChange,onClick:this.props.onClick,onDragEnter:r?void 0:this.handleDragEnter,onDragLeave:this.handleInputDragLeave,onDragOver:this.handleInputDragOver,onDrop:this.handleInputDrop,type:"file"})))))}}const L=Object(S.b)((function(){const e=Object(C.a)(e=>e.fileInput.fileUploadsProgress,(e,t)=>t.uploaderID,(e,t)=>t?l()(o()(e,e=>e.uploaderID===t),e=>e.uploadID):e);return(t,a)=>{const n=Object(w.b)(t);let i=a.uploadUrl;return i||(i=n("SitePag","up/isapi/designall.dll?type=service&action=upload&sessionqs=0&output=js&comm_mode=ajax"),i=Object(w.e)(i)),{fileUploadsProgress:e(t,a),uploadUrl:i,zString:Object(O.c)(t)}}}),(function(e){return{onCancelUpload:t=>{const a={cancelled:!0};e(Object(P.a)({fileUploadsProgress:{[t]:a}}))},onCloseDialog:Object(D.b)(I.c,e),onOpenDialog:Object(D.b)(I.d,e),onSetStartedUploaded:(t,a,n)=>{const i={uploaderID:t,uploadID:a,name:n,uploadStartTime:+new Date};e(Object(P.a)({fileUploadsProgress:{[a]:i}}))},onUpload:Object(D.b)(x.b.upload,e),onUploadError:t=>{const a=Object(N.a)({content:t,type:"Error"});e(Object(k.e)(a))}}}))(B)}}]);